bios:C000 ;
bios:C000 ; ÉÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
bios:C000 ; º	  This file is generated by The	Interactive Disassembler (IDA)	      º
bios:C000 ; º	  Copyright (c)	2010 by	Hex-Rays SA, <support@hex-rays.com>	      º
bios:C000 ; º			   Licensed to:	Freeware version		      º
bios:C000 ; ÈÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼
bios:C000 ;
bios:C000 ; Input MD5	: BEB50E3A5831F2661B91B2E52C94B3EA
bios:C000
bios:C000 ; File Name	: Z:\Users\riq\progs\bios-8088\tandy_1000\bios-fc000-fffff.bin
bios:C000 ; Format	: Binary file
bios:C000 ; Base Address: F000h	Range: FC000h -	100000h	Loaded length: 4000h
bios:C000
bios:C000		  .8086
bios:C000		  .model flat
bios:C000
bios:C000 ; ÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ
bios:C000
bios:C000 ; Segment type: Pure code
bios:C000 bios		  segment byte public 'CODE'
bios:C000		  ;org 0C000h
bios:C000		  db  21h ; !
bios:C001 aBiosRomVersion db 'BIOS ROM version 01.00.00',0Dh,0Ah      ; DATA XREF: reset+2D9o
bios:C001		  db 'Copyright 1984 Tandy Corp.',0Dh,0Ah
bios:C001		  db 'and Phoenix Compatibility Corp.',0Dh,0Ah
bios:C001		  db 'All rights reserved.',0Dh,0Ah,'$'
bios:C070 int_1f_charset_128_255 db  1Eh, 33h,3	dup( 60h), 33h,	1Eh, 0Ch, 66h,	 0,4 dup( 66h),	3Bh,   0, 0Ch, 18h, 3Ch
bios:C070							      ;	DATA XREF: bios:FF21o
bios:C070		  db  66h, 7Eh,	60h, 3Ch,   0, 3Ch,0C3h, 3Ch,	6, 3Eh,	66h, 3Fh,   0, 66h,   0, 3Ch,	6
bios:C070		  db  3Eh, 66h,	3Fh,   0, 30h, 18h, 3Ch,   6, 3Eh, 66h,	3Fh,   0, 18h,	 0, 3Ch,   6, 3Eh
bios:C070		  db  66h, 3Fh,3 dup(	0), 3Ch, 66h, 60h, 66h,	3Ch, 18h, 3Ch,0C3h, 3Ch, 66h, 7Eh, 60h
bios:C070		  db  3Ch,   0,	66h,   0, 3Ch, 66h, 7Eh, 60h, 3Ch,   0,	30h, 18h, 3Ch, 66h, 7Eh, 60h, 3Ch
bios:C070		  db	0, 66h,	  0, 38h,3 dup(	18h), 3Ch,   0,	38h,0C6h, 38h,3	dup( 18h), 3Ch,	  0, 30h
bios:C070		  db  18h, 38h,3 dup( 18h), 3Ch,   0, 63h, 1Ch,	36h, 63h, 7Fh,2	dup( 63h),   0,2 dup( 1Ch)
bios:C070		  db  3Eh, 63h,	7Fh,2 dup( 63h),   0,	6, 0Ch,	7Fh, 31h, 3Ch, 31h, 7Fh,3 dup(	 0), 7Eh
bios:C070		  db  1Bh, 7Eh,0D8h, 7Eh,   0, 3Fh, 6Ch,0CCh,0FFh,2 dup(0CCh),0CFh,   0, 3Ch,0C3h, 3Ch
bios:C070		  db 3 dup( 66h), 3Ch,	 0, 66h,   0, 3Ch,3 dup( 66h), 3Ch,   0, 30h, 18h, 3Ch,3 dup( 66h)
bios:C070		  db  3Ch,   0,	3Ch,0C3h,4 dup(	66h), 3Bh,   0,	30h, 18h,4 dup(	66h), 3Bh,   0,	66h,   0
bios:C070		  db 3 dup( 66h), 3Eh,	 6, 7Ch, 63h, 3Eh,4 dup( 63h), 3Eh,   0, 36h,5 dup( 63h), 3Eh
bios:C070		  db	0,2 dup( 0Ch), 3Fh,2 dup( 60h),	3Fh,2 dup( 0Ch), 1Ch, 36h, 32h,	78h, 30h, 73h
bios:C070		  db  7Eh,   0,2 dup( 66h), 3Ch, 7Eh, 18h, 7Eh,2 dup( 18h),0F8h,2 dup(0CCh),0FAh,0C6h
bios:C070		  db 0CFh,0C6h,0C7h, 0Eh,2 dup(	18h), 3Ch,3 dup( 18h), 70h, 0Ch, 18h, 3Ch,   6,	3Eh, 66h
bios:C070		  db  3Fh,   0,	18h, 30h, 38h,3	dup( 18h), 3Ch,	  0, 0Ch, 18h, 3Ch,3 dup( 66h),	3Ch,   0
bios:C070		  db  0Ch, 18h,4 dup( 66h), 3Bh,   0, 3Bh, 6Fh,	  0, 6Eh,3 dup(	33h),	0, 76h,0DEh, 73h
bios:C070		  db  7Bh, 6Fh,	67h, 63h,   0, 3Ch,   6, 3Eh, 66h, 3Bh,	  0,0FFh,   0, 3Ch,3 dup( 66h)
bios:C070		  db  3Ch,   0,0FFh,2 dup(   0), 18h,	0, 18h,	30h, 60h, 66h, 3Ch,3 dup(   0),	7Eh,2 dup( 60h)
bios:C070		  db 5 dup(   0), 7Eh,2	dup(   6),2 dup(   0),0C3h,0C6h,0CCh,0DEh, 33h,	66h,0CCh, 0Fh
bios:C070		  db 0C3h,0C6h,0CCh,0D8h, 37h, 6Fh,0CFh,   3,	0, 18h,	  0,2 dup( 18h),2 dup( 3Ch), 18h
bios:C070		  db	0, 33h,	66h,0CCh, 66h, 33h,3 dup(   0),0CCh, 66h, 33h, 66h,0CCh,2 dup(	 0), 22h
bios:C070		  db  88h, 22h,	88h, 22h, 88h, 22h, 88h, 55h,0AAh, 55h,0AAh, 55h,0AAh, 55h,0AAh,0DBh, 77h
bios:C070		  db 0DBh,0EEh,0DBh, 77h,0DBh,0EEh,0Ch dup( 18h),0F8h,5	dup( 18h),0F8h,	18h,0F8h,3 dup(	18h)
bios:C070		  db 4 dup( 36h),0F6h,3	dup( 36h),4 dup(   0),0FEh,3 dup( 36h),2 dup(	0),0F8h, 18h,0F8h
bios:C070		  db 3 dup( 18h),2 dup(	36h),0F6h,   6,0F6h,0Bh	dup( 36h),2 dup(   0),0FEh,   6,0F6h,5 dup( 36h)
bios:C070		  db 0F6h,   6,0FEh,3 dup(   0),4 dup( 36h),0FEh,3 dup(	  0),2 dup( 18h),0F8h, 18h,0F8h
bios:C070		  db 7 dup(   0),0F8h,7	dup( 18h), 1Fh,3 dup(	0),4 dup( 18h),0FFh,7 dup(   0),0FFh,7 dup( 18h)
bios:C070		  db  1Fh,3 dup( 18h),4	dup(   0),0FFh,3 dup(	0),4 dup( 18h),0FFh,5 dup( 18h), 1Fh, 18h
bios:C070		  db  1Fh,3 dup( 18h),4	dup( 36h), 37h,5 dup( 36h), 37h, 30h, 3Fh,5 dup(   0), 3Fh, 30h
bios:C070		  db  37h,5 dup( 36h),0F7h,   0,0FFh,5 dup(   0),0FFh,	 0,0F7h,5 dup( 36h), 37h, 30h
bios:C070		  db  37h,3 dup( 36h),2	dup(   0),0FFh,	  0,0FFh,3 dup(	  0),2 dup( 36h),0F7h,	 0,0F7h
bios:C070		  db 3 dup( 36h),2 dup(	18h),0FFh,   0,0FFh,3 dup(   0),4 dup( 36h),0FFh,5 dup(	  0),0FFh
bios:C070		  db	0,0FFh,3 dup( 18h),4 dup(   0),0FFh,7 dup( 36h), 3Fh,3 dup(   0),2 dup(	18h), 1Fh
bios:C070		  db  18h, 1Fh,5 dup(	0), 1Fh, 18h, 1Fh,3 dup( 18h),4	dup(   0), 3Fh,7 dup( 36h),0FFh
bios:C070		  db 3 dup( 36h),2 dup(	18h),0FFh, 18h,0FFh,7 dup( 18h),0F8h,7 dup(   0), 1Fh,3	dup( 18h)
bios:C070		  db 8 dup(0FFh),4 dup(	  0),4 dup(0FFh),8 dup(0F0h),8 dup( 0Fh),4 dup(0FFh),6 dup(   0)
bios:C070		  db  3Bh, 6Eh,	64h, 6Eh, 3Bh,	 0, 3Ch,2 dup( 66h), 7Ch,2 dup(	63h), 6Eh, 60h,	7Fh, 33h
bios:C070		  db  31h,3 dup( 30h), 78h,3 dup(   0),	7Fh,3 dup( 36h), 33h,	0, 7Eh,	66h, 30h, 18h
bios:C070		  db  30h, 66h,	7Eh,3 dup(   0), 3Fh,3 dup( 66h), 3Ch,3	dup(   0),4 dup( 33h), 3Eh, 60h
bios:C070		  db 2 dup(   0), 7Eh, 98h,3 dup( 18h),	  0, 7Eh, 18h, 3Ch,2 dup( 66h),	3Ch, 18h, 7Eh
bios:C070		  db  1Ch, 36h,	63h, 7Fh, 63h, 36h, 1Ch,   0, 3Ch, 66h,3 dup(0C3h), 66h,0E7h,	0, 0Eh
bios:C070		  db  18h, 0Ch,	3Eh,2 dup( 66h), 3Ch,3 dup(   0), 7Eh,2	dup(0DBh), 7Eh,3 dup(	0),   3
bios:C070		  db  3Eh, 67h,	6Bh, 73h, 3Eh, 60h, 1Ch, 30h, 60h, 7Ch,	60h, 30h, 1Ch,	 0, 3Ch,6 dup( 66h)
bios:C070		  db 2 dup(   0), 7Eh,	 0, 7Eh,   0, 7Eh,3 dup(   0), 18h, 7Eh, 18h,	0, 7Eh,2 dup(	0)
bios:C070		  db  30h, 18h,	0Ch, 18h, 30h, 7Eh,2 dup(   0),	0Ch, 18h, 30h, 18h, 0Ch, 7Eh,2 dup(   0)
bios:C070		  db	7,0Ch dup( 0Ch),2 dup( 6Ch), 38h,2 dup(	18h),	0, 7Eh,	  0,2 dup( 18h),2 dup(	 0)
bios:C070		  db  3Bh, 6Eh,	  0, 3Bh, 6Eh,2	dup(   0), 1Ch,2 dup( 36h), 1Ch,5 dup(	 0),2 dup( 1Ch)
bios:C070		  db 8 dup(   0),2 dup(	18h),3 dup(   0), 0Fh,3	dup( 0Ch),0ECh,	6Ch, 3Ch, 1Ch, 3Ch,4 dup( 36h)
bios:C070		  db 3 dup(   0), 38h, 0Ch, 18h, 30h, 3Ch,5 dup(   0),4	dup( 3Ch),0Ah dup(   0)
bios:C470 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:C470 ; START OF FUNCTION CHUNK FOR	reset
bios:C470
bios:C470 loc_FC470:						      ;	CODE XREF: reset+25j
bios:C470		  cli
bios:C471		  mov	  al, 0Ah
bios:C473		  out	  0A0h,	al			      ;	PIC 2  same as 0020 for	PIC 1
bios:C475		  mov	  al, 3
bios:C477		  mov	  dx, 3F2h
bios:C47A		  out	  dx, al			      ;	Floppy:	digital	output reg bits:
bios:C47A							      ;	0-1: Drive to select 0-3 (AT: bit 1 not	used)
bios:C47A							      ;	2:   0=reset diskette controller; 1=enable controller
bios:C47A							      ;	3:   1=enable diskette DMA and interrupts
bios:C47A							      ;	4-7: drive motor enable.  Set bits to turn drive ON.
bios:C47A							      ;
bios:C47B		  mov	  al, 24h ; '$'
bios:C47D		  mov	  dx, 3D8h
bios:C480		  out	  dx, al
bios:C481		  mov	  dx, 3DBh
bios:C484		  out	  dx, al			      ;	Video: light pen latch reset.
bios:C484							      ;	Any OUT	clears the latch.
bios:C485		  mov	  al, 0
bios:C487		  mov	  dx, 3DAh
bios:C48A		  out	  dx, al			      ;	Video: bits 0-1	control
bios:C48A							      ;	Feature	Control	outputs	FC0 and	FC1
bios:C48B		  add	  dx, 4
bios:C48E		  out	  dx, al
bios:C48F		  mov	  dx, 3D9h
bios:C492		  out	  dx, al
bios:C493		  mov	  al, 3
bios:C495		  mov	  dx, 3DAh
bios:C498		  out	  dx, al			      ;	Video: bits 0-1	control
bios:C498							      ;	Feature	Control	outputs	FC0 and	FC1
bios:C499		  xor	  al, al
bios:C49B		  mov	  dx, 3DEh
bios:C49E		  out	  dx, al
bios:C49F		  mov	  al, 2
bios:C4A1		  mov	  dx, 3DAh
bios:C4A4		  out	  dx, al			      ;	Video: bits 0-1	control
bios:C4A4							      ;	Feature	Control	outputs	FC0 and	FC1
bios:C4A5		  mov	  al, 0
bios:C4A7		  mov	  dx, 3DEh
bios:C4AA		  out	  dx, al
bios:C4AB		  mov	  al, 1
bios:C4AD		  mov	  dx, 3DAh
bios:C4B0		  out	  dx, al			      ;	Video: bits 0-1	control
bios:C4B0							      ;	Feature	Control	outputs	FC0 and	FC1
bios:C4B1		  mov	  al, 0FFh
bios:C4B3		  mov	  dx, 3DEh
bios:C4B6		  out	  dx, al
bios:C4B7		  mov	  bl, 10h
bios:C4B9		  mov	  dx, 3DAh
bios:C4BC		  xor	  al, al
bios:C4BE
bios:C4BE loc_FC4BE:						      ;	CODE XREF: reset-1B8Ej
bios:C4BE		  mov	  al, bl
bios:C4C0		  out	  dx, al			      ;	Video: bits 0-1	control
bios:C4C0							      ;	Feature	Control	outputs	FC0 and	FC1
bios:C4C1		  add	  dx, 4
bios:C4C4		  out	  dx, al
bios:C4C5		  sub	  dx, 4
bios:C4C8		  inc	  bl
bios:C4CA		  cmp	  bl, 20h ; ' '
bios:C4CD		  jnz	  short	loc_FC4BE
bios:C4CF		  xor	  al, al
bios:C4D1		  out	  dx, al			      ;	Video: bits 0-1	control
bios:C4D1							      ;	Feature	Control	outputs	FC0 and	FC1
bios:C4D2		  mov	  al, 3Fh ; '?'
bios:C4D4		  mov	  dx, 3DFh
bios:C4D7		  out	  dx, al
bios:C4D8		  mov	  al, 0FFh
bios:C4DA		  out	  0C0h,	al			      ;	DMA controller,	8237A-5.
bios:C4DA							      ;	channel	0 base address
bios:C4DA							      ;	(also sets current address)
bios:C4DC		  mov	  al, 0BFh ; '¿'
bios:C4DE		  out	  0C0h,	al			      ;	DMA controller,	8237A-5.
bios:C4DE							      ;	channel	0 base address
bios:C4DE							      ;	(also sets current address)
bios:C4E0		  mov	  al, 0DFh ; 'ß'
bios:C4E2		  out	  0C0h,	al			      ;	DMA controller,	8237A-5.
bios:C4E2							      ;	channel	0 base address
bios:C4E2							      ;	(also sets current address)
bios:C4E4		  mov	  al, 9Fh ; 'Ÿ'
bios:C4E6		  out	  0C0h,	al			      ;	DMA controller,	8237A-5.
bios:C4E6							      ;	channel	0 base address
bios:C4E6							      ;	(also sets current address)
bios:C4E8		  mov	  cx, 10h
bios:C4EB		  mov	  dx, 3D4h
bios:C4EE		  mov	  bx, offset crt_idx_and_value
bios:C4F1
bios:C4F1 loc_FC4F1:						      ;	CODE XREF: reset-1B5Dj
bios:C4F1		  mov	  al, cs:[bx]
bios:C4F4		  out	  dx, al			      ;	Video: CRT cntrlr addr
bios:C4F4							      ;	horizontal total
bios:C4F5		  inc	  dx
bios:C4F6		  inc	  bx
bios:C4F7		  mov	  al, cs:[bx]
bios:C4FA		  out	  dx, al			      ;	Video: CRT controller internal registers
bios:C4FB		  dec	  dx
bios:C4FC		  inc	  bx
bios:C4FD		  dec	  cx
bios:C4FE		  jnz	  short	loc_FC4F1
bios:C500		  jmp	  short	loc_FC523
bios:C500 ; END	OF FUNCTION CHUNK FOR reset
bios:C500 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:C502		  db  90h ; 
bios:C503 crt_idx_and_value dw 3800h, 2801h, 2D02h, 0A03h, 1F04h, 605h,	1906h, 1C07h, 208h, 709h, 60Ah,	70Bh, 0Ch
bios:C503							      ;	DATA XREF: reset-1B6Do
bios:C503		  dw 0Dh, 0Eh, 0Fh
bios:C523 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:C523 ; START OF FUNCTION CHUNK FOR	reset
bios:C523
bios:C523 loc_FC523:						      ;	CODE XREF: reset-1B5Bj
bios:C523		  mov	  dx, 3D8h
bios:C526		  mov	  al, 2Ch ; ','
bios:C528		  out	  dx, al
bios:C529		  mov	  ax, 0B800h
bios:C52C		  mov	  es, ax			      ;	es = 0xb800
bios:C52E		  cld
bios:C52F		  mov	  di, 0
bios:C532		  mov	  cx, 3E8h
bios:C535		  mov	  ax, 720h
bios:C538		  rep stosw
bios:C53A		  mov	  ax, 0BBE8h
bios:C53D		  mov	  ds, ax			      ;	ds = 0xbbe8
bios:C53F		  mov	  bp, ds:pbbe80.shadow_keyb_status_flags_1
bios:C543		  mov	  si, ds:pbbe80.shadow_POST_reset_flag
bios:C547		  mov	  ax, 0
bios:C54A
bios:C54A loc_FC54A:						      ;	CODE XREF: reset-1AD3j
bios:C54A		  mov	  di, 0
bios:C54D
bios:C54D loc_FC54D:						      ;	CODE XREF: reset-1AFCj
bios:C54D		  mov	  [di],	ax
bios:C54F		  add	  di, 2
bios:C552		  not	  ax
bios:C554		  mov	  [di],	ax
bios:C556		  add	  di, 2
bios:C559		  not	  ax
bios:C55B		  cmp	  di, 180h
bios:C55F		  jb	  short	loc_FC54D
bios:C561		  mov	  cx, 118h
bios:C564
bios:C564 loc_FC564:						      ;	CODE XREF: reset:loc_FC564j
bios:C564		  loop	  loc_FC564
bios:C566		  mov	  di, 0
bios:C569
bios:C569 loc_FC569:						      ;	CODE XREF: reset-1AD8j
bios:C569		  mov	  dx, [di]
bios:C56B		  cmp	  ax, dx
bios:C56D		  jnz	  short	loc_FC595
bios:C56F		  add	  di, 2
bios:C572		  not	  ax
bios:C574		  mov	  dx, [di]
bios:C576		  cmp	  ax, dx
bios:C578		  jnz	  short	loc_FC595
bios:C57A		  add	  di, 2
bios:C57D		  not	  ax
bios:C57F		  cmp	  di, 180h
bios:C583		  jb	  short	loc_FC569
bios:C585		  add	  ax, 5555h
bios:C588		  jnb	  short	loc_FC54A
bios:C58A		  mov	  ds:pbbe80.shadow_POST_reset_flag, si
bios:C58E		  mov	  ds:pbbe80.shadow_keyb_status_flags_1,	bp
bios:C592		  jmp	  loc_FC79F
bios:C595 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:C595
bios:C595 loc_FC595:						      ;	CODE XREF: reset-1AEEj
bios:C595							      ;	reset-1AE3j
bios:C595		  mov	  ss, ax
bios:C597		  mov	  sp, dx
bios:C599		  mov	  ax, di
bios:C59B		  mov	  ds, ax
bios:C59D		  mov	  si, offset aVidAddrBaseBbe	      ;	"Vid Addr:   Base:    BBE8h  Off: xxxxh"
bios:C5A0		  mov	  di, 370h
bios:C5A3		  mov	  ax, 0B800h
bios:C5A6		  mov	  es, ax
bios:C5A8		  mov	  ah, 7
bios:C5AA
bios:C5AA loc_FC5AA:						      ;	CODE XREF: reset-1AA3j
bios:C5AA		  mov	  al, cs:[si]
bios:C5AD		  or	  al, al
bios:C5AF		  jz	  short	loc_FC5BA
bios:C5B1		  mov	  es:[di], ax
bios:C5B4		  add	  di, 2
bios:C5B7		  inc	  si
bios:C5B8		  jmp	  short	loc_FC5AA
bios:C5BA ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:C5BA
bios:C5BA loc_FC5BA:						      ;	CODE XREF: reset-1AACj
bios:C5BA		  sub	  di, 0Ah
bios:C5BD		  mov	  ax, ds
bios:C5BF		  mov	  dx, ax
bios:C5C1		  mov	  al, ah
bios:C5C3		  mov	  cl, al
bios:C5C5		  shr	  al, 1
bios:C5C7		  shr	  al, 1
bios:C5C9		  shr	  al, 1
bios:C5CB		  shr	  al, 1
bios:C5CD		  and	  al, 0Fh
bios:C5CF		  add	  al, 30h ; '0'
bios:C5D1		  cmp	  al, 3Ah ; ':'
bios:C5D3		  js	  short	loc_FC5D7
bios:C5D5		  add	  al, 7
bios:C5D7
bios:C5D7 loc_FC5D7:						      ;	CODE XREF: reset-1A88j
bios:C5D7		  mov	  ch, al
bios:C5D9		  mov	  al, cl
bios:C5DB		  and	  al, 0Fh
bios:C5DD		  add	  al, 30h ; '0'
bios:C5DF		  cmp	  al, 3Ah ; ':'
bios:C5E1		  js	  short	loc_FC5E5
bios:C5E3		  add	  al, 7
bios:C5E5
bios:C5E5 loc_FC5E5:						      ;	CODE XREF: reset-1A7Aj
bios:C5E5		  mov	  ah, ch
bios:C5E7		  mov	  bp, ax
bios:C5E9		  mov	  al, ah
bios:C5EB		  mov	  ah, 7
bios:C5ED		  mov	  es:[di], ax
bios:C5F0		  add	  di, 2
bios:C5F3		  mov	  ax, bp
bios:C5F5		  mov	  ah, 7
bios:C5F7		  mov	  es:[di], ax
bios:C5FA		  add	  di, 2
bios:C5FD		  mov	  ax, dx
bios:C5FF		  mov	  cl, al
bios:C601		  shr	  al, 1
bios:C603		  shr	  al, 1
bios:C605		  shr	  al, 1
bios:C607		  shr	  al, 1
bios:C609		  and	  al, 0Fh
bios:C60B		  add	  al, 30h ; '0'
bios:C60D		  cmp	  al, 3Ah ; ':'
bios:C60F		  js	  short	loc_FC613
bios:C611		  add	  al, 7
bios:C613
bios:C613 loc_FC613:						      ;	CODE XREF: reset-1A4Cj
bios:C613		  mov	  ch, al
bios:C615		  mov	  al, cl
bios:C617		  and	  al, 0Fh
bios:C619		  add	  al, 30h ; '0'
bios:C61B		  cmp	  al, 3Ah ; ':'
bios:C61D		  js	  short	loc_FC621
bios:C61F		  add	  al, 7
bios:C621
bios:C621 loc_FC621:						      ;	CODE XREF: reset-1A3Ej
bios:C621		  mov	  ah, ch
bios:C623		  mov	  bp, ax
bios:C625		  mov	  al, ah
bios:C627		  mov	  ah, 7
bios:C629		  mov	  es:[di], ax
bios:C62C		  add	  di, 2
bios:C62F		  mov	  ax, bp
bios:C631		  mov	  ah, 7
bios:C633		  mov	  es:[di], ax
bios:C636		  add	  di, 2
bios:C639		  mov	  si, offset aDataFaultWritt	      ;	"Data Fault: Written: xxxxh Read: xxxxh"
bios:C63C		  mov	  di, 3C0h
bios:C63F		  mov	  ah, 7
bios:C641
bios:C641 loc_FC641:						      ;	CODE XREF: reset-1A0Cj
bios:C641		  mov	  al, cs:[si]
bios:C644		  or	  al, al
bios:C646		  jz	  short	loc_FC651
bios:C648		  mov	  es:[di], ax
bios:C64B		  add	  di, 2
bios:C64E		  inc	  si
bios:C64F		  jmp	  short	loc_FC641
bios:C651 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:C651
bios:C651 loc_FC651:						      ;	CODE XREF: reset-1A15j
bios:C651		  sub	  di, 22h ; '"'
bios:C654		  mov	  ax, ss
bios:C656		  mov	  dx, ax
bios:C658		  mov	  al, ah
bios:C65A		  mov	  cl, al
bios:C65C		  shr	  al, 1
bios:C65E		  shr	  al, 1
bios:C660		  shr	  al, 1
bios:C662		  shr	  al, 1
bios:C664		  and	  al, 0Fh
bios:C666		  add	  al, 30h ; '0'
bios:C668		  cmp	  al, 3Ah ; ':'
bios:C66A		  js	  short	loc_FC66E
bios:C66C		  add	  al, 7
bios:C66E
bios:C66E loc_FC66E:						      ;	CODE XREF: reset-19F1j
bios:C66E		  mov	  ch, al
bios:C670		  mov	  al, cl
bios:C672		  and	  al, 0Fh
bios:C674		  add	  al, 30h ; '0'
bios:C676		  cmp	  al, 3Ah ; ':'
bios:C678		  js	  short	loc_FC67C
bios:C67A		  add	  al, 7
bios:C67C
bios:C67C loc_FC67C:						      ;	CODE XREF: reset-19E3j
bios:C67C		  mov	  ah, ch
bios:C67E		  mov	  bp, ax
bios:C680		  mov	  al, ah
bios:C682		  mov	  ah, 7
bios:C684		  mov	  es:[di], ax
bios:C687		  add	  di, 2
bios:C68A		  mov	  ax, bp
bios:C68C		  mov	  ah, 7
bios:C68E		  mov	  es:[di], ax
bios:C691		  add	  di, 2
bios:C694		  mov	  ax, dx
bios:C696		  mov	  cl, al
bios:C698		  shr	  al, 1
bios:C69A		  shr	  al, 1
bios:C69C		  shr	  al, 1
bios:C69E		  shr	  al, 1
bios:C6A0		  and	  al, 0Fh
bios:C6A2		  add	  al, 30h ; '0'
bios:C6A4		  cmp	  al, 3Ah ; ':'
bios:C6A6		  js	  short	loc_FC6AA
bios:C6A8		  add	  al, 7
bios:C6AA
bios:C6AA loc_FC6AA:						      ;	CODE XREF: reset-19B5j
bios:C6AA		  mov	  ch, al
bios:C6AC		  mov	  al, cl
bios:C6AE		  and	  al, 0Fh
bios:C6B0		  add	  al, 30h ; '0'
bios:C6B2		  cmp	  al, 3Ah ; ':'
bios:C6B4		  js	  short	loc_FC6B8
bios:C6B6		  add	  al, 7
bios:C6B8
bios:C6B8 loc_FC6B8:						      ;	CODE XREF: reset-19A7j
bios:C6B8		  mov	  ah, ch
bios:C6BA		  mov	  bp, ax
bios:C6BC		  mov	  al, ah
bios:C6BE		  mov	  ah, 7
bios:C6C0		  mov	  es:[di], ax
bios:C6C3		  add	  di, 2
bios:C6C6		  mov	  ax, bp
bios:C6C8		  mov	  ah, 7
bios:C6CA		  mov	  es:[di], ax
bios:C6CD		  add	  di, 2
bios:C6D0		  add	  di, 10h
bios:C6D3		  mov	  ax, sp
bios:C6D5		  mov	  dx, ax
bios:C6D7		  mov	  al, ah
bios:C6D9		  mov	  cl, al
bios:C6DB		  shr	  al, 1
bios:C6DD		  shr	  al, 1
bios:C6DF		  shr	  al, 1
bios:C6E1		  shr	  al, 1
bios:C6E3		  and	  al, 0Fh
bios:C6E5		  add	  al, 30h ; '0'
bios:C6E7		  cmp	  al, 3Ah ; ':'
bios:C6E9		  js	  short	loc_FC6ED
bios:C6EB		  add	  al, 7
bios:C6ED
bios:C6ED loc_FC6ED:						      ;	CODE XREF: reset-1972j
bios:C6ED		  mov	  ch, al
bios:C6EF		  mov	  al, cl
bios:C6F1		  and	  al, 0Fh
bios:C6F3		  add	  al, 30h ; '0'
bios:C6F5		  cmp	  al, 3Ah ; ':'
bios:C6F7		  js	  short	loc_FC6FB
bios:C6F9		  add	  al, 7
bios:C6FB
bios:C6FB loc_FC6FB:						      ;	CODE XREF: reset-1964j
bios:C6FB		  mov	  ah, ch
bios:C6FD		  mov	  bp, ax
bios:C6FF		  mov	  al, ah
bios:C701		  mov	  ah, 7
bios:C703		  mov	  es:[di], ax
bios:C706		  add	  di, 2
bios:C709		  mov	  ax, bp
bios:C70B		  mov	  ah, 7
bios:C70D		  mov	  es:[di], ax
bios:C710		  add	  di, 2
bios:C713		  mov	  ax, dx
bios:C715		  mov	  cl, al
bios:C717		  shr	  al, 1
bios:C719		  shr	  al, 1
bios:C71B		  shr	  al, 1
bios:C71D		  shr	  al, 1
bios:C71F		  and	  al, 0Fh
bios:C721		  add	  al, 30h ; '0'
bios:C723		  cmp	  al, 3Ah ; ':'
bios:C725		  js	  short	loc_FC729
bios:C727		  add	  al, 7
bios:C729
bios:C729 loc_FC729:						      ;	CODE XREF: reset-1936j
bios:C729		  mov	  ch, al
bios:C72B		  mov	  al, cl
bios:C72D		  and	  al, 0Fh
bios:C72F		  add	  al, 30h ; '0'
bios:C731		  cmp	  al, 3Ah ; ':'
bios:C733		  js	  short	loc_FC737
bios:C735		  add	  al, 7
bios:C737
bios:C737 loc_FC737:						      ;	CODE XREF: reset-1928j
bios:C737		  mov	  ah, ch
bios:C739		  mov	  bp, ax
bios:C73B		  mov	  al, ah
bios:C73D		  mov	  ah, 7
bios:C73F		  mov	  es:[di], ax
bios:C742		  add	  di, 2
bios:C745		  mov	  ax, bp
bios:C747		  mov	  ah, 7
bios:C749		  mov	  es:[di], ax
bios:C74C		  add	  di, 2
bios:C74F
bios:C74F loc_FC74F:						      ;	CODE XREF: reset:loc_FC74Fj
bios:C74F		  jmp	  short	loc_FC74F
bios:C74F ; END	OF FUNCTION CHUNK FOR reset
bios:C74F ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:C751 aVidAddrBaseBbe db 'Vid Addr:   Base:    BBE8h  Off: xxxxh',0
bios:C751							      ;	DATA XREF: reset-1ABEo
bios:C778 aDataFaultWritt db 'Data Fault: Written: xxxxh Read: xxxxh',0
bios:C778							      ;	DATA XREF: reset-1A22o
bios:C79F ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:C79F ; START OF FUNCTION CHUNK FOR	reset
bios:C79F
bios:C79F loc_FC79F:						      ;	CODE XREF: reset-1AC9j
bios:C79F		  mov	  ax, 0BBF0h
bios:C7A2		  mov	  ss, ax			      ;	ss = 0xbbf0
bios:C7A4		  mov	  sp, 0F0h ; 'ğ'
bios:C7A7		  xor	  al, al
bios:C7A9		  out	  81h, al			      ;	DMA page register 74LS612:
bios:C7A9							      ;	Channel	2 (diskette DMA)  (address bits	16-23)
bios:C7AB		  out	  82h, al			      ;	DMA page register 74LS612:
bios:C7AB							      ;	Channel	3 (hard	disk DMA) (address bits	16-23)
bios:C7AD		  out	  83h, al			      ;	DMA page register 74LS612:
bios:C7AD							      ;	Channel	1 (address bits	16-23)
bios:C7AF		  out	  0Dh, al			      ;	DMA controller,	8237A-5.
bios:C7AF							      ;	master clear.
bios:C7AF							      ;	Any OUT	clears the ctrlr (must be re-initialized)
bios:C7B1		  mov	  cx, 2
bios:C7B4
bios:C7B4 loc_FC7B4:						      ;	CODE XREF: reset:loc_FC7B4j
bios:C7B4		  loop	  loc_FC7B4
bios:C7B6		  mov	  al, 24h ; '$'
bios:C7B8		  out	  8, al				      ;	DMA 8237A-5. cmd reg bits:
bios:C7B8							      ;	0: enable mem-to-mem DMA
bios:C7B8							      ;	1: enable Ch0 address hold
bios:C7B8							      ;	2: disable controller
bios:C7B8							      ;	3: compressed timing mode
bios:C7B8							      ;	4: enable rotating priority
bios:C7B8							      ;	5: extended write mode;	0=late write
bios:C7B8							      ;	6: DRQ sensing - active	high
bios:C7B8							      ;	7: DACK	sensing	- active high
bios:C7BA		  mov	  dx, 0
bios:C7BD		  mov	  ah, 0
bios:C7BF		  mov	  cx, 1
bios:C7C2
bios:C7C2 loc_FC7C2:						      ;	CODE XREF: reset-1886j
bios:C7C2		  mov	  al, cl
bios:C7C4		  out	  dx, al
bios:C7C5		  mov	  al, ah
bios:C7C7		  out	  dx, al
bios:C7C8		  nop
bios:C7C9		  in	  al, dx
bios:C7CA		  cmp	  al, cl
bios:C7CC		  jnz	  short	loc_FC7FF
bios:C7CE		  in	  al, dx
bios:C7CF		  cmp	  al, 0
bios:C7D1		  jnz	  short	loc_FC7FF
bios:C7D3		  rcl	  cl, 1
bios:C7D5		  jnb	  short	loc_FC7C2
bios:C7D7		  mov	  dx, 0
bios:C7DA		  xor	  al, al
bios:C7DC
bios:C7DC loc_FC7DC:						      ;	CODE XREF: reset-1879j
bios:C7DC		  out	  dx, al
bios:C7DD		  out	  dx, al
bios:C7DE		  inc	  dx
bios:C7DF		  cmp	  dx, 8
bios:C7E2		  jnz	  short	loc_FC7DC
bios:C7E4		  mov	  dx, 0Bh
bios:C7E7		  mov	  al, 58h ; 'X'
bios:C7E9		  out	  dx, al			      ;	DMA 8237A-5. mode register bits:
bios:C7E9							      ;	0-1: channel (00=0; 01=1; 10=2;	11=3)
bios:C7E9							      ;	2-3: transfer type (00=verify=Nop; 01=write; 10=read)
bios:C7E9							      ;	4: 1=enable auto-initialization
bios:C7E9							      ;	5: 1=address increment;	0=address decrement
bios:C7E9							      ;	6-7: 00=demand mode; 01=single;	10=block; 11=cascade
bios:C7EA		  mov	  al, 49h ; 'I'
bios:C7EC		  out	  dx, al			      ;	DMA 8237A-5. mode register bits:
bios:C7EC							      ;	0-1: channel (00=0; 01=1; 10=2;	11=3)
bios:C7EC							      ;	2-3: transfer type (00=verify=Nop; 01=write; 10=read)
bios:C7EC							      ;	4: 1=enable auto-initialization
bios:C7EC							      ;	5: 1=address increment;	0=address decrement
bios:C7EC							      ;	6-7: 00=demand mode; 01=single;	10=block; 11=cascade
bios:C7ED		  mov	  al, 4Ah ; 'J'
bios:C7EF		  out	  dx, al			      ;	DMA 8237A-5. mode register bits:
bios:C7EF							      ;	0-1: channel (00=0; 01=1; 10=2;	11=3)
bios:C7EF							      ;	2-3: transfer type (00=verify=Nop; 01=write; 10=read)
bios:C7EF							      ;	4: 1=enable auto-initialization
bios:C7EF							      ;	5: 1=address increment;	0=address decrement
bios:C7EF							      ;	6-7: 00=demand mode; 01=single;	10=block; 11=cascade
bios:C7F0		  mov	  al, 4Bh ; 'K'
bios:C7F2		  out	  dx, al			      ;	DMA 8237A-5. mode register bits:
bios:C7F2							      ;	0-1: channel (00=0; 01=1; 10=2;	11=3)
bios:C7F2							      ;	2-3: transfer type (00=verify=Nop; 01=write; 10=read)
bios:C7F2							      ;	4: 1=enable auto-initialization
bios:C7F2							      ;	5: 1=address increment;	0=address decrement
bios:C7F2							      ;	6-7: 00=demand mode; 01=single;	10=block; 11=cascade
bios:C7F3		  mov	  al, 0Eh
bios:C7F5		  out	  0Fh, al			      ;	DMA controller,	8237A-5.
bios:C7F5							      ;	master clear. Clear or mask any	or
bios:C7F5							      ;	all of the channels. Bits:
bios:C7F5							      ;	0: 1=mask channel 0; 0=enable
bios:C7F5							      ;	1: 1=mask channel 1;
bios:C7F5							      ;	2: 1=mask channel 2;
bios:C7F5							      ;	3: 1=mask channel 3;
bios:C7F7		  mov	  al, 0FFh
bios:C7F9		  out	  1, al				      ;	DMA controller,	8237A-5.
bios:C7F9							      ;	channel	0 base address and word	count
bios:C7FB		  mov	  al, 20h ; ' '
bios:C7FD		  out	  8, al				      ;	DMA 8237A-5. cmd reg bits:
bios:C7FD							      ;	0: enable mem-to-mem DMA
bios:C7FD							      ;	1: enable Ch0 address hold
bios:C7FD							      ;	2: disable controller
bios:C7FD							      ;	3: compressed timing mode
bios:C7FD							      ;	4: enable rotating priority
bios:C7FD							      ;	5: extended write mode;	0=late write
bios:C7FD							      ;	6: DRQ sensing - active	high
bios:C7FD							      ;	7: DACK	sensing	- active high
bios:C7FF
bios:C7FF loc_FC7FF:						      ;	CODE XREF: reset-188Fj
bios:C7FF							      ;	reset-188Aj
bios:C7FF		  mov	  ch, 0
bios:C801
bios:C801 loc_FC801:						      ;	CODE XREF: reset-182Cj
bios:C801							      ;	reset-180Dj
bios:C801		  mov	  al, 98h ; '˜'
bios:C803		  out	  63h, al			      ;	PC/XT PPI Command/Mode Register.
bios:C803							      ;	Selects	which PPI ports	are input or output.
bios:C803							      ;	BIOS sets to 99H (Ports	A and C	are input, B is	output).
bios:C805		  nop
bios:C806		  mov	  al, 0C0h ; 'À'
bios:C808		  out	  61h, al			      ;	PC/XT PPI port B bits:
bios:C808							      ;	0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
bios:C808							      ;	1: Tmr 2 data Í¼  AND 0fcH=spkr	OFF
bios:C808							      ;	3: 1=read high switches
bios:C808							      ;	4: 0=enable RAM	parity checking
bios:C808							      ;	5: 0=enable I/O	channel	check
bios:C808							      ;	6: 0=hold keyboard clock low
bios:C808							      ;	7: 0=enable kbrd
bios:C80A		  mov	  cl, 1
bios:C80C
bios:C80C loc_FC80C:						      ;	CODE XREF: reset-1831j
bios:C80C		  mov	  al, 90h ; ''
bios:C80E		  out	  43h, al			      ;	Timer 8253-5 (AT: 8254.2).
bios:C810		  mov	  al, cl
bios:C812		  out	  42h, al			      ;	Timer 8253-5 (AT: 8254.2).
bios:C814		  mov	  al, 80h ; '€'
bios:C816		  out	  43h, al			      ;	Timer 8253-5 (AT: 8254.2).
bios:C818		  mov	  al, 90h ; ''
bios:C81A		  out	  43h, al			      ;	Timer 8253-5 (AT: 8254.2).
bios:C81C		  nop
bios:C81D		  in	  al, 42h			      ;	Timer 8253-5 (AT: 8254.2).
bios:C81F		  cmp	  ch, 1
bios:C822		  jz	  short	loc_FC828
bios:C824		  cmp	  al, cl
bios:C826		  jnz	  short	loc_FC834
bios:C828
bios:C828 loc_FC828:						      ;	CODE XREF: reset-1839j
bios:C828		  rcl	  cl, 1
bios:C82A		  jnb	  short	loc_FC80C
bios:C82C		  cmp	  ch, 1
bios:C82F		  jz	  short	loc_FC801
bios:C831		  jmp	  short	loc_FC877
bios:C831 ; END	OF FUNCTION CHUNK FOR reset
bios:C833 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:C833		  nop
bios:C834 ; START OF FUNCTION CHUNK FOR	reset
bios:C834
bios:C834 loc_FC834:						      ;	CODE XREF: reset-1835j
bios:C834		  mov	  si, offset aFaultyWriteRea	      ;	"Faulty	write &	read of	8253 Chan 2 Reg"
bios:C837		  mov	  di, 3C0h
bios:C83A		  mov	  ah, 7
bios:C83C
bios:C83C loc_FC83C:						      ;	CODE XREF: reset-1811j
bios:C83C		  mov	  al, cs:[si]
bios:C83F		  or	  al, al
bios:C841		  jz	  short	loc_FC84C
bios:C843		  mov	  es:[di], ax
bios:C846		  add	  di, 2
bios:C849		  inc	  si
bios:C84A		  jmp	  short	loc_FC83C
bios:C84C ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:C84C
bios:C84C loc_FC84C:						      ;	CODE XREF: reset-181Aj
bios:C84C		  mov	  ch, 1
bios:C84E		  jmp	  short	loc_FC801
bios:C84E ; END	OF FUNCTION CHUNK FOR reset
bios:C84E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:C850 aFaultyWriteRea db 'Faulty write & read of 8253 Chan 2 Reg',0
bios:C850							      ;	DATA XREF: reset:loc_FC834o
bios:C877 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:C877 ; START OF FUNCTION CHUNK FOR	reset
bios:C877
bios:C877 loc_FC877:						      ;	CODE XREF: reset-182Aj
bios:C877		  mov	  al, 74h ; 't'
bios:C879		  out	  43h, al			      ;	Timer 8253-5 (AT: 8254.2).
bios:C87B		  mov	  al, 12h
bios:C87D		  out	  41h, al			      ;	Timer 8253-5 (AT: 8254.2).
bios:C87F		  mov	  al, 0
bios:C881		  out	  41h, al			      ;	Timer 8253-5 (AT: 8254.2).
bios:C883		  mov	  al, 30h ; '0'
bios:C885		  out	  43h, al			      ;	Timer 8253-5 (AT: 8254.2).
bios:C887		  mov	  al, 0
bios:C889		  out	  40h, al			      ;	Timer 8253-5 (AT: 8254.2).
bios:C88B		  out	  40h, al			      ;	Timer 8253-5 (AT: 8254.2).
bios:C88D		  mov	  al, 0B0h ; '°'
bios:C88F		  out	  43h, al			      ;	Timer 8253-5 (AT: 8254.2).
bios:C891		  mov	  al, 0
bios:C893		  out	  42h, al			      ;	Timer 8253-5 (AT: 8254.2).
bios:C895		  out	  42h, al			      ;	Timer 8253-5 (AT: 8254.2).
bios:C897		  mov	  ax, 0
bios:C89A		  mov	  es, ax
bios:C89C		  xor	  si, si
bios:C89E
bios:C89E loc_FC89E:						      ;	CODE XREF: reset-1790j
bios:C89E		  mov	  ax, es:[si]
bios:C8A1		  not	  ax
bios:C8A3		  mov	  es:[si], ax
bios:C8A6		  mov	  cx, 118h
bios:C8A9
bios:C8A9 loc_FC8A9:						      ;	CODE XREF: reset:loc_FC8A9j
bios:C8A9		  loop	  loc_FC8A9
bios:C8AB		  cmp	  ax, es:[si]
bios:C8AE		  jnz	  short	loc_FC8D2
bios:C8B0		  not	  ax
bios:C8B2		  mov	  es:[si], ax
bios:C8B5		  mov	  cx, 118h
bios:C8B8
bios:C8B8 loc_FC8B8:						      ;	CODE XREF: reset:loc_FC8B8j
bios:C8B8		  loop	  loc_FC8B8
bios:C8BA		  cmp	  ax, es:[si]
bios:C8BD		  jnz	  short	loc_FC8D2
bios:C8BF
bios:C8BF loc_FC8BF:						      ;	CODE XREF: reset-1773j
bios:C8BF		  mov	  ax, es
bios:C8C1		  add	  ax, 1000h
bios:C8C4		  cmp	  ax, 8000h
bios:C8C7		  jz	  short	loc_FC8CD
bios:C8C9		  mov	  es, ax
bios:C8CB		  jmp	  short	loc_FC89E
bios:C8CD ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:C8CD
bios:C8CD loc_FC8CD:						      ;	CODE XREF: reset-1794j
bios:C8CD		  mov	  es, ax
bios:C8CF		  jmp	  short	loc_FC8EA
bios:C8CF ; END	OF FUNCTION CHUNK FOR reset
bios:C8D1 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:C8D1		  nop
bios:C8D2 ; START OF FUNCTION CHUNK FOR	reset
bios:C8D2
bios:C8D2 loc_FC8D2:						      ;	CODE XREF: reset-17ADj
bios:C8D2							      ;	reset-179Ej
bios:C8D2		  xor	  ax, es:[si]
bios:C8D5		  mov	  bl, 0
bios:C8D7		  mov	  cx, 11h
bios:C8DA
bios:C8DA loc_FC8DA:						      ;	CODE XREF: reset-177Cj
bios:C8DA							      ;	reset-1778j
bios:C8DA		  dec	  cx
bios:C8DB		  jcxz	  short	loc_FC8E5
bios:C8DD		  rcl	  ax, 1
bios:C8DF		  jnb	  short	loc_FC8DA
bios:C8E1		  inc	  bl
bios:C8E3		  jmp	  short	loc_FC8DA
bios:C8E5 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:C8E5
bios:C8E5 loc_FC8E5:						      ;	CODE XREF: reset-1780j
bios:C8E5		  cmp	  bl, 0
bios:C8E8		  jb	  short	loc_FC8BF
bios:C8EA
bios:C8EA loc_FC8EA:						      ;	CODE XREF: reset-178Cj
bios:C8EA		  mov	  dx, es
bios:C8EC		  mov	  al, dh
bios:C8EE		  mov	  cl, 4
bios:C8F0		  shr	  al, cl
bios:C8F2		  out	  0A0h,	al			      ;	PIC 2  same as 0020 for	PIC 1
bios:C8F4		  mov	  ds:pbbe80.field_D, al
bios:C8F7		  mov	  ds:pbbe80.field_B, dx
bios:C8FB		  mov	  ax, 0B800h
bios:C8FE		  mov	  es, ax
bios:C900		  mov	  si, offset aMemorySizeNone	      ;	"MEMORY	SIZE =	None  "
bios:C903		  mov	  di, 4
bios:C906		  mov	  ah, 7
bios:C908
bios:C908 loc_FC908:						      ;	CODE XREF: reset-1745j
bios:C908		  mov	  al, cs:[si]
bios:C90B		  or	  al, al
bios:C90D		  jz	  short	loc_FC918
bios:C90F		  mov	  es:[di], ax
bios:C912		  add	  di, 2
bios:C915		  inc	  si
bios:C916		  jmp	  short	loc_FC908
bios:C918 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:C918
bios:C918 loc_FC918:						      ;	CODE XREF: reset-174Ej
bios:C918		  mov	  al, ds:pbbe80.field_D
bios:C91B		  mov	  cx, 4
bios:C91E		  mul	  cl
bios:C920		  xor	  ah, ah
bios:C922		  mov	  si, ax
bios:C924		  mov	  ah, 7
bios:C926		  mov	  bx, offset a128k192k256k320k384k448k512k57 ; "128K192K256K320K384K448K512K576K640K704"...
bios:C929		  mov	  di, 22h ; '"'
bios:C92C
bios:C92C loc_FC92C:						      ;	CODE XREF: reset-1725j
bios:C92C		  mov	  al, cs:[bx+si]
bios:C92F		  mov	  es:[di], ax
bios:C932		  add	  di, 2
bios:C935		  inc	  si
bios:C936		  loop	  loc_FC92C
bios:C938		  jmp	  short	loc_FC989
bios:C938 ; END	OF FUNCTION CHUNK FOR reset
bios:C93A ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:C93A		  nop
bios:C93A ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:C93B aMemorySizeNone db 'MEMORY SIZE =  None  ',0                ; DATA XREF: reset-175Bo
bios:C951 a128k192k256k320k384k448k512k57 db '128K192K256K320K384K448K512K576K640K704K768K832K896K960K'
bios:C951							      ;	DATA XREF: reset-1735o
bios:C989 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:C989 ; START OF FUNCTION CHUNK FOR	reset
bios:C989
bios:C989 loc_FC989:						      ;	CODE XREF: reset-1723j
bios:C989							      ;	reset:loc_FC9BAj
bios:C989		  mov	  al, 98h ; '˜'
bios:C98B		  out	  63h, al			      ;	PC/XT PPI Command/Mode Register.
bios:C98B							      ;	Selects	which PPI ports	are input or output.
bios:C98B							      ;	BIOS sets to 99H (Ports	A and C	are input, B is	output).
bios:C98D		  mov	  dx, 61h ; 'a'
bios:C990		  mov	  cl, 1
bios:C992
bios:C992 loc_FC992:						      ;	CODE XREF: reset-16BEj
bios:C992		  mov	  al, cl
bios:C994		  out	  dx, al			      ;	PC/XT PPI port B bits:
bios:C994							      ;	0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
bios:C994							      ;	1: Tmr 2 data Í¼  AND 0fcH=spkr	OFF
bios:C994							      ;	3: 1=read high switches
bios:C994							      ;	4: 0=enable RAM	parity checking
bios:C994							      ;	5: 0=enable I/O	channel	check
bios:C994							      ;	6: 0=hold keyboard clock low
bios:C994							      ;	7: 0=enable kbrd
bios:C995		  nop
bios:C996		  in	  al, dx			      ;	PC/XT PPI port B bits:
bios:C996							      ;	0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
bios:C996							      ;	1: Tmr 2 data Í¼  AND 0fcH=spkr	OFF
bios:C996							      ;	3: 1=read high switches
bios:C996							      ;	4: 0=enable RAM	parity checking
bios:C996							      ;	5: 0=enable I/O	channel	check
bios:C996							      ;	6: 0=hold keyboard clock low
bios:C996							      ;	7: 0=enable kbrd
bios:C997		  cmp	  al, cl
bios:C999		  jnz	  short	loc_FC9A2
bios:C99B		  rcl	  cl, 1
bios:C99D		  jnb	  short	loc_FC992
bios:C99F		  jmp	  short	loc_FC9E3
bios:C99F ; END	OF FUNCTION CHUNK FOR reset
bios:C99F ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:C9A1		  db  90h ; 
bios:C9A2 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:C9A2 ; START OF FUNCTION CHUNK FOR	reset
bios:C9A2
bios:C9A2 loc_FC9A2:						      ;	CODE XREF: reset-16C2j
bios:C9A2		  mov	  si, offset aFaultyWriteR_0	      ;	"Faulty	write &	read of	8255 PPI Chan B"
bios:C9A5		  mov	  di, 3C0h
bios:C9A8		  mov	  ah, 7
bios:C9AA
bios:C9AA loc_FC9AA:						      ;	CODE XREF: reset-16A3j
bios:C9AA		  mov	  al, cs:[si]
bios:C9AD		  or	  al, al
bios:C9AF		  jz	  short	loc_FC9BA
bios:C9B1		  mov	  es:[di], ax
bios:C9B4		  add	  di, 2
bios:C9B7		  inc	  si
bios:C9B8		  jmp	  short	loc_FC9AA
bios:C9BA ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:C9BA
bios:C9BA loc_FC9BA:						      ;	CODE XREF: reset-16ACj
bios:C9BA		  jmp	  short	loc_FC989
bios:C9BA ; END	OF FUNCTION CHUNK FOR reset
bios:C9BA ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:C9BC aFaultyWriteR_0 db 'Faulty write & read of 8255 PPI Chan B',0
bios:C9BC							      ;	DATA XREF: reset:loc_FC9A2o
bios:C9E3 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:C9E3 ; START OF FUNCTION CHUNK FOR	reset
bios:C9E3
bios:C9E3 loc_FC9E3:						      ;	CODE XREF: reset-16BCj
bios:C9E3		  mov	  dx, 63h ; 'c'
bios:C9E6		  mov	  al, 98h ; '˜'
bios:C9E8		  out	  dx, al			      ;	PC/XT PPI Command/Mode Register.
bios:C9E8							      ;	Selects	which PPI ports	are input or output.
bios:C9E8							      ;	BIOS sets to 99H (Ports	A and C	are input, B is	output).
bios:C9E9		  mov	  dx, 61h ; 'a'
bios:C9EC		  mov	  al, 88h ; 'ˆ'
bios:C9EE		  out	  dx, al			      ;	PC/XT PPI port B bits:
bios:C9EE							      ;	0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
bios:C9EE							      ;	1: Tmr 2 data Í¼  AND 0fcH=spkr	OFF
bios:C9EE							      ;	3: 1=read high switches
bios:C9EE							      ;	4: 0=enable RAM	parity checking
bios:C9EE							      ;	5: 0=enable I/O	channel	check
bios:C9EE							      ;	6: 0=hold keyboard clock low
bios:C9EE							      ;	7: 0=enable kbrd
bios:C9EF		  mov	  al, 8
bios:C9F1		  out	  dx, al			      ;	PC/XT PPI port B bits:
bios:C9F1							      ;	0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
bios:C9F1							      ;	1: Tmr 2 data Í¼  AND 0fcH=spkr	OFF
bios:C9F1							      ;	3: 1=read high switches
bios:C9F1							      ;	4: 0=enable RAM	parity checking
bios:C9F1							      ;	5: 0=enable I/O	channel	check
bios:C9F1							      ;	6: 0=hold keyboard clock low
bios:C9F1							      ;	7: 0=enable kbrd
bios:C9F2		  mov	  dx, 62h ; 'b'
bios:C9F5		  mov	  al, 0
bios:C9F7		  out	  dx, al			      ;	PC/XT PPI port C. Bits:
bios:C9F7							      ;	0-3: values of DIP switches
bios:C9F7							      ;	5: 1=Timer 2 channel out
bios:C9F7							      ;	6: 1=I/O channel check
bios:C9F7							      ;	7: 1=RAM parity	check error occurred.
bios:C9F8		  mov	  al, 13h
bios:C9FA		  out	  20h, al			      ;	Interrupt controller, 8259A.
bios:C9FC		  mov	  al, 8
bios:C9FE		  mov	  dx, 21h ; '!'
bios:CA01		  out	  dx, al			      ;	Interrupt controller, 8259A.
bios:CA02		  mov	  al, 1
bios:CA04		  out	  dx, al			      ;	Interrupt controller, 8259A.
bios:CA05		  mov	  al, 0FFh
bios:CA07		  out	  dx, al			      ;	Interrupt controller, 8259A.
bios:CA08		  mov	  cl, al
bios:CA0A		  mov	  al, 40h ; '@'
bios:CA0C		  out	  20h, al			      ;	Interrupt controller, 8259A.
bios:CA0E		  in	  al, dx			      ;	Interrupt controller, 8259A.
bios:CA0F		  cmp	  al, cl
bios:CA11		  jnz	  short	loc_FCA37
bios:CA13		  mov	  cl, 1
bios:CA15
bios:CA15 loc_FCA15:						      ;	CODE XREF: reset-163Cj
bios:CA15		  mov	  al, cl
bios:CA17		  out	  dx, al			      ;	Interrupt controller, 8259A.
bios:CA18		  in	  al, dx			      ;	Interrupt controller, 8259A.
bios:CA19		  cmp	  al, cl
bios:CA1B		  jnz	  short	loc_FCA37
bios:CA1D		  rcl	  cl, 1
bios:CA1F		  jnb	  short	loc_FCA15
bios:CA21		  mov	  al, 0FDh ; 'ı'
bios:CA23		  out	  dx, al			      ;	Interrupt controller, 8259A.
bios:CA24		  mov	  cl, al
bios:CA26		  in	  al, dx			      ;	Interrupt controller, 8259A.
bios:CA27		  cmp	  al, cl
bios:CA29		  jnz	  short	loc_FCA37
bios:CA2B		  mov	  cx, 8
bios:CA2E
bios:CA2E loc_FCA2E:						      ;	CODE XREF: reset-1629j
bios:CA2E		  mov	  al, 20h ; ' '
bios:CA30		  out	  20h, al			      ;	Interrupt controller, 8259A.
bios:CA32		  loop	  loc_FCA2E
bios:CA34		  jmp	  short	loc_FCA76
bios:CA34 ; END	OF FUNCTION CHUNK FOR reset
bios:CA34 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CA36		  db  90h ; 
bios:CA37 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CA37 ; START OF FUNCTION CHUNK FOR	reset
bios:CA37
bios:CA37 loc_FCA37:						      ;	CODE XREF: reset-164Aj
bios:CA37							      ;	reset-1640j
bios:CA37							      ;	reset-1632j
bios:CA37		  mov	  si, offset aFaultyWriteR_1	      ;	"Faulty	write &	read of	8259 Mask Reg"
bios:CA3A		  mov	  di, 3C0h
bios:CA3D		  mov	  ah, 7
bios:CA3F
bios:CA3F loc_FCA3F:						      ;	CODE XREF: reset-160Ej
bios:CA3F		  mov	  al, cs:[si]
bios:CA42		  or	  al, al
bios:CA44		  jz	  short	loc_FCA74
bios:CA46		  mov	  es:[di], ax
bios:CA49		  add	  di, 2
bios:CA4C		  inc	  si
bios:CA4D		  jmp	  short	loc_FCA3F
bios:CA4D ; END	OF FUNCTION CHUNK FOR reset
bios:CA4D ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CA4F aFaultyWriteR_1 db 'Faulty write & read of 8259 Mask Reg',0 ; DATA XREF: reset:loc_FCA37o
bios:CA74 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CA74 ; START OF FUNCTION CHUNK FOR	reset
bios:CA74
bios:CA74 loc_FCA74:						      ;	CODE XREF: reset-1617j
bios:CA74							      ;	reset:loc_FCA74j
bios:CA74		  jmp	  short	loc_FCA74
bios:CA76 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CA76
bios:CA76 loc_FCA76:						      ;	CODE XREF: reset-1627j
bios:CA76		  xor	  cx, cx
bios:CA78
bios:CA78 loc_FCA78:						      ;	CODE XREF: reset:loc_FCA78j
bios:CA78		  loop	  loc_FCA78
bios:CA7A		  mov	  cx, 11h
bios:CA7D
bios:CA7D loc_FCA7D:						      ;	CODE XREF: reset-15C9j
bios:CA7D		  xchg	  bx, cx
bios:CA7F		  mov	  al, 88h ; 'ˆ'
bios:CA81		  out	  61h, al			      ;	PC/XT PPI port B bits:
bios:CA81							      ;	0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
bios:CA81							      ;	1: Tmr 2 data Í¼  AND 0fcH=spkr	OFF
bios:CA81							      ;	3: 1=read high switches
bios:CA81							      ;	4: 0=enable RAM	parity checking
bios:CA81							      ;	5: 0=enable I/O	channel	check
bios:CA81							      ;	6: 0=hold keyboard clock low
bios:CA81							      ;	7: 0=enable kbrd
bios:CA83		  mov	  al, 20h ; ' '
bios:CA85		  out	  20h, al			      ;	Interrupt controller, 8259A.
bios:CA87		  mov	  al, 8
bios:CA89		  out	  61h, al			      ;	PC/XT PPI port B bits:
bios:CA89							      ;	0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
bios:CA89							      ;	1: Tmr 2 data Í¼  AND 0fcH=spkr	OFF
bios:CA89							      ;	3: 1=read high switches
bios:CA89							      ;	4: 0=enable RAM	parity checking
bios:CA89							      ;	5: 0=enable I/O	channel	check
bios:CA89							      ;	6: 0=hold keyboard clock low
bios:CA89							      ;	7: 0=enable kbrd
bios:CA8B		  mov	  cx, 0A9h ; '©'
bios:CA8E
bios:CA8E loc_FCA8E:						      ;	CODE XREF: reset:loc_FCA8Ej
bios:CA8E		  loop	  loc_FCA8E
bios:CA90		  xchg	  bx, cx
bios:CA92		  loop	  loc_FCA7D
bios:CA94		  mov	  ax, 1
bios:CA97		  mov	  ds:pbbe80.field_10, ax
bios:CA9A		  xor	  ax, ax
bios:CA9C		  mov	  ds:pbbe80.field_E, ax
bios:CA9F		  mov	  cx, 5A5Ah
bios:CAA2		  mov	  bp, 0
bios:CAA5
bios:CAA5 loc_FCAA5:						      ;	CODE XREF: reset-158Cj
bios:CAA5		  mov	  bx, 0FFFEh
bios:CAA8
bios:CAA8 loc_FCAA8:						      ;	CODE XREF: reset-1587j
bios:CAA8		  mov	  es, bp
bios:CAAA		  mov	  si, 0FFFEh
bios:CAAD
bios:CAAD loc_FCAAD:						      ;	CODE XREF: reset-15A1j
bios:CAAD		  mov	  ax, bx
bios:CAAF		  xor	  ax, cx
bios:CAB1		  xor	  ax, bp
bios:CAB3		  mov	  es:[bx], ax
bios:CAB6		  dec	  bx
bios:CAB7		  dec	  bx
bios:CAB8		  cmp	  bx, si
bios:CABA		  jnz	  short	loc_FCAAD
bios:CABC		  mov	  ax, bp
bios:CABE		  add	  ax, 1000h
bios:CAC1		  mov	  bp, ax
bios:CAC3		  mov	  ax, ds:pbbe80.field_B
bios:CAC6		  add	  ax, 1000h
bios:CAC9		  cmp	  ax, bp
bios:CACB		  jz	  short	loc_FCAD1
bios:CACD		  jb	  short	loc_FCAD6
bios:CACF		  jmp	  short	loc_FCAA5
bios:CAD1 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CAD1
bios:CAD1 loc_FCAD1:						      ;	CODE XREF: reset-1590j
bios:CAD1		  mov	  bx, 0BFFEh
bios:CAD4		  jmp	  short	loc_FCAA8
bios:CAD6 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CAD6
bios:CAD6 loc_FCAD6:						      ;	CODE XREF: reset-158Ej
bios:CAD6		  mov	  bp, 0
bios:CAD9
bios:CAD9 loc_FCAD9:						      ;	CODE XREF: reset-1554j
bios:CAD9		  mov	  bx, 0FFFEh
bios:CADC
bios:CADC loc_FCADC:						      ;	CODE XREF: reset-154Fj
bios:CADC		  mov	  es, bp
bios:CADE
bios:CADE loc_FCADE:						      ;	CODE XREF: reset-1566j
bios:CADE		  mov	  ax, bx
bios:CAE0		  xor	  ax, cx
bios:CAE2		  xor	  ax, bp
bios:CAE4		  mov	  si, ax
bios:CAE6		  mov	  di, es:[bx]
bios:CAE9		  cmp	  si, di
bios:CAEB		  jz	  short	loc_FCAF0
bios:CAED		  call	  sub_FCB8E
bios:CAF0
bios:CAF0 loc_FCAF0:						      ;	CODE XREF: reset-1570j
bios:CAF0		  dec	  bx
bios:CAF1		  dec	  bx
bios:CAF2		  cmp	  bx, 0FFFEh
bios:CAF5		  jnz	  short	loc_FCADE
bios:CAF7		  add	  bp, 1000h
bios:CAFB		  mov	  ax, ds:pbbe80.field_B
bios:CAFE		  add	  ax, 1000h
bios:CB01		  cmp	  ax, bp
bios:CB03		  jz	  short	loc_FCB09
bios:CB05		  jb	  short	loc_FCB0E
bios:CB07		  jmp	  short	loc_FCAD9
bios:CB09 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CB09
bios:CB09 loc_FCB09:						      ;	CODE XREF: reset-1558j
bios:CB09		  mov	  bx, 0BFFEh
bios:CB0C		  jmp	  short	loc_FCADC
bios:CB0E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CB0E
bios:CB0E loc_FCB0E:						      ;	CODE XREF: reset-1556j
bios:CB0E		  cld
bios:CB0F		  mov	  bp, 0
bios:CB12
bios:CB12 loc_FCB12:						      ;	CODE XREF: reset-152Dj
bios:CB12		  mov	  cx, 8000h
bios:CB15
bios:CB15 loc_FCB15:						      ;	CODE XREF: reset-1528j
bios:CB15		  mov	  es, bp
bios:CB17		  mov	  di, 0
bios:CB1A		  xor	  ax, ax
bios:CB1C		  rep stosw
bios:CB1E		  add	  bp, 1000h
bios:CB22		  mov	  ax, ds:pbbe80.field_B
bios:CB25		  add	  ax, 1000h
bios:CB28		  cmp	  ax, bp
bios:CB2A		  jz	  short	loc_FCB30
bios:CB2C		  jb	  short	loc_FCB35
bios:CB2E		  jmp	  short	loc_FCB12
bios:CB30 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CB30
bios:CB30 loc_FCB30:						      ;	CODE XREF: reset-1531j
bios:CB30		  mov	  cx, 5FFEh
bios:CB33		  jmp	  short	loc_FCB15
bios:CB35 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CB35
bios:CB35 loc_FCB35:						      ;	CODE XREF: reset-152Fj
bios:CB35		  mov	  ax, 0BBE8h
bios:CB38		  mov	  ds, ax			      ;	ds = 0xbbe8
bios:CB3A		  mov	  ax, ds:pbbe80.field_10
bios:CB3D		  cmp	  ax, 1
bios:CB40		  jnz	  short	loc_FCB45
bios:CB42		  jmp	  loc_FCC56
bios:CB45 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CB45
bios:CB45 loc_FCB45:						      ;	CODE XREF: reset-151Bj
bios:CB45							      ;	reset:loc_FCB45j
bios:CB45		  jmp	  short	loc_FCB45
bios:CB45 ; END	OF FUNCTION CHUNK FOR reset
bios:CB45 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CB47 aMemoryErrorInf db 'Memory Error Information:               Written  Read    Base   Offset',0
bios:CB47							      ;	DATA XREF: sub_FCB8E+Ao
bios:CB8E
bios:CB8E ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:CB8E
bios:CB8E
bios:CB8E sub_FCB8E	  proc near				      ;	CODE XREF: reset-156Ep
bios:CB8E		  mov	  ds:pbbe80.field_10, si
bios:CB92		  mov	  si, di
bios:CB94		  push	  si
bios:CB95		  mov	  di, 14Ah
bios:CB98		  mov	  si, offset aMemoryErrorInf	      ;	"Memory	Error Information:		"...
bios:CB9B		  call	  print_asciiz
bios:CB9E		  pop	  si
bios:CB9F		  mov	  ax, ds:pbbe80.field_E
bios:CBA2		  cmp	  al, 0Fh
bios:CBA4		  jz	  short	l0
bios:CBA6		  inc	  ax
bios:CBA7		  mov	  ds:pbbe80.field_E, ax
bios:CBAA
bios:CBAA l0:							      ;	CODE XREF: sub_FCB8E+16j
bios:CBAA		  mov	  ax, ds:pbbe80.field_E
bios:CBAD		  mov	  ah, 50h ; 'P'
bios:CBAF		  mul	  ah
bios:CBB1		  mov	  di, 1ECh
bios:CBB4		  add	  di, ax
bios:CBB6		  mov	  ax, ds:pbbe80.field_10
bios:CBB9		  call	  sub_FCBD9
bios:CBBC		  add	  di, 8
bios:CBBF		  mov	  ax, si
bios:CBC1		  call	  sub_FCBD9
bios:CBC4		  add	  di, 8
bios:CBC7		  mov	  ax, bp
bios:CBC9		  call	  sub_FCBD9
bios:CBCC		  add	  di, 8
bios:CBCF		  mov	  ax, bx
bios:CBD1		  call	  sub_FCBD9
bios:CBD4		  mov	  si, ds:pbbe80.field_10
bios:CBD8		  retn
bios:CBD8 sub_FCB8E	  endp
bios:CBD8
bios:CBD9
bios:CBD9 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:CBD9
bios:CBD9
bios:CBD9 sub_FCBD9	  proc near				      ;	CODE XREF: sub_FCB8E+2Bp
bios:CBD9							      ;	sub_FCB8E+33p
bios:CBD9							      ;	sub_FCB8E+3Bp
bios:CBD9							      ;	sub_FCB8E+43p
bios:CBD9		  mov	  dx, ax
bios:CBDB		  mov	  ax, 0B800h
bios:CBDE		  mov	  es, ax			      ;	es = 0xb800
bios:CBE0		  mov	  al, dh
bios:CBE2		  shr	  al, 1
bios:CBE4		  shr	  al, 1
bios:CBE6		  shr	  al, 1
bios:CBE8		  shr	  al, 1
bios:CBEA		  and	  al, 0Fh
bios:CBEC		  add	  al, 30h ; '0'
bios:CBEE		  cmp	  al, 3Ah ; ':'
bios:CBF0		  js	  short	l0
bios:CBF2		  add	  al, 7
bios:CBF4
bios:CBF4 l0:							      ;	CODE XREF: sub_FCBD9+17j
bios:CBF4		  mov	  ah, 7
bios:CBF6		  mov	  es:[di], ax
bios:CBF9		  inc	  di
bios:CBFA		  inc	  di
bios:CBFB		  mov	  al, dh
bios:CBFD		  and	  al, 0Fh
bios:CBFF		  add	  al, 30h ; '0'
bios:CC01		  cmp	  al, 3Ah ; ':'
bios:CC03		  js	  short	l1
bios:CC05		  add	  al, 7
bios:CC07
bios:CC07 l1:							      ;	CODE XREF: sub_FCBD9+2Aj
bios:CC07		  mov	  es:[di], ax
bios:CC0A		  inc	  di
bios:CC0B		  inc	  di
bios:CC0C		  mov	  al, dl
bios:CC0E		  shr	  al, 1
bios:CC10		  shr	  al, 1
bios:CC12		  shr	  al, 1
bios:CC14		  shr	  al, 1
bios:CC16		  and	  al, 0Fh
bios:CC18		  add	  al, 30h ; '0'
bios:CC1A		  cmp	  al, 3Ah ; ':'
bios:CC1C		  js	  short	l2
bios:CC1E		  add	  al, 7
bios:CC20
bios:CC20 l2:							      ;	CODE XREF: sub_FCBD9+43j
bios:CC20		  mov	  es:[di], ax
bios:CC23		  inc	  di
bios:CC24		  inc	  di
bios:CC25		  mov	  al, dl
bios:CC27		  and	  al, 0Fh
bios:CC29		  add	  al, 30h ; '0'
bios:CC2B		  cmp	  al, 3Ah ; ':'
bios:CC2D		  js	  short	l3
bios:CC2F		  add	  al, 7
bios:CC31
bios:CC31 l3:							      ;	CODE XREF: sub_FCBD9+54j
bios:CC31		  mov	  es:[di], ax
bios:CC34		  inc	  di
bios:CC35		  inc	  di
bios:CC36		  mov	  ax, bp
bios:CC38		  mov	  es, ax
bios:CC3A		  retn
bios:CC3A sub_FCBD9	  endp
bios:CC3A
bios:CC3B
bios:CC3B ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:CC3B
bios:CC3B ; print asciiz
bios:CC3B ;
bios:CC3B ; input:
bios:CC3B ;	    cs:si -> asciiz
bios:CC3B ;	0xb800:di -> destination
bios:CC3B
bios:CC3B print_asciiz	  proc near				      ;	CODE XREF: sub_FCB8E+Dp
bios:CC3B		  mov	  ax, 0B800h
bios:CC3E		  mov	  es, ax			      ;	es = 0xb800
bios:CC40		  mov	  ah, 7
bios:CC42
bios:CC42 loop:							      ;	CODE XREF: print_asciiz+14j
bios:CC42		  mov	  al, cs:[si]
bios:CC45		  or	  al, al
bios:CC47		  jz	  short	exit
bios:CC49		  mov	  es:[di], ax
bios:CC4C		  inc	  di
bios:CC4D		  inc	  di
bios:CC4E		  inc	  si
bios:CC4F		  jmp	  short	loop
bios:CC51 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CC51
bios:CC51 exit:							      ;	CODE XREF: print_asciiz+Cj
bios:CC51		  mov	  ax, bp
bios:CC53		  mov	  es, ax
bios:CC55		  retn
bios:CC55 print_asciiz	  endp
bios:CC55
bios:CC56 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CC56 ; START OF FUNCTION CHUNK FOR	reset
bios:CC56
bios:CC56 loc_FCC56:						      ;	CODE XREF: reset-1519j
bios:CC56		  jmp	  loc_FE083
bios:CC56 ; END	OF FUNCTION CHUNK FOR reset
bios:CC59
bios:CC59 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:CC59
bios:CC59
bios:CC59 int_13	  proc far				      ;	DATA XREF: bios:FF09o
bios:CC59
bios:CC59 ; FUNCTION CHUNK AT bios:CFB4	SIZE 00000076 BYTES
bios:CC59 ; FUNCTION CHUNK AT bios:D02B	SIZE 00000025 BYTES
bios:CC59 ; FUNCTION CHUNK AT bios:D051	SIZE 0000000A BYTES
bios:CC59 ; FUNCTION CHUNK AT bios:D05C	SIZE 0000000C BYTES
bios:CC59 ; FUNCTION CHUNK AT bios:D069	SIZE 0000000E BYTES
bios:CC59 ; FUNCTION CHUNK AT bios:D078	SIZE 00000074 BYTES
bios:CC59
bios:CC59		  call	  int_push_regs
bios:CC5C		  mov	  di, 0Ch
bios:CC5F		  nop
bios:CC60		  call	  check_valid_subfunction
bios:CC63		  jb	  short	error
bios:CC65		  push	  bx
bios:CC66		  mov	  bx, ds:p400.installed_hardware
bios:CC6A		  test	  bx, 100h			      ;	dma present ?
bios:CC6E		  pop	  bx
bios:CC6F		  jz	  short	no_dma
bios:CC71		  jmp	  word ptr cs:int_13_jmp_tbl_dma[di]
bios:CC76 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CC76
bios:CC76 no_dma:						      ;	CODE XREF: int_13+16j
bios:CC76		  jmp	  word ptr cs:int_13_jmp_tbl[di]
bios:CC76 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CC7B int_13_jmp_tbl:					      ;	DATA XREF: int_13:no_dmar
bios:CC7B		  dw offset int_13_00
bios:CC7D		  dw offset int_13_01
bios:CC7F		  dw offset int_13_02
bios:CC81		  dw offset int_13_03
bios:CC83		  dw offset int_13_04
bios:CC85		  dw offset int_13_05
bios:CC87 int_13_jmp_tbl_dma:					      ;	DATA XREF: int_13+18r
bios:CC87		  dw offset int_13_00
bios:CC89		  dw offset int_13_01
bios:CC8B		  dw offset int_13_02_dma
bios:CC8D		  dw offset int_13_03_dma
bios:CC8F		  dw offset int_13_04_dma
bios:CC91		  dw offset int_13_05_dma
bios:CC93 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CC93
bios:CC93 error:						      ;	CODE XREF: int_13+Aj
bios:CC93		  mov	  byte ptr ds:p400.diskette_last_status, 1
bios:CC98		  jmp	  exit
bios:CC9B ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CC9B
bios:CC9B int_13_00:						      ;	CODE XREF: int_13+18j
bios:CC9B							      ;	int_13:no_dmaj
bios:CC9B							      ;	DATA XREF: int_13:int_13_jmp_tblo
bios:CC9B							      ;	int_13:int_13_jmp_tbl_dmao
bios:CC9B		  mov	  byte ptr ds:p400.diskette_last_status, 0
bios:CCA0		  and	  byte ptr ds:p400.diskette_recalibrate_status,	70h ; 'p'
bios:CCA5		  cli
bios:CCA6		  mov	  dl, ds:p400.diskette_motor_status
bios:CCAA		  mov	  al, 3
bios:CCAC		  test	  dl, 8
bios:CCAF		  jnz	  short	l0
bios:CCB1		  mov	  al, 2
bios:CCB3		  test	  dl, 4
bios:CCB6		  jnz	  short	l0
bios:CCB8		  mov	  al, 1
bios:CCBA		  test	  dl, 2
bios:CCBD		  jnz	  short	l0
bios:CCBF		  xor	  al, al
bios:CCC1
bios:CCC1 l0:							      ;	CODE XREF: int_13+56j
bios:CCC1							      ;	int_13+5Dj
bios:CCC1							      ;	int_13+64j
bios:CCC1		  mov	  cl, 4
bios:CCC3		  shl	  dl, cl
bios:CCC5		  and	  dl, 0F0h
bios:CCC8		  or	  al, dl
bios:CCCA		  or	  al, 8
bios:CCCC		  mov	  dx, 3F2h
bios:CCCF		  out	  dx, al			      ;	Floppy:	digital	output reg bits:
bios:CCCF							      ;	0-1: Drive to select 0-3 (AT: bit 1 not	used)
bios:CCCF							      ;	2:   0=reset diskette controller; 1=enable controller
bios:CCCF							      ;	3:   1=enable diskette DMA and interrupts
bios:CCCF							      ;	4-7: drive motor enable.  Set bits to turn drive ON.
bios:CCCF							      ;
bios:CCD0		  or	  al, 4
bios:CCD2		  out	  dx, al			      ;	Floppy:	digital	output reg bits:
bios:CCD2							      ;	0-1: Drive to select 0-3 (AT: bit 1 not	used)
bios:CCD2							      ;	2:   0=reset diskette controller; 1=enable controller
bios:CCD2							      ;	3:   1=enable diskette DMA and interrupts
bios:CCD2							      ;	4-7: drive motor enable.  Set bits to turn drive ON.
bios:CCD2							      ;
bios:CCD3		  sti
bios:CCD4		  call	  diskette_wait_until_op_finished
bios:CCD7		  call	  sub_FD360
bios:CCDA		  jb	  short	l4
bios:CCDC		  test	  ah, 8
bios:CCDF		  jz	  short	l1
bios:CCE1		  or	  byte ptr ds:p400.diskette_last_status, 20h
bios:CCE6		  jmp	  short	l4
bios:CCE8 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CCE8
bios:CCE8 l1:							      ;	CODE XREF: int_13+86j
bios:CCE8		  mov	  al, 3
bios:CCEA		  call	  sub_FD1EB
bios:CCED		  jb	  short	l4
bios:CCEF		  xor	  bx, bx
bios:CCF1		  mov	  cx, 2
bios:CCF4		  mov	  ax, ds:p400.installed_hardware
bios:CCF7		  test	  ax, 100h			      ;	dma present?
bios:CCFA		  jz	  short	l2			      ;	no, jump
bios:CCFC		  call	  sub_FD3F7
bios:CCFF		  jmp	  short	l3
bios:CCFF ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CD01		  db  90h ; 
bios:CD02 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CD02
bios:CD02 l2:							      ;	CODE XREF: int_13+A1j
bios:CD02		  call	  sub_FD3CA
bios:CD05
bios:CD05 l3:							      ;	CODE XREF: int_13+A6j
bios:CD05		  jb	  short	l4
bios:CD07		  xor	  ax, ax
bios:CD09		  mov	  ds:p400.diskette_last_status,	al
bios:CD0C		  clc
bios:CD0D		  jmp	  exit
bios:CD10 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CD10
bios:CD10 l4:							      ;	CODE XREF: int_13+81j
bios:CD10							      ;	int_13+8Dj
bios:CD10							      ;	int_13+94j
bios:CD10							      ;	int_13:l3j
bios:CD10		  xor	  al, al
bios:CD12		  mov	  ah, ds:p400.diskette_last_status
bios:CD16		  stc
bios:CD17		  jmp	  exit
bios:CD1A ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CD1A
bios:CD1A int_13_01:						      ;	CODE XREF: int_13+18j
bios:CD1A							      ;	int_13:no_dmaj
bios:CD1A							      ;	DATA XREF: int_13+24o
bios:CD1A							      ;	int_13+30o
bios:CD1A		  mov	  ah, ds:p400.diskette_last_status
bios:CD1E		  mov	  al, ah
bios:CD20		  cmp	  ah, 0
bios:CD23		  jz	  short	l5
bios:CD25		  stc
bios:CD26		  jmp	  exit
bios:CD29 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CD29
bios:CD29 l5:							      ;	CODE XREF: int_13+CAj
bios:CD29		  clc
bios:CD2A		  jmp	  exit
bios:CD2D ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CD2D
bios:CD2D int_13_02:						      ;	CODE XREF: int_13:no_dmaj
bios:CD2D							      ;	DATA XREF: int_13+26o
bios:CD2D		  mov	  ah, 46h ; 'F'
bios:CD2F		  call	  diskette_no_dma_functions
bios:CD32		  mov	  al, 0E6h ; 'æ'
bios:CD34		  jmp	  short	l6
bios:CD36 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CD36
bios:CD36 int_13_03:						      ;	CODE XREF: int_13:no_dmaj
bios:CD36							      ;	DATA XREF: int_13+28o
bios:CD36		  mov	  ah, 4Ah ; 'J'
bios:CD38		  call	  diskette_no_dma_functions
bios:CD3B		  mov	  al, 0C5h ; 'Å'
bios:CD3D		  jmp	  short	l6
bios:CD3F ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CD3F
bios:CD3F int_13_04:						      ;	CODE XREF: int_13:no_dmaj
bios:CD3F							      ;	DATA XREF: int_13+2Ao
bios:CD3F		  mov	  ah, 42h ; 'B'
bios:CD41		  call	  diskette_no_dma_functions
bios:CD44		  mov	  al, 0E6h ; 'æ'
bios:CD46
bios:CD46 l6:							      ;	CODE XREF: int_13+DBj
bios:CD46							      ;	int_13+E4j
bios:CD46		  jnb	  short	l7
bios:CD48		  jmp	  short	l11
bios:CD48 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CD4A		  db  90h ; 
bios:CD4B ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CD4B
bios:CD4B l7:							      ;	CODE XREF: int_13:l6j
bios:CD4B		  push	  cx
bios:CD4C		  cmp	  dl, 4
bios:CD4F		  jb	  short	l9
bios:CD51		  mov	  byte ptr ds:p400.diskette_last_status, 1
bios:CD56
bios:CD56 l8:							      ;	CODE XREF: int_13+10Bj
bios:CD56							      ;	int_13+110j
bios:CD56							      ;	int_13+121j
bios:CD56							      ;	int_13+128j
bios:CD56		  jmp	  short	l10
bios:CD56 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CD58		  db  90h ; 
bios:CD59 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CD59
bios:CD59 l9:							      ;	CODE XREF: int_13+F6j
bios:CD59		  mov	  byte ptr ds:p400.diskette_last_status, 0
bios:CD5E		  call	  get_diskette_params
bios:CD61		  call	  sub_FD297
bios:CD64		  jb	  short	l8
bios:CD66		  call	  sub_FD1EB
bios:CD69		  jb	  short	l8
bios:CD6B		  mov	  al, dl
bios:CD6D		  and	  al, 3
bios:CD6F		  push	  dx
bios:CD70		  shl	  dh, 1
bios:CD72		  shl	  dh, 1
bios:CD74		  or	  al, dh
bios:CD76		  pop	  dx
bios:CD77		  call	  sub_FD1EB
bios:CD7A		  jb	  short	l8
bios:CD7C		  mov	  al, ch
bios:CD7E		  call	  sub_FD1EB
bios:CD81		  jb	  short	l8
bios:CD83		  mov	  al, dh
bios:CD85		  call	  sub_FD1EB
bios:CD88		  jb	  short	l10
bios:CD8A		  mov	  al, cl
bios:CD8C		  call	  sub_FD1EB
bios:CD8F		  jb	  short	l10
bios:CD91		  mov	  bx, 3
bios:CD94		  mov	  cx, 4
bios:CD97		  call	  sub_FD3CA
bios:CD9A		  jb	  short	l10
bios:CD9C		  call	  diskette_wait_until_op_finished
bios:CD9F		  jb	  short	l10
bios:CDA1		  mov	  cx, 7
bios:CDA4		  call	  sub_FD243
bios:CDA7		  jb	  short	l10
bios:CDA9		  pop	  cx
bios:CDAA		  test	  ah, 0C0h
bios:CDAD		  jz	  short	l11
bios:CDAF		  call	  sub_FD387
bios:CDB2		  jmp	  short	l11
bios:CDB4 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CDB4
bios:CDB4 l10:							      ;	CODE XREF: int_13:l8j
bios:CDB4							      ;	int_13+12Fj
bios:CDB4							      ;	int_13+136j
bios:CDB4							      ;	int_13+141j
bios:CDB4							      ;	int_13+146j
bios:CDB4							      ;	int_13+14Ej
bios:CDB4		  pop	  cx
bios:CDB5
bios:CDB5 l11:							      ;	CODE XREF: int_13+EFj
bios:CDB5							      ;	int_13+154j
bios:CDB5							      ;	int_13+159j
bios:CDB5		  xor	  al, al
bios:CDB7		  mov	  ah, ds:p400.diskette_last_status
bios:CDBB		  cmp	  ah, 0
bios:CDBE		  jz	  short	l12
bios:CDC0		  stc
bios:CDC1		  jmp	  exit
bios:CDC4 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CDC4
bios:CDC4 l12:							      ;	CODE XREF: int_13+165j
bios:CDC4		  clc
bios:CDC5		  jmp	  exit
bios:CDC8 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CDC8
bios:CDC8 int_13_02_dma:					      ;	CODE XREF: int_13+18j
bios:CDC8							      ;	int_13:no_dmaj
bios:CDC8							      ;	DATA XREF: int_13+32o
bios:CDC8		  push	  cx
bios:CDC9		  push	  ax
bios:CDCA		  call	  diskette_dma_functions
bios:CDCD		  push	  ax
bios:CDCE		  mov	  al, 0E6h ; 'æ'
bios:CDD0		  jmp	  short	l13
bios:CDD0 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CDD2		  db  90h ; 
bios:CDD3 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CDD3
bios:CDD3 int_13_03_dma:					      ;	CODE XREF: int_13+18j
bios:CDD3							      ;	int_13:no_dmaj
bios:CDD3							      ;	DATA XREF: int_13+34o
bios:CDD3		  push	  cx
bios:CDD4		  push	  ax
bios:CDD5		  call	  diskette_dma_functions
bios:CDD8		  push	  ax
bios:CDD9		  mov	  al, 0C5h ; 'Å'
bios:CDDB		  jmp	  short	l13
bios:CDDB ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CDDD		  db  90h ; 
bios:CDDE ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CDDE
bios:CDDE int_13_04_dma:					      ;	CODE XREF: int_13+18j
bios:CDDE							      ;	int_13:no_dmaj
bios:CDDE							      ;	DATA XREF: int_13+36o
bios:CDDE		  push	  cx
bios:CDDF		  push	  ax
bios:CDE0		  call	  diskette_dma_functions
bios:CDE3		  push	  ax
bios:CDE4		  mov	  al, 0E6h ; 'æ'
bios:CDE6
bios:CDE6 l13:							      ;	CODE XREF: int_13+177j
bios:CDE6							      ;	int_13+182j
bios:CDE6		  jnb	  short	l14
bios:CDE8		  jmp	  l38
bios:CDEB ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CDEB
bios:CDEB l14:							      ;	CODE XREF: int_13:l13j
bios:CDEB		  push	  es
bios:CDEC		  push	  bx
bios:CDED		  cmp	  dl, 4
bios:CDF0		  jb	  short	l16
bios:CDF2		  mov	  byte ptr ds:p400.diskette_last_status, 1
bios:CDF7		  jmp	  short	l15
bios:CDF7 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CDF9		  db  90h ; 
bios:CDFA ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CDFA
bios:CDFA l15:							      ;	CODE XREF: int_13+19Ej
bios:CDFA							      ;	int_13+1AFj
bios:CDFA							      ;	int_13+1B4j
bios:CDFA							      ;	int_13+1C5j
bios:CDFA							      ;	int_13+1CCj
bios:CDFA							      ;	int_13+1D3j ...
bios:CDFA		  jmp	  l37
bios:CDFD ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CDFD
bios:CDFD l16:							      ;	CODE XREF: int_13+197j
bios:CDFD		  mov	  byte ptr ds:p400.diskette_last_status, 0
bios:CE02		  call	  get_diskette_params
bios:CE05		  call	  sub_FD297
bios:CE08		  jb	  short	l15
bios:CE0A		  call	  sub_FD1EB
bios:CE0D		  jb	  short	l15
bios:CE0F		  mov	  al, dl
bios:CE11		  and	  al, 3
bios:CE13		  push	  dx
bios:CE14		  shl	  dh, 1
bios:CE16		  shl	  dh, 1
bios:CE18		  or	  al, dh
bios:CE1A		  pop	  dx
bios:CE1B		  call	  sub_FD1EB
bios:CE1E		  jb	  short	l15
bios:CE20		  mov	  al, ch
bios:CE22		  call	  sub_FD1EB
bios:CE25		  jb	  short	l15
bios:CE27		  mov	  al, dh
bios:CE29		  call	  sub_FD1EB
bios:CE2C		  jb	  short	l15
bios:CE2E		  mov	  al, cl
bios:CE30		  call	  sub_FD1EB
bios:CE33		  jb	  short	l15
bios:CE35		  mov	  bx, 3
bios:CE38		  mov	  cx, 4
bios:CE3B		  call	  sub_FD3DC
bios:CE3E		  jb	  short	l15
bios:CE40		  mov	  al, ds:p400.diskette_motor_status
bios:CE43		  mov	  cl, 4
bios:CE45		  shl	  al, cl
bios:CE47		  or	  al, 4Ch
bios:CE49		  or	  al, dl
bios:CE4B		  mov	  dl, al
bios:CE4D		  pop	  bx
bios:CE4E		  pop	  es
bios:CE4F		  pop	  cx
bios:CE50		  pop	  ax
bios:CE51		  push	  dx
bios:CE52		  mov	  di, bx
bios:CE54		  mov	  si, bx
bios:CE56		  mov	  bh, 20h ; ' '
bios:CE58		  cmp	  ah, 4
bios:CE5B		  jnz	  short	l17
bios:CE5D		  jmp	  short	l27
bios:CE5D ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CE5F		  db  90h ; 
bios:CE60 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CE60
bios:CE60 l17:							      ;	CODE XREF: int_13+202j
bios:CE60		  cmp	  ah, 3
bios:CE63		  jz	  short	l22
bios:CE65		  mov	  al, dh
bios:CE67		  mov	  dx, 3F5h
bios:CE6A		  cli
bios:CE6B		  out	  dx, al			      ;	Floppy:	FDC command/data register.
bios:CE6C		  mov	  dx, 3F4h
bios:CE6F		  mov	  ah, 80h ; '€'
bios:CE71		  jmp	  short	l19
bios:CE71 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CE73		  db  90h ; 
bios:CE74 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CE74
bios:CE74 l18:							      ;	CODE XREF: int_13+22Bj
bios:CE74		  loop	  l20
bios:CE76		  or	  byte ptr ds:p400.diskette_last_status, 80h
bios:CE7B		  jmp	  l35
bios:CE7E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CE7E
bios:CE7E l19:							      ;	CODE XREF: int_13+218j
bios:CE7E							      ;	int_13+236j
bios:CE7E		  push	  cx
bios:CE7F		  xor	  cx, cx
bios:CE81
bios:CE81 l20:							      ;	CODE XREF: int_13:l18j
bios:CE81		  in	  al, dx			      ;	Floppy:	main status reg	bits:
bios:CE81							      ;	0-3: diskette busy
bios:CE81							      ;	4: 1=cntrlr busy
bios:CE81							      ;	5: 1=non-DMA mode
bios:CE81							      ;	6: Data	dir: 1=cntrlr to CPU
bios:CE81							      ;	7: 1=OK	to snd/rcv cmd or data
bios:CE82		  test	  al, ah
bios:CE84		  jz	  short	l18
bios:CE86		  test	  al, bh
bios:CE88		  jz	  short	l21
bios:CE8A		  inc	  dx
bios:CE8B		  in	  al, dx			      ;	Floppy:	FDC command/data register.
bios:CE8C		  stosb
bios:CE8D		  pop	  cx
bios:CE8E		  dec	  dx
bios:CE8F		  loop	  l19
bios:CE91		  jmp	  short	l34
bios:CE91 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CE93		  db  90h ; 
bios:CE94 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CE94
bios:CE94 l21:							      ;	CODE XREF: int_13+22Fj
bios:CE94		  pop	  cx
bios:CE95		  jmp	  short	l34
bios:CE95 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CE97		  db  90h ; 
bios:CE98 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CE98
bios:CE98 l22:							      ;	CODE XREF: int_13+20Aj
bios:CE98		  mov	  al, dh
bios:CE9A		  mov	  dx, 3F5h
bios:CE9D		  cli
bios:CE9E		  out	  dx, al			      ;	Floppy:	FDC command/data register.
bios:CE9F		  dec	  dx
bios:CEA0		  mov	  ah, 80h ; '€'
bios:CEA2		  jmp	  short	l24
bios:CEA2 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CEA4		  db  90h ; 
bios:CEA5 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CEA5
bios:CEA5 l23:							      ;	CODE XREF: int_13+25Cj
bios:CEA5		  loop	  l25
bios:CEA7		  or	  byte ptr ds:p400.diskette_last_status, 80h
bios:CEAC		  jmp	  short	l35
bios:CEAC ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CEAE		  db  90h ; 
bios:CEAF ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CEAF
bios:CEAF l24:							      ;	CODE XREF: int_13+249j
bios:CEAF							      ;	int_13+268j
bios:CEAF		  push	  cx
bios:CEB0		  xor	  cx, cx
bios:CEB2
bios:CEB2 l25:							      ;	CODE XREF: int_13:l23j
bios:CEB2		  in	  al, dx			      ;	Floppy:	main status reg	bits:
bios:CEB2							      ;	0-3: diskette busy
bios:CEB2							      ;	4: 1=cntrlr busy
bios:CEB2							      ;	5: 1=non-DMA mode
bios:CEB2							      ;	6: Data	dir: 1=cntrlr to CPU
bios:CEB2							      ;	7: 1=OK	to snd/rcv cmd or data
bios:CEB3		  test	  al, ah
bios:CEB5		  jz	  short	l23
bios:CEB7		  test	  al, bh
bios:CEB9		  jz	  short	l26
bios:CEBB		  lods	  byte ptr es:[si]
bios:CEBD		  inc	  dx
bios:CEBE		  out	  dx, al			      ;	Floppy:	FDC command/data register.
bios:CEBF		  pop	  cx
bios:CEC0		  dec	  dx
bios:CEC1		  loop	  l24
bios:CEC3		  jmp	  short	l34
bios:CEC3 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CEC5		  db  90h ; 
bios:CEC6 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CEC6
bios:CEC6 l26:							      ;	CODE XREF: int_13+260j
bios:CEC6		  pop	  cx
bios:CEC7		  jmp	  short	l34
bios:CEC7 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CEC9		  db  90h ; 
bios:CECA ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CECA
bios:CECA l27:							      ;	CODE XREF: int_13+204j
bios:CECA		  mov	  al, dh
bios:CECC		  mov	  dx, 3F5h
bios:CECF		  cli
bios:CED0		  out	  dx, al			      ;	Floppy:	FDC command/data register.
bios:CED1		  mov	  ah, 80h ; '€'
bios:CED3		  dec	  dx
bios:CED4		  push	  cx
bios:CED5		  xor	  cx, cx
bios:CED7
bios:CED7 l28:							      ;	CODE XREF: int_13+283j
bios:CED7		  in	  al, dx			      ;	Floppy:	main status reg	bits:
bios:CED7							      ;	0-3: diskette busy
bios:CED7							      ;	4: 1=cntrlr busy
bios:CED7							      ;	5: 1=non-DMA mode
bios:CED7							      ;	6: Data	dir: 1=cntrlr to CPU
bios:CED7							      ;	7: 1=OK	to snd/rcv cmd or data
bios:CED8		  test	  al, 80h
bios:CEDA		  jnz	  short	l29
bios:CEDC		  loop	  l28
bios:CEDE		  or	  byte ptr ds:p400.diskette_last_status, 80h
bios:CEE3		  jmp	  short	l35
bios:CEE3 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CEE5		  db  90h ; 
bios:CEE6 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CEE6
bios:CEE6 l29:							      ;	CODE XREF: int_13+281j
bios:CEE6		  test	  al, 20h
bios:CEE8		  jnz	  short	l32
bios:CEEA		  jmp	  short	l33
bios:CEEA ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CEEC		  db  90h ; 
bios:CEED ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CEED
bios:CEED l30:							      ;	CODE XREF: int_13+2AAj
bios:CEED		  push	  cx
bios:CEEE		  xor	  cx, cx
bios:CEF0
bios:CEF0 l31:							      ;	CODE XREF: int_13+29Cj
bios:CEF0		  in	  al, dx			      ;	Floppy:	main status reg	bits:
bios:CEF0							      ;	0-3: diskette busy
bios:CEF0							      ;	4: 1=cntrlr busy
bios:CEF0							      ;	5: 1=non-DMA mode
bios:CEF0							      ;	6: Data	dir: 1=cntrlr to CPU
bios:CEF0							      ;	7: 1=OK	to snd/rcv cmd or data
bios:CEF1		  test	  al, 80h
bios:CEF3		  jnz	  short	l32
bios:CEF5		  loop	  l31
bios:CEF7		  or	  byte ptr ds:p400.diskette_last_status, 80h
bios:CEFC		  jmp	  short	l35
bios:CEFC ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CEFE		  db  90h ; 
bios:CEFF ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CEFF
bios:CEFF l32:							      ;	CODE XREF: int_13+28Fj
bios:CEFF							      ;	int_13+29Aj
bios:CEFF		  inc	  dx
bios:CF00		  in	  al, dx			      ;	Floppy:	FDC command/data register.
bios:CF01		  pop	  cx
bios:CF02		  dec	  dx
bios:CF03		  loop	  l30
bios:CF05		  jmp	  short	l34
bios:CF05 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CF07		  db  90h ; 
bios:CF08 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CF08
bios:CF08 l33:							      ;	CODE XREF: int_13+291j
bios:CF08		  pop	  cx
bios:CF09
bios:CF09 l34:							      ;	CODE XREF: int_13+238j
bios:CF09							      ;	int_13+23Cj
bios:CF09							      ;	int_13+26Aj
bios:CF09							      ;	int_13+26Ej
bios:CF09							      ;	int_13+2ACj
bios:CF09		  pop	  ax
bios:CF0A		  mov	  dx, 3F2h
bios:CF0D		  out	  dx, al			      ;	Floppy:	digital	output reg bits:
bios:CF0D							      ;	0-1: Drive to select 0-3 (AT: bit 1 not	used)
bios:CF0D							      ;	2:   0=reset diskette controller; 1=enable controller
bios:CF0D							      ;	3:   1=enable diskette DMA and interrupts
bios:CF0D							      ;	4-7: drive motor enable.  Set bits to turn drive ON.
bios:CF0D							      ;
bios:CF0E		  and	  al, 0BFh
bios:CF10		  out	  dx, al			      ;	Floppy:	digital	output reg bits:
bios:CF10							      ;	0-1: Drive to select 0-3 (AT: bit 1 not	used)
bios:CF10							      ;	2:   0=reset diskette controller; 1=enable controller
bios:CF10							      ;	3:   1=enable diskette DMA and interrupts
bios:CF10							      ;	4-7: drive motor enable.  Set bits to turn drive ON.
bios:CF10							      ;
bios:CF11		  sti
bios:CF12		  call	  diskette_wait_until_ready
bios:CF15		  jb	  short	l36
bios:CF17		  mov	  cx, 7
bios:CF1A		  call	  sub_FD243
bios:CF1D		  jb	  short	l36
bios:CF1F		  pop	  cx
bios:CF20		  test	  ah, 0C0h
bios:CF23		  jz	  short	l39
bios:CF25		  call	  sub_FD387
bios:CF28		  jmp	  short	l39
bios:CF28 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CF2A		  db  90h ; 
bios:CF2B ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CF2B
bios:CF2B l35:							      ;	CODE XREF: int_13+222j
bios:CF2B							      ;	int_13+253j
bios:CF2B							      ;	int_13+28Aj
bios:CF2B							      ;	int_13+2A3j
bios:CF2B		  pop	  cx
bios:CF2C		  pop	  dx
bios:CF2D
bios:CF2D l36:							      ;	CODE XREF: int_13+2BCj
bios:CF2D							      ;	int_13+2C4j
bios:CF2D		  pop	  cx
bios:CF2E		  jmp	  short	l39
bios:CF2E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CF30		  db  90h ; 
bios:CF31 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CF31
bios:CF31 l37:							      ;	CODE XREF: int_13:l15j
bios:CF31		  pop	  bx
bios:CF32		  pop	  es
bios:CF33		  pop	  ax
bios:CF34		  pop	  ax
bios:CF35		  pop	  cx
bios:CF36		  jmp	  short	l39
bios:CF36 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CF38		  db  90h ; 
bios:CF39 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CF39
bios:CF39 l38:							      ;	CODE XREF: int_13+18Fj
bios:CF39		  pop	  ax
bios:CF3A		  pop	  ax
bios:CF3B		  pop	  cx
bios:CF3C
bios:CF3C l39:							      ;	CODE XREF: int_13+2CAj
bios:CF3C							      ;	int_13+2CFj
bios:CF3C							      ;	int_13+2D5j
bios:CF3C							      ;	int_13+2DDj
bios:CF3C		  xor	  al, al
bios:CF3E		  mov	  ah, ds:p400.diskette_last_status
bios:CF42		  cmp	  ah, 0
bios:CF45		  jz	  short	ok
bios:CF47		  stc
bios:CF48		  jmp	  exit
bios:CF4B ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CF4B
bios:CF4B ok:							      ;	CODE XREF: int_13+2ECj
bios:CF4B		  clc
bios:CF4C		  jmp	  exit
bios:CF4C int_13	  endp
bios:CF4C
bios:CF4F
bios:CF4F ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:CF4F
bios:CF4F ; Attributes:	bp-based frame
bios:CF4F
bios:CF4F diskette_dma_functions proc near			      ;	CODE XREF: int_13+171p
bios:CF4F							      ;	int_13+17Cp
bios:CF4F							      ;	int_13+187p
bios:CF4F							      ;	int_13+36Dp
bios:CF4F		  push	  cx
bios:CF50		  push	  dx
bios:CF51		  push	  es
bios:CF52		  push	  bx
bios:CF53		  push	  ax
bios:CF54		  mov	  al, 6
bios:CF56		  out	  0Fh, al			      ;	DMA controller,	8237A-5.
bios:CF56							      ;	master clear. Clear or mask any	or
bios:CF56							      ;	all of the channels. Bits:
bios:CF56							      ;	0: 1=mask channel 0; 0=enable
bios:CF56							      ;	1: 1=mask channel 1;
bios:CF56							      ;	2: 1=mask channel 2;
bios:CF56							      ;	3: 1=mask channel 3;
bios:CF58		  mov	  bp, sp
bios:CF5A		  call	  get_diskette_params
bios:CF5D		  mov	  cl, es:[si+3]
bios:CF61		  mov	  dx, 80h ; '€'
bios:CF64		  shl	  dx, cl
bios:CF66		  mov	  ax, [bp+0]
bios:CF69		  xor	  ah, ah
bios:CF6B		  mul	  dx
bios:CF6D		  cmp	  dx, 0
bios:CF70		  jnz	  short	loc_FCFA8
bios:CF72		  mov	  dx, bx
bios:CF74		  add	  bx, ax
bios:CF76		  jb	  short	loc_FCF7C
bios:CF78		  clc
bios:CF79		  jmp	  short	loc_FCFAE
bios:CF79 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CF7B		  db  90h ; 
bios:CF7C ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CF7C
bios:CF7C loc_FCF7C:						      ;	CODE XREF: diskette_dma_functions+27j
bios:CF7C		  mov	  bx, dx
bios:CF7E		  and	  bx, 0Fh
bios:CF82		  add	  bx, ax
bios:CF84		  jb	  short	loc_FCFAE
bios:CF86		  pop	  cx
bios:CF87		  pop	  cx
bios:CF88		  pop	  es
bios:CF89		  mov	  bx, dx
bios:CF8B		  mov	  cl, 4
bios:CF8D		  shr	  bx, cl
bios:CF8F		  mov	  cx, es
bios:CF91		  add	  cx, bx
bios:CF93		  jb	  short	loc_FCFA1
bios:CF95		  mov	  es, cx
bios:CF97		  mov	  bx, dx
bios:CF99		  and	  bx, 0Fh
bios:CF9D		  clc
bios:CF9E
bios:CF9E loc_FCF9E:						      ;	CODE XREF: diskette_dma_functions+57j
bios:CF9E		  pop	  dx
bios:CF9F		  pop	  cx
bios:CFA0		  retn
bios:CFA1 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CFA1
bios:CFA1 loc_FCFA1:						      ;	CODE XREF: diskette_dma_functions+44j
bios:CFA1		  mov	  byte ptr ds:p400.diskette_last_status, 9
bios:CFA6		  jmp	  short	loc_FCF9E
bios:CFA8 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CFA8
bios:CFA8 loc_FCFA8:						      ;	CODE XREF: diskette_dma_functions+21j
bios:CFA8		  stc
bios:CFA9		  mov	  byte ptr ds:p400.diskette_last_status, 9
bios:CFAE
bios:CFAE loc_FCFAE:						      ;	CODE XREF: diskette_dma_functions+2Aj
bios:CFAE							      ;	diskette_dma_functions+35j
bios:CFAE		  pop	  bx
bios:CFAF		  pop	  bx
bios:CFB0		  pop	  es
bios:CFB1		  pop	  dx
bios:CFB2		  pop	  cx
bios:CFB3		  retn
bios:CFB3 diskette_dma_functions endp
bios:CFB3
bios:CFB4 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CFB4 ; START OF FUNCTION CHUNK FOR	int_13
bios:CFB4
bios:CFB4 int_13_05_dma:					      ;	CODE XREF: int_13+18j
bios:CFB4							      ;	int_13:no_dmaj
bios:CFB4							      ;	DATA XREF: int_13+38o
bios:CFB4		  cmp	  dl, 4
bios:CFB7		  jb	  short	l40
bios:CFB9		  mov	  byte ptr ds:p400.diskette_last_status, 1
bios:CFBE		  jmp	  l46
bios:CFC1 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CFC1
bios:CFC1 l40:							      ;	CODE XREF: int_13+35Ej
bios:CFC1		  mov	  byte ptr ds:p400.diskette_last_status, 0
bios:CFC6		  call	  diskette_dma_functions
bios:CFC9		  push	  ax
bios:CFCA		  push	  es
bios:CFCB		  push	  bx
bios:CFCC		  jnb	  short	l42
bios:CFCE
bios:CFCE l41:							      ;	CODE XREF: int_13+37Ej
bios:CFCE							      ;	int_13+385j
bios:CFCE		  jmp	  l47
bios:CFD1 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:CFD1
bios:CFD1 l42:							      ;	CODE XREF: int_13+373j
bios:CFD1		  call	  get_diskette_params
bios:CFD4		  call	  sub_FD297
bios:CFD7		  jb	  short	l41
bios:CFD9		  mov	  al, 4Dh ; 'M'
bios:CFDB		  call	  sub_FD1EB
bios:CFDE		  jb	  short	l41
bios:CFE0		  mov	  al, dl
bios:CFE2		  and	  al, 3
bios:CFE4		  shl	  dh, 1
bios:CFE6		  shl	  dh, 1
bios:CFE8		  or	  al, dh
bios:CFEA		  call	  sub_FD1EB
bios:CFED		  jb	  short	l47
bios:CFEF		  mov	  bx, 3
bios:CFF2		  mov	  cx, 2
bios:CFF5		  call	  sub_FD3CA
bios:CFF8		  jb	  short	l47
bios:CFFA		  dec	  bx
bios:CFFB		  mov	  dl, es:[bx+si]
bios:CFFE		  cli
bios:CFFF		  mov	  bx, 7
bios:D002		  call	  sub_FD3DC
bios:D005		  jb	  short	l47
bios:D007		  pop	  bx
bios:D008		  pop	  es
bios:D009		  pop	  cx
bios:D00A		  mov	  al, 4
bios:D00C		  mul	  dl
bios:D00E		  mov	  cx, ax
bios:D010		  mov	  al, dh
bios:D012		  mov	  ah, 80h ; '€'
bios:D014		  mov	  dx, 3F5h
bios:D017		  out	  dx, al			      ;	Floppy:	FDC command/data register.
bios:D018
bios:D018 l43:							      ;	CODE XREF: int_13+3D9j
bios:D018		  push	  cx
bios:D019		  xor	  cx, cx
bios:D01B		  dec	  dx
bios:D01C
bios:D01C l44:							      ;	CODE XREF: int_13+3C8j
bios:D01C		  in	  al, dx			      ;	Floppy:	main status reg	bits:
bios:D01C							      ;	0-3: diskette busy
bios:D01C							      ;	4: 1=cntrlr busy
bios:D01C							      ;	5: 1=non-DMA mode
bios:D01C							      ;	6: Data	dir: 1=cntrlr to CPU
bios:D01C							      ;	7: 1=OK	to snd/rcv cmd or data
bios:D01D		  test	  al, ah
bios:D01F		  jnz	  short	l45
bios:D021		  loop	  l44
bios:D023		  or	  byte ptr ds:p400.diskette_last_status, 80h
bios:D028		  jmp	  short	l48
bios:D028 ; END	OF FUNCTION CHUNK FOR int_13
bios:D028 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D02A		  db  90h ; 
bios:D02B ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D02B ; START OF FUNCTION CHUNK FOR	int_13
bios:D02B
bios:D02B l45:							      ;	CODE XREF: int_13+3C6j
bios:D02B		  mov	  al, es:[bx]
bios:D02E		  inc	  dx
bios:D02F		  out	  dx, al			      ;	Floppy:	FDC command/data register.
bios:D030		  inc	  bx
bios:D031		  pop	  cx
bios:D032		  loop	  l43
bios:D034		  call	  diskette_wait_until_ready
bios:D037		  mov	  cx, 7
bios:D03A		  call	  sub_FD243
bios:D03D		  jb	  short	l49
bios:D03F		  test	  ah, 0C0h
bios:D042		  jz	  short	exit_ok
bios:D044		  call	  sub_FD387
bios:D047		  jmp	  short	l49
bios:D049 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D049
bios:D049 l46:							      ;	CODE XREF: int_13+365j
bios:D049		  mov	  ah, ds:p400.diskette_last_status
bios:D04D		  clc
bios:D04E		  jmp	  short	exit
bios:D04E ; END	OF FUNCTION CHUNK FOR int_13
bios:D04E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D050		  db  90h ; 
bios:D051 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D051 ; START OF FUNCTION CHUNK FOR	int_13
bios:D051
bios:D051 l47:							      ;	CODE XREF: int_13:l41j
bios:D051							      ;	int_13+394j
bios:D051							      ;	int_13+39Fj
bios:D051							      ;	int_13+3ACj
bios:D051		  pop	  bx
bios:D052		  pop	  es
bios:D053
bios:D053 l48:							      ;	CODE XREF: int_13+3CFj
bios:D053		  pop	  ax
bios:D054
bios:D054 l49:							      ;	CODE XREF: int_13+3E4j
bios:D054							      ;	int_13+3EEj
bios:D054		  mov	  ah, ds:p400.diskette_last_status
bios:D058		  stc
bios:D059		  jmp	  short	exit
bios:D059 ; END	OF FUNCTION CHUNK FOR int_13
bios:D059 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D05B		  db  90h ; 
bios:D05C ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D05C ; START OF FUNCTION CHUNK FOR	int_13
bios:D05C
bios:D05C int_13_05:						      ;	CODE XREF: int_13:no_dmaj
bios:D05C							      ;	DATA XREF: int_13+2Co
bios:D05C		  cmp	  dl, 4
bios:D05F		  jb	  short	l50
bios:D061		  mov	  byte ptr ds:p400.diskette_last_status, 1
bios:D066		  jmp	  short	exit_ok
bios:D066 ; END	OF FUNCTION CHUNK FOR int_13
bios:D066 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D068		  db  90h ; 
bios:D069 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D069 ; START OF FUNCTION CHUNK FOR	int_13
bios:D069
bios:D069 l50:							      ;	CODE XREF: int_13+406j
bios:D069		  mov	  byte ptr ds:p400.diskette_last_status, 0
bios:D06E		  mov	  ah, 4Ah ; 'J'
bios:D070		  call	  diskette_no_dma_functions
bios:D073		  jnb	  short	l51
bios:D075		  jmp	  short	exit_error
bios:D075 ; END	OF FUNCTION CHUNK FOR int_13
bios:D075 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D077		  db  90h ; 
bios:D078 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D078 ; START OF FUNCTION CHUNK FOR	int_13
bios:D078
bios:D078 l51:							      ;	CODE XREF: int_13+41Aj
bios:D078		  call	  get_diskette_params
bios:D07B		  call	  sub_FD297
bios:D07E		  jb	  short	exit_error
bios:D080		  mov	  al, 4Dh ; 'M'
bios:D082		  call	  sub_FD1EB
bios:D085		  jb	  short	exit_error
bios:D087		  mov	  al, dl
bios:D089		  and	  al, 3
bios:D08B		  shl	  dh, 1
bios:D08D		  shl	  dh, 1
bios:D08F		  or	  al, dh
bios:D091		  call	  sub_FD1EB
bios:D094		  jb	  short	exit_error
bios:D096		  mov	  bx, 3
bios:D099		  mov	  cx, 2
bios:D09C		  call	  sub_FD3CA
bios:D09F		  jb	  short	exit_error
bios:D0A1		  mov	  bx, 7
bios:D0A4		  call	  sub_FD3CA
bios:D0A7		  jb	  short	exit_error
bios:D0A9		  call	  diskette_wait_until_op_finished
bios:D0AC		  jb	  short	exit_error
bios:D0AE		  mov	  cx, 7
bios:D0B1		  call	  sub_FD243
bios:D0B4		  jb	  short	exit_error
bios:D0B6		  test	  ah, 0C0h
bios:D0B9		  jz	  short	exit_ok
bios:D0BB		  call	  sub_FD387
bios:D0BE		  jmp	  short	exit_error
bios:D0C0 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D0C0
bios:D0C0 exit_ok:						      ;	CODE XREF: int_13+3E9j
bios:D0C0							      ;	int_13+40Dj
bios:D0C0							      ;	int_13+460j
bios:D0C0		  mov	  ah, ds:p400.diskette_last_status
bios:D0C4		  clc
bios:D0C5		  jmp	  short	exit
bios:D0C7 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D0C7
bios:D0C7 exit_error:						      ;	CODE XREF: int_13+41Cj
bios:D0C7							      ;	int_13+425j
bios:D0C7							      ;	int_13+42Cj
bios:D0C7							      ;	int_13+43Bj
bios:D0C7							      ;	int_13+446j
bios:D0C7							      ;	int_13+44Ej ...
bios:D0C7		  mov	  ah, ds:p400.diskette_last_status
bios:D0CB		  stc
bios:D0CC
bios:D0CC exit:							      ;	CODE XREF: int_13+3Fj
bios:D0CC							      ;	int_13+B4j
bios:D0CC							      ;	int_13+BEj
bios:D0CC							      ;	int_13+CDj
bios:D0CC							      ;	int_13+D1j
bios:D0CC							      ;	int_13+168j ...
bios:D0CC		  pushf
bios:D0CD		  push	  ax
bios:D0CE		  call	  get_diskette_params
bios:D0D1		  mov	  al, es:[si+2]
bios:D0D5		  cli
bios:D0D6		  mov	  ds:p400.diskette_motor_off_timeout, al
bios:D0D9		  sti
bios:D0DA		  pop	  ax
bios:D0DB		  and	  byte ptr ds:p400.diskette_recalibrate_status,	7Fh
bios:D0E0		  popf
bios:D0E1		  pop	  es
bios:D0E2		  pop	  ds
bios:D0E3		  pop	  bp
bios:D0E4		  pop	  di
bios:D0E5		  pop	  si
bios:D0E6		  pop	  dx
bios:D0E7		  pop	  cx
bios:D0E8		  pop	  bx
bios:D0E9		  retf	  2
bios:D0E9 ; END	OF FUNCTION CHUNK FOR int_13
bios:D0EC
bios:D0EC ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:D0EC
bios:D0EC ; this interrupt is generated	by the floppy disk controller on
bios:D0EC ; completion of an operation
bios:D0EC
bios:D0EC int_0e	  proc far				      ;	DATA XREF: bios:FEFFo
bios:D0EC		  push	  ax
bios:D0ED		  push	  dx
bios:D0EE		  push	  ds
bios:D0EF		  mov	  ax, 40h ; '@'
bios:D0F2		  mov	  ds, ax			      ;	ds = 0x40
bios:D0F4		  or	  byte ptr ds:p400.diskette_recalibrate_status,	80h ; signal that interrupt was	triggered
bios:D0F9		  mov	  al, 20h ; ' '
bios:D0FB		  mov	  dx, 20h ; ' '
bios:D0FE		  out	  dx, al			      ;	Interrupt controller, 8259A.
bios:D0FF		  pop	  ds
bios:D100		  pop	  dx
bios:D101		  pop	  ax
bios:D102		  iret
bios:D102 int_0e	  endp
bios:D102
bios:D103
bios:D103 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:D103
bios:D103
bios:D103 diskette_wait_until_op_finished proc near		      ;	CODE XREF: int_13+7Bp
bios:D103							      ;	int_13+143p
bios:D103							      ;	int_13+450p
bios:D103							      ;	sub_FD297+67p
bios:D103							      ;	sub_FD297+97p
bios:D103		  push	  cx
bios:D104		  mov	  cx, 2
bios:D107		  xor	  bx, bx
bios:D109
bios:D109 l0:							      ;	CODE XREF: diskette_wait_until_op_finished+11j
bios:D109							      ;	diskette_wait_until_op_finished+13j
bios:D109		  test	  byte ptr ds:p400.diskette_recalibrate_status,	80h ; interrupt	triggered?
bios:D10E		  jnz	  short	ok			      ;	yes, exit
bios:D110		  dec	  bx
bios:D111		  cmp	  bx, 0
bios:D114		  jnz	  short	l0
bios:D116		  loop	  l0
bios:D118		  or	  byte ptr ds:p400.diskette_last_status, 80h ; timeout
bios:D11D		  stc
bios:D11E		  jmp	  short	exit
bios:D120 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D120
bios:D120 ok:							      ;	CODE XREF: diskette_wait_until_op_finished+Bj
bios:D120		  and	  byte ptr ds:p400.diskette_recalibrate_status,	7Fh ; mask off "interrupt triggered"
bios:D125		  clc
bios:D126
bios:D126 exit:							      ;	CODE XREF: diskette_wait_until_op_finished+1Bj
bios:D126		  pop	  cx
bios:D127		  retn
bios:D127 diskette_wait_until_op_finished endp
bios:D127
bios:D128
bios:D128 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:D128
bios:D128
bios:D128 diskette_wait_until_ready proc near			      ;	CODE XREF: int_13+2B9p
bios:D128							      ;	int_13+3DBp
bios:D128		  push	  dx
bios:D129		  push	  ax
bios:D12A		  push	  cx
bios:D12B		  mov	  cx, 2
bios:D12E		  xor	  bx, bx
bios:D130		  mov	  dx, 3F4h
bios:D133
bios:D133 l0:							      ;	CODE XREF: diskette_wait_until_ready+14j
bios:D133							      ;	diskette_wait_until_ready+16j
bios:D133							      ;	diskette_wait_until_ready+28j
bios:D133		  in	  al, dx			      ;	Floppy:	main status reg	bits:
bios:D133							      ;	0-3: diskette busy
bios:D133							      ;	4: 1=cntrlr busy
bios:D133							      ;	5: 1=non-DMA mode
bios:D133							      ;	6: Data	dir: 1=cntrlr to CPU
bios:D133							      ;	7: 1=OK	to snd/rcv cmd or data
bios:D134		  test	  al, 80h
bios:D136		  jnz	  short	l1
bios:D138		  dec	  bx
bios:D139		  cmp	  bx, 0
bios:D13C		  jnz	  short	l0			      ;	wait until Ok to snd/rcv cmd/data
bios:D13E		  loop	  l0
bios:D140		  or	  byte ptr ds:p400.diskette_last_status, 80h ; timeout flag
bios:D145		  stc
bios:D146		  jmp	  short	exit
bios:D146 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D148		  db  90h ; 
bios:D149 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D149
bios:D149 l1:							      ;	CODE XREF: diskette_wait_until_ready+Ej
bios:D149		  test	  al, 20h ; ' '
bios:D14B		  jz	  short	ok
bios:D14D		  inc	  dx
bios:D14E		  in	  al, dx			      ;	Floppy:	FDC command/data register.
bios:D14F		  dec	  dx
bios:D150		  jmp	  short	l0
bios:D152 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D152
bios:D152 ok:							      ;	CODE XREF: diskette_wait_until_ready+23j
bios:D152		  and	  byte ptr ds:p400.diskette_recalibrate_status,	7Fh ; mask off "interrupt triggered"
bios:D157		  clc
bios:D158
bios:D158 exit:							      ;	CODE XREF: diskette_wait_until_ready+1Ej
bios:D158		  pop	  cx
bios:D159		  pop	  ax
bios:D15A		  pop	  dx
bios:D15B		  retn
bios:D15B diskette_wait_until_ready endp
bios:D15B
bios:D15C
bios:D15C ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:D15C
bios:D15C ; Attributes:	bp-based frame
bios:D15C
bios:D15C diskette_no_dma_functions proc near			      ;	CODE XREF: int_13+D6p
bios:D15C							      ;	int_13+DFp
bios:D15C							      ;	int_13+E8p
bios:D15C							      ;	int_13+417p
bios:D15C		  push	  cx
bios:D15D		  push	  dx
bios:D15E		  push	  es
bios:D15F		  push	  bx
bios:D160		  push	  ax
bios:D161		  mov	  bp, sp
bios:D163		  call	  get_diskette_params
bios:D166		  mov	  cl, es:[si+3]
bios:D16A		  mov	  dx, 80h ; '€'
bios:D16D		  shl	  dx, cl
bios:D16F		  mov	  ax, [bp+0]
bios:D172		  xor	  ah, ah
bios:D174		  mul	  dx
bios:D176		  cmp	  dx, 0
bios:D179		  jnz	  short	l2
bios:D17B		  pop	  cx
bios:D17C		  pop	  bx
bios:D17D		  pop	  es
bios:D17E		  push	  es
bios:D17F		  push	  bx
bios:D180		  push	  cx
bios:D181		  mov	  dx, ax
bios:D183		  mov	  ax, es
bios:D185		  mov	  cl, 4
bios:D187		  shl	  ax, cl
bios:D189		  add	  bx, ax
bios:D18B		  mov	  ax, dx
bios:D18D		  dec	  dx
bios:D18E		  add	  bx, dx
bios:D190		  jb	  short	l2
bios:D192		  dec	  ax
bios:D193		  cli
bios:D194		  mov	  dx, 0Ch
bios:D197		  out	  dx, al			      ;	DMA controller,	8237A-5.
bios:D197							      ;	clear byte pointer flip-flop.
bios:D198		  mov	  dx, 5
bios:D19B		  out	  dx, al			      ;	DMA controller,	8237A-5.
bios:D19B							      ;	channel	2 base address and word	count
bios:D19C		  xchg	  ah, al
bios:D19E		  out	  dx, al			      ;	DMA controller,	8237A-5.
bios:D19E							      ;	channel	2 base address and word	count
bios:D19F		  pop	  ax
bios:D1A0		  xchg	  ah, al
bios:D1A2		  mov	  dx, 0Bh
bios:D1A5		  out	  dx, al			      ;	DMA 8237A-5. mode register bits:
bios:D1A5							      ;	0-1: channel (00=0; 01=1; 10=2;	11=3)
bios:D1A5							      ;	2-3: transfer type (00=verify=Nop; 01=write; 10=read)
bios:D1A5							      ;	4: 1=enable auto-initialization
bios:D1A5							      ;	5: 1=address increment;	0=address decrement
bios:D1A5							      ;	6-7: 00=demand mode; 01=single;	10=block; 11=cascade
bios:D1A6		  pop	  bx
bios:D1A7		  pop	  es
bios:D1A8		  mov	  ax, es
bios:D1AA		  mov	  cl, 4
bios:D1AC		  shl	  ax, cl
bios:D1AE		  add	  ax, bx
bios:D1B0		  mov	  bx, 0
bios:D1B3		  jnb	  short	l0
bios:D1B5		  mov	  bx, 1
bios:D1B8
bios:D1B8 l0:							      ;	CODE XREF: diskette_no_dma_functions+57j
bios:D1B8		  mov	  dx, 4
bios:D1BB		  out	  dx, al			      ;	DMA controller,	8237A-5.
bios:D1BB							      ;	channel	2 base address
bios:D1BB							      ;	(also sets current address)
bios:D1BC		  xchg	  ah, al
bios:D1BE		  out	  dx, al			      ;	DMA controller,	8237A-5.
bios:D1BE							      ;	channel	2 base address
bios:D1BE							      ;	(also sets current address)
bios:D1BF		  mov	  ax, es
bios:D1C1		  and	  ax, 0F000h
bios:D1C4		  mov	  cl, 0Ch
bios:D1C6		  shr	  ax, cl
bios:D1C8		  cmp	  bx, 0
bios:D1CB		  jz	  short	l1
bios:D1CD		  inc	  al
bios:D1CF
bios:D1CF l1:							      ;	CODE XREF: diskette_no_dma_functions+6Fj
bios:D1CF		  mov	  dx, 81h ; ''
bios:D1D2		  out	  dx, al			      ;	DMA page register 74LS612:
bios:D1D2							      ;	Channel	2 (diskette DMA)  (address bits	16-23)
bios:D1D3		  sti
bios:D1D4		  mov	  dx, 0Ah
bios:D1D7		  mov	  al, 2
bios:D1D9		  out	  dx, al			      ;	DMA controller,	8237A-5.
bios:D1D9							      ;	single mask bit	register
bios:D1D9							      ;	0-1: select channel (00=0; 01=1; 10=2; 11=3)
bios:D1D9							      ;	2: 1=set mask for channel; 0=clear mask	(enable)
bios:D1DA		  jmp	  short	ok
bios:D1DC ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D1DC
bios:D1DC l2:							      ;	CODE XREF: diskette_no_dma_functions+1Dj
bios:D1DC							      ;	diskette_no_dma_functions+34j
bios:D1DC		  stc
bios:D1DD		  mov	  byte ptr ds:p400.diskette_last_status, 9
bios:D1E2		  pop	  ax
bios:D1E3		  pop	  bx
bios:D1E4		  pop	  es
bios:D1E5		  jmp	  short	exit
bios:D1E7 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D1E7
bios:D1E7 ok:							      ;	CODE XREF: diskette_no_dma_functions+7Ej
bios:D1E7		  clc
bios:D1E8
bios:D1E8 exit:							      ;	CODE XREF: diskette_no_dma_functions+89j
bios:D1E8		  pop	  dx
bios:D1E9		  pop	  cx
bios:D1EA		  retn
bios:D1EA diskette_no_dma_functions endp
bios:D1EA
bios:D1EB
bios:D1EB ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:D1EB
bios:D1EB
bios:D1EB sub_FD1EB	  proc near				      ;	CODE XREF: int_13+91p
bios:D1EB							      ;	int_13+10Dp
bios:D1EB							      ;	int_13+11Ep
bios:D1EB							      ;	int_13+125p
bios:D1EB							      ;	int_13+12Cp
bios:D1EB							      ;	int_13+133p ...
bios:D1EB		  push	  cx
bios:D1EC		  push	  dx
bios:D1ED		  mov	  ah, al
bios:D1EF		  mov	  dx, 3F4h
bios:D1F2		  xor	  cx, cx
bios:D1F4
bios:D1F4 l0:							      ;	CODE XREF: sub_FD1EB+Ej
bios:D1F4		  in	  al, dx			      ;	Floppy:	main status reg	bits:
bios:D1F4							      ;	0-3: diskette busy
bios:D1F4							      ;	4: 1=cntrlr busy
bios:D1F4							      ;	5: 1=non-DMA mode
bios:D1F4							      ;	6: Data	dir: 1=cntrlr to CPU
bios:D1F4							      ;	7: 1=OK	to snd/rcv cmd or data
bios:D1F5		  test	  al, 80h
bios:D1F7		  jnz	  short	l1
bios:D1F9		  loop	  l0
bios:D1FB		  or	  byte ptr ds:p400.diskette_last_status, 80h
bios:D200		  jmp	  short	exit_error
bios:D202 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D202
bios:D202 l1:							      ;	CODE XREF: sub_FD1EB+Cj
bios:D202		  in	  al, dx			      ;	Floppy:	main status reg	bits:
bios:D202							      ;	0-3: diskette busy
bios:D202							      ;	4: 1=cntrlr busy
bios:D202							      ;	5: 1=non-DMA mode
bios:D202							      ;	6: Data	dir: 1=cntrlr to CPU
bios:D202							      ;	7: 1=OK	to snd/rcv cmd or data
bios:D203		  test	  al, 40h
bios:D205		  jz	  short	l2
bios:D207		  or	  byte ptr ds:p400.diskette_last_status, 20h
bios:D20C		  jmp	  short	exit_error
bios:D20E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D20E
bios:D20E l2:							      ;	CODE XREF: sub_FD1EB+1Aj
bios:D20E		  mov	  dx, 3F5h
bios:D211		  mov	  al, ah
bios:D213		  out	  dx, al			      ;	Floppy:	FDC command/data register.
bios:D214		  clc
bios:D215		  jmp	  short	exit
bios:D217 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D217
bios:D217 exit_error:						      ;	CODE XREF: sub_FD1EB+15j
bios:D217							      ;	sub_FD1EB+21j
bios:D217		  stc
bios:D218
bios:D218 exit:							      ;	CODE XREF: sub_FD1EB+2Aj
bios:D218		  pop	  dx
bios:D219		  pop	  cx
bios:D21A		  retn
bios:D21A sub_FD1EB	  endp
bios:D21A
bios:D21B
bios:D21B ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:D21B
bios:D21B
bios:D21B sub_FD21B	  proc near				      ;	CODE XREF: sub_FD3DC+11p
bios:D21B		  push	  cx
bios:D21C		  push	  dx
bios:D21D		  mov	  dx, 3F4h
bios:D220		  xor	  cx, cx
bios:D222
bios:D222 l0:							      ;	CODE XREF: sub_FD21B+Cj
bios:D222		  in	  al, dx			      ;	Floppy:	main status reg	bits:
bios:D222							      ;	0-3: diskette busy
bios:D222							      ;	4: 1=cntrlr busy
bios:D222							      ;	5: 1=non-DMA mode
bios:D222							      ;	6: Data	dir: 1=cntrlr to CPU
bios:D222							      ;	7: 1=OK	to snd/rcv cmd or data
bios:D223		  test	  al, 80h
bios:D225		  jnz	  short	l1
bios:D227		  loop	  l0
bios:D229		  or	  byte ptr ds:p400.diskette_last_status, 80h
bios:D22E		  jmp	  short	error
bios:D230 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D230
bios:D230 l1:							      ;	CODE XREF: sub_FD21B+Aj
bios:D230		  in	  al, dx			      ;	Floppy:	main status reg	bits:
bios:D230							      ;	0-3: diskette busy
bios:D230							      ;	4: 1=cntrlr busy
bios:D230							      ;	5: 1=non-DMA mode
bios:D230							      ;	6: Data	dir: 1=cntrlr to CPU
bios:D230							      ;	7: 1=OK	to snd/rcv cmd or data
bios:D231		  test	  al, 40h
bios:D233		  jz	  short	ok
bios:D235		  or	  byte ptr ds:p400.diskette_last_status, 20h
bios:D23A		  jmp	  short	error
bios:D23C ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D23C
bios:D23C ok:							      ;	CODE XREF: sub_FD21B+18j
bios:D23C		  clc
bios:D23D		  jmp	  short	exit
bios:D23F ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D23F
bios:D23F error:						      ;	CODE XREF: sub_FD21B+13j
bios:D23F							      ;	sub_FD21B+1Fj
bios:D23F		  stc
bios:D240
bios:D240 exit:							      ;	CODE XREF: sub_FD21B+22j
bios:D240		  pop	  dx
bios:D241		  pop	  cx
bios:D242		  retn
bios:D242 sub_FD21B	  endp
bios:D242
bios:D243
bios:D243 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:D243
bios:D243
bios:D243 sub_FD243	  proc near				      ;	CODE XREF: int_13+14Bp
bios:D243							      ;	int_13+2C1p
bios:D243							      ;	int_13+3E1p
bios:D243							      ;	int_13+458p
bios:D243							      ;	sub_FD360+13p
bios:D243		  push	  dx
bios:D244		  push	  es
bios:D245		  mov	  ax, ds
bios:D247		  mov	  es, ax
bios:D249		  lea	  di, ds:p400.diskette_command_bytes
bios:D24D		  mov	  dx, 3F4h
bios:D250		  xor	  bx, bx
bios:D252
bios:D252 l0:							      ;	CODE XREF: sub_FD243+15j
bios:D252		  in	  al, dx			      ;	Floppy:	main status reg	bits:
bios:D252							      ;	0-3: diskette busy
bios:D252							      ;	4: 1=cntrlr busy
bios:D252							      ;	5: 1=non-DMA mode
bios:D252							      ;	6: Data	dir: 1=cntrlr to CPU
bios:D252							      ;	7: 1=OK	to snd/rcv cmd or data
bios:D253		  test	  al, 80h
bios:D255		  jnz	  short	l1
bios:D257		  dec	  bx
bios:D258		  jnz	  short	l0
bios:D25A		  or	  byte ptr ds:p400.diskette_last_status, 80h
bios:D25F		  jmp	  short	error
bios:D261 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D261
bios:D261 l1:							      ;	CODE XREF: sub_FD243+12j
bios:D261		  in	  al, dx			      ;	Floppy:	main status reg	bits:
bios:D261							      ;	0-3: diskette busy
bios:D261							      ;	4: 1=cntrlr busy
bios:D261							      ;	5: 1=non-DMA mode
bios:D261							      ;	6: Data	dir: 1=cntrlr to CPU
bios:D261							      ;	7: 1=OK	to snd/rcv cmd or data
bios:D262		  test	  al, 40h
bios:D264		  jnz	  short	l2
bios:D266		  or	  byte ptr ds:p400.diskette_last_status, 20h
bios:D26B		  jmp	  short	error
bios:D26D ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D26D
bios:D26D l2:							      ;	CODE XREF: sub_FD243+21j
bios:D26D							      ;	sub_FD243+3Ej
bios:D26D		  mov	  dx, 3F5h
bios:D270		  in	  al, dx			      ;	Floppy:	FDC command/data register.
bios:D271		  stosb
bios:D272		  push	  cx
bios:D273		  mov	  cx, 8
bios:D276
bios:D276 l3:							      ;	CODE XREF: sub_FD243:l3j
bios:D276		  loop	  l3				      ;	delay
bios:D278		  pop	  cx
bios:D279		  mov	  dx, 3F4h
bios:D27C		  in	  al, dx			      ;	Floppy:	main status reg	bits:
bios:D27C							      ;	0-3: diskette busy
bios:D27C							      ;	4: 1=cntrlr busy
bios:D27C							      ;	5: 1=non-DMA mode
bios:D27C							      ;	6: Data	dir: 1=cntrlr to CPU
bios:D27C							      ;	7: 1=OK	to snd/rcv cmd or data
bios:D27D		  test	  al, 10h
bios:D27F		  jz	  short	l4
bios:D281		  loop	  l2
bios:D283		  or	  byte ptr ds:p400.diskette_last_status, 20h
bios:D288		  jmp	  short	error
bios:D28A ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D28A
bios:D28A l4:							      ;	CODE XREF: sub_FD243+3Cj
bios:D28A		  lea	  di, ds:p400.diskette_command_bytes
bios:D28E		  mov	  ah, [di]
bios:D290		  clc
bios:D291		  jmp	  short	exit
bios:D293 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D293
bios:D293 error:						      ;	CODE XREF: sub_FD243+1Cj
bios:D293							      ;	sub_FD243+28j
bios:D293							      ;	sub_FD243+45j
bios:D293		  stc
bios:D294
bios:D294 exit:							      ;	CODE XREF: sub_FD243+4Ej
bios:D294		  pop	  es
bios:D295		  pop	  dx
bios:D296		  retn
bios:D296 sub_FD243	  endp
bios:D296
bios:D297
bios:D297 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:D297
bios:D297
bios:D297 sub_FD297	  proc near				      ;	CODE XREF: int_13+108p
bios:D297							      ;	int_13+1ACp
bios:D297							      ;	int_13+37Bp
bios:D297							      ;	int_13+422p
bios:D297		  push	  ax
bios:D298		  push	  cx
bios:D299		  push	  dx
bios:D29A		  mov	  al, 1
bios:D29C		  mov	  cl, dl
bios:D29E		  shl	  al, cl
bios:D2A0		  mov	  ah, al
bios:D2A2		  cli
bios:D2A3		  test	  ds:p400.diskette_motor_status, ah
bios:D2A7		  jnz	  short	l1
bios:D2A9		  mov	  cl, 4
bios:D2AB		  shl	  al, cl
bios:D2AD		  or	  al, 0Ch
bios:D2AF		  or	  al, dl
bios:D2B1		  mov	  dx, 3F2h
bios:D2B4		  out	  dx, al			      ;	Floppy:	digital	output reg bits:
bios:D2B4							      ;	0-1: Drive to select 0-3 (AT: bit 1 not	used)
bios:D2B4							      ;	2:   0=reset diskette controller; 1=enable controller
bios:D2B4							      ;	3:   1=enable diskette DMA and interrupts
bios:D2B4							      ;	4-7: drive motor enable.  Set bits to turn drive ON.
bios:D2B4							      ;
bios:D2B5		  and	  byte ptr ds:p400.diskette_motor_status, 0F0h
bios:D2BA		  or	  ds:p400.diskette_motor_status, ah
bios:D2BE		  mov	  al, es:[si+0Ah]
bios:D2C2		  cmp	  al, 0
bios:D2C4		  jz	  short	l1
bios:D2C6		  xor	  cx, cx
bios:D2C8		  mov	  byte ptr ds:p400.diskette_motor_off_timeout, 0
bios:D2CD		  sti
bios:D2CE
bios:D2CE l0:							      ;	CODE XREF: sub_FD297:l0j
bios:D2CE							      ;	sub_FD297+3Dj
bios:D2CE		  loop	  l0
bios:D2D0		  dec	  al
bios:D2D2		  cmp	  al, 0
bios:D2D4		  jnz	  short	l0
bios:D2D6
bios:D2D6 l1:							      ;	CODE XREF: sub_FD297+10j
bios:D2D6							      ;	sub_FD297+2Dj
bios:D2D6		  mov	  byte ptr ds:p400.diskette_motor_off_timeout, 0FFh
bios:D2DB		  sti
bios:D2DC		  pop	  dx
bios:D2DD		  pop	  cx
bios:D2DE		  push	  cx
bios:D2DF		  push	  dx
bios:D2E0		  mov	  al, 1
bios:D2E2		  mov	  cl, dl
bios:D2E4		  shl	  al, cl
bios:D2E6		  mov	  cl, al
bios:D2E8		  test	  ds:p400.diskette_recalibrate_status, al
bios:D2EC		  jnz	  short	l2
bios:D2EE		  mov	  al, 7
bios:D2F0		  call	  sub_FD1EB
bios:D2F3		  jb	  short	exit_error
bios:D2F5		  mov	  al, dl
bios:D2F7		  and	  al, 3
bios:D2F9		  call	  sub_FD1EB
bios:D2FC		  jb	  short	exit_error
bios:D2FE		  call	  diskette_wait_until_op_finished
bios:D301		  jb	  short	exit_error
bios:D303		  call	  sub_FD360
bios:D306		  jb	  short	exit_error
bios:D308		  test	  ah, 0C0h
bios:D30B		  jnz	  short	exit_error
bios:D30D		  or	  ds:p400.diskette_recalibrate_status, cl
bios:D311
bios:D311 l2:							      ;	CODE XREF: sub_FD297+55j
bios:D311		  mov	  al, 0Fh
bios:D313		  call	  sub_FD1EB
bios:D316		  jb	  short	exit_error
bios:D318		  mov	  al, dl
bios:D31A		  and	  al, 3
bios:D31C		  shl	  dh, 1
bios:D31E		  shl	  dh, 1
bios:D320		  or	  al, dh
bios:D322		  call	  sub_FD1EB
bios:D325		  jb	  short	exit_error
bios:D327		  mov	  al, ch
bios:D329		  call	  sub_FD1EB
bios:D32C		  jb	  short	exit_error
bios:D32E		  call	  diskette_wait_until_op_finished
bios:D331		  jb	  short	exit_error
bios:D333		  call	  sub_FD360
bios:D336		  jb	  short	exit_error
bios:D338		  test	  ah, 0C0h
bios:D33B		  jnz	  short	exit_error
bios:D33D		  mov	  al, es:[si+9]
bios:D341		  cmp	  al, 0
bios:D343		  jz	  short	exit_ok
bios:D345
bios:D345 l3:							      ;	CODE XREF: sub_FD297+B7j
bios:D345		  mov	  cx, 221h
bios:D348
bios:D348 l4:							      ;	CODE XREF: sub_FD297:l4j
bios:D348		  loop	  l4				      ;	delay
bios:D34A		  dec	  al
bios:D34C		  cmp	  al, 0
bios:D34E		  jnz	  short	l3
bios:D350
bios:D350 exit_ok:						      ;	CODE XREF: sub_FD297+ACj
bios:D350		  clc
bios:D351		  jmp	  short	exit
bios:D353 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D353
bios:D353 exit_error:						      ;	CODE XREF: sub_FD297+5Cj
bios:D353							      ;	sub_FD297+65j
bios:D353							      ;	sub_FD297+6Aj
bios:D353							      ;	sub_FD297+6Fj
bios:D353							      ;	sub_FD297+74j
bios:D353							      ;	sub_FD297+7Fj ...
bios:D353		  or	  byte ptr ds:p400.diskette_last_status, 40h
bios:D358		  call	  sub_FD387
bios:D35B		  stc
bios:D35C
bios:D35C exit:							      ;	CODE XREF: sub_FD297+BAj
bios:D35C		  pop	  dx
bios:D35D		  pop	  cx
bios:D35E		  pop	  ax
bios:D35F		  retn
bios:D35F sub_FD297	  endp
bios:D35F
bios:D360
bios:D360 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:D360
bios:D360
bios:D360 sub_FD360	  proc near				      ;	CODE XREF: int_13+7Ep
bios:D360							      ;	sub_FD297+6Cp
bios:D360							      ;	sub_FD297+9Cp
bios:D360		  push	  cx
bios:D361		  push	  si
bios:D362		  lea	  si, ds:p400.diskette_command_bytes
bios:D366		  mov	  ax, [si]
bios:D368		  push	  ax
bios:D369		  mov	  al, 8
bios:D36B		  call	  sub_FD1EB
bios:D36E		  jb	  short	error
bios:D370		  mov	  cx, 2
bios:D373		  call	  sub_FD243
bios:D376		  jb	  short	error
bios:D378		  mov	  ax, [si]
bios:D37A		  xchg	  ah, al
bios:D37C		  pop	  bx
bios:D37D		  mov	  [si],	bx
bios:D37F		  clc
bios:D380		  jmp	  short	exit
bios:D382 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D382
bios:D382 error:						      ;	CODE XREF: sub_FD360+Ej
bios:D382							      ;	sub_FD360+16j
bios:D382		  pop	  bx
bios:D383		  stc
bios:D384
bios:D384 exit:							      ;	CODE XREF: sub_FD360+20j
bios:D384		  pop	  si
bios:D385		  pop	  cx
bios:D386		  retn
bios:D386 sub_FD360	  endp
bios:D386
bios:D387
bios:D387 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:D387
bios:D387
bios:D387 sub_FD387	  proc near				      ;	CODE XREF: int_13+156p
bios:D387							      ;	int_13+2CCp
bios:D387							      ;	int_13+3EBp
bios:D387							      ;	int_13+462p
bios:D387							      ;	sub_FD297+C1p
bios:D387		  lea	  si, ds:p400.diskette_command_bytes
bios:D38B		  mov	  al, [si+1]
bios:D38E		  or	  al, [si+2]
bios:D391		  mov	  cx, 8
bios:D394		  xor	  bx, bx
bios:D396		  and	  al, 0B7h
bios:D398
bios:D398 l0:							      ;	CODE XREF: sub_FD387+18j
bios:D398		  test	  al, 1
bios:D39A		  jnz	  short	l1
bios:D39C		  inc	  bx
bios:D39D		  ror	  al, 1
bios:D39F		  loop	  l0
bios:D3A1		  jmp	  short	exit
bios:D3A3 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D3A3
bios:D3A3 l1:							      ;	CODE XREF: sub_FD387+13j
bios:D3A3		  mov	  al, cs:byte_FD3AD[bx]
bios:D3A8		  or	  ds:p400.diskette_last_status,	al
bios:D3AC
bios:D3AC exit:							      ;	CODE XREF: sub_FD387+1Aj
bios:D3AC		  retn
bios:D3AC sub_FD387	  endp
bios:D3AC
bios:D3AC ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D3AD byte_FD3AD	  db 2					      ;	DATA XREF: sub_FD387:l1r
bios:D3AE		  db	3
bios:D3AF		  db	4
bios:D3B0		  db	0
bios:D3B1		  db	8
bios:D3B2		  db  10h
bios:D3B3		  db	0
bios:D3B4		  db	4
bios:D3B5
bios:D3B5 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:D3B5
bios:D3B5 ; out:
bios:D3B5 ;    es:si ->	table for diskette parameters
bios:D3B5
bios:D3B5 get_diskette_params proc near				      ;	CODE XREF: int_13+105p
bios:D3B5							      ;	int_13+1A9p
bios:D3B5							      ;	diskette_dma_functions+Bp
bios:D3B5							      ;	int_13:l42p
bios:D3B5							      ;	int_13:l51p
bios:D3B5							      ;	int_13+475p ...
bios:D3B5		  push	  ax
bios:D3B6		  xor	  ax, ax
bios:D3B8		  mov	  es, ax			      ;	es = 0x00
bios:D3BA		  push	  bx
bios:D3BB		  mov	  bx, 78h ; 'x'                       ; int 0x1e (diskette parameters)
bios:D3BE		  mov	  si, es:[bx]
bios:D3C1		  mov	  ax, es:[bx+2]
bios:D3C5		  mov	  es, ax
bios:D3C7		  pop	  bx
bios:D3C8		  pop	  ax
bios:D3C9		  retn
bios:D3C9 get_diskette_params endp
bios:D3C9
bios:D3CA
bios:D3CA ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:D3CA
bios:D3CA
bios:D3CA sub_FD3CA	  proc near				      ;	CODE XREF: int_13:l2p
bios:D3CA							      ;	int_13+13Ep
bios:D3CA							      ;	int_13+39Cp
bios:D3CA							      ;	int_13+443p
bios:D3CA							      ;	int_13+44Bp
bios:D3CA		  push	  cx
bios:D3CB		  call	  get_diskette_params
bios:D3CE
bios:D3CE l0:							      ;	CODE XREF: sub_FD3CA+Dj
bios:D3CE		  mov	  al, es:[bx+si]
bios:D3D1		  call	  sub_FD1EB
bios:D3D4		  jb	  short	l1
bios:D3D6		  inc	  bx
bios:D3D7		  loop	  l0
bios:D3D9		  clc
bios:D3DA
bios:D3DA l1:							      ;	CODE XREF: sub_FD3CA+Aj
bios:D3DA		  pop	  cx
bios:D3DB		  retn
bios:D3DB sub_FD3CA	  endp
bios:D3DB
bios:D3DC
bios:D3DC ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:D3DC
bios:D3DC
bios:D3DC sub_FD3DC	  proc near				      ;	CODE XREF: int_13+1E2p
bios:D3DC							      ;	int_13+3A9p
bios:D3DC		  push	  cx
bios:D3DD		  call	  get_diskette_params
bios:D3E0		  dec	  cx
bios:D3E1
bios:D3E1 l0:							      ;	CODE XREF: sub_FD3DC+Ej
bios:D3E1		  mov	  al, es:[bx+si]
bios:D3E4		  call	  sub_FD1EB
bios:D3E7		  jb	  short	l1
bios:D3E9		  inc	  bx
bios:D3EA		  loop	  l0
bios:D3EC		  clc
bios:D3ED		  call	  sub_FD21B
bios:D3F0		  jb	  short	l1
bios:D3F2		  mov	  dh, es:[bx+si]
bios:D3F5
bios:D3F5 l1:							      ;	CODE XREF: sub_FD3DC+Bj
bios:D3F5							      ;	sub_FD3DC+14j
bios:D3F5		  pop	  cx
bios:D3F6		  retn
bios:D3F6 sub_FD3DC	  endp
bios:D3F6
bios:D3F7
bios:D3F7 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:D3F7
bios:D3F7
bios:D3F7 sub_FD3F7	  proc near				      ;	CODE XREF: int_13+A3p
bios:D3F7		  push	  cx
bios:D3F8		  call	  get_diskette_params
bios:D3FB		  mov	  al, es:[bx+si]
bios:D3FE		  call	  sub_FD1EB
bios:D401		  jb	  short	l0
bios:D403		  inc	  bx
bios:D404		  mov	  al, es:[bx+si]
bios:D407		  or	  al, 1
bios:D409		  call	  sub_FD1EB
bios:D40C		  jb	  short	l0
bios:D40E		  clc
bios:D40F
bios:D40F l0:							      ;	CODE XREF: sub_FD3F7+Aj
bios:D40F							      ;	sub_FD3F7+15j
bios:D40F		  pop	  cx
bios:D410		  retn
bios:D410 sub_FD3F7	  endp
bios:D410
bios:D410 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D411 value_b000	  dw 0B000h				      ;	DATA XREF: sub_FF4ED:loc_FD413r
bios:D411							      ;	sub_FD5C7+15r
bios:D411							      ;	sub_FD754+CEr
bios:D411							      ;	sub_FD754+127r
bios:D413 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D413 ; START OF FUNCTION CHUNK FOR	sub_FF4ED
bios:D413
bios:D413 loc_FD413:						      ;	CODE XREF: sub_FF4ED+1Dj
bios:D413		  mov	  es, cs:value_b000		      ;	es = 0xb000
bios:D418		  cmp	  word ptr [bp+0], 0
bios:D41C		  jz	  short	loc_FD420
bios:D41E		  mov	  dh, ch
bios:D420
bios:D420 loc_FD420:						      ;	CODE XREF: sub_FF4ED-20D1j
bios:D420		  inc	  dl
bios:D422		  push	  ax
bios:D423		  mov	  ax, ds:p400.crt_nr_cols
bios:D426		  mov	  ch, al
bios:D428		  pop	  ax
bios:D429		  cmp	  dl, ch
bios:D42B		  jnz	  short	loc_FD436
bios:D42D		  inc	  dh
bios:D42F		  xor	  dl, dl
bios:D431		  call	  sub_FD9C8
bios:D434		  jmp	  short	loc_FD447
bios:D436 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D436
bios:D436 loc_FD436:						      ;	CODE XREF: sub_FF4ED-20C2j
bios:D436		  call	  sub_FD9C8
bios:D439		  add	  bx, 0F0h ; 'ğ'
bios:D43D		  cmp	  byte ptr ds:p400.crt_mode, 9
bios:D442		  jb	  short	loc_FD447
bios:D444		  sub	  bx, 50h ; 'P'
bios:D447
bios:D447 loc_FD447:						      ;	CODE XREF: sub_FF4ED-20B9j
bios:D447							      ;	sub_FF4ED-20ABj
bios:D447		  add	  bh, 20h ; ' '
bios:D44A		  cmp	  byte ptr ds:p400.crt_mode, 9
bios:D44F		  jb	  short	loc_FD454
bios:D451		  add	  bh, 40h ; '@'
bios:D454
bios:D454 loc_FD454:						      ;	CODE XREF: sub_FF4ED-209Ej
bios:D454		  push	  bx
bios:D455		  mov	  bp, sp
bios:D457		  xor	  ch, ch
bios:D459		  cmp	  word ptr [bp+4], 0
bios:D45D		  jz	  short	loc_FD465
bios:D45F		  mov	  ch, [bp+11h]
bios:D462		  sub	  ch, [bp+13h]
bios:D465
bios:D465 loc_FD465:						      ;	CODE XREF: sub_FF4ED-2090j
bios:D465		  mov	  dx, [bp+12h]
bios:D468		  add	  dh, ch
bios:D46A		  push	  cx
bios:D46B		  call	  sub_FD9C8
bios:D46E		  mov	  di, bx
bios:D470		  pop	  cx
bios:D471		  mov	  dh, [bp+11h]
bios:D474		  sub	  dh, [bp+13h]
bios:D477		  cmp	  dh, 0
bios:D47A		  jnz	  short	loc_FD47F
bios:D47C		  jmp	  loc_FD547
bios:D47F ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D47F
bios:D47F loc_FD47F:						      ;	CODE XREF: sub_FF4ED-2073j
bios:D47F		  mov	  dx, [bp+12h]
bios:D482		  add	  dh, ch
bios:D484		  cmp	  word ptr [bp+4], 0
bios:D488		  jnz	  short	loc_FD48E
bios:D48A		  add	  dh, al
bios:D48C		  jmp	  short	loc_FD490
bios:D48E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D48E
bios:D48E loc_FD48E:						      ;	CODE XREF: sub_FF4ED-2065j
bios:D48E		  sub	  dh, al
bios:D490
bios:D490 loc_FD490:						      ;	CODE XREF: sub_FF4ED-2061j
bios:D490		  call	  sub_FD9C8
bios:D493		  mov	  si, bx
bios:D495		  xor	  cx, cx
bios:D497		  cmp	  al, 0
bios:D499		  jnz	  short	loc_FD49E
bios:D49B		  jmp	  loc_FD547
bios:D49E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D49E
bios:D49E loc_FD49E:						      ;	CODE XREF: sub_FF4ED-2054j
bios:D49E							      ;	sub_FF4ED-1FAEj
bios:D49E		  push	  si
bios:D49F		  push	  di
bios:D4A0		  push	  ds
bios:D4A1		  xor	  bx, bx
bios:D4A3		  mov	  cl, ah
bios:D4A5		  cmp	  byte ptr ds:p400.crt_mode, 6
bios:D4AA		  jz	  short	loc_FD4BE
bios:D4AC		  cmp	  byte ptr ds:p400.crt_mode, 8
bios:D4B1		  jb	  short	loc_FD4BC
bios:D4B3		  cmp	  byte ptr ds:p400.crt_mode, 0Ah
bios:D4B8		  jnb	  short	loc_FD4BC
bios:D4BA		  shl	  cl, 1
bios:D4BC
bios:D4BC loc_FD4BC:						      ;	CODE XREF: sub_FF4ED-203Cj
bios:D4BC							      ;	sub_FF4ED-2035j
bios:D4BC		  shl	  cl, 1
bios:D4BE
bios:D4BE loc_FD4BE:						      ;	CODE XREF: sub_FF4ED-2043j
bios:D4BE		  mov	  dh, ds:p400.crt_mode
bios:D4C2		  push	  ax
bios:D4C3		  mov	  ax, es
bios:D4C5		  mov	  ds, ax
bios:D4C7		  pop	  ax
bios:D4C8		  mov	  dl, 4
bios:D4CA		  cmp	  dh, 9
bios:D4CD		  jb	  short	loc_FD4D1
bios:D4CF		  mov	  dl, 2
bios:D4D1
bios:D4D1 loc_FD4D1:						      ;	CODE XREF: sub_FF4ED-2020j
bios:D4D1							      ;	sub_FF4ED-1FBBj
bios:D4D1		  mov	  si, [bp-2]
bios:D4D4		  mov	  di, [bp-4]
bios:D4D7		  add	  si, bx
bios:D4D9		  add	  di, bx
bios:D4DB		  push	  cx
bios:D4DC		  rep movsb
bios:D4DE		  pop	  cx
bios:D4DF		  mov	  si, [bp-2]
bios:D4E2		  mov	  di, [bp-4]
bios:D4E5		  add	  si, 2000h
bios:D4E9		  add	  di, 2000h
bios:D4ED		  add	  si, bx
bios:D4EF		  add	  di, bx
bios:D4F1		  push	  cx
bios:D4F2		  rep movsb
bios:D4F4		  pop	  cx
bios:D4F5		  cmp	  dh, 9
bios:D4F8		  jb	  short	loc_FD52D
bios:D4FA		  mov	  si, [bp-2]
bios:D4FD		  mov	  di, [bp-4]
bios:D500		  add	  si, 4000h
bios:D504		  add	  di, 4000h
bios:D508		  add	  si, bx
bios:D50A		  add	  di, bx
bios:D50C		  push	  cx
bios:D50D		  rep movsb
bios:D50F		  pop	  cx
bios:D510		  mov	  si, [bp-2]
bios:D513		  mov	  di, [bp-4]
bios:D516		  add	  si, 6000h
bios:D51A		  add	  di, 6000h
bios:D51E		  add	  si, bx
bios:D520		  add	  di, bx
bios:D522		  push	  cx
bios:D523		  rep movsb
bios:D525		  pop	  cx
bios:D526		  add	  bx, 0A0h ; ' '
bios:D52A		  jmp	  short	loc_FD530
bios:D52A ; END	OF FUNCTION CHUNK FOR sub_FF4ED
bios:D52A ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D52C		  db  90h ; 
bios:D52D ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D52D ; START OF FUNCTION CHUNK FOR	sub_FF4ED
bios:D52D
bios:D52D loc_FD52D:						      ;	CODE XREF: sub_FF4ED-1FF5j
bios:D52D		  add	  bx, 50h ; 'P'
bios:D530
bios:D530 loc_FD530:						      ;	CODE XREF: sub_FF4ED-1FC3j
bios:D530		  dec	  dl
bios:D532		  jnz	  short	loc_FD4D1
bios:D534		  pop	  ds
bios:D535		  cmp	  si, [bp+0]
bios:D538		  jz	  short	loc_FD542
bios:D53A		  pop	  di
bios:D53B		  pop	  si
bios:D53C		  call	  sub_FDB23
bios:D53F		  jmp	  loc_FD49E
bios:D542 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D542
bios:D542 loc_FD542:						      ;	CODE XREF: sub_FF4ED-1FB5j
bios:D542		  pop	  di
bios:D543		  pop	  si
bios:D544		  call	  sub_FDB23
bios:D547
bios:D547 loc_FD547:						      ;	CODE XREF: sub_FF4ED-2071j
bios:D547							      ;	sub_FF4ED-2052j
bios:D547							      ;	sub_FF4ED-1F2Bj
bios:D547		  push	  di
bios:D548		  mov	  al, [bp+15h]
bios:D54B		  xor	  bx, bx
bios:D54D		  mov	  cl, ah
bios:D54F		  mov	  dx, 4
bios:D552		  cmp	  byte ptr ds:p400.crt_mode, 9
bios:D557		  jb	  short	loc_FD55C
bios:D559		  mov	  dx, 2
bios:D55C
bios:D55C loc_FD55C:						      ;	CODE XREF: sub_FF4ED-1F96j
bios:D55C		  cmp	  byte ptr ds:p400.crt_mode, 6
bios:D561		  jz	  short	loc_FD575
bios:D563		  cmp	  byte ptr ds:p400.crt_mode, 8
bios:D568		  jb	  short	loc_FD573
bios:D56A		  cmp	  byte ptr ds:p400.crt_mode, 0Ah
bios:D56F		  jnb	  short	loc_FD573
bios:D571		  shl	  cl, 1
bios:D573
bios:D573 loc_FD573:						      ;	CODE XREF: sub_FF4ED-1F85j
bios:D573							      ;	sub_FF4ED-1F7Ej
bios:D573		  shl	  cl, 1
bios:D575
bios:D575 loc_FD575:						      ;	CODE XREF: sub_FF4ED-1F8Cj
bios:D575							      ;	sub_FF4ED-1F36j
bios:D575		  mov	  di, [bp-2]
bios:D578		  add	  di, bx
bios:D57A		  push	  cx
bios:D57B		  rep stosb
bios:D57D		  pop	  cx
bios:D57E		  mov	  di, [bp-2]
bios:D581		  add	  di, 2000h
bios:D585		  add	  di, bx
bios:D587		  push	  cx
bios:D588		  rep stosb
bios:D58A		  pop	  cx
bios:D58B		  cmp	  byte ptr ds:p400.crt_mode, 9
bios:D590		  jb	  short	loc_FD5B3
bios:D592		  mov	  di, [bp-2]
bios:D595		  add	  di, 4000h
bios:D599		  add	  di, bx
bios:D59B		  push	  cx
bios:D59C		  rep stosb
bios:D59E		  pop	  cx
bios:D59F		  mov	  di, [bp-2]
bios:D5A2		  add	  di, 6000h
bios:D5A6		  add	  di, bx
bios:D5A8		  push	  cx
bios:D5A9		  rep stosb
bios:D5AB		  pop	  cx
bios:D5AC		  add	  bx, 0A0h ; ' '
bios:D5B0		  jmp	  short	loc_FD5B6
bios:D5B0 ; END	OF FUNCTION CHUNK FOR sub_FF4ED
bios:D5B0 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D5B2		  db  90h ; 
bios:D5B3 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D5B3 ; START OF FUNCTION CHUNK FOR	sub_FF4ED
bios:D5B3
bios:D5B3 loc_FD5B3:						      ;	CODE XREF: sub_FF4ED-1F5Dj
bios:D5B3		  add	  bx, 50h ; 'P'
bios:D5B6
bios:D5B6 loc_FD5B6:						      ;	CODE XREF: sub_FF4ED-1F3Dj
bios:D5B6		  dec	  dx
bios:D5B7		  jnz	  short	loc_FD575
bios:D5B9		  cmp	  di, [bp+0]
bios:D5BC		  jz	  short	loc_FD5C4
bios:D5BE		  pop	  di
bios:D5BF		  call	  sub_FDB23
bios:D5C2		  jmp	  short	loc_FD547
bios:D5C4 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D5C4
bios:D5C4 loc_FD5C4:						      ;	CODE XREF: sub_FF4ED-1F31j
bios:D5C4		  pop	  di
bios:D5C5		  pop	  bx
bios:D5C6		  retn
bios:D5C6 ; END	OF FUNCTION CHUNK FOR sub_FF4ED
bios:D5C7
bios:D5C7 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:D5C7
bios:D5C7
bios:D5C7 sub_FD5C7	  proc near				      ;	CODE XREF: int_10_08+Ap
bios:D5C7		  call	  sub_FD9C8
bios:D5CA		  sub	  sp, 0Ah
bios:D5CD		  mov	  bp, sp
bios:D5CF		  push	  bx
bios:D5D0		  xor	  bx, bx
bios:D5D2		  mov	  cx, 8
bios:D5D5		  xor	  dl, dl
bios:D5D7
bios:D5D7 l0:							      ;	CODE XREF: sub_FD5C7:l23j
bios:D5D7		  pop	  si
bios:D5D8		  push	  si
bios:D5D9		  add	  si, bx
bios:D5DB		  push	  es
bios:D5DC		  mov	  es, cs:value_b000
bios:D5E1		  cmp	  byte ptr ds:p400.crt_mode, 6
bios:D5E6		  jnz	  short	l1
bios:D5E8		  jmp	  l17
bios:D5EB ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D5EB
bios:D5EB l1:							      ;	CODE XREF: sub_FD5C7+1Fj
bios:D5EB		  cmp	  byte ptr ds:p400.crt_mode, 0Ah
bios:D5F0		  jnz	  short	l2
bios:D5F2		  jmp	  l14
bios:D5F5 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D5F5
bios:D5F5 l2:							      ;	CODE XREF: sub_FD5C7+29j
bios:D5F5		  cmp	  byte ptr ds:p400.crt_mode, 8
bios:D5FA		  jnb	  short	l7
bios:D5FC		  mov	  ax, es:[si]
bios:D5FF		  inc	  si
bios:D600		  inc	  si
bios:D601		  xchg	  ah, al
bios:D603		  push	  bx
bios:D604		  push	  cx
bios:D605		  mov	  cx, 8
bios:D608		  xor	  dh, dh
bios:D60A
bios:D60A l3:							      ;	CODE XREF: sub_FD5C7:l6j
bios:D60A		  xor	  bl, bl
bios:D60C		  shl	  dh, 1
bios:D60E		  shl	  ax, 1
bios:D610		  jnb	  short	l4
bios:D612		  or	  dl, 2
bios:D615		  mov	  bl, 1
bios:D617
bios:D617 l4:							      ;	CODE XREF: sub_FD5C7+49j
bios:D617		  shl	  ax, 1
bios:D619		  jnb	  short	l5
bios:D61B		  or	  dl, 1
bios:D61E		  mov	  bl, 1
bios:D620
bios:D620 l5:							      ;	CODE XREF: sub_FD5C7+52j
bios:D620		  cmp	  bl, 0
bios:D623		  jz	  short	l6
bios:D625		  or	  dh, 1
bios:D628
bios:D628 l6:							      ;	CODE XREF: sub_FD5C7+5Cj
bios:D628		  loop	  l3
bios:D62A		  pop	  cx
bios:D62B		  pop	  bx
bios:D62C		  mov	  al, dh
bios:D62E		  jmp	  short	l18
bios:D630 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D630
bios:D630 l7:							      ;	CODE XREF: sub_FD5C7+33j
bios:D630		  push	  bx
bios:D631		  push	  cx
bios:D632		  xor	  dh, dh
bios:D634		  mov	  cx, 2
bios:D637
bios:D637 l7_1:							      ;	CODE XREF: sub_FD5C7+AEj
bios:D637		  push	  cx
bios:D638		  mov	  cx, 4
bios:D63B		  mov	  ax, es:[si]
bios:D63E		  inc	  si
bios:D63F		  inc	  si
bios:D640		  xchg	  ah, al
bios:D642
bios:D642 l8:							      ;	CODE XREF: sub_FD5C7:l13j
bios:D642		  xor	  bl, bl
bios:D644		  shl	  dh, 1
bios:D646		  shl	  ax, 1
bios:D648		  jnb	  short	l9
bios:D64A		  or	  dl, 8
bios:D64D		  mov	  bl, 1
bios:D64F
bios:D64F l9:							      ;	CODE XREF: sub_FD5C7+81j
bios:D64F		  shl	  ax, 1
bios:D651		  jnb	  short	l10
bios:D653		  or	  dl, 4
bios:D656		  mov	  bl, 1
bios:D658
bios:D658 l10:							      ;	CODE XREF: sub_FD5C7+8Aj
bios:D658		  shl	  ax, 1
bios:D65A		  jnb	  short	l11
bios:D65C		  or	  dl, 2
bios:D65F		  mov	  bl, 1
bios:D661
bios:D661 l11:							      ;	CODE XREF: sub_FD5C7+93j
bios:D661		  shl	  ax, 1
bios:D663		  jnb	  short	l12
bios:D665		  or	  dl, 1
bios:D668		  mov	  bl, 1
bios:D66A
bios:D66A l12:							      ;	CODE XREF: sub_FD5C7+9Cj
bios:D66A		  cmp	  bl, 0
bios:D66D		  jz	  short	l13
bios:D66F		  or	  dh, 1
bios:D672
bios:D672 l13:							      ;	CODE XREF: sub_FD5C7+A6j
bios:D672		  loop	  l8
bios:D674		  pop	  cx
bios:D675		  loop	  l7_1
bios:D677		  pop	  cx
bios:D678		  pop	  bx
bios:D679		  mov	  al, dh
bios:D67B		  jmp	  short	l18
bios:D67D ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D67D
bios:D67D l14:							      ;	CODE XREF: sub_FD5C7+2Bj
bios:D67D		  mov	  al, es:[si]
bios:D680		  cmp	  al, 0
bios:D682		  jz	  short	l15
bios:D684		  or	  dl, 1
bios:D687
bios:D687 l15:							      ;	CODE XREF: sub_FD5C7+BBj
bios:D687		  mov	  ah, es:[si]
bios:D68A		  cmp	  ah, 0
bios:D68D		  jz	  short	l16
bios:D68F		  or	  dl, 2
bios:D692
bios:D692 l16:							      ;	CODE XREF: sub_FD5C7+C6j
bios:D692		  or	  al, ah
bios:D694		  jmp	  short	l18
bios:D694 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D696		  db  90h ; 
bios:D697 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D697
bios:D697 l17:							      ;	CODE XREF: sub_FD5C7+21j
bios:D697		  mov	  al, es:[si]
bios:D69A		  inc	  si
bios:D69B		  cmp	  al, 0
bios:D69D		  jz	  short	l18
bios:D69F		  mov	  dl, 1
bios:D6A1
bios:D6A1 l18:							      ;	CODE XREF: sub_FD5C7+67j
bios:D6A1							      ;	sub_FD5C7+B4j
bios:D6A1							      ;	sub_FD5C7+CDj
bios:D6A1							      ;	sub_FD5C7+D6j
bios:D6A1		  pop	  es
bios:D6A2		  cmp	  byte ptr ds:p400.crt_mode, 9
bios:D6A7		  jb	  short	l19
bios:D6A9		  cmp	  cx, 5
bios:D6AC		  jnz	  short	l20
bios:D6AE		  sub	  bx, 5F60h
bios:D6B2		  jmp	  short	l22
bios:D6B2 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D6B4		  db  90h ; 
bios:D6B5 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D6B5
bios:D6B5 l19:							      ;	CODE XREF: sub_FD5C7+E0j
bios:D6B5		  test	  cx, 1
bios:D6B9		  jnz	  short	l21
bios:D6BB
bios:D6BB l20:							      ;	CODE XREF: sub_FD5C7+E5j
bios:D6BB		  add	  bh, 20h ; ' '
bios:D6BE		  jmp	  short	l22
bios:D6C0 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D6C0
bios:D6C0 l21:							      ;	CODE XREF: sub_FD5C7+F2j
bios:D6C0		  sub	  bx, 1FB0h
bios:D6C4
bios:D6C4 l22:							      ;	CODE XREF: sub_FD5C7+EBj
bios:D6C4							      ;	sub_FD5C7+F7j
bios:D6C4		  mov	  [bp+0], al
bios:D6C7		  inc	  bp
bios:D6C8		  loop	  l23
bios:D6CA		  jmp	  short	l24
bios:D6CA ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D6CC		  db  90h ; 
bios:D6CD ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D6CD
bios:D6CD l23:							      ;	CODE XREF: sub_FD5C7+101j
bios:D6CD		  jmp	  l0
bios:D6D0 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D6D0
bios:D6D0 l24:							      ;	CODE XREF: sub_FD5C7+103j
bios:D6D0		  sub	  bp, 8
bios:D6D3		  mov	  [bp+8], dl
bios:D6D6		  xor	  ax, ax
bios:D6D8		  mov	  es, ax
bios:D6DA		  mov	  bx, 110h
bios:D6DD		  mov	  di, es:[bx]
bios:D6E0		  mov	  ax, es:[bx+2]
bios:D6E4		  mov	  es, ax
bios:D6E6		  xor	  cx, cx
bios:D6E8		  push	  ds
bios:D6E9		  mov	  ax, ss
bios:D6EB		  mov	  ds, ax
bios:D6ED		  xor	  ax, ax
bios:D6EF		  jmp	  short	l26
bios:D6F1 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D6F1
bios:D6F1 l25:							      ;	CODE XREF: sub_FD5C7+13Dj
bios:D6F1							      ;	sub_FD5C7+142j
bios:D6F1		  inc	  ax
bios:D6F2		  cmp	  ax, 7Fh ; ''
bios:D6F5		  ja	  short	l28
bios:D6F7
bios:D6F7 l26:							      ;	CODE XREF: sub_FD5C7+128j
bios:D6F7		  mov	  si, bp
bios:D6F9		  mov	  cx, 4
bios:D6FC		  repe cmpsw
bios:D6FE		  jz	  short	l27
bios:D700		  add	  di, cx
bios:D702		  add	  di, cx
bios:D704		  jmp	  short	l25
bios:D706 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D706
bios:D706 l27:							      ;	CODE XREF: sub_FD5C7+137j
bios:D706		  cmp	  cx, 0
bios:D709		  jnz	  short	l25
bios:D70B		  jmp	  short	l33
bios:D70D ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D70D
bios:D70D l28:							      ;	CODE XREF: sub_FD5C7+12Ej
bios:D70D		  xor	  ax, ax
bios:D70F		  mov	  es, ax
bios:D711		  mov	  bx, 7Ch ; '|'
bios:D714		  mov	  di, es:[bx]
bios:D717		  mov	  ax, es:[bx+2]
bios:D71B		  mov	  es, ax
bios:D71D		  xor	  cx, cx
bios:D71F		  mov	  ax, ss
bios:D721		  mov	  ds, ax
bios:D723		  xor	  ax, ax
bios:D725		  jmp	  short	l30
bios:D727 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D727
bios:D727 l29:							      ;	CODE XREF: sub_FD5C7+173j
bios:D727							      ;	sub_FD5C7+178j
bios:D727		  inc	  ax
bios:D728		  cmp	  ax, 7Fh ; ''
bios:D72B		  ja	  short	l32
bios:D72D
bios:D72D l30:							      ;	CODE XREF: sub_FD5C7+15Ej
bios:D72D		  mov	  si, bp
bios:D72F		  mov	  cx, 4
bios:D732		  repe cmpsw
bios:D734		  jz	  short	l31
bios:D736		  add	  di, cx
bios:D738		  add	  di, cx
bios:D73A		  jmp	  short	l29
bios:D73C ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D73C
bios:D73C l31:							      ;	CODE XREF: sub_FD5C7+16Dj
bios:D73C		  cmp	  cx, 0
bios:D73F		  jnz	  short	l29
bios:D741		  add	  ax, 80h ; '€'
bios:D744		  jmp	  short	l33
bios:D746 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D746
bios:D746 l32:							      ;	CODE XREF: sub_FD5C7+164j
bios:D746		  pop	  ds
bios:D747		  xor	  ax, ax
bios:D749		  jmp	  short	l34
bios:D74B ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D74B
bios:D74B l33:							      ;	CODE XREF: sub_FD5C7+144j
bios:D74B							      ;	sub_FD5C7+17Dj
bios:D74B		  pop	  ds
bios:D74C		  mov	  ah, [bp+8]
bios:D74F
bios:D74F l34:							      ;	CODE XREF: sub_FD5C7+182j
bios:D74F		  add	  sp, 0Ah
bios:D752		  pop	  bx
bios:D753		  retn
bios:D753 sub_FD5C7	  endp
bios:D753
bios:D754
bios:D754 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:D754
bios:D754
bios:D754 sub_FD754	  proc near				      ;	CODE XREF: int_10_0a+12p
bios:D754
bios:D754 ; FUNCTION CHUNK AT bios:D91B	SIZE 00000003 BYTES
bios:D754
bios:D754		  mov	  bx, cx
bios:D756		  call	  sub_FDAE9
bios:D759		  push	  cx
bios:D75A		  push	  dx
bios:D75B		  push	  bx
bios:D75C		  push	  ax
bios:D75D		  cmp	  al, 7Fh ; ''
bios:D75F		  jbe	  short	loc_FD777
bios:D761		  pop	  ax
bios:D762		  sub	  al, 80h ; '€'
bios:D764		  push	  ax
bios:D765		  xor	  ax, ax
bios:D767		  mov	  es, ax			      ;	es = 0
bios:D769		  mov	  bx, 7Ch ; '|'                       ; int 0x1f
bios:D76C		  mov	  si, es:[bx]			      ;	int 0x1f offset	(chatset 128-255)
bios:D76F		  mov	  ax, es:[bx+2]			      ;	int 0x1f segment
bios:D773		  mov	  es, ax
bios:D775		  jmp	  short	loc_FD787
bios:D777 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D777
bios:D777 loc_FD777:						      ;	CODE XREF: sub_FD754+Bj
bios:D777		  xor	  ax, ax
bios:D779		  mov	  es, ax
bios:D77B		  mov	  bx, 110h			      ;	int 0x44
bios:D77E		  mov	  si, es:[bx]			      ;	int 0x44 offset	(charset 0-127)
bios:D781		  mov	  ax, es:[bx+2]			      ;	int 0x44 segment
bios:D785		  mov	  es, ax
bios:D787
bios:D787 loc_FD787:						      ;	CODE XREF: sub_FD754+21j
bios:D787		  pop	  ax
bios:D788		  xor	  bh, bh
bios:D78A		  mov	  bl, al
bios:D78C		  shl	  bx, 1
bios:D78E		  shl	  bx, 1
bios:D790		  shl	  bx, 1
bios:D792		  add	  si, bx
bios:D794		  jmp	  short	loc_FD7D1
bios:D796 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D796
bios:D796 loc_FD796:						      ;	CODE XREF: sub_FD754:loc_FD86Cj
bios:D796		  mov	  bp, cx
bios:D798		  pop	  dx
bios:D799		  pop	  cx
bios:D79A		  sub	  si, 8
bios:D79D		  mov	  bx, 0A0h ; ' '
bios:D7A0		  cmp	  byte ptr ds:p400.crt_mode, 8
bios:D7A5		  jz	  short	loc_FD7BB
bios:D7A7		  mov	  bx, 140h
bios:D7AA		  cmp	  byte ptr ds:p400.crt_mode, 9
bios:D7AF		  jz	  short	loc_FD7BB
bios:D7B1		  cmp	  byte ptr ds:p400.crt_mode, 6
bios:D7B6		  jb	  short	loc_FD7BB
bios:D7B8		  mov	  bx, 280h
bios:D7BB
bios:D7BB loc_FD7BB:						      ;	CODE XREF: sub_FD754+51j
bios:D7BB							      ;	sub_FD754+5Bj
bios:D7BB							      ;	sub_FD754+62j
bios:D7BB		  add	  cx, 8
bios:D7BE		  cmp	  cx, bx
bios:D7C0		  jnz	  short	loc_FD7CE
bios:D7C2		  add	  dx, 8
bios:D7C5		  xor	  cx, cx
bios:D7C7		  cmp	  dx, 0C8h ; 'È'
bios:D7CB		  jnz	  short	loc_FD7CE
bios:D7CD		  retn
bios:D7CE ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D7CE
bios:D7CE loc_FD7CE:						      ;	CODE XREF: sub_FD754+6Cj
bios:D7CE							      ;	sub_FD754+77j
bios:D7CE		  push	  cx
bios:D7CF		  push	  dx
bios:D7D0		  push	  bp
bios:D7D1
bios:D7D1 loc_FD7D1:						      ;	CODE XREF: sub_FD754+40j
bios:D7D1		  call	  loc_FD9CB
bios:D7D4		  mov	  di, bx
bios:D7D6		  push	  di
bios:D7D7		  mov	  bp, sp
bios:D7D9		  xor	  bx, bx
bios:D7DB		  mov	  cx, 8
bios:D7DE		  cmp	  byte ptr ds:p400.crt_mode, 8
bios:D7E3		  jnz	  short	loc_FD7E8
bios:D7E5		  jmp	  loc_FD86F
bios:D7E8 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D7E8
bios:D7E8 loc_FD7E8:						      ;	CODE XREF: sub_FD754+8Fj
bios:D7E8		  cmp	  byte ptr ds:p400.crt_mode, 9
bios:D7ED		  jnz	  short	loc_FD7F2
bios:D7EF		  jmp	  short	loc_FD86F
bios:D7EF ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D7F1		  db  90h ; 
bios:D7F2 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D7F2
bios:D7F2 loc_FD7F2:						      ;	CODE XREF: sub_FD754+99j
bios:D7F2		  cmp	  byte ptr ds:p400.crt_mode, 0Ah
bios:D7F7		  jnz	  short	loc_FD7FC
bios:D7F9		  jmp	  loc_FD91B
bios:D7FC ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D7FC
bios:D7FC loc_FD7FC:						      ;	CODE XREF: sub_FD754+A3j
bios:D7FC							      ;	sub_FD754:loc_FD863j
bios:D7FC		  mov	  dl, es:[si]
bios:D7FF		  inc	  si
bios:D800		  cmp	  byte ptr ds:p400.crt_mode, 6
bios:D805		  jz	  short	loc_FD821
bios:D807		  push	  cx
bios:D808		  mov	  cx, 8
bios:D80B		  mov	  al, dl
bios:D80D		  xor	  dx, dx
bios:D80F
bios:D80F loc_FD80F:						      ;	CODE XREF: sub_FD754:loc_FD81Ej
bios:D80F		  shl	  dx, 1
bios:D811		  shl	  dx, 1
bios:D813		  shl	  al, 1
bios:D815		  jnb	  short	loc_FD81E
bios:D817		  push	  ax
bios:D818		  and	  ah, 3
bios:D81B		  or	  dl, ah
bios:D81D		  pop	  ax
bios:D81E
bios:D81E loc_FD81E:						      ;	CODE XREF: sub_FD754+C1j
bios:D81E		  loop	  loc_FD80F
bios:D820		  pop	  cx
bios:D821
bios:D821 loc_FD821:						      ;	CODE XREF: sub_FD754+B1j
bios:D821		  push	  es
bios:D822		  mov	  es, cs:value_b000
bios:D827		  push	  ax
bios:D828		  xchg	  ax, dx
bios:D829		  mov	  di, [bp+0]
bios:D82C		  add	  di, bx
bios:D82E		  cmp	  byte ptr ds:p400.crt_mode, 6
bios:D833		  jz	  short	loc_FD846
bios:D835		  xchg	  ah, al
bios:D837		  test	  dh, 80h
bios:D83A		  jz	  short	loc_FD843
bios:D83C		  xor	  es:[di], ax
bios:D83F		  inc	  di
bios:D840		  inc	  di
bios:D841		  jmp	  short	loc_FD852
bios:D843 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D843
bios:D843 loc_FD843:						      ;	CODE XREF: sub_FD754+E6j
bios:D843		  stosw
bios:D844		  jmp	  short	loc_FD852
bios:D846 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D846
bios:D846 loc_FD846:						      ;	CODE XREF: sub_FD754+DFj
bios:D846		  test	  dh, 80h
bios:D849		  jz	  short	loc_FD851
bios:D84B		  xor	  es:[di], al
bios:D84E		  inc	  di
bios:D84F		  jmp	  short	loc_FD852
bios:D851 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D851
bios:D851 loc_FD851:						      ;	CODE XREF: sub_FD754+F5j
bios:D851		  stosb
bios:D852
bios:D852 loc_FD852:						      ;	CODE XREF: sub_FD754+EDj
bios:D852							      ;	sub_FD754+F0j
bios:D852							      ;	sub_FD754+FBj
bios:D852		  pop	  ax
bios:D853		  pop	  es
bios:D854		  test	  cx, 1
bios:D858		  jnz	  short	loc_FD85F
bios:D85A		  add	  bh, 20h ; ' '
bios:D85D		  jmp	  short	loc_FD863
bios:D85F ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D85F
bios:D85F loc_FD85F:						      ;	CODE XREF: sub_FD754+104j
bios:D85F		  sub	  bx, 1FB0h
bios:D863
bios:D863 loc_FD863:						      ;	CODE XREF: sub_FD754+109j
bios:D863		  loop	  loc_FD7FC
bios:D865
bios:D865 loc_FD865:						      ;	CODE XREF: sub_FD754+198j
bios:D865		  pop	  di
bios:D866		  pop	  cx
bios:D867		  loop	  loc_FD86C
bios:D869		  pop	  dx
bios:D86A		  pop	  cx
bios:D86B		  retn
bios:D86C ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D86C
bios:D86C loc_FD86C:						      ;	CODE XREF: sub_FD754+113j
bios:D86C		  jmp	  loc_FD796
bios:D86F ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D86F
bios:D86F loc_FD86F:						      ;	CODE XREF: sub_FD754+91j
bios:D86F							      ;	sub_FD754+9Bj
bios:D86F							      ;	sub_FD754:loc_FD91Bj
bios:D86F		  mov	  cx, 8
bios:D872
bios:D872 loc_FD872:						      ;	CODE XREF: sub_FD754:loc_FD8EAj
bios:D872		  push	  cx
bios:D873		  mov	  dl, es:[si]
bios:D876		  inc	  si
bios:D877		  mov	  al, dl
bios:D879		  push	  es
bios:D87A		  push	  bx
bios:D87B		  mov	  es, cs:value_b000
bios:D880		  mov	  di, [bp+0]
bios:D883		  add	  di, bx
bios:D885		  cmp	  byte ptr ds:p400.crt_mode, 0Ah
bios:D88A		  jnz	  short	loc_FD8AF
bios:D88C		  xchg	  ax, dx
bios:D88D		  mov	  ah, al
bios:D88F		  test	  dh, 1
bios:D892		  jnz	  short	loc_FD896
bios:D894		  mov	  al, 0
bios:D896
bios:D896 loc_FD896:						      ;	CODE XREF: sub_FD754+13Ej
bios:D896		  test	  dh, 2
bios:D899		  jnz	  short	loc_FD89D
bios:D89B		  mov	  ah, 0
bios:D89D
bios:D89D loc_FD89D:						      ;	CODE XREF: sub_FD754+145j
bios:D89D		  test	  dh, 80h
bios:D8A0		  jz	  short	loc_FD8AA
bios:D8A2		  xor	  es:[di], ax
bios:D8A5		  inc	  di
bios:D8A6		  inc	  di
bios:D8A7		  jmp	  short	loc_FD8AB
bios:D8A7 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D8A9		  db  90h ; 
bios:D8AA ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D8AA
bios:D8AA loc_FD8AA:						      ;	CODE XREF: sub_FD754+14Cj
bios:D8AA		  stosw
bios:D8AB
bios:D8AB loc_FD8AB:						      ;	CODE XREF: sub_FD754+153j
bios:D8AB		  xchg	  ax, dx
bios:D8AC		  jmp	  short	loc_FD8D0
bios:D8AC ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D8AE		  db  90h ; 
bios:D8AF ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D8AF
bios:D8AF loc_FD8AF:						      ;	CODE XREF: sub_FD754+136j
bios:D8AF		  call	  sub_FD900
bios:D8B2		  mov	  dx, bx
bios:D8B4		  call	  sub_FD900
bios:D8B7		  mov	  cx, 2
bios:D8BA
bios:D8BA loc_FD8BA:						      ;	CODE XREF: sub_FD754+17Aj
bios:D8BA		  xchg	  ax, dx
bios:D8BB		  xchg	  ah, al
bios:D8BD		  test	  dh, 80h
bios:D8C0		  jz	  short	loc_FD8CA
bios:D8C2		  xor	  es:[di], ax
bios:D8C5		  inc	  di
bios:D8C6		  inc	  di
bios:D8C7		  jmp	  short	loc_FD8CB
bios:D8C7 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D8C9		  db  90h ; 
bios:D8CA ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D8CA
bios:D8CA loc_FD8CA:						      ;	CODE XREF: sub_FD754+16Cj
bios:D8CA		  stosw
bios:D8CB
bios:D8CB loc_FD8CB:						      ;	CODE XREF: sub_FD754+173j
bios:D8CB		  xchg	  ax, dx
bios:D8CC		  mov	  dx, bx
bios:D8CE		  loop	  loc_FD8BA
bios:D8D0
bios:D8D0 loc_FD8D0:						      ;	CODE XREF: sub_FD754+158j
bios:D8D0		  pop	  bx
bios:D8D1		  pop	  es
bios:D8D2		  pop	  cx
bios:D8D3		  cmp	  byte ptr ds:p400.crt_mode, 8
bios:D8D8		  jnz	  short	loc_FD8EF
bios:D8DA		  test	  cx, 1
bios:D8DE		  jnz	  short	loc_FD8E6
bios:D8E0		  add	  bh, 20h ; ' '
bios:D8E3		  jmp	  short	loc_FD8EA
bios:D8E3 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D8E5		  db  90h ; 
bios:D8E6 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D8E6
bios:D8E6 loc_FD8E6:						      ;	CODE XREF: sub_FD754+18Aj
bios:D8E6		  sub	  bx, 1FB0h
bios:D8EA
bios:D8EA loc_FD8EA:						      ;	CODE XREF: sub_FD754+18Fj
bios:D8EA							      ;	sub_FD754:loc_FD8FEj
bios:D8EA		  loop	  loc_FD872
bios:D8EC		  jmp	  loc_FD865
bios:D8EF ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D8EF
bios:D8EF loc_FD8EF:						      ;	CODE XREF: sub_FD754+184j
bios:D8EF		  cmp	  cx, 5
bios:D8F2		  jnz	  short	loc_FD8FB
bios:D8F4		  sub	  bx, 5F60h
bios:D8F8		  jmp	  short	loc_FD8FE
bios:D8F8 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D8FA		  db  90h ; 
bios:D8FB ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D8FB
bios:D8FB loc_FD8FB:						      ;	CODE XREF: sub_FD754+19Ej
bios:D8FB		  add	  bh, 20h ; ' '
bios:D8FE
bios:D8FE loc_FD8FE:						      ;	CODE XREF: sub_FD754+1A4j
bios:D8FE		  jmp	  short	loc_FD8EA
bios:D8FE sub_FD754	  endp
bios:D8FE
bios:D900
bios:D900 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:D900
bios:D900
bios:D900 sub_FD900	  proc near				      ;	CODE XREF: sub_FD754:loc_FD8AFp
bios:D900							      ;	sub_FD754+160p
bios:D900		  xor	  bx, bx
bios:D902		  mov	  cx, 4
bios:D905
bios:D905 l0:							      ;	CODE XREF: sub_FD900:l1j
bios:D905		  shl	  bx, 1
bios:D907		  shl	  bx, 1
bios:D909		  shl	  bx, 1
bios:D90B		  shl	  bx, 1
bios:D90D		  shl	  al, 1
bios:D90F		  jnb	  short	l1
bios:D911		  push	  ax
bios:D912		  and	  ah, 0Fh
bios:D915		  or	  bl, ah
bios:D917		  pop	  ax
bios:D918
bios:D918 l1:							      ;	CODE XREF: sub_FD900+Fj
bios:D918		  loop	  l0
bios:D91A		  retn
bios:D91A sub_FD900	  endp
bios:D91A
bios:D91B ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D91B ; START OF FUNCTION CHUNK FOR	sub_FD754
bios:D91B
bios:D91B loc_FD91B:						      ;	CODE XREF: sub_FD754+A5j
bios:D91B		  jmp	  loc_FD86F
bios:D91B ; END	OF FUNCTION CHUNK FOR sub_FD754
bios:D91E
bios:D91E ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:D91E
bios:D91E ;	Returns	a list of installed equipment on the system.
bios:D91E ;
bios:D91E ;	   On entry:	  No parameters
bios:D91E ;
bios:D91E ;	   Returns:	  AX	     Equipment code
bios:D91E ;
bios:D91E ;   --------------------------------------------------------------------------
bios:D91E ;
bios:D91E ;			       Equipment code (AX)
bios:D91E ;
bios:D91E ;   F	E D C B	A 9 8  7 6 5 4 3 2 1 0
bios:D91E ;   x	x . . .	. . .  . . . . . . . .	Number of printers installed
bios:D91E ;   .	. x . .	. . .  . . . . . . . .	Internal modem installed
bios:D91E ;   .	. . x .	. . .  . . . . . . . .	Game adapter installed?	(always	1 on PCJr)
bios:D91E ;   .	. . . x	x x .  . . . . . . . .	Number of RS-232 ports
bios:D91E ;   .	. . . .	. . x  . . . . . . . .	DMA present
bios:D91E ;   .	. . . .	. . .  x x . . . . . .	Number of diskettes - 1	(i.e. 0=1 disk)
bios:D91E ;   .	. . . .	. . .  . . x x . . . .	Initial	video mode (see	below)
bios:D91E ;   .	. . . .	. . .  . . . . x . . .	Reserved
bios:D91E ;   .	. . . .	. . .  . . . . . x . .	Reserved
bios:D91E ;   .	. . . .	. . .  . . . . . . x .	Math coprocessor installed?
bios:D91E ;   .	. . . .	. . .  . . . . . . . x	1=diskettes present; 0=no disks	present
bios:D91E ;
bios:D91E ;
bios:D91E ;			     Initial video mode
bios:D91E ;
bios:D91E ;			Value		      Meaning
bios:D91E ;			 00		      Reserved
bios:D91E ;			 01		      40 x 25 Color
bios:D91E ;			 10		      80 x 25 Color
bios:D91E ;			 11		      80 x 25 Monochrome
bios:D91E
bios:D91E int_11	  proc far				      ;	DATA XREF: bios:FF05o
bios:D91E		  push	  bx
bios:D91F		  push	  ds
bios:D920		  mov	  ax, 40h ; '@'
bios:D923		  mov	  ds, ax			      ;	ds = 0x40
bios:D925		  lea	  bx, ds:p400.installed_hardware
bios:D929		  mov	  ax, [bx]			      ;	`mov ax, ds:10h` perhaps?
bios:D92B		  pop	  ds
bios:D92C		  pop	  bx
bios:D92D		  iret
bios:D92D int_11	  endp
bios:D92D
bios:D92E
bios:D92E ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:D92E
bios:D92E ;	Reports	the number of contiguous 1K memory blocks in the system	(up to
bios:D92E ;	640K).
bios:D92E ;
bios:D92E ;	   On entry:	  No parameters
bios:D92E ;
bios:D92E ;	   Returns:	  AX	     Memory size (up to	640K)
bios:D92E
bios:D92E int_12	  proc far				      ;	DATA XREF: bios:FF07o
bios:D92E		  push	  bx
bios:D92F		  push	  ds
bios:D930		  mov	  ax, 40h ; '@'
bios:D933		  mov	  ds, ax			      ;	ds = 0x40
bios:D935		  lea	  bx, ds:p400.base_mem_kb	      ;	`mov ax, ds:1dh` perhaps?
bios:D939		  mov	  ax, [bx]
bios:D93B		  pop	  ds
bios:D93C		  pop	  bx
bios:D93D		  iret
bios:D93D int_12	  endp
bios:D93D
bios:D93E
bios:D93E ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:D93E
bios:D93E ; Attributes:	bp-based frame
bios:D93E
bios:D93E int_push_regs	  proc near				      ;	CODE XREF: int_13p
bios:D93E							      ;	int_14p
bios:D93E							      ;	int_09p
bios:D93E							      ;	int_17p
bios:D93E							      ;	int_10p
bios:D93E
bios:D93E arg_C		  = word ptr  0Eh
bios:D93E
bios:D93E		  sti
bios:D93F		  push	  cx
bios:D940		  push	  dx
bios:D941		  push	  si
bios:D942		  push	  di
bios:D943		  push	  bp
bios:D944		  push	  ds
bios:D945		  push	  es
bios:D946		  mov	  bp, sp
bios:D948		  push	  [bp+arg_C]
bios:D94B		  mov	  [bp+arg_C], bx
bios:D94E		  retn
bios:D94E int_push_regs	  endp ; sp = -10h
bios:D94E
bios:D94F
bios:D94F ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:D94F
bios:D94F
bios:D94F int_pop_regs_and_exit	proc far			      ;	CODE XREF: int_14:exit1j
bios:D94F							      ;	int_09+197j
bios:D94F							      ;	int_17:exit1j
bios:D94F							      ;	int_10:errorj
bios:D94F							      ;	int_10_00+1Aj
bios:D94F							      ;	int_10_00+1C3j	...
bios:D94F		  pop	  es
bios:D950		  pop	  ds
bios:D951		  pop	  bp
bios:D952		  pop	  di
bios:D953		  pop	  si
bios:D954		  pop	  dx
bios:D955		  pop	  cx
bios:D956		  pop	  bx
bios:D957		  iret
bios:D957 int_pop_regs_and_exit	endp ; sp =  10h
bios:D957
bios:D958
bios:D958 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:D958
bios:D958 ; check whether al is	between	0 and di
bios:D958 ; set	ds to 0x40
bios:D958
bios:D958 check_valid_subfunction proc near			      ;	CODE XREF: int_13+7p
bios:D958							      ;	int_14+7p
bios:D958							      ;	int_16+Bp
bios:D958							      ;	int_17+7p
bios:D958							      ;	int_10+8p
bios:D958		  push	  ax
bios:D959		  mov	  al, ah
bios:D95B		  xor	  ah, ah
bios:D95D		  shl	  ax, 1
bios:D95F		  cmp	  ax, di
bios:D961		  mov	  di, ax
bios:D963		  mov	  ax, 40h ; '@'
bios:D966		  mov	  ds, ax			      ;	ds = 0x40
bios:D968		  pop	  ax
bios:D969		  jnb	  short	error
bios:D96B		  clc
bios:D96C		  retn
bios:D96D ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D96D
bios:D96D error:						      ;	CODE XREF: check_valid_subfunction+11j
bios:D96D		  stc
bios:D96E		  retn
bios:D96E check_valid_subfunction endp
bios:D96E
bios:D96F
bios:D96F ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:D96F
bios:D96F
bios:D96F sub_FD96F	  proc near				      ;	CODE XREF: sub_FF4ED+2Ep
bios:D96F							      ;	sub_FF4ED+4Fp
bios:D96F							      ;	sub_FF4ED+79p
bios:D96F							      ;	int_10_08+11p
bios:D96F							      ;	int_10_0a+1Cp
bios:D96F		  push	  ax
bios:D970		  push	  dx
bios:D971		  push	  di
bios:D972		  mov	  ax, 0B000h
bios:D975		  cmp	  byte ptr ds:p400.crt_mode, 7
bios:D97A		  jnz	  short	l0
bios:D97C		  xor	  bh, bh
bios:D97E		  mov	  es, ax
bios:D980		  jmp	  short	l1
bios:D982 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D982
bios:D982 l0:							      ;	CODE XREF: sub_FD96F+Bj
bios:D982		  add	  ah, 8
bios:D985		  mov	  es, ax
bios:D987		  cmp	  byte ptr ds:p400.crt_mode, 4
bios:D98C		  jl	  short	l1
bios:D98E		  xor	  bh, bh
bios:D990
bios:D990 l1:							      ;	CODE XREF: sub_FD96F+11j
bios:D990							      ;	sub_FD96F+1Dj
bios:D990		  cmp	  bl, 0
bios:D993		  jz	  short	l2
bios:D995		  mov	  bl, bh
bios:D997		  call	  get_rowcols_for_page
bios:D99A
bios:D99A l2:							      ;	CODE XREF: sub_FD96F+24j
bios:D99A		  xor	  di, di
bios:D99C		  cmp	  byte ptr ds:p400.crt_mode, 7
bios:D9A1		  jz	  short	l3
bios:D9A3		  push	  dx
bios:D9A4		  mov	  ax, ds:p400.crt_page_len
bios:D9A7		  mov	  bl, bh
bios:D9A9		  xor	  bh, bh
bios:D9AB		  mul	  bx
bios:D9AD		  add	  di, ax
bios:D9AF		  pop	  dx
bios:D9B0
bios:D9B0 l3:							      ;	CODE XREF: sub_FD96F+32j
bios:D9B0		  xor	  ah, ah
bios:D9B2		  mov	  al, dh
bios:D9B4		  mul	  byte ptr ds:p400.crt_nr_cols
bios:D9B8		  shl	  ax, 1
bios:D9BA		  xor	  dh, dh
bios:D9BC		  shl	  dx, 1
bios:D9BE		  add	  ax, dx
bios:D9C0		  mov	  bx, ax
bios:D9C2		  add	  bx, di
bios:D9C4		  pop	  di
bios:D9C5		  pop	  dx
bios:D9C6		  pop	  ax
bios:D9C7		  retn
bios:D9C7 sub_FD96F	  endp
bios:D9C7
bios:D9C8
bios:D9C8 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:D9C8
bios:D9C8
bios:D9C8 sub_FD9C8	  proc near				      ;	CODE XREF: sub_FF4ED-20BCp
bios:D9C8							      ;	sub_FF4ED:loc_FD436p
bios:D9C8							      ;	sub_FF4ED-2082p
bios:D9C8							      ;	sub_FF4ED:loc_FD490p
bios:D9C8							      ;	sub_FD5C7p
bios:D9C8		  call	  sub_FDAE9
bios:D9CB
bios:D9CB loc_FD9CB:						      ;	CODE XREF: sub_FD754:loc_FD7D1p
bios:D9CB							      ;	sub_FF93F:l3p
bios:D9CB							      ;	sub_FF93F+51p
bios:D9CB		  push	  ax
bios:D9CC		  push	  cx
bios:D9CD		  push	  dx
bios:D9CE		  cmp	  byte ptr ds:p400.crt_mode, 8
bios:D9D3		  jnz	  short	l0
bios:D9D5		  jmp	  short	l7
bios:D9D5 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D9D7		  db  90h ; 
bios:D9D8 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D9D8
bios:D9D8 l0:							      ;	CODE XREF: sub_FD9C8+Bj
bios:D9D8		  cmp	  byte ptr ds:p400.crt_mode, 9
bios:D9DD		  jnz	  short	l1
bios:D9DF		  jmp	  l10
bios:D9E2 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D9E2
bios:D9E2 l1:							      ;	CODE XREF: sub_FD9C8+15j
bios:D9E2		  cmp	  byte ptr ds:p400.crt_mode, 0Ah
bios:D9E7		  jnz	  short	l2
bios:D9E9		  jmp	  l15
bios:D9EC ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:D9EC
bios:D9EC l2:							      ;	CODE XREF: sub_FD9C8+1Fj
bios:D9EC		  mov	  ax, 28h ; '('
bios:D9EF		  and	  dx, 0FFFEh
bios:D9F3		  mul	  dx
bios:D9F5		  shr	  cx, 1
bios:D9F7		  shr	  cx, 1
bios:D9F9		  cmp	  byte ptr ds:p400.crt_mode, 6
bios:D9FE		  jnz	  short	l3
bios:DA00		  shr	  cx, 1
bios:DA02
bios:DA02 l3:							      ;	CODE XREF: sub_FD9C8+36j
bios:DA02		  add	  ax, cx
bios:DA04		  add	  ah, 80h ; '€'
bios:DA07		  pop	  bx
bios:DA08		  test	  bx, 1
bios:DA0C		  jz	  short	l4
bios:DA0E		  add	  ah, 20h ; ' '
bios:DA11
bios:DA11 l4:							      ;	CODE XREF: sub_FD9C8+44j
bios:DA11		  mov	  bx, ax
bios:DA13		  pop	  ax
bios:DA14		  cmp	  byte ptr ds:p400.crt_mode, 6
bios:DA19		  jnz	  short	l5
bios:DA1B		  mov	  cx, 8
bios:DA1E		  div	  cx
bios:DA20		  mov	  cl, 7
bios:DA22		  sub	  cl, dl
bios:DA24		  jmp	  short	l6
bios:DA26 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:DA26
bios:DA26 l5:							      ;	CODE XREF: sub_FD9C8+51j
bios:DA26		  mov	  cx, 4
bios:DA29		  div	  cx
bios:DA2B		  shl	  dx, 1
bios:DA2D		  mov	  cl, 6
bios:DA2F		  sub	  cl, dl
bios:DA31
bios:DA31 l6:							      ;	CODE XREF: sub_FD9C8+5Cj
bios:DA31							      ;	sub_FD9C8:l9j
bios:DA31							      ;	sub_FD9C8:l14j
bios:DA31							      ;	sub_FD9C8+11Ej
bios:DA31		  pop	  ax
bios:DA32		  retn
bios:DA33 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:DA33
bios:DA33 l7:							      ;	CODE XREF: sub_FD9C8+Dj
bios:DA33		  mov	  ax, 28h ; '('
bios:DA36		  and	  dx, 0FFFEh
bios:DA3A		  mul	  dx
bios:DA3C		  shr	  cx, 1
bios:DA3E		  add	  ax, cx
bios:DA40		  add	  ah, 80h ; '€'
bios:DA43		  pop	  bx
bios:DA44		  test	  bx, 1
bios:DA48		  jz	  short	l8
bios:DA4A		  add	  ah, 20h ; ' '
bios:DA4D
bios:DA4D l8:							      ;	CODE XREF: sub_FD9C8+80j
bios:DA4D		  mov	  bx, ax
bios:DA4F		  pop	  ax
bios:DA50		  mov	  cx, 2
bios:DA53		  div	  cx
bios:DA55		  mov	  cx, 4
bios:DA58		  and	  dl, dl
bios:DA5A		  jz	  short	l9
bios:DA5C		  mov	  cx, 0
bios:DA5F
bios:DA5F l9:							      ;	CODE XREF: sub_FD9C8+92j
bios:DA5F		  jmp	  short	l6
bios:DA61 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:DA61
bios:DA61 l10:							      ;	CODE XREF: sub_FD9C8+17j
bios:DA61		  mov	  ax, 50h ; 'P'
bios:DA64		  and	  dx, 0FFFCh
bios:DA68		  shr	  dx, 1
bios:DA6A		  mul	  dx
bios:DA6C		  shr	  cx, 1
bios:DA6E		  add	  ax, cx
bios:DA70		  add	  ah, 80h ; '€'
bios:DA73		  pop	  bx
bios:DA74		  and	  bx, 3
bios:DA78		  cmp	  bx, 3
bios:DA7B		  jb	  short	l11
bios:DA7D		  add	  ah, 20h ; ' '
bios:DA80
bios:DA80 l11:							      ;	CODE XREF: sub_FD9C8+B3j
bios:DA80		  cmp	  bx, 2
bios:DA83		  jb	  short	l12
bios:DA85		  add	  ah, 20h ; ' '
bios:DA88
bios:DA88 l12:							      ;	CODE XREF: sub_FD9C8+BBj
bios:DA88		  cmp	  bx, 1
bios:DA8B		  jb	  short	l13
bios:DA8D		  add	  ah, 20h ; ' '
bios:DA90
bios:DA90 l13:							      ;	CODE XREF: sub_FD9C8+C3j
bios:DA90		  mov	  bx, ax
bios:DA92		  pop	  ax
bios:DA93		  mov	  cx, 2
bios:DA96		  div	  cx
bios:DA98		  mov	  cx, 4
bios:DA9B		  and	  dl, dl
bios:DA9D		  jz	  short	l14
bios:DA9F		  mov	  cx, 0
bios:DAA2
bios:DAA2 l14:							      ;	CODE XREF: sub_FD9C8+D5j
bios:DAA2		  jmp	  short	l6
bios:DAA4 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:DAA4
bios:DAA4 l15:							      ;	CODE XREF: sub_FD9C8+21j
bios:DAA4		  mov	  ax, 50h ; 'P'
bios:DAA7		  and	  dx, 0FFFCh
bios:DAAB		  shr	  dx, 1
bios:DAAD		  mul	  dx
bios:DAAF		  shr	  cx, 1
bios:DAB1		  shr	  cx, 1
bios:DAB3		  and	  cx, 0FFFEh
bios:DAB7		  add	  ax, cx
bios:DAB9		  add	  ah, 80h ; '€'
bios:DABC		  pop	  bx
bios:DABD		  and	  bx, 3
bios:DAC1		  cmp	  bx, 3
bios:DAC4		  jb	  short	l16
bios:DAC6		  add	  ah, 20h ; ' '
bios:DAC9
bios:DAC9 l16:							      ;	CODE XREF: sub_FD9C8+FCj
bios:DAC9		  cmp	  bx, 2
bios:DACC		  jb	  short	l17
bios:DACE		  add	  ah, 20h ; ' '
bios:DAD1
bios:DAD1 l17:							      ;	CODE XREF: sub_FD9C8+104j
bios:DAD1		  cmp	  bx, 1
bios:DAD4		  jb	  short	l18
bios:DAD6		  add	  ah, 20h ; ' '
bios:DAD9
bios:DAD9 l18:							      ;	CODE XREF: sub_FD9C8+10Cj
bios:DAD9		  mov	  bx, ax
bios:DADB		  pop	  ax
bios:DADC		  mov	  cx, 8
bios:DADF		  div	  cx
bios:DAE1		  mov	  cx, 7
bios:DAE4		  sub	  cx, dx
bios:DAE6		  jmp	  l6
bios:DAE6 sub_FD9C8	  endp
bios:DAE6
bios:DAE9
bios:DAE9 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:DAE9
bios:DAE9
bios:DAE9 sub_FDAE9	  proc near				      ;	CODE XREF: sub_FD754+2p
bios:DAE9							      ;	sub_FD9C8p
bios:DAE9		  xor	  ch, ch
bios:DAEB		  mov	  cl, dl
bios:DAED		  shl	  cx, 1
bios:DAEF		  shl	  cx, 1
bios:DAF1		  shl	  cx, 1
bios:DAF3		  mov	  dl, dh
bios:DAF5		  xor	  dh, dh
bios:DAF7		  shl	  dx, 1
bios:DAF9		  shl	  dx, 1
bios:DAFB		  shl	  dx, 1
bios:DAFD		  retn
bios:DAFD sub_FDAE9	  endp
bios:DAFD
bios:DAFE
bios:DAFE ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:DAFE
bios:DAFE ; get_rowcols_for_page
bios:DAFE ; in:
bios:DAFE ;   bx = page	number
bios:DAFE ; out:
bios:DAFE ;   dl = rows
bios:DAFE ;   dh = cols
bios:DAFE
bios:DAFE get_rowcols_for_page proc near			      ;	CODE XREF: sub_FD96F+28p
bios:DAFE							      ;	int_10_03+Bp
bios:DAFE							      ;	int_10_05+2Ep
bios:DAFE							      ;	int_10_08+7p
bios:DAFE							      ;	int_10_0a+Fp
bios:DAFE							      ;	int_10_0e+6p
bios:DAFE		  push	  bx
bios:DAFF		  xor	  bh, bh
bios:DB01		  shl	  bx, 1
bios:DB03		  mov	  dx, [bx+p400.cursor_row_col_in_pages]
bios:DB07		  pop	  bx
bios:DB08		  retn
bios:DB08 get_rowcols_for_page endp
bios:DB08
bios:DB09
bios:DB09 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:DB09
bios:DB09
bios:DB09 sub_FDB09	  proc near				      ;	CODE XREF: sub_FF4ED+99p
bios:DB09							      ;	sub_FF4ED+A0p
bios:DB09							      ;	sub_FF4ED+B7p
bios:DB09		  push	  dx
bios:DB0A		  mov	  dx, ds:p400.crt_nr_cols
bios:DB0E		  shl	  dx, 1
bios:DB10		  cmp	  word ptr [bp+4], 0
bios:DB14		  jnz	  short	l0
bios:DB16		  add	  si, dx
bios:DB18		  add	  di, dx
bios:DB1A		  jmp	  short	l1
bios:DB1A ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:DB1C		  db  90h ; 
bios:DB1D ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:DB1D
bios:DB1D l0:							      ;	CODE XREF: sub_FDB09+Bj
bios:DB1D		  sub	  si, dx
bios:DB1F		  sub	  di, dx
bios:DB21
bios:DB21 l1:							      ;	CODE XREF: sub_FDB09+11j
bios:DB21		  pop	  dx
bios:DB22		  retn
bios:DB22 sub_FDB09	  endp
bios:DB22
bios:DB23
bios:DB23 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:DB23
bios:DB23
bios:DB23 sub_FDB23	  proc near				      ;	CODE XREF: sub_FF4ED-1FB1p
bios:DB23							      ;	sub_FF4ED-1FA9p
bios:DB23							      ;	sub_FF4ED-1F2Ep
bios:DB23		  push	  ax
bios:DB24		  mov	  ax, 140h
bios:DB27		  cmp	  word ptr [bp+4], 0
bios:DB2B		  jz	  short	l0
bios:DB2D		  neg	  ax
bios:DB2F
bios:DB2F l0:							      ;	CODE XREF: sub_FDB23+8j
bios:DB2F		  add	  si, ax
bios:DB31		  add	  di, ax
bios:DB33		  pop	  ax
bios:DB34		  retn
bios:DB34 sub_FDB23	  endp
bios:DB34
bios:DB34 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:DB35		  db  50h ; P
bios:DB36		  db  52h ; R
bios:DB37		  db 0E8h ; è
bios:DB38		  db  4Ah ; J
bios:DB39		  db	0
bios:DB3A		  db  73h ; s
bios:DB3B		  db  13h
bios:DB3C		  db 0BAh ; º
bios:DB3D		  db 0DAh ; Ú
bios:DB3E		  db	3
bios:DB3F		  db 0FAh ; ú
bios:DB40		  db 0ECh ; ì
bios:DB41		  db 0A8h ; ¨
bios:DB42		  db	8
bios:DB43		  db  74h ; t
bios:DB44		  db 0FBh ; û
bios:DB45		  db 0FBh ; û
bios:DB46		  db 0BAh ; º
bios:DB47		  db 0D8h ; Ø
bios:DB48		  db	3
bios:DB49		  db 0A0h ;  
bios:DB4A		  db  65h ; e
bios:DB4B		  db	0
bios:DB4C		  db  24h ; $
bios:DB4D		  db  37h ; 7
bios:DB4E		  db 0EEh ; î
bios:DB4F		  db  5Ah ; Z
bios:DB50		  db  58h ; X
bios:DB51		  db 0C3h ; Ã
bios:DB52		  db 0E8h ; è
bios:DB53		  db  2Fh ; /
bios:DB54		  db	0
bios:DB55		  db  73h ; s
bios:DB56		  db	7
bios:DB57		  db 0BAh ; º
bios:DB58		  db 0D8h ; Ø
bios:DB59		  db	3
bios:DB5A		  db 0A0h ;  
bios:DB5B		  db  65h ; e
bios:DB5C		  db	0
bios:DB5D		  db 0EEh ; î
bios:DB5E		  db 0C3h ; Ã
bios:DB5F
bios:DB5F ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:DB5F
bios:DB5F
bios:DB5F play_bell_sound? proc	near				      ;	CODE XREF: reset:loc_FE185p
bios:DB5F							      ;	int_09+19p
bios:DB5F							      ;	sub_FEDAA+1Ep
bios:DB5F							      ;	int_10_0e+Dp
bios:DB5F		  push	  ax
bios:DB60		  push	  bx
bios:DB61		  push	  cx
bios:DB62		  mov	  bx, 20h ; ' '
bios:DB65		  in	  al, 61h			      ;	PC/XT PPI port B bits:
bios:DB65							      ;	0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
bios:DB65							      ;	1: Tmr 2 data Í¼  AND 0fcH=spkr	OFF
bios:DB65							      ;	3: 1=read high switches
bios:DB65							      ;	4: 0=enable RAM	parity checking
bios:DB65							      ;	5: 0=enable I/O	channel	check
bios:DB65							      ;	6: 0=hold keyboard clock low
bios:DB65							      ;	7: 0=enable kbrd
bios:DB67		  push	  ax
bios:DB68
bios:DB68 l0:							      ;	CODE XREF: play_bell_sound?+1Cj
bios:DB68		  and	  al, 11111100b
bios:DB6A		  out	  61h, al			      ;	PC/XT PPI port B bits:
bios:DB6A							      ;	0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
bios:DB6A							      ;	1: Tmr 2 data Í¼  AND 0fcH=spkr	OFF
bios:DB6A							      ;	3: 1=read high switches
bios:DB6A							      ;	4: 0=enable RAM	parity checking
bios:DB6A							      ;	5: 0=enable I/O	channel	check
bios:DB6A							      ;	6: 0=hold keyboard clock low
bios:DB6A							      ;	7: 0=enable kbrd
bios:DB6C		  mov	  cx, 120h
bios:DB6F
bios:DB6F l1:							      ;	CODE XREF: play_bell_sound?:l1j
bios:DB6F		  loop	  l1
bios:DB71		  or	  al, 10b
bios:DB73		  out	  61h, al			      ;	PC/XT PPI port B bits:
bios:DB73							      ;	0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
bios:DB73							      ;	1: Tmr 2 data Í¼  AND 0fcH=spkr	OFF
bios:DB73							      ;	3: 1=read high switches
bios:DB73							      ;	4: 0=enable RAM	parity checking
bios:DB73							      ;	5: 0=enable I/O	channel	check
bios:DB73							      ;	6: 0=hold keyboard clock low
bios:DB73							      ;	7: 0=enable kbrd
bios:DB75		  mov	  cx, 120h
bios:DB78
bios:DB78 l2:							      ;	CODE XREF: play_bell_sound?:l2j
bios:DB78		  loop	  l2
bios:DB7A		  dec	  bx
bios:DB7B		  jnz	  short	l0
bios:DB7D		  pop	  ax
bios:DB7E		  out	  61h, al			      ;	PC/XT PPI port B bits:
bios:DB7E							      ;	0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
bios:DB7E							      ;	1: Tmr 2 data Í¼  AND 0fcH=spkr	OFF
bios:DB7E							      ;	3: 1=read high switches
bios:DB7E							      ;	4: 0=enable RAM	parity checking
bios:DB7E							      ;	5: 0=enable I/O	channel	check
bios:DB7E							      ;	6: 0=hold keyboard clock low
bios:DB7E							      ;	7: 0=enable kbrd
bios:DB80		  pop	  cx
bios:DB81		  pop	  bx
bios:DB82		  pop	  ax
bios:DB83		  retn
bios:DB83 play_bell_sound? endp
bios:DB83
bios:DB84
bios:DB84 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:DB84
bios:DB84 ; nobody is calling it?
bios:DB84
bios:DB84 is_not_80x25_mode proc near
bios:DB84		  cmp	  byte ptr ds:p400.crt_mode, 2
bios:DB89		  jl	  short	ok
bios:DB8B		  cmp	  byte ptr ds:p400.crt_mode, 3
bios:DB90		  jg	  short	ok
bios:DB92		  stc
bios:DB93		  retn
bios:DB94 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:DB94
bios:DB94 ok:							      ;	CODE XREF: is_not_80x25_mode+5j
bios:DB94							      ;	is_not_80x25_mode+Cj
bios:DB94		  clc
bios:DB95		  retn
bios:DB95 is_not_80x25_mode endp
bios:DB95
bios:DB96
bios:DB96 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:DB96
bios:DB96
bios:DB96 int_1a	  proc far				      ;	DATA XREF: bios:FF17o
bios:DB96		  push	  ds
bios:DB97		  mov	  ds, cs:value_0040		      ;	ds = 0x40
bios:DB9C		  cmp	  ah, 80h ; '€'
bios:DB9F		  jz	  short	setup_sound_multiplexer
bios:DBA1		  or	  ah, ah
bios:DBA3		  jz	  short	read_system_timer
bios:DBA5		  dec	  ah
bios:DBA7		  jz	  short	set_system_timer
bios:DBA9		  jmp	  short	exit
bios:DBAB ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:DBAB
bios:DBAB read_system_timer:					      ;	CODE XREF: int_1a+Dj
bios:DBAB		  mov	  dx, ds:p400.timer_ticks_since_midnight
bios:DBAF		  mov	  cx, ds:p400.timer_ticks_since_midnight+2
bios:DBB3		  mov	  al, ds:p400.timer_overflow
bios:DBB6		  mov	  byte ptr ds:p400.timer_overflow, 0
bios:DBBB		  jmp	  short	exit
bios:DBBD ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:DBBD
bios:DBBD set_system_timer:					      ;	CODE XREF: int_1a+11j
bios:DBBD		  mov	  byte ptr ds:p400.timer_overflow, 0
bios:DBC2		  mov	  ds:p400.timer_ticks_since_midnight, dx
bios:DBC6		  mov	  ds:p400.timer_ticks_since_midnight+2,	cx
bios:DBCA		  xor	  ah, ah
bios:DBCC
bios:DBCC exit:							      ;	CODE XREF: int_1a+13j
bios:DBCC							      ;	int_1a+25j
bios:DBCC							      ;	int_1a+4Bj
bios:DBCC		  pop	  ds
bios:DBCD		  iret
bios:DBCE ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:DBCE
bios:DBCE setup_sound_multiplexer:				      ;	CODE XREF: int_1a+9j
bios:DBCE		  push	  cx
bios:DBCF		  mov	  ah, al
bios:DBD1		  in	  al, 61h			      ;	PC/XT PPI port B bits:
bios:DBD1							      ;	0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
bios:DBD1							      ;	1: Tmr 2 data Í¼  AND 0fcH=spkr	OFF
bios:DBD1							      ;	3: 1=read high switches
bios:DBD1							      ;	4: 0=enable RAM	parity checking
bios:DBD1							      ;	5: 0=enable I/O	channel	check
bios:DBD1							      ;	6: 0=hold keyboard clock low
bios:DBD1							      ;	7: 0=enable kbrd
bios:DBD3		  and	  al, 9Fh
bios:DBD5		  and	  ah, 3
bios:DBD8		  mov	  cl, 5
bios:DBDA		  rol	  ah, cl
bios:DBDC		  or	  al, ah
bios:DBDE		  out	  61h, al			      ;	PC/XT PPI port B bits:
bios:DBDE							      ;	0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
bios:DBDE							      ;	1: Tmr 2 data Í¼  AND 0fcH=spkr	OFF
bios:DBDE							      ;	3: 1=read high switches
bios:DBDE							      ;	4: 0=enable RAM	parity checking
bios:DBDE							      ;	5: 0=enable I/O	channel	check
bios:DBDE							      ;	6: 0=hold keyboard clock low
bios:DBDE							      ;	7: 0=enable kbrd
bios:DBE0		  pop	  cx
bios:DBE1		  jmp	  short	exit
bios:DBE1 int_1a	  endp
bios:DBE1
bios:DBE3
bios:DBE3 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:DBE3
bios:DBE3 ; INT	08h (8)		     System Timer
bios:DBE3 ;
bios:DBE3 ;	This interrupt is a hardware interrupt (IRQ 0) activated by the	system
bios:DBE3 ;	timer 18.2 times per second (every 55 ms). The default handler does
bios:DBE3 ;	the following:
bios:DBE3 ;
bios:DBE3 ;	     .	 Keeps a count of the number of	timer ticks at memory location
bios:DBE3 ;		 0:46Ch	(System	Timer Counter--long integer). After 24 hours of
bios:DBE3 ;		 operation, a flag is set at memory location 0:470h to signal
bios:DBE3 ;		 this condition	and the	System Timer Counter (0:46Ch) is reset to
bios:DBE3 ;		 0.
bios:DBE3 ;
bios:DBE3 ;	     .	 Decrements the	Diskette Drive Motor Off Counter at memory
bios:DBE3 ;		 location 0:440h if it is not 0. When this location reaches 0,
bios:DBE3 ;		 the diskette drive motor is turned off	and the	Diskette Drive
bios:DBE3 ;		 Motor Status byte at memory location 0:43Fh is	updated	to
bios:DBE3 ;		 reflect that the motor	has been turned	off.
bios:DBE3 ;
bios:DBE3 ;	     .	 Generates INT 1Ch.
bios:DBE3 ;
bios:DBE3 ;	     .	 For the PC Convertible, generates INT 4Ah if an alarm interrupt
bios:DBE3 ;		 occurs.
bios:DBE3
bios:DBE3 int_08	  proc far				      ;	DATA XREF: bios:int_08_1f_tblo
bios:DBE3		  push	  ax
bios:DBE4		  push	  dx
bios:DBE5		  push	  ds
bios:DBE6		  xor	  dx, dx
bios:DBE8		  mov	  ds, cs:value_0040		      ;	ds = 0x40
bios:DBED		  inc	  word ptr ds:p400.timer_ticks_since_midnight
bios:DBF1		  jnz	  short	l0
bios:DBF3		  inc	  word ptr ds:p400.timer_ticks_since_midnight+2
bios:DBF7
bios:DBF7 l0:							      ;	CODE XREF: int_08+Ej
bios:DBF7		  cmp	  word ptr ds:p400.timer_ticks_since_midnight, 0B0h ; '°'
bios:DBFD		  jnz	  short	l1
bios:DBFF		  cmp	  word ptr ds:p400.timer_ticks_since_midnight+2, 18h
bios:DC04		  jnz	  short	l1
bios:DC06		  inc	  byte ptr ds:p400.timer_overflow
bios:DC0A		  mov	  ds:p400.timer_ticks_since_midnight, dx
bios:DC0E		  mov	  ds:p400.timer_ticks_since_midnight+2,	dx
bios:DC12
bios:DC12 l1:							      ;	CODE XREF: int_08+1Aj
bios:DC12							      ;	int_08+21j
bios:DC12		  dec	  byte ptr ds:p400.diskette_motor_off_timeout
bios:DC16		  jnz	  short	l2
bios:DC18		  mov	  dx, 3F2h			      ;	turn off diskette motor
bios:DC1B		  mov	  al, 1111b
bios:DC1D		  out	  dx, al			      ;	Floppy:	digital	output reg bits:
bios:DC1D							      ;	0-1: Drive to select 0-3 (AT: bit 1 not	used)
bios:DC1D							      ;	2:   0=reset diskette controller; 1=enable controller
bios:DC1D							      ;	3:   1=enable diskette DMA and interrupts
bios:DC1D							      ;	4-7: drive motor enable.  Set bits to turn drive ON.
bios:DC1D							      ;
bios:DC1E		  and	  byte ptr ds:p400.diskette_motor_status, 0F0h
bios:DC23
bios:DC23 l2:							      ;	CODE XREF: int_08+33j
bios:DC23		  int	  1Ch				      ;	CLOCK TICK
bios:DC25		  mov	  al, 20h ; ' '
bios:DC27		  out	  20h, al			      ;	Interrupt controller, 8259A.
bios:DC29		  pop	  ds
bios:DC2A		  pop	  dx
bios:DC2B		  pop	  ax
bios:DC2C		  iret
bios:DC2C int_08	  endp
bios:DC2C
bios:DC2C ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:DC2D		  dw 1E9h dup(0ADDEh)
bios:DFFF		  db 0FFh
bios:E000 int_1d	  db 38h, 28h, 2Dh, 0Ah, 1Ch, 1, 19h, 1Ah, 2, 8, 6, 7, 4 dup(0); init_modes_0_1
bios:E000							      ;	DATA XREF: bios:FF1Do
bios:E000		  db 71h, 50h, 5Ah, 0Ah, 1Ch, 1, 19h, 1Ah, 2, 8, 6, 7, 4 dup(0); init_modes_2_3	; video	init param
bios:E000		  db 38h, 28h, 2Dh, 0Ah, 7Fh, 6, 64h, 70h, 2, 1, 6, 7, 4 dup(0); init_modes_4_5_6_8
bios:E000		  db 61h, 50h, 52h, 0Fh, 19h, 6, 2 dup(19h), 2,	0Dh, 0Bh, 0Ch, 4 dup(0); init_mode_7
bios:E000		  db 71h, 50h, 5Ah, 0Ah, 3Fh, 6, 32h, 38h, 2, 3, 6, 7, 4 dup(0); init_modes_9_a
bios:E050		  db 0Bh dup(0)
bios:E05B
bios:E05B ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:E05B
bios:E05B
bios:E05B reset		  proc near				      ;	CODE XREF: reset+2E1j
bios:E05B							      ;	bios:reset_entryJ
bios:E05B
bios:E05B ; FUNCTION CHUNK AT bios:C470	SIZE 00000092 BYTES
bios:E05B ; FUNCTION CHUNK AT bios:C523	SIZE 0000022E BYTES
bios:E05B ; FUNCTION CHUNK AT bios:C79F	SIZE 00000094 BYTES
bios:E05B ; FUNCTION CHUNK AT bios:C834	SIZE 0000001C BYTES
bios:E05B ; FUNCTION CHUNK AT bios:C877	SIZE 0000005A BYTES
bios:E05B ; FUNCTION CHUNK AT bios:C8D2	SIZE 00000068 BYTES
bios:E05B ; FUNCTION CHUNK AT bios:C989	SIZE 00000018 BYTES
bios:E05B ; FUNCTION CHUNK AT bios:C9A2	SIZE 0000001A BYTES
bios:E05B ; FUNCTION CHUNK AT bios:C9E3	SIZE 00000053 BYTES
bios:E05B ; FUNCTION CHUNK AT bios:CA37	SIZE 00000018 BYTES
bios:E05B ; FUNCTION CHUNK AT bios:CA74	SIZE 000000D3 BYTES
bios:E05B ; FUNCTION CHUNK AT bios:CC56	SIZE 00000003 BYTES
bios:E05B ; FUNCTION CHUNK AT bios:E083	SIZE 000002BC BYTES
bios:E05B
bios:E05B		  mov	  ax, 40h ; '@'
bios:E05E		  mov	  ds, ax			      ;	ds = 0x40
bios:E060		  mov	  ax, 0BBE8h
bios:E063		  mov	  es, ax			      ;	es = 0xbbe8
bios:E065		  xor	  ax, ax
bios:E067		  cmp	  word ptr ds:p400.POST_reset_flag, 1234h ; soft reset?
bios:E06D		  jnz	  short	l0			      ;	no, jump
bios:E06F		  mov	  ax, ds:p400.keyb_status_flags_1
bios:E072		  and	  ax, 6060h			      ;	filter out insert / caps
bios:E075
bios:E075 l0:							      ;	CODE XREF: reset+12j
bios:E075		  mov	  es:pbbe80.shadow_keyb_status_flags_1,	ax
bios:E079		  mov	  ax, ds:p400.POST_reset_flag
bios:E07C		  mov	  es:pbbe80.shadow_POST_reset_flag, ax
bios:E080		  jmp	  loc_FC470
bios:E080 reset		  endp
bios:E080
bios:E083 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E083 ; START OF FUNCTION CHUNK FOR	reset
bios:E083
bios:E083 loc_FE083:						      ;	CODE XREF: reset:loc_FCC56j
bios:E083		  mov	  ax, 40h ; '@'
bios:E086		  mov	  ds, ax			      ;	ds = 0x40
bios:E088		  mov	  ax, 0BBE8h
bios:E08B		  mov	  es, ax			      ;	es = 0xbbe8
bios:E08D		  cmp	  word ptr es:pbbe80.shadow_POST_reset_flag, 1234h
bios:E094		  jnz	  short	loc_FE09D
bios:E096		  mov	  ax, es:pbbe80.shadow_keyb_status_flags_1
bios:E09A		  mov	  ds:p400.keyb_status_flags_1, ax
bios:E09D
bios:E09D loc_FE09D:						      ;	CODE XREF: reset+39j
bios:E09D		  cli
bios:E09E		  cld
bios:E09F		  mov	  ax, 36h ; '6'
bios:E0A2		  mov	  dx, 43h ; 'C'
bios:E0A5		  out	  dx, al			      ;	Timer 8253-5 (AT: 8254.2).
bios:E0A6		  mov	  dx, 40h ; '@'
bios:E0A9		  mov	  al, 0
bios:E0AB		  out	  dx, al			      ;	Timer 8253-5 (AT: 8254.2).
bios:E0AC		  out	  dx, al			      ;	Timer 8253-5 (AT: 8254.2).
bios:E0AD		  mov	  al, 54h ; 'T'
bios:E0AF		  mov	  dx, 43h ; 'C'
bios:E0B2		  out	  dx, al			      ;	Timer 8253-5 (AT: 8254.2).
bios:E0B3		  mov	  al, 12h
bios:E0B5		  mov	  dx, 41h ; 'A'
bios:E0B8		  out	  dx, al			      ;	Timer 8253-5 (AT: 8254.2).
bios:E0B9		  mov	  al, 0B6h ; '¶'
bios:E0BB		  out	  43h, al			      ;	Timer 8253-5 (AT: 8254.2).
bios:E0BD		  xor	  al, al
bios:E0BF		  out	  42h, al			      ;	Timer 8253-5 (AT: 8254.2).
bios:E0C1		  mov	  al, 5
bios:E0C3		  out	  42h, al			      ;	Timer 8253-5 (AT: 8254.2).
bios:E0C5		  xor	  ax, ax
bios:E0C7		  mov	  es, ax
bios:E0C9		  mov	  ax, 30h ; '0'
bios:E0CC		  mov	  ss, ax
bios:E0CE		  mov	  ax, 100h
bios:E0D1		  mov	  sp, ax
bios:E0D3		  mov	  ax, cs
bios:E0D5		  mov	  ds, ax
bios:E0D7		  mov	  si, 0FF23h
bios:E0DA		  xor	  di, di
bios:E0DC		  mov	  cx, 8
bios:E0DF		  call	  sub_FE33F
bios:E0E2		  mov	  si, 0FEF3h
bios:E0E5		  mov	  di, 20h ; ' '
bios:E0E8		  mov	  cx, 18h
bios:E0EB		  call	  sub_FE33F
bios:E0EE		  mov	  si, 0FF33h
bios:E0F1		  mov	  di, 110h
bios:E0F4		  mov	  cx, 1
bios:E0F7		  call	  sub_FE33F
bios:E0FA		  mov	  ax, 0BBE8h
bios:E0FD		  mov	  ds, ax
bios:E0FF		  mov	  dx, ds:0Bh
bios:E103		  mov	  cl, 6
bios:E105		  shr	  dx, cl
bios:E107		  add	  dx, 70h ; 'p'
bios:E10A		  mov	  ax, 40h ; '@'
bios:E10D		  mov	  ds, ax
bios:E10F		  mov	  ds:13h, dx
bios:E113		  add	  dx, 10h
bios:E116		  mov	  ds:15h, dx
bios:E11A		  mov	  al, 0FFh
bios:E11C		  out	  21h, al			      ;	Interrupt controller, 8259A.
bios:E11E		  in	  al, 61h			      ;	PC/XT PPI port B bits:
bios:E11E							      ;	0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
bios:E11E							      ;	1: Tmr 2 data Í¼  AND 0fcH=spkr	OFF
bios:E11E							      ;	3: 1=read high switches
bios:E11E							      ;	4: 0=enable RAM	parity checking
bios:E11E							      ;	5: 0=enable I/O	channel	check
bios:E11E							      ;	6: 0=hold keyboard clock low
bios:E11E							      ;	7: 0=enable kbrd
bios:E120		  or	  al, 1
bios:E122		  out	  61h, al			      ;	PC/XT PPI port B bits:
bios:E122							      ;	0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
bios:E122							      ;	1: Tmr 2 data Í¼  AND 0fcH=spkr	OFF
bios:E122							      ;	3: 1=read high switches
bios:E122							      ;	4: 0=enable RAM	parity checking
bios:E122							      ;	5: 0=enable I/O	channel	check
bios:E122							      ;	6: 0=hold keyboard clock low
bios:E122							      ;	7: 0=enable kbrd
bios:E124		  mov	  cx, 4000h
bios:E127
bios:E127 loc_FE127:						      ;	CODE XREF: reset:loc_FE127j
bios:E127		  loop	  loc_FE127
bios:E129		  and	  al, 0FEh
bios:E12B		  out	  61h, al			      ;	PC/XT PPI port B bits:
bios:E12B							      ;	0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
bios:E12B							      ;	1: Tmr 2 data Í¼  AND 0fcH=spkr	OFF
bios:E12B							      ;	3: 1=read high switches
bios:E12B							      ;	4: 0=enable RAM	parity checking
bios:E12B							      ;	5: 0=enable I/O	channel	check
bios:E12B							      ;	6: 0=hold keyboard clock low
bios:E12B							      ;	7: 0=enable kbrd
bios:E12D		  mov	  ax, 40h ; '@'
bios:E130		  mov	  ds, ax			      ;	ds = 0x40
bios:E132		  mov	  dx, 213h
bios:E135		  mov	  al, 1
bios:E137		  out	  dx, al			      ;	XT Expansion chassis enable
bios:E138		  nop
bios:E139		  mov	  ax, 102Dh
bios:E13C		  mov	  ds:p400.installed_hardware, ax
bios:E13F		  mov	  ax, 1Eh
bios:E142		  mov	  ds:p400.keyb_buffer_head_ptr,	ax
bios:E145		  mov	  ds:p400.keyb_buffer_tail_ptr,	ax
bios:E148		  mov	  ds:p400.keyb_buffer_start_offset_ptr,	ax
bios:E14B		  add	  ax, 20h ; ' '
bios:E14E		  mov	  ds:p400.keyb_buffer_end_offset_ptr, ax
bios:E151		  mov	  byte ptr ds:p400.video_page_data, 3Fh	; '?'
bios:E156		  mov	  al, 0Eh
bios:E158		  out	  0Fh, al			      ;	DMA controller,	8237A-5.
bios:E158							      ;	master clear. Clear or mask any	or
bios:E158							      ;	all of the channels. Bits:
bios:E158							      ;	0: 1=mask channel 0; 0=enable
bios:E158							      ;	1: 1=mask channel 1;
bios:E158							      ;	2: 1=mask channel 2;
bios:E158							      ;	3: 1=mask channel 3;
bios:E15A		  out	  0Ch, al			      ;	DMA controller,	8237A-5.
bios:E15A							      ;	clear byte pointer flip-flop.
bios:E15C		  mov	  dx, 4
bios:E15F
bios:E15F loc_FE15F:						      ;	CODE XREF: reset+120j
bios:E15F		  mov	  cx, 1
bios:E162
bios:E162 loc_FE162:						      ;	CODE XREF: reset+11Aj
bios:E162		  mov	  ax, cx
bios:E164		  out	  dx, al			      ;	DMA controller,	8237A-5.
bios:E164							      ;	channel	2 base address
bios:E164							      ;	(also sets current address)
bios:E165		  mov	  al, ah
bios:E167		  out	  dx, al			      ;	DMA controller,	8237A-5.
bios:E167							      ;	channel	2 base address
bios:E167							      ;	(also sets current address)
bios:E168		  nop
bios:E169		  in	  al, dx			      ;	DMA controller,	8237A-5.
bios:E169							      ;	channel	2 current address
bios:E16A		  mov	  ah, al
bios:E16C		  in	  al, dx			      ;	DMA controller,	8237A-5.
bios:E16C							      ;	channel	2 current address
bios:E16D		  xchg	  ah, al
bios:E16F		  cmp	  ax, cx
bios:E171		  jnz	  short	loc_FE17F
bios:E173		  rcl	  cx, 1
bios:E175		  jnb	  short	loc_FE162
bios:E177		  inc	  dx
bios:E178		  cmp	  dx, 6
bios:E17B		  jnz	  short	loc_FE15F
bios:E17D		  jmp	  short	loc_FE185
bios:E17F ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E17F
bios:E17F loc_FE17F:						      ;	CODE XREF: reset+116j
bios:E17F		  or	  word ptr ds:p400.installed_hardware, 100h
bios:E185
bios:E185 loc_FE185:						      ;	CODE XREF: reset+122j
bios:E185		  call	  play_bell_sound?
bios:E188		  in	  al, 21h			      ;	Interrupt controller, 8259A.
bios:E18A		  and	  al, 0BFh
bios:E18C		  out	  21h, al			      ;	Interrupt controller, 8259A.
bios:E18E		  sti
bios:E18F		  mov	  ah, 0
bios:E191		  mov	  dl, 0
bios:E193		  int	  13h				      ;	DISK - RESET DISK SYSTEM
bios:E193							      ;	DL = drive (if bit 7 is	set both hard disks and	floppy disks reset)
bios:E195		  mov	  ax, 201h
bios:E198		  mov	  bx, 0F000h
bios:E19B		  mov	  es, bx
bios:E19D		  xor	  bx, bx
bios:E19F		  mov	  cx, 501h
bios:E1A2		  xor	  dx, dx
bios:E1A4		  int	  13h				      ;	DISK - READ SECTORS INTO MEMORY
bios:E1A4							      ;	AL = number of sectors to read,	CH = track, CL = sector
bios:E1A4							      ;	DH = head, DL =	drive, ES:BX ->	buffer to fill
bios:E1A4							      ;	Return:	CF set on error, AH = status, AL = number of sectors read
bios:E1A6		  mov	  ah, 0
bios:E1A8		  mov	  dl, 0
bios:E1AA		  int	  13h				      ;	DISK - RESET DISK SYSTEM
bios:E1AA							      ;	DL = drive (if bit 7 is	set both hard disks and	floppy disks reset)
bios:E1AC		  mov	  ax, 201h
bios:E1AF		  mov	  bx, 0F000h
bios:E1B2		  mov	  es, bx
bios:E1B4		  xor	  bx, bx
bios:E1B6		  mov	  cx, 0A01h
bios:E1B9		  mov	  dx, 1
bios:E1BC		  int	  13h				      ;	DISK - READ SECTORS INTO MEMORY
bios:E1BC							      ;	AL = number of sectors to read,	CH = track, CL = sector
bios:E1BC							      ;	DH = head, DL =	drive, ES:BX ->	buffer to fill
bios:E1BC							      ;	Return:	CF set on error, AH = status, AL = number of sectors read
bios:E1BE		  jnb	  short	loc_FE1C5
bios:E1C0		  test	  ah, 40h
bios:E1C3		  jnz	  short	loc_FE1CB
bios:E1C5
bios:E1C5 loc_FE1C5:						      ;	CODE XREF: reset+163j
bios:E1C5		  or	  word ptr ds:p400.installed_hardware, 40h
bios:E1CB
bios:E1CB loc_FE1CB:						      ;	CODE XREF: reset+168j
bios:E1CB		  cli
bios:E1CC		  in	  al, 21h			      ;	Interrupt controller, 8259A.
bios:E1CE		  or	  al, 40h
bios:E1D0		  out	  21h, al			      ;	Interrupt controller, 8259A.
bios:E1D2		  mov	  al, 0Fh
bios:E1D4		  mov	  dx, 3F2h
bios:E1D7		  out	  dx, al			      ;	Floppy:	digital	output reg bits:
bios:E1D7							      ;	0-1: Drive to select 0-3 (AT: bit 1 not	used)
bios:E1D7							      ;	2:   0=reset diskette controller; 1=enable controller
bios:E1D7							      ;	3:   1=enable diskette DMA and interrupts
bios:E1D7							      ;	4-7: drive motor enable.  Set bits to turn drive ON.
bios:E1D7							      ;
bios:E1D8		  mov	  bx, p400.lpt0_base_addr
bios:E1DB		  mov	  dx, 3BCh
bios:E1DE		  mov	  al, 0A5h ; '¥'
bios:E1E0		  out	  dx, al			      ;	Printer	Data Latch:
bios:E1E0							      ;	send byte to printer
bios:E1E1		  in	  al, dx			      ;	Printer	Data Latch:
bios:E1E1							      ;	fetch last byte	sent
bios:E1E2		  cmp	  al, 0A5h ; '¥'
bios:E1E4		  jnz	  short	loc_FE1F0
bios:E1E6		  mov	  [bx],	dx
bios:E1E8		  inc	  bx
bios:E1E9		  inc	  bx
bios:E1EA		  add	  word ptr ds:p400.installed_hardware, 4000h
bios:E1F0
bios:E1F0 loc_FE1F0:						      ;	CODE XREF: reset+189j
bios:E1F0		  mov	  dx, 378h
bios:E1F3		  mov	  al, 0A5h ; '¥'
bios:E1F5		  out	  dx, al			      ;	Printer	Data Latch:
bios:E1F5							      ;	send byte to printer
bios:E1F6		  in	  al, dx			      ;	Printer	Data Latch:
bios:E1F6							      ;	fetch last byte	sent
bios:E1F7		  cmp	  al, 0A5h ; '¥'
bios:E1F9		  jnz	  short	loc_FE205
bios:E1FB		  mov	  [bx],	dx
bios:E1FD		  inc	  bx
bios:E1FE		  inc	  bx
bios:E1FF		  add	  word ptr ds:p400.installed_hardware, 4000h
bios:E205
bios:E205 loc_FE205:						      ;	CODE XREF: reset+19Ej
bios:E205		  mov	  dx, 278h
bios:E208		  mov	  al, 0A5h ; '¥'
bios:E20A		  out	  dx, al			      ;	Printer	Data Latch:
bios:E20A							      ;	send byte to printer
bios:E20B		  in	  al, dx			      ;	Printer	Data Latch:
bios:E20B							      ;	fetch last byte	sent
bios:E20C		  cmp	  al, 0A5h ; '¥'
bios:E20E		  jnz	  short	loc_FE218
bios:E210		  mov	  [bx],	dx
bios:E212		  add	  word ptr ds:p400.installed_hardware, 4000h
bios:E218
bios:E218 loc_FE218:						      ;	CODE XREF: reset+1B3j
bios:E218		  mov	  bx, p400.lpt0_timeout
bios:E21B		  mov	  word ptr [bx], 1414h
bios:E21F		  mov	  word ptr [bx+2], 1414h
bios:E224		  mov	  bx, p400
bios:E227		  mov	  dx, 3FBh
bios:E22A		  mov	  al, 80h ; '€'
bios:E22C		  out	  dx, al			      ;	COM: line control register bits:
bios:E22C							      ;	0-1: word length: 00=5,	01=6, 10=7, 11=8
bios:E22C							      ;	2:   stop bits:	0=1,1=2
bios:E22C							      ;	3-4: parity: x0=None, 01=Odd, 11=Even
bios:E22C							      ;	5:   stuck parity
bios:E22C							      ;	6:   enable break control. 1=start sending 0s (spaces)
bios:E22C							      ;	7:   DLAB (Divisor Latch Access	Bit)
bios:E22D		  mov	  dx, 3F8h
bios:E230		  mov	  al, 0AAh ; 'ª'
bios:E232		  out	  dx, al			      ;	COM: transmitter holding register
bios:E232							      ;	or (when DLAB=1) divisor latch low byte.
bios:E233		  in	  al, dx			      ;	COM: receiver buffer register.
bios:E233							      ;	8 bits of character received.
bios:E234		  cmp	  al, 0AAh ; 'ª'
bios:E236		  jnz	  short	loc_FE242
bios:E238		  mov	  [bx],	dx
bios:E23A		  inc	  bx
bios:E23B		  inc	  bx
bios:E23C		  add	  word ptr ds:p400.installed_hardware, 200h
bios:E242
bios:E242 loc_FE242:						      ;	CODE XREF: reset+1DBj
bios:E242		  mov	  dx, 2FBh
bios:E245		  mov	  al, 80h ; '€'
bios:E247		  out	  dx, al			      ;	COM: line control register bits:
bios:E247							      ;	0-1: word length: 00=5,	01=6, 10=7, 11=8
bios:E247							      ;	2:   stop bits:	0=1,1=2
bios:E247							      ;	3-4: parity: x0=None, 01=Odd, 11=Even
bios:E247							      ;	5:   stuck parity
bios:E247							      ;	6:   enable break control. 1=start sending 0s (spaces)
bios:E247							      ;	7:   DLAB (Divisor Latch Access	Bit)
bios:E248		  mov	  dx, 2F8h
bios:E24B		  mov	  al, 0AAh ; 'ª'
bios:E24D		  out	  dx, al			      ;	COM: transmitter holding register
bios:E24D							      ;	or (when DLAB=1) divisor latch low byte.
bios:E24E		  in	  al, dx			      ;	COM: receiver buffer register.
bios:E24E							      ;	8 bits of character received.
bios:E24F		  cmp	  al, 0AAh ; 'ª'
bios:E251		  jnz	  short	loc_FE25B
bios:E253		  mov	  [bx],	dx
bios:E255		  add	  word ptr ds:p400.installed_hardware, 200h
bios:E25B
bios:E25B loc_FE25B:						      ;	CODE XREF: reset+1F6j
bios:E25B		  mov	  bx, p400.comm_0_timeout
bios:E25E		  mov	  word ptr [bx], 101h
bios:E262		  mov	  word ptr [bx+2], 101h
bios:E267		  mov	  ah, 1
bios:E269		  mov	  dx, 0
bios:E26C		  int	  17h				      ;	PRINTER	- INITIALIZE
bios:E26C							      ;	DX = printer port (0-3)
bios:E26C							      ;	Return:	AH = status
bios:E26E		  mov	  ax, 43h ; 'C'
bios:E271		  mov	  dx, 0
bios:E274		  int	  14h				      ;	SERIAL I/O - INITIALIZE	USART
bios:E274							      ;	AL = initializing parameters, DX = port	number (0-3)
bios:E274							      ;	Return:	AH = RS-232 status code	bits, AL = modem status	bits
bios:E276		  mov	  ah, 1
bios:E278		  int	  14h				      ;	SERIAL I/O - TRANSMIT CHARACTER
bios:E278							      ;	AL = character,	DX = port number (0-3)
bios:E278							      ;	Return:	AH = RS-232 status code	bits, AL = modem status	bits
bios:E27A		  mov	  ax, 43h ; 'C'
bios:E27D		  mov	  dx, 1
bios:E280		  int	  14h				      ;	SERIAL I/O - INITIALIZE	USART
bios:E280							      ;	AL = initializing parameters, DX = port	number (0-3)
bios:E280							      ;	Return:	AH = RS-232 status code	bits, AL = modem status	bits
bios:E282		  mov	  ah, 1
bios:E284		  int	  14h				      ;	SERIAL I/O - TRANSMIT CHARACTER
bios:E284							      ;	AL = character,	DX = port number (0-3)
bios:E284							      ;	Return:	AH = RS-232 status code	bits, AL = modem status	bits
bios:E286		  mov	  ax, 0C800h
bios:E289		  mov	  ds, ax			      ;	ds = 0xc800
bios:E28B		  mov	  cx, 58h ; 'X'
bios:E28E
bios:E28E loc_FE28E:						      ;	CODE XREF: reset+26Ej
bios:E28E		  xor	  si, si
bios:E290		  cmp	  word ptr [si], 0AA55h
bios:E294		  jnz	  short	loc_FE2C2
bios:E296		  push	  cx
bios:E297		  mov	  cl, 0
bios:E299		  mov	  ch, [si+2]
bios:E29C		  add	  cx, cx
bios:E29E		  mov	  al, 0
bios:E2A0
bios:E2A0 loc_FE2A0:						      ;	CODE XREF: reset+248j
bios:E2A0		  add	  al, [si]
bios:E2A2		  inc	  si
bios:E2A3		  loop	  loc_FE2A0
bios:E2A5		  or	  al, al
bios:E2A7		  jnz	  short	loc_FE2C1
bios:E2A9		  mov	  ax, 40h ; '@'
bios:E2AC		  mov	  es, ax			      ;	es = 0x40
bios:E2AE		  mov	  word ptr es:p400.POST_entry_point_offset, 3
bios:E2B5		  mov	  word ptr es:p400.POST_entry_point_seg, ds
bios:E2BA		  push	  ds
bios:E2BB		  call	  dword	ptr es:p400.POST_entry_point_offset
bios:E2C0		  pop	  ds
bios:E2C1
bios:E2C1 loc_FE2C1:						      ;	CODE XREF: reset+24Cj
bios:E2C1		  pop	  cx
bios:E2C2
bios:E2C2 loc_FE2C2:						      ;	CODE XREF: reset+239j
bios:E2C2		  mov	  ax, ds
bios:E2C4		  add	  ax, 80h ; '€'
bios:E2C7		  mov	  ds, ax
bios:E2C9		  loop	  loc_FE28E
bios:E2CB		  in	  al, 21h			      ;	Interrupt controller, 8259A.
bios:E2CD		  and	  al, 0FDh
bios:E2CF		  out	  21h, al			      ;	Interrupt controller, 8259A.
bios:E2D1		  sti
bios:E2D2		  mov	  ah, 1
bios:E2D4		  int	  16h				      ;	KEYBOARD - CHECK BUFFER, DO NOT	CLEAR
bios:E2D4							      ;	Return:	ZF clear if character in buffer
bios:E2D4							      ;	AH = scan code,	AL = character
bios:E2D4							      ;	ZF set if no character in buffer
bios:E2D6		  cli
bios:E2D7		  jz	  short	loc_FE309
bios:E2D9		  cmp	  ax, 9900h
bios:E2DC		  mov	  ax, 40h ; '@'
bios:E2DF		  mov	  ds, ax			      ;	ds = 0x40
bios:E2E1		  jnz	  short	loc_FE300
bios:E2E3		  mov	  ax, ds:p400.installed_hardware
bios:E2E6		  and	  ax, 0FFCFh
bios:E2E9		  or	  ax, 10h
bios:E2EC		  mov	  ds:p400.installed_hardware, ax
bios:E2EF		  xor	  ax, ax
bios:E2F1		  mov	  es, ax			      ;	es = 0x00
bios:E2F3		  mov	  bx, 74h ; 't'                       ; int 0x1d
bios:E2F6		  mov	  ax, offset video_param_table
bios:E2F9		  mov	  es:[bx], ax
bios:E2FC		  mov	  word ptr es:[bx+2], cs
bios:E300
bios:E300 loc_FE300:						      ;	CODE XREF: reset+286j
bios:E300		  mov	  ax, ds:p400.keyb_buffer_start_offset_ptr
bios:E303		  mov	  ds:p400.keyb_buffer_head_ptr,	ax
bios:E306		  mov	  ds:p400.keyb_buffer_tail_ptr,	ax
bios:E309
bios:E309 loc_FE309:						      ;	CODE XREF: reset+27Cj
bios:E309		  in	  al, 21h			      ;	Interrupt controller, 8259A.
bios:E30B		  or	  al, 2
bios:E30D		  out	  21h, al			      ;	Interrupt controller, 8259A.
bios:E30F		  mov	  ax, 40h ; '@'
bios:E312		  mov	  ds, ax			      ;	ds = 0x40
bios:E314		  xor	  ax, ax
bios:E316		  mov	  bx, ds:p400.installed_hardware
bios:E31A		  and	  bx, 30h
bios:E31E		  mov	  al, 7
bios:E320		  cmp	  bl, 30h ; '0'
bios:E323		  jz	  short	loc_FE32E
bios:E325		  mov	  al, 2
bios:E327		  cmp	  bl, 20h ; ' '
bios:E32A		  jz	  short	loc_FE32E
bios:E32C		  mov	  al, 0
bios:E32E
bios:E32E loc_FE32E:						      ;	CODE XREF: reset+2C8j
bios:E32E							      ;	reset+2CFj
bios:E32E		  int	  10h				      ;	- VIDEO	- SET VIDEO MODE
bios:E32E							      ;	AL = mode
bios:E330		  mov	  al, 0BCh ; '¼'
bios:E332		  out	  21h, al			      ;	Interrupt controller, 8259A.
bios:E334		  mov	  si, offset aBiosRomVersion	      ;	"BIOS ROM version 01.00.00\r\nCopyright	19"...
bios:E337		  call	  print_dos_string
bios:E33A		  int	  19h				      ;	DISK BOOT
bios:E33A							      ;	causes reboot of disk system
bios:E33C		  jmp	  reset
bios:E33C ; END	OF FUNCTION CHUNK FOR reset
bios:E33F
bios:E33F ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:E33F
bios:E33F
bios:E33F sub_FE33F	  proc near				      ;	CODE XREF: reset+84p
bios:E33F							      ;	reset+90p
bios:E33F							      ;	reset+9Cp
bios:E33F							      ;	sub_FE33F+2j
bios:E33F		  movsw
bios:E340		  stosw
bios:E341		  loop	  sub_FE33F
bios:E343		  retn
bios:E343 sub_FE33F	  endp
bios:E343
bios:E344
bios:E344 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:E344
bios:E344
bios:E344 int_18	  proc far				      ;	DATA XREF: bios:FF13o
bios:E344		  pop	  si
bios:E345		  pop	  si
bios:E346		  pop	  si
bios:E347		  mov	  si, offset aInsertSystemDisketteA   ;	"\n\rInsert System Diskette and\n\rStrike an"...
bios:E34A		  call	  print_dos_string
bios:E34D		  xor	  ah, ah
bios:E34F		  int	  16h				      ;	KEYBOARD - READ	CHAR FROM BUFFER, WAIT IF EMPTY
bios:E34F							      ;	Return:	AH = scan code,	AL = character
bios:E351		  int	  19h				      ;	DISK BOOT
bios:E351							      ;	causes reboot of disk system
bios:E353		  iret
bios:E353 int_18	  endp ; sp =  8
bios:E353
bios:E353 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E354 aInsertSystemDisketteA db 0Ah				      ;	DATA XREF: int_18+3o
bios:E354		  db 0Dh,'Insert System Diskette and',0Ah
bios:E354		  db 0Dh,'Strike any key when ready',0Ah
bios:E354		  db 0Dh,'$'
bios:E38E
bios:E38E ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:E38E
bios:E38E
bios:E38E print_dos_string proc	near				      ;	CODE XREF: reset+2DCp
bios:E38E							      ;	int_18+6p
bios:E38E							      ;	print_dos_string+10j
bios:E38E		  mov	  al, cs:[si]
bios:E391		  cmp	  al, 24h ; '$'
bios:E393		  jz	  short	lret
bios:E395		  push	  si
bios:E396		  mov	  ah, 0Eh
bios:E398		  mov	  bl, 7
bios:E39A		  int	  10h				      ;	- VIDEO	- WRITE	CHARACTER AND ADVANCE CURSOR (TTY WRITE)
bios:E39A							      ;	AL = character,	BH = display page (alpha modes)
bios:E39A							      ;	BL = foreground	color (graphics	modes)
bios:E39C		  pop	  si
bios:E39D		  inc	  si
bios:E39E		  jmp	  short	print_dos_string
bios:E3A0 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E3A0
bios:E3A0 lret:							      ;	CODE XREF: print_dos_string+5j
bios:E3A0		  retn
bios:E3A0 print_dos_string endp
bios:E3A0
bios:E3A1
bios:E3A1 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:E3A1
bios:E3A1
bios:E3A1 int_15	  proc far				      ;	DATA XREF: bios:FF0Do
bios:E3A1		  mov	  ah, 86h ; '†'
bios:E3A3		  stc
bios:E3A4		  retf	  2
bios:E3A4 int_15	  endp
bios:E3A4
bios:E3A7
bios:E3A7 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:E3A7
bios:E3A7
bios:E3A7 int_ack_handler proc far				      ;	DATA XREF: bios:FEF7o
bios:E3A7							      ;	bios:FEF9o
bios:E3A7							      ;	bios:FEFBo
bios:E3A7							      ;	bios:FEFDo
bios:E3A7							      ;	bios:FF01o
bios:E3A7		  push	  ax
bios:E3A8		  push	  ds
bios:E3A9		  mov	  ax, 40h ; '@'
bios:E3AC		  mov	  ds, ax
bios:E3AE		  mov	  al, 0Bh
bios:E3B0		  out	  20h, al			      ;	Interrupt controller, 8259A.
bios:E3B2		  in	  al, 20h			      ;	Interrupt controller, 8259A.
bios:E3B4		  or	  al, al
bios:E3B6		  jz	  short	l0
bios:E3B8		  mov	  ah, al
bios:E3BA		  in	  al, 21h			      ;	Interrupt controller, 8259A.
bios:E3BC		  or	  al, ah
bios:E3BE		  out	  21h, al			      ;	Interrupt controller, 8259A.
bios:E3C0		  mov	  al, 20h ; ' '
bios:E3C2		  out	  20h, al			      ;	Interrupt controller, 8259A.
bios:E3C4		  jmp	  short	l1
bios:E3C6 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E3C6
bios:E3C6 l0:							      ;	CODE XREF: int_ack_handler+Fj
bios:E3C6		  mov	  ah, 0FFh
bios:E3C8
bios:E3C8 l1:							      ;	CODE XREF: int_ack_handler+1Dj
bios:E3C8		  mov	  ds:p400.POST_last_unexpected_int, ah
bios:E3CC		  pop	  ds
bios:E3CD		  pop	  ax
bios:E3CE		  iret
bios:E3CE int_ack_handler endp
bios:E3CE
bios:E3CE ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E3CF value_7c00	  dd 7C00h				      ;	DATA XREF: int_19:l1r
bios:E3CF							      ;	0000:7c00 should have the boot code
bios:E3D3 aByLsd	  db 'by LSD'                                 ; Tandy developer author?
bios:E3D9		  db 319h dup(0)
bios:E6F2
bios:E6F2 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:E6F2
bios:E6F2
bios:E6F2 int_19	  proc near				      ;	CODE XREF: int_19+29j
bios:E6F2							      ;	DATA XREF: bios:FF15o
bios:E6F2		  pop	  cx
bios:E6F3		  pop	  cx
bios:E6F4		  pop	  cx
bios:E6F5		  mov	  cx, 5
bios:E6F8
bios:E6F8 l0:							      ;	CODE XREF: int_19+25j
bios:E6F8		  sti
bios:E6F9		  push	  cx
bios:E6FA		  mov	  ah, 0
bios:E6FC		  int	  13h				      ;	DISK - RESET DISK SYSTEM
bios:E6FC							      ;	DL = drive (if bit 7 is	set both hard disks and	floppy disks reset)
bios:E6FE		  mov	  bx, 7C00h
bios:E701		  mov	  ax, 0
bios:E704		  mov	  es, ax
bios:E706		  mov	  dl, 0
bios:E708		  mov	  dh, 0
bios:E70A		  mov	  ch, 0
bios:E70C		  mov	  cl, 1
bios:E70E		  mov	  al, 1
bios:E710		  mov	  ah, 2
bios:E712		  int	  13h				      ;	DISK - READ SECTORS INTO MEMORY
bios:E712							      ;	AL = number of sectors to read,	CH = track, CL = sector
bios:E712							      ;	DH = head, DL =	drive, ES:BX ->	buffer to fill
bios:E712							      ;	Return:	CF set on error, AH = status, AL = number of sectors read
bios:E714		  pop	  cx
bios:E715		  jnb	  short	l1
bios:E717		  loop	  l0
bios:E719		  int	  18h				      ;	TRANSFER TO ROM	BASIC
bios:E719							      ;	causes transfer	to ROM-based BASIC (IBM-PC)
bios:E719							      ;	often reboots a	compatible; often has no effect	at all
bios:E71B		  jmp	  short	int_19
bios:E71D ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E71D
bios:E71D l1:							      ;	CODE XREF: int_19+23j
bios:E71D		  jmp	  cs:value_7c00
bios:E71D int_19	  endp
bios:E71D
bios:E71D ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E722		  db	0
bios:E723		  db	0
bios:E724		  db	0
bios:E725		  db	0
bios:E726		  db	0
bios:E727		  db	0
bios:E728		  db	0
bios:E729 word_FE729	  dw 417h				      ;	DATA XREF: int_14+48r
bios:E72B		  dw 300h
bios:E72D		  dw 180h
bios:E72F		  dw 0C0h
bios:E731		  dw 60h
bios:E733		  dw 30h
bios:E735		  dw 18h
bios:E737		  dw 0Ch
bios:E739
bios:E739 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:E739
bios:E739
bios:E739 int_14	  proc far				      ;	DATA XREF: bios:FF0Bo
bios:E739		  call	  int_push_regs
bios:E73C		  mov	  di, 8
bios:E73F		  nop
bios:E740		  call	  check_valid_subfunction
bios:E743		  jb	  short	exit0
bios:E745		  mov	  bx, dx
bios:E747		  xor	  cx, cx
bios:E749		  mov	  cl, [bx+p400.comm_0_timeout]
bios:E74D		  shl	  bx, 1
bios:E74F		  mov	  dx, [bx+p400.comm_0_base_addr]
bios:E753		  or	  dx, dx
bios:E755		  jnz	  short	l0
bios:E757		  xor	  ah, ah
bios:E759		  jmp	  exit1
bios:E75C ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E75C
bios:E75C l0:							      ;	CODE XREF: int_14+1Cj
bios:E75C		  jmp	  word ptr cs:int_14_jump_tbl[di]
bios:E75C ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E761 int_14_jump_tbl:					      ;	DATA XREF: int_14:l0r
bios:E761		  dw offset int_14_00
bios:E763		  dw offset int_14_01
bios:E765		  dw offset int_14_02
bios:E767		  dw offset int_14_03
bios:E769 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E769
bios:E769 exit0:						      ;	CODE XREF: int_14+Aj
bios:E769		  jmp	  exit1
bios:E76C ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E76C
bios:E76C int_14_00:						      ;	CODE XREF: int_14:l0j
bios:E76C							      ;	DATA XREF: int_14:int_14_jump_tblo
bios:E76C		  mov	  ah, al
bios:E76E		  mov	  al, 80h ; '€'
bios:E770		  add	  dx, 3
bios:E773		  out	  dx, al
bios:E774		  dec	  dx
bios:E775		  dec	  dx
bios:E776		  mov	  bl, ah
bios:E778		  and	  bl, 0E0h
bios:E77B		  mov	  cl, 4
bios:E77D		  shr	  bl, cl
bios:E77F		  xor	  bh, bh
bios:E781		  mov	  cx, cs:word_FE729[bx]
bios:E786		  mov	  al, ch
bios:E788		  out	  dx, al
bios:E789		  mov	  al, cl
bios:E78B		  dec	  dx
bios:E78C		  out	  dx, al
bios:E78D		  mov	  al, ah
bios:E78F		  and	  al, 1Fh
bios:E791		  add	  dx, 3
bios:E794		  out	  dx, al
bios:E795		  sub	  dx, 3
bios:E798		  inc	  dx
bios:E799		  xor	  al, al
bios:E79B		  out	  dx, al
bios:E79C		  dec	  dx
bios:E79D		  jmp	  int_14_03
bios:E7A0 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E7A0
bios:E7A0 int_14_01:						      ;	CODE XREF: int_14:l0j
bios:E7A0							      ;	DATA XREF: int_14+2Ao
bios:E7A0		  mov	  ah, al
bios:E7A2		  mov	  al, 3
bios:E7A4		  add	  dx, 4
bios:E7A7		  out	  dx, al
bios:E7A8		  inc	  dx
bios:E7A9		  inc	  dx
bios:E7AA		  xor	  bx, bx
bios:E7AC
bios:E7AC l1:							      ;	CODE XREF: int_14+94j
bios:E7AC							      ;	int_14+96j
bios:E7AC		  in	  al, dx
bios:E7AD		  test	  al, 30h
bios:E7AF		  jz	  short	l4
bios:E7B1		  xor	  bx, bx
bios:E7B3		  dec	  dx
bios:E7B4
bios:E7B4 l2:							      ;	CODE XREF: int_14+81j
bios:E7B4							      ;	int_14+83j
bios:E7B4		  in	  al, dx
bios:E7B5		  test	  al, 20h
bios:E7B7		  jnz	  short	l3
bios:E7B9		  dec	  bx
bios:E7BA		  jnz	  short	l2
bios:E7BC		  loop	  l2
bios:E7BE		  jmp	  short	l5
bios:E7C0 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E7C0
bios:E7C0 l3:							      ;	CODE XREF: int_14+7Ej
bios:E7C0		  sub	  dx, 5
bios:E7C3		  mov	  al, ah
bios:E7C5		  out	  dx, al
bios:E7C6		  xchg	  ah, al
bios:E7C8		  xor	  ah, ah
bios:E7CA		  jmp	  short	exit1
bios:E7CC ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E7CC
bios:E7CC l4:							      ;	CODE XREF: int_14+76j
bios:E7CC		  dec	  bx
bios:E7CD		  jnz	  short	l1
bios:E7CF		  loop	  l1
bios:E7D1		  dec	  dx
bios:E7D2
bios:E7D2 l5:							      ;	CODE XREF: int_14+85j
bios:E7D2		  in	  al, dx
bios:E7D3		  or	  al, 80h
bios:E7D5		  xchg	  ah, al
bios:E7D7		  and	  ah, 9Eh
bios:E7DA		  jmp	  short	exit1
bios:E7DC ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E7DC
bios:E7DC int_14_02:						      ;	CODE XREF: int_14:l0j
bios:E7DC							      ;	DATA XREF: int_14+2Co
bios:E7DC		  mov	  al, 1
bios:E7DE		  add	  dx, 4
bios:E7E1		  out	  dx, al
bios:E7E2		  sub	  dx, 4
bios:E7E5		  xor	  bx, bx
bios:E7E7
bios:E7E7 l6:							      ;	CODE XREF: int_14+BAj
bios:E7E7							      ;	int_14+BCj
bios:E7E7		  add	  dx, 6
bios:E7EA		  in	  al, dx
bios:E7EB		  sub	  dx, 6
bios:E7EE		  test	  al, 20h
bios:E7F0		  jnz	  short	l7
bios:E7F2		  dec	  bx
bios:E7F3		  jnz	  short	l6
bios:E7F5		  loop	  l6
bios:E7F7		  jmp	  short	l10
bios:E7F9 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E7F9
bios:E7F9 l7:							      ;	CODE XREF: int_14+B7j
bios:E7F9		  xor	  bx, bx
bios:E7FB
bios:E7FB l8:							      ;	CODE XREF: int_14+D6j
bios:E7FB							      ;	int_14+D8j
bios:E7FB		  add	  dx, 5
bios:E7FE		  in	  al, dx
bios:E7FF		  sub	  dx, 5
bios:E802		  test	  al, 1
bios:E804		  jz	  short	l9
bios:E806		  mov	  ah, al
bios:E808		  and	  ah, 1Eh
bios:E80B		  in	  al, dx
bios:E80C		  jmp	  short	exit1
bios:E80E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E80E
bios:E80E l9:							      ;	CODE XREF: int_14+CBj
bios:E80E		  dec	  bx
bios:E80F		  jnz	  short	l8
bios:E811		  loop	  l8
bios:E813
bios:E813 l10:							      ;	CODE XREF: int_14+BEj
bios:E813		  xor	  ah, ah
bios:E815		  add	  dx, 5
bios:E818		  in	  al, dx
bios:E819		  or	  al, 80h
bios:E81B		  xchg	  ah, al
bios:E81D		  or	  ah, 9Eh
bios:E820		  jmp	  short	exit1
bios:E822 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E822
bios:E822 int_14_03:						      ;	CODE XREF: int_14:l0j
bios:E822							      ;	int_14+64j
bios:E822							      ;	DATA XREF: int_14+2Eo
bios:E822		  add	  dx, 5
bios:E825		  in	  al, dx
bios:E826		  mov	  ah, al
bios:E828		  inc	  dx
bios:E829		  in	  al, dx
bios:E82A
bios:E82A exit1:						      ;	CODE XREF: int_14+20j
bios:E82A							      ;	int_14:exit0j
bios:E82A							      ;	int_14+91j
bios:E82A							      ;	int_14+A1j
bios:E82A							      ;	int_14+D3j
bios:E82A							      ;	int_14+E7j
bios:E82A		  jmp	  near ptr int_pop_regs_and_exit
bios:E82A int_14	  endp
bios:E82A
bios:E82A ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E82D		  db	0
bios:E82E
bios:E82E ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:E82E
bios:E82E
bios:E82E int_16	  proc far				      ;	DATA XREF: bios:FF0Fo
bios:E82E		  sti
bios:E82F		  push	  bx
bios:E830		  push	  cx
bios:E831		  push	  si
bios:E832		  push	  di
bios:E833		  push	  ds
bios:E834		  pushf
bios:E835		  mov	  di, 6
bios:E838		  nop
bios:E839		  call	  check_valid_subfunction
bios:E83C		  jb	  short	error
bios:E83E		  jmp	  word ptr cs:int_16_jmp_tbl[di]
bios:E83E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E843 int_16_jmp_tbl:					      ;	DATA XREF: int_16+10r
bios:E843		  dw offset int_16_00
bios:E845		  dw offset int_16_01
bios:E847		  dw offset int_16_02
bios:E849 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E849
bios:E849 error:						      ;	CODE XREF: int_16+Ej
bios:E849		  jmp	  short	exit
bios:E849 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E84B		  db  90h ; 
bios:E84C ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E84C
bios:E84C int_16_00:						      ;	CODE XREF: int_16+10j
bios:E84C							      ;	int_16+44j
bios:E84C							      ;	DATA XREF: int_16:int_16_jmp_tblo
bios:E84C		  cli
bios:E84D		  mov	  si, ds:p400.keyb_buffer_head_ptr
bios:E851		  cmp	  si, ds:p400.keyb_buffer_tail_ptr
bios:E855		  jz	  short	loc_FE86C
bios:E857		  mov	  ax, [si]
bios:E859		  inc	  si
bios:E85A		  inc	  si
bios:E85B		  cmp	  si, ds:p400.keyb_buffer_end_offset_ptr
bios:E85F		  jb	  short	loc_FE865
bios:E861		  mov	  si, ds:p400.keyb_buffer_start_offset_ptr
bios:E865
bios:E865 loc_FE865:						      ;	CODE XREF: int_16+31j
bios:E865		  mov	  ds:p400.keyb_buffer_head_ptr,	si
bios:E869		  sti
bios:E86A		  jmp	  short	exit
bios:E86C ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E86C
bios:E86C loc_FE86C:						      ;	CODE XREF: int_16+27j
bios:E86C		  sti
bios:E86D		  mov	  cx, 19h
bios:E870
bios:E870 loc_FE870:						      ;	CODE XREF: int_16:loc_FE870j
bios:E870		  loop	  loc_FE870
bios:E872		  jmp	  short	int_16_00
bios:E874 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E874
bios:E874 int_16_01:						      ;	CODE XREF: int_16+10j
bios:E874							      ;	DATA XREF: int_16+17o
bios:E874		  popf
bios:E875		  xor	  bx, bx
bios:E877		  cli
bios:E878		  mov	  si, ds:p400.keyb_buffer_head_ptr
bios:E87C		  cmp	  si, ds:p400.keyb_buffer_tail_ptr
bios:E880		  sti
bios:E881		  jz	  short	loc_FE88B
bios:E883		  mov	  ax, [si]
bios:E885		  cmp	  bx, 1
bios:E888		  jmp	  short	loc_FE88E
bios:E888 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E88A		  db  90h ; 
bios:E88B ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E88B
bios:E88B loc_FE88B:						      ;	CODE XREF: int_16+53j
bios:E88B		  cmp	  bx, 0
bios:E88E
bios:E88E loc_FE88E:						      ;	CODE XREF: int_16+5Aj
bios:E88E		  jmp	  short	loc_FE894
bios:E890 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E890
bios:E890 int_16_02:						      ;	CODE XREF: int_16+10j
bios:E890							      ;	DATA XREF: int_16+19o
bios:E890		  mov	  al, ds:p400.keyb_status_flags_1
bios:E893
bios:E893 exit:							      ;	CODE XREF: int_16:errorj
bios:E893							      ;	int_16+3Cj
bios:E893		  popf
bios:E894
bios:E894 loc_FE894:						      ;	CODE XREF: int_16:loc_FE88Ej
bios:E894		  pop	  ds
bios:E895		  pop	  di
bios:E896		  pop	  si
bios:E897		  pop	  cx
bios:E898		  pop	  bx
bios:E899		  retf	  2
bios:E899 int_16	  endp
bios:E899
bios:E899 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E89C		  db 0EBh dup(0)
bios:E987
bios:E987 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:E987
bios:E987 ;	The keyboard generates an INT 9	every time a key is pushed or
bios:E987 ;	released.
bios:E987 ;
bios:E987 ;	   Notes:	  This is a hardware interrupt (IRQ 1) activated by
bios:E987 ;			  the make or break of every keystroke.
bios:E987 ;
bios:E987 ;	The default INT	9 handler in the ROM reads the make and	break scan
bios:E987 ;	codes from the keyboard	and converts them into actions or key codes as
bios:E987 ;	follows:
bios:E987 ;
bios:E987 ;	     .	 For ASCII keys, when a	make code is encountered, the ASCII code
bios:E987 ;		 and the scan code for the key are placed in the 32-byte keyboard
bios:E987 ;		 buffer, which is located at 0:41Eh. The ASCII code and	scan code
bios:E987 ;		 are placed in the buffer at the location addressed by the
bios:E987 ;		 Keyboard Buffer Tail Pointer (0:041Ch). The Keyboard Buffer Tail
bios:E987 ;		 Pointer is then incremented by	2, and if it points past the end
bios:E987 ;		 of the	buffer,	it is adjusted so that it points to the	beginning
bios:E987 ;		 of the	buffer.
bios:E987 ;
bios:E987 ;	     .	 If Ctrl, Alt, or Shift	has been pressed, the Shift Status
bios:E987 ;		 (0:0417h) and Extended	Shift Status (0:0418h) bytes are updated.
bios:E987 ;
bios:E987 ;	     .	 If the	Ctrl-Alt-Del combination has been pressed, the Reset
bios:E987 ;		 Flag (0:0472h)	is set to 1234h	and control is given to	the
bios:E987 ;		 power-on self test (POST). Because the	Reset Flag is 1234h, the
bios:E987 ;		 POST routine bypasses the memory test.
bios:E987 ;
bios:E987 ;	     .	 If the	Pause key sequence has been entered, this interrupt
bios:E987 ;		 enters	an indefinite loop. The	loop is	broken as soon as a valid
bios:E987 ;		 ASCII keystroke is entered. (The PC Convertible issues	an INT
bios:E987 ;		 15h, Service 41h (Wait	on External Event), to execute its pause
bios:E987 ;		 loop.)
bios:E987 ;
bios:E987 ;	     .	 If the	Print Screen key sequence is entered, an INT 05h (Print
bios:E987 ;		 Screen) is executed.
bios:E987 ;
bios:E987 ;	     .	 If the	Control-Break key sequence is entered, an INT 1Bh
bios:E987 ;		 (Control-Break) is executed.
bios:E987 ;
bios:E987 ;	     .	 For XTs dated 1/10/86 and after, ATs, XT-286s,	and PC
bios:E987 ;		 Convertibles, the INT 9h handler generates an INT 15h,	function
bios:E987 ;		 91h (Interrupt	Complete) to signal that a keystroke is
bios:E987 ;		 available. Also, on these machines, a make or break of	the Sys
bios:E987 ;		 Req key generates an INT 15h, function	85h (System Request Key
bios:E987 ;		 Pressed).
bios:E987 ;
bios:E987 ;	     .	 For ATs dated 6/10/85 and after, XT-286s, and PC Convertibles,
bios:E987 ;		 an INT	15h, function 4Fh (Keyboard Intercept) is executed after
bios:E987 ;		 the scan code has been	read from the keyboard port (60h). This
bios:E987 ;		 allows	the user to redefine or	remove a keystroke.
bios:E987 ;
bios:E987 ;	INT 16 provides	a standard way to read characters from the keyboard
bios:E987 ;	buffer that have been placed there by the INT 9	handler	in ROM.
bios:E987
bios:E987 int_09	  proc far				      ;	DATA XREF: bios:FEF5o
bios:E987		  call	  int_push_regs
bios:E98A		  push	  ax
bios:E98B		  mov	  ax, 40h ; '@'
bios:E98E		  mov	  ds, ax			      ;	ds = 0x40
bios:E990		  mov	  ch, ds:p400.keyb_status_flags_1
bios:E994		  mov	  cl, ds:p400.keyb_status_flags_2
bios:E998		  mov	  dx, 60h ; '`'
bios:E99B		  in	  al, dx			      ;	AT Keyboard controller 8042.
bios:E99C		  cmp	  al, 0FFh
bios:E99E		  jnz	  short	l0
bios:E9A0		  call	  play_bell_sound?
bios:E9A3		  jmp	  l29
bios:E9A6 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E9A6
bios:E9A6 l0:							      ;	CODE XREF: int_09+17j
bios:E9A6		  mov	  ah, al
bios:E9A8		  and	  al, 7Fh
bios:E9AA		  cmp	  al, 1Dh			      ;	ctrl?
bios:E9AC		  jnz	  short	l1
bios:E9AE		  jmp	  l34
bios:E9B1 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E9B1
bios:E9B1 l1:							      ;	CODE XREF: int_09+25j
bios:E9B1		  cmp	  al, 2Ah ; '*'                       ; left shift?
bios:E9B3		  jnz	  short	l2
bios:E9B5		  jmp	  l36
bios:E9B8 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E9B8
bios:E9B8 l2:							      ;	CODE XREF: int_09+2Cj
bios:E9B8		  cmp	  al, 36h ; '6'                       ; right shift?
bios:E9BA		  jnz	  short	l3
bios:E9BC		  jmp	  l38
bios:E9BF ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E9BF
bios:E9BF l3:							      ;	CODE XREF: int_09+33j
bios:E9BF		  cmp	  al, 38h ; '8'                       ; alt?
bios:E9C1		  jnz	  short	l4
bios:E9C3		  jmp	  l40
bios:E9C6 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E9C6
bios:E9C6 l4:							      ;	CODE XREF: int_09+3Aj
bios:E9C6		  cmp	  al, 3Ah ; ':'
bios:E9C8		  jnz	  short	l5
bios:E9CA		  jmp	  l43
bios:E9CD ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E9CD
bios:E9CD l5:							      ;	CODE XREF: int_09+41j
bios:E9CD		  cmp	  al, 45h ; 'E'                       ; num lock?
bios:E9CF		  jnz	  short	l6
bios:E9D1		  jmp	  l47
bios:E9D4 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E9D4
bios:E9D4 l6:							      ;	CODE XREF: int_09+48j
bios:E9D4		  cmp	  al, 46h ; 'F'                       ; hold?
bios:E9D6		  jnz	  short	l7
bios:E9D8		  jmp	  l51
bios:E9DB ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E9DB
bios:E9DB l7:							      ;	CODE XREF: int_09+4Fj
bios:E9DB		  cmp	  al, 55h ; 'U'                       ; insert?
bios:E9DD		  jnz	  short	l8
bios:E9DF		  mov	  al, ah
bios:E9E1		  jmp	  short	l11
bios:E9E3 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E9E3
bios:E9E3 l8:							      ;	CODE XREF: int_09+56j
bios:E9E3		  mov	  al, ah
bios:E9E5		  test	  cl, 8
bios:E9E8		  jz	  short	l11
bios:E9EA		  cmp	  al, 9Dh ; ''                       ; break code: ctrl?
bios:E9EC		  jnz	  short	l9
bios:E9EE		  and	  ch, 11111011b			      ;	mask off ctrl bit from status
bios:E9F1		  jmp	  short	l10
bios:E9F3 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:E9F3
bios:E9F3 l9:							      ;	CODE XREF: int_09+65j
bios:E9F3		  cmp	  al, 0
bios:E9F5		  jl	  short	l10
bios:E9F7		  and	  cl, 8
bios:E9FA
bios:E9FA l10:							      ;	CODE XREF: int_09+6Aj
bios:E9FA							      ;	int_09+6Ej
bios:E9FA		  call	  kbd_reset_and_ack_int
bios:E9FD		  jmp	  l32
bios:EA00 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EA00
bios:EA00 l11:							      ;	CODE XREF: int_09+5Aj
bios:EA00							      ;	int_09+61j
bios:EA00		  cmp	  al, 0D5h ; 'Õ'                      ; break code: insert?
bios:EA02		  jnz	  short	l12
bios:EA04		  jmp	  l56
bios:EA07 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EA07
bios:EA07 l12:							      ;	CODE XREF: int_09+7Bj
bios:EA07		  cmp	  al, 0
bios:EA09		  jge	  short	l13
bios:EA0B		  jmp	  l29
bios:EA0E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EA0E
bios:EA0E l13:							      ;	CODE XREF: int_09+82j
bios:EA0E		  cmp	  al, 47h ; 'G'
bios:EA10		  jl	  short	l14
bios:EA12		  jmp	  l60
bios:EA15 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EA15
bios:EA15 l14:							      ;	CODE XREF: int_09+89j
bios:EA15		  mov	  byte ptr ds:p400.alt_keypad_entry, 0
bios:EA1A		  cmp	  al, 37h ; '7'
bios:EA1C		  jnz	  short	l15
bios:EA1E		  test	  ch, 3
bios:EA21		  jz	  short	l15
bios:EA23		  jmp	  l84
bios:EA26 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EA26
bios:EA26 l15:							      ;	CODE XREF: int_09+95j
bios:EA26							      ;	int_09+9Aj
bios:EA26		  lea	  bx, byte_FEE05
bios:EA2A		  test	  ch, 40h
bios:EA2D		  jz	  short	l17
bios:EA2F		  cmp	  al, 10h
bios:EA31		  jl	  short	l17
bios:EA33		  cmp	  al, 1Ah
bios:EA35		  jl	  short	l16
bios:EA37		  cmp	  al, 1Eh
bios:EA39		  jl	  short	l17
bios:EA3B		  cmp	  al, 27h ; '''
bios:EA3D		  jl	  short	l16
bios:EA3F		  cmp	  al, 2Ch ; ','
bios:EA41		  jl	  short	l17
bios:EA43		  cmp	  al, 33h ; '3'
bios:EA45		  jge	  short	l17
bios:EA47
bios:EA47 l16:							      ;	CODE XREF: int_09+AEj
bios:EA47							      ;	int_09+B6j
bios:EA47		  lea	  bx, byte_FEE4B
bios:EA4B
bios:EA4B l17:							      ;	CODE XREF: int_09+A6j
bios:EA4B							      ;	int_09+AAj
bios:EA4B							      ;	int_09+B2j
bios:EA4B							      ;	int_09+BAj
bios:EA4B							      ;	int_09+BEj
bios:EA4B		  test	  ch, 3
bios:EA4E		  jz	  short	l19
bios:EA50		  cmp	  bx, offset byte_FEE4B
bios:EA54		  jnz	  short	l18
bios:EA56		  lea	  bx, byte_FEE05
bios:EA5A		  jmp	  short	l19
bios:EA5C ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EA5C
bios:EA5C l18:							      ;	CODE XREF: int_09+CDj
bios:EA5C		  lea	  bx, byte_FEE4B
bios:EA60
bios:EA60 l19:							      ;	CODE XREF: int_09+C7j
bios:EA60							      ;	int_09+D3j
bios:EA60		  test	  ch, 8
bios:EA63		  jz	  short	l20
bios:EA65		  lea	  bx, byte_FEED7
bios:EA69		  jmp	  short	l21
bios:EA6B ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EA6B
bios:EA6B l20:							      ;	CODE XREF: int_09+DCj
bios:EA6B		  test	  ch, 4
bios:EA6E		  jz	  short	l21
bios:EA70		  lea	  bx, byte_FEE91
bios:EA74
bios:EA74 l21:							      ;	CODE XREF: int_09+E2j
bios:EA74							      ;	int_09+E7j
bios:EA74		  call	  sub_FEDE7
bios:EA77		  cmp	  al, 0FFh
bios:EA79		  jnz	  short	l22
bios:EA7B		  jmp	  short	l29
bios:EA7B ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EA7D		  db  90h ; 
bios:EA7E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EA7E
bios:EA7E l22:							      ;	CODE XREF: int_09+F2j
bios:EA7E		  cmp	  ah, 29h ; ')'
bios:EA81		  jz	  short	l26
bios:EA83		  cmp	  ah, 2Bh ; '+'
bios:EA86		  jz	  short	l26
bios:EA88		  cmp	  ah, 3Ah ; ':'
bios:EA8B		  jg	  short	l26
bios:EA8D		  test	  ch, 4
bios:EA90		  jz	  short	l23
bios:EA92		  cmp	  ah, 1
bios:EA95		  jz	  short	l27
bios:EA97		  cmp	  ah, 7
bios:EA9A		  jz	  short	l27
bios:EA9C		  cmp	  ah, 0Bh
bios:EA9F		  jbe	  short	l26
bios:EAA1		  cmp	  ah, 0Dh
bios:EAA4		  jz	  short	l26
bios:EAA6		  cmp	  ah, 0Fh
bios:EAA9		  jz	  short	l26
bios:EAAB		  cmp	  ah, 27h ; '''
bios:EAAE		  jz	  short	l26
bios:EAB0		  cmp	  ah, 28h ; '('
bios:EAB3		  jz	  short	l26
bios:EAB5		  cmp	  ah, 33h ; '3'
bios:EAB8		  jz	  short	l26
bios:EABA		  cmp	  ah, 34h ; '4'
bios:EABD		  jz	  short	l26
bios:EABF		  cmp	  ah, 35h ; '5'
bios:EAC2		  jz	  short	l26
bios:EAC4		  cmp	  ah, 37h ; '7'
bios:EAC7		  jz	  short	l26
bios:EAC9
bios:EAC9 l23:							      ;	CODE XREF: int_09+109j
bios:EAC9		  test	  ch, 8
bios:EACC		  jz	  short	l24
bios:EACE		  cmp	  ah, 39h ; '9'
bios:EAD1		  jz	  short	l27
bios:EAD3		  jmp	  short	l26
bios:EAD5 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EAD5
bios:EAD5 l24:							      ;	CODE XREF: int_09+145j
bios:EAD5		  cmp	  ah, 0Fh
bios:EAD8		  jnz	  short	l25
bios:EADA		  cmp	  al, 0Fh
bios:EADC		  jz	  short	l26
bios:EADE
bios:EADE l25:							      ;	CODE XREF: int_09+151j
bios:EADE		  test	  ch, 8
bios:EAE1		  jz	  short	l27
bios:EAE3
bios:EAE3 l26:							      ;	CODE XREF: int_09+FAj
bios:EAE3							      ;	int_09+FFj
bios:EAE3							      ;	int_09+104j
bios:EAE3							      ;	int_09+118j
bios:EAE3							      ;	int_09+11Dj
bios:EAE3							      ;	int_09+122j ...
bios:EAE3		  mov	  ah, al
bios:EAE5		  xor	  al, al
bios:EAE7
bios:EAE7 l27:							      ;	CODE XREF: int_09+10Ej
bios:EAE7							      ;	int_09+113j
bios:EAE7							      ;	int_09+14Aj
bios:EAE7							      ;	int_09+15Aj
bios:EAE7							      ;	int_09+1EBj
bios:EAE7							      ;	int_09:l80j
bios:EAE7		  mov	  bx, 0B0h ; '°'
bios:EAEA		  mov	  dx, [bx]
bios:EAEC		  or	  dx, [bx+2]
bios:EAEF		  jz	  short	l28
bios:EAF1		  call	  dword	ptr [bx]
bios:EAF3		  jb	  short	l29
bios:EAF5
bios:EAF5 l28:							      ;	CODE XREF: int_09+168j
bios:EAF5		  call	  sub_FEDAA
bios:EAF8
bios:EAF8 l29:							      ;	CODE XREF: int_09+1Cj
bios:EAF8							      ;	int_09+84j
bios:EAF8							      ;	int_09+F4j
bios:EAF8							      ;	int_09+16Cj
bios:EAF8							      ;	int_09+1A5j
bios:EAF8							      ;	int_09+1AAj ...
bios:EAF8		  call	  kbd_reset_and_ack_int
bios:EAFB		  test	  cl, 8
bios:EAFE		  jz	  short	l32
bios:EB00		  mov	  ds:p400.keyb_status_flags_1, ch
bios:EB04		  mov	  ds:p400.keyb_status_flags_2, cl
bios:EB08
bios:EB08 l30:							      ;	CODE XREF: int_09+189j
bios:EB08		  test	  byte ptr ds:p400.keyb_status_flags_2,	8
bios:EB0D		  jz	  short	l31
bios:EB0F		  sti
bios:EB10		  jmp	  short	l30
bios:EB12 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EB12
bios:EB12 l31:							      ;	CODE XREF: int_09+186j
bios:EB12		  cli
bios:EB13		  jmp	  short	l33
bios:EB15 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EB15
bios:EB15 l32:							      ;	CODE XREF: int_09+76j
bios:EB15							      ;	int_09+177j
bios:EB15		  mov	  ds:p400.keyb_status_flags_1, ch
bios:EB19		  mov	  ds:p400.keyb_status_flags_2, cl
bios:EB1D
bios:EB1D l33:							      ;	CODE XREF: int_09+18Cj
bios:EB1D							      ;	int_09:l85j
bios:EB1D		  pop	  ax
bios:EB1E		  jmp	  near ptr int_pop_regs_and_exit
bios:EB21 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EB21
bios:EB21 l34:							      ;	CODE XREF: int_09+27j
bios:EB21		  cmp	  ah, 1Dh			      ;	ctrl?
bios:EB24		  jnz	  short	l35
bios:EB26		  or	  ch, 100b			      ;	turn on	ctrl bit in status
bios:EB29		  and	  ch, 11111100b			      ;	turn off shift bits
bios:EB2C		  jmp	  short	l29
bios:EB2E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EB2E
bios:EB2E l35:							      ;	CODE XREF: int_09+19Dj
bios:EB2E		  and	  ch, 11111011b			      ;	turn off ctrl bit in status
bios:EB31		  jmp	  short	l29
bios:EB33 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EB33
bios:EB33 l36:							      ;	CODE XREF: int_09+2Ej
bios:EB33		  cmp	  ah, 2Ah ; '*'                       ; left shift?
bios:EB36		  jnz	  short	l37
bios:EB38		  or	  ch, 10b			      ;	turn on	left shift in status
bios:EB3B		  jmp	  short	l29
bios:EB3D ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EB3D
bios:EB3D l37:							      ;	CODE XREF: int_09+1AFj
bios:EB3D		  and	  ch, 11111101b			      ;	turn off left shift in status
bios:EB40		  jmp	  short	l29
bios:EB42 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EB42
bios:EB42 l38:							      ;	CODE XREF: int_09+35j
bios:EB42		  cmp	  ah, 36h ; '6'                       ; right shift?
bios:EB45		  jnz	  short	l39
bios:EB47		  or	  ch, 1				      ;	turn on	right shift in status
bios:EB4A		  jmp	  short	l29
bios:EB4C ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EB4C
bios:EB4C l39:							      ;	CODE XREF: int_09+1BEj
bios:EB4C		  and	  ch, 11111110b			      ;	turn off right shift in	status
bios:EB4F		  jmp	  short	l29
bios:EB51 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EB51
bios:EB51 l40:							      ;	CODE XREF: int_09+3Cj
bios:EB51		  cmp	  ah, 38h ; '8'                       ; alt?
bios:EB54		  jnz	  short	l41
bios:EB56		  or	  ch, 1000b			      ;	turn on	alt in status
bios:EB59		  mov	  byte ptr ds:p400.alt_keypad_entry, 0 ; reset previous	alt+numpad value
bios:EB5E		  and	  ch, 11111100b			      ;	turn off shift in status
bios:EB61		  jmp	  short	l29
bios:EB63 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EB63
bios:EB63 l41:							      ;	CODE XREF: int_09+1CDj
bios:EB63		  and	  ch, 11110111b			      ;	turn off alt in	status
bios:EB66		  cmp	  byte ptr ds:p400.alt_keypad_entry, 0 ; alt + numpad with value?
bios:EB6B		  jz	  short	l42
bios:EB6D		  xor	  ax, ax
bios:EB6F		  mov	  al, ds:p400.alt_keypad_entry	      ;	get previous alt + numpad value
bios:EB72		  jmp	  l27
bios:EB75 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EB75
bios:EB75 l42:							      ;	CODE XREF: int_09+1E4j
bios:EB75		  jmp	  short	l29
bios:EB77 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EB77
bios:EB77 l43:							      ;	CODE XREF: int_09+43j
bios:EB77		  cmp	  ah, 3Ah ; ':'                       ; caps?
bios:EB7A		  jnz	  short	l46
bios:EB7C		  test	  cl, 1000000b
bios:EB7F		  jnz	  short	l44
bios:EB81		  or	  cl, 1000000b
bios:EB84		  test	  ch, 1000000b
bios:EB87		  jnz	  short	l45
bios:EB89		  or	  ch, 1000000b
bios:EB8C
bios:EB8C l44:							      ;	CODE XREF: int_09+1F8j
bios:EB8C							      ;	int_09+254j
bios:EB8C		  jmp	  l29
bios:EB8F ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EB8F
bios:EB8F l45:							      ;	CODE XREF: int_09+200j
bios:EB8F		  and	  ch, 0BFh
bios:EB92		  jmp	  l29
bios:EB95 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EB95
bios:EB95 l46:							      ;	CODE XREF: int_09+1F3j
bios:EB95		  and	  ch, 0BFh
bios:EB98		  and	  cl, 0BFh
bios:EB9B		  jmp	  l29
bios:EB9E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EB9E
bios:EB9E l47:							      ;	CODE XREF: int_09+4Aj
bios:EB9E		  cmp	  ah, 45h ; 'E'                       ; num lock?
bios:EBA1		  jnz	  short	l50
bios:EBA3		  test	  ch, 100b
bios:EBA6		  jz	  short	l48
bios:EBA8		  jmp	  l29
bios:EBAB ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EBAB
bios:EBAB l48:							      ;	CODE XREF: int_09+21Fj
bios:EBAB		  or	  cl, 100000b
bios:EBAE		  test	  ch, 100000b
bios:EBB1		  jnz	  short	l49
bios:EBB3		  or	  ch, 100000b
bios:EBB6		  jmp	  l29
bios:EBB9 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EBB9
bios:EBB9 l49:							      ;	CODE XREF: int_09+22Aj
bios:EBB9		  and	  ch, 11011111b
bios:EBBC		  jmp	  l29
bios:EBBF ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EBBF
bios:EBBF l50:							      ;	CODE XREF: int_09+21Aj
bios:EBBF		  and	  ch, 11011111b
bios:EBC2		  and	  cl, 11011111b
bios:EBC5		  jmp	  l29
bios:EBC8 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EBC8
bios:EBC8 l51:							      ;	CODE XREF: int_09+51j
bios:EBC8		  cmp	  ah, 46h ; 'F'                       ; hold?
bios:EBCB		  jnz	  short	l55
bios:EBCD		  test	  cl, 1000b
bios:EBD0		  jz	  short	l52
bios:EBD2		  and	  cl, 11110111b
bios:EBD5		  jmp	  l29
bios:EBD8 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EBD8
bios:EBD8 l52:							      ;	CODE XREF: int_09+249j
bios:EBD8		  test	  cl, 10000b
bios:EBDB		  jnz	  short	l44
bios:EBDD		  or	  cl, 10000b
bios:EBE0		  test	  ch, 10000b
bios:EBE3		  jnz	  short	l54
bios:EBE5		  or	  ch, 10000b
bios:EBE8		  jmp	  short	l53
bios:EBE8 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EBEA		  db  90h ; 				      ;	unused?
bios:EBEB		  db 0F6h ; ö
bios:EBEC		  db 0C5h ; Å
bios:EBED		  db	4
bios:EBEE		  db  74h ; t
bios:EBEF		  db	6
bios:EBF0 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EBF0
bios:EBF0 l53:							      ;	CODE XREF: int_09+261j
bios:EBF0		  or	  cl, 1000b
bios:EBF3		  jmp	  l29
bios:EBF3 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EBF6		  db 0F6h ; ö				      ;	unused?
bios:EBF7		  db 0C5h ; Å
bios:EBF8		  db	8
bios:EBF9		  db  74h ; t
bios:EBFA		  db	2
bios:EBFB		  db 0EBh ; ë
bios:EBFC		  db 0F3h ; ó
bios:EBFD		  db 0F6h ; ö
bios:EBFE		  db 0C5h ; Å
bios:EBFF		  db	1
bios:EC00		  db  74h ; t
bios:EC01		  db	2
bios:EC02		  db 0EBh ; ë
bios:EC03		  db 0ECh ; ì
bios:EC04		  db 0F6h ; ö
bios:EC05		  db 0C5h ; Å
bios:EC06		  db	2
bios:EC07		  db  74h ; t
bios:EC08		  db	2
bios:EC09		  db 0EBh ; ë
bios:EC0A		  db 0E5h ; å
bios:EC0B ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EC0B
bios:EC0B l54:							      ;	CODE XREF: int_09+25Cj
bios:EC0B		  and	  ch, 11101111b
bios:EC0E		  jmp	  l29
bios:EC11 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EC11
bios:EC11 l55:							      ;	CODE XREF: int_09+244j
bios:EC11		  and	  cl, 11101111b
bios:EC14		  and	  ch, 11101111b
bios:EC17		  jmp	  l29
bios:EC1A ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EC1A
bios:EC1A l56:							      ;	CODE XREF: int_09+7Dj
bios:EC1A		  test	  ch, 100000b
bios:EC1D		  jnz	  short	l58
bios:EC1F		  test	  ch, 1111b
bios:EC22		  jnz	  short	l59
bios:EC24
bios:EC24 l57:							      ;	CODE XREF: int_09+2A6j
bios:EC24		  and	  cl, 1111111b
bios:EC27		  jmp	  l29
bios:EC2A ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EC2A
bios:EC2A l58:							      ;	CODE XREF: int_09+296j
bios:EC2A		  test	  ch, 3
bios:EC2D		  jnz	  short	l57
bios:EC2F
bios:EC2F l59:							      ;	CODE XREF: int_09+29Bj
bios:EC2F		  jmp	  l29
bios:EC32 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EC32
bios:EC32 l60:							      ;	CODE XREF: int_09+8Bj
bios:EC32		  test	  ch, 100b
bios:EC35		  jz	  short	l63
bios:EC37		  cmp	  al, 54h ; 'T'                       ; break?
bios:EC39		  jnz	  short	l61
bios:EC3B		  jmp	  l83
bios:EC3E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EC3E
bios:EC3E l61:							      ;	CODE XREF: int_09+2B2j
bios:EC3E		  cmp	  al, 53h ; 'S'                       ; delete / - ?
bios:EC40		  jnz	  short	l62
bios:EC42		  test	  ch, 1000b
bios:EC45		  jz	  short	l62
bios:EC47		  jmp	  soft_reset
bios:EC4A ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EC4A
bios:EC4A l62:							      ;	CODE XREF: int_09+2B9j
bios:EC4A							      ;	int_09+2BEj
bios:EC4A		  lea	  bx, byte_FEF4F
bios:EC4E		  jmp	  l78
bios:EC51 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EC51
bios:EC51 l63:							      ;	CODE XREF: int_09+2AEj
bios:EC51		  test	  ch, 1000b
bios:EC54		  jz	  short	l71
bios:EC56		  cmp	  al, 53h ; 'S'                       ; delete / - ?
bios:EC58		  jnz	  short	l64
bios:EC5A		  test	  ch, 4
bios:EC5D		  jz	  short	l64
bios:EC5F		  jmp	  soft_reset
bios:EC62 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EC62
bios:EC62 l64:							      ;	CODE XREF: int_09+2D1j
bios:EC62							      ;	int_09+2D6j
bios:EC62		  cmp	  al, 4Ah ; 'J'                       ; cursor down?
bios:EC64		  jz	  short	l69
bios:EC66		  cmp	  al, 4Eh ; 'N'                       ; cursor right?
bios:EC68		  jz	  short	l69
bios:EC6A		  cmp	  al, 54h ; 'T'                       ; break ?
bios:EC6C		  jz	  short	l66
bios:EC6E		  cmp	  al, 53h ; 'S'                       ; delete / - ?
bios:EC70		  jge	  short	l69
bios:EC72		  cmp	  al, 4Eh ; 'N'                       ; cursor right?
bios:EC74		  jz	  short	l65
bios:EC76		  mov	  dx, ax
bios:EC78		  xor	  ax, ax
bios:EC7A		  mov	  al, ds:p400.alt_keypad_entry
bios:EC7D		  shl	  ax, 1
bios:EC7F		  push	  ax
bios:EC80		  shl	  ax, 1
bios:EC82		  shl	  ax, 1
bios:EC84		  pop	  bx
bios:EC85		  add	  ax, bx
bios:EC87		  push	  ax
bios:EC88		  mov	  ax, dx
bios:EC8A		  lea	  bx, byte_FEF1D
bios:EC8E		  sub	  al, 46h ; 'F'
bios:EC90		  call	  sub_FEDE7
bios:EC93		  sub	  al, 30h ; '0'
bios:EC95		  xor	  ah, ah
bios:EC97		  pop	  dx
bios:EC98		  add	  dx, ax
bios:EC9A		  mov	  ds:p400.alt_keypad_entry, dl
bios:EC9E
bios:EC9E l65:							      ;	CODE XREF: int_09+2EDj
bios:EC9E		  jmp	  l29
bios:ECA1 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:ECA1
bios:ECA1 l66:							      ;	CODE XREF: int_09+2E5j
bios:ECA1		  cmp	  al, 54h ; 'T'
bios:ECA3		  jnz	  short	l68
bios:ECA5		  or	  cl, 10h
bios:ECA8		  test	  ch, 10h
bios:ECAB		  jnz	  short	l67
bios:ECAD		  or	  ch, 10h
bios:ECB0		  jmp	  l29
bios:ECB3 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:ECB3
bios:ECB3 l67:							      ;	CODE XREF: int_09+324j
bios:ECB3		  and	  ch, 0EFh
bios:ECB6		  jmp	  l29
bios:ECB9 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:ECB9
bios:ECB9 l68:							      ;	CODE XREF: int_09+31Cj
bios:ECB9		  and	  cl, 0EFh
bios:ECBC		  jmp	  l29
bios:ECBF ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:ECBF
bios:ECBF l69:							      ;	CODE XREF: int_09+2DDj
bios:ECBF							      ;	int_09+2E1j
bios:ECBF							      ;	int_09+2E9j
bios:ECBF		  lea	  bx, byte_FEF68
bios:ECC3		  sub	  al, 46h ; 'F'
bios:ECC5		  call	  sub_FEDE7
bios:ECC8		  cmp	  al, 0FFh
bios:ECCA		  jnz	  short	l70
bios:ECCC		  jmp	  l29
bios:ECCF ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:ECCF
bios:ECCF l70:							      ;	CODE XREF: int_09+343j
bios:ECCF		  jmp	  l26
bios:ECD2 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:ECD2
bios:ECD2 l71:							      ;	CODE XREF: int_09+2CDj
bios:ECD2		  test	  ch, 20h
bios:ECD5		  jnz	  short	l76
bios:ECD7		  cmp	  al, 4Ah ; 'J'
bios:ECD9		  jz	  short	l72
bios:ECDB		  cmp	  al, 4Eh ; 'N'
bios:ECDD		  jz	  short	l72
bios:ECDF		  cmp	  al, 58h ; 'X'
bios:ECE1		  jge	  short	l72
bios:ECE3		  jmp	  short	l73
bios:ECE5 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:ECE5
bios:ECE5 l72:							      ;	CODE XREF: int_09+352j
bios:ECE5							      ;	int_09+356j
bios:ECE5							      ;	int_09+35Aj
bios:ECE5		  test	  ch, 3
bios:ECE8		  jnz	  short	l74
bios:ECEA		  jmp	  short	l77
bios:ECEC ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:ECEC
bios:ECEC l73:							      ;	CODE XREF: int_09+35Cj
bios:ECEC		  test	  ch, 3
bios:ECEF		  jnz	  short	l77
bios:ECF1
bios:ECF1 l74:							      ;	CODE XREF: int_09+361j
bios:ECF1							      ;	int_09+387j
bios:ECF1		  lea	  bx, byte_FEF36
bios:ECF5		  cmp	  al, 52h ; 'R'
bios:ECF7		  jnz	  short	l78
bios:ECF9		  or	  cl, 80h
bios:ECFC		  test	  ch, 80h
bios:ECFF		  jnz	  short	l75
bios:ED01		  or	  ch, 80h
bios:ED04		  jmp	  short	l78
bios:ED06 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:ED06
bios:ED06 l75:							      ;	CODE XREF: int_09+378j
bios:ED06		  and	  ch, 7Fh
bios:ED09		  jmp	  short	l78
bios:ED0B ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:ED0B
bios:ED0B l76:							      ;	CODE XREF: int_09+34Ej
bios:ED0B		  test	  ch, 3
bios:ED0E		  jnz	  short	l74
bios:ED10
bios:ED10 l77:							      ;	CODE XREF: int_09+363j
bios:ED10							      ;	int_09+368j
bios:ED10		  lea	  bx, byte_FEF1D
bios:ED14
bios:ED14 l78:							      ;	CODE XREF: int_09+2C7j
bios:ED14							      ;	int_09+370j
bios:ED14							      ;	int_09+37Dj
bios:ED14							      ;	int_09+382j
bios:ED14		  sub	  al, 46h ; 'F'
bios:ED16		  call	  sub_FEDE7
bios:ED19		  cmp	  al, 0FFh
bios:ED1B		  jnz	  short	l79
bios:ED1D		  jmp	  l29
bios:ED20 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:ED20
bios:ED20 l79:							      ;	CODE XREF: int_09+394j
bios:ED20		  cmp	  bx, offset byte_FEF1D
bios:ED24		  jnz	  short	l81
bios:ED26		  cmp	  al, 50h ; 'P'
bios:ED28		  jz	  short	l82
bios:ED2A		  cmp	  al, 4Dh ; 'M'
bios:ED2C		  jz	  short	l82
bios:ED2E		  cmp	  al, 0
bios:ED30		  jz	  short	l82
bios:ED32		  cmp	  al, 47h ; 'G'
bios:ED34		  jz	  short	l82
bios:ED36		  cmp	  al, 98h ; '˜'
bios:ED38		  jz	  short	l82
bios:ED3A		  cmp	  al, 99h ; '™'
bios:ED3C		  jz	  short	l82
bios:ED3E
bios:ED3E l80:							      ;	CODE XREF: int_09+3BCj
bios:ED3E							      ;	int_09+3C0j
bios:ED3E							      ;	int_09+3C4j
bios:ED3E							      ;	int_09+3C8j
bios:ED3E							      ;	int_09+3CCj
bios:ED3E							      ;	int_09+3D0j ...
bios:ED3E		  jmp	  l27
bios:ED41 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:ED41
bios:ED41 l81:							      ;	CODE XREF: int_09+39Dj
bios:ED41		  cmp	  al, 5Ch ; '\'
bios:ED43		  jz	  short	l80
bios:ED45		  cmp	  al, 7Ch ; '|'
bios:ED47		  jz	  short	l80
bios:ED49		  cmp	  al, 7Eh ; '~'
bios:ED4B		  jz	  short	l80
bios:ED4D		  cmp	  al, 60h ; '`'
bios:ED4F		  jz	  short	l80
bios:ED51		  cmp	  al, 0Dh
bios:ED53		  jz	  short	l80
bios:ED55		  cmp	  al, 5Eh ; '^'
bios:ED57		  jz	  short	l80
bios:ED59		  cmp	  al, 3Ch ; '<'
bios:ED5B		  jz	  short	l80
bios:ED5D		  cmp	  al, 23h ; '#'
bios:ED5F		  jz	  short	l80
bios:ED61		  cmp	  al, 7Bh ; '{'
bios:ED63		  jz	  short	l80
bios:ED65		  cmp	  al, 7Dh ; '}'
bios:ED67		  jz	  short	l80
bios:ED69		  cmp	  al, 0Ah
bios:ED6B		  jz	  short	l80
bios:ED6D
bios:ED6D l82:							      ;	CODE XREF: int_09+3A1j
bios:ED6D							      ;	int_09+3A5j
bios:ED6D							      ;	int_09+3A9j
bios:ED6D							      ;	int_09+3ADj
bios:ED6D							      ;	int_09+3B1j
bios:ED6D							      ;	int_09+3B5j
bios:ED6D		  jmp	  l26
bios:ED70 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:ED70
bios:ED70 soft_reset:						      ;	CODE XREF: int_09+2C0j
bios:ED70							      ;	int_09+2D8j
bios:ED70		  mov	  bx, p400.POST_reset_flag
bios:ED73		  mov	  word ptr [bx], 1234h
bios:ED77		  call	  kbd_reset_and_ack_int
bios:ED7A		  jmp	  reset_entry
bios:ED7D ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:ED7D
bios:ED7D l83:							      ;	CODE XREF: int_09+2B4j
bios:ED7D		  mov	  ax, ds:p400.keyb_buffer_start_offset_ptr
bios:ED80		  mov	  ds:p400.keyb_buffer_head_ptr,	ax
bios:ED83		  mov	  ds:p400.keyb_buffer_tail_ptr,	ax
bios:ED86		  push	  ds
bios:ED87		  mov	  ax, 40h ; '@'
bios:ED8A		  mov	  ds, ax
bios:ED8C		  mov	  bx, p400.ctrl_break_flag
bios:ED8F		  mov	  byte ptr [bx], 80h ; '€'
bios:ED92		  pop	  ds
bios:ED93		  int	  1Bh				      ;	CTRL-BREAK KEY
bios:ED95		  xor	  ax, ax
bios:ED97		  call	  sub_FEDAA
bios:ED9A		  jmp	  l29
bios:ED9D ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:ED9D
bios:ED9D l84:							      ;	CODE XREF: int_09+9Cj
bios:ED9D		  call	  kbd_reset_and_ack_int
bios:EDA0		  call	  sub_FEDCC
bios:EDA3		  jb	  short	l85
bios:EDA5		  int	  5				      ;	 - PRINT-SCREEN	KEY
bios:EDA5							      ;	automatically called by	keyboard scanner when print-screen key is pressed
bios:EDA7
bios:EDA7 l85:							      ;	CODE XREF: int_09+41Cj
bios:EDA7		  jmp	  l33
bios:EDA7 int_09	  endp
bios:EDA7
bios:EDAA
bios:EDAA ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:EDAA
bios:EDAA
bios:EDAA sub_FEDAA	  proc near				      ;	CODE XREF: int_09:l28p
bios:EDAA							      ;	int_09+410p
bios:EDAA		  cli
bios:EDAB		  call	  sub_FEDCC
bios:EDAE		  jb	  short	l1
bios:EDB0		  mov	  si, ds:p400.keyb_buffer_tail_ptr
bios:EDB4		  mov	  [si],	ax
bios:EDB6		  inc	  si
bios:EDB7		  inc	  si
bios:EDB8		  cmp	  si, ds:p400.keyb_buffer_end_offset_ptr
bios:EDBC		  jb	  short	l0
bios:EDBE		  mov	  si, ds:p400.keyb_buffer_start_offset_ptr
bios:EDC2
bios:EDC2 l0:							      ;	CODE XREF: sub_FEDAA+12j
bios:EDC2		  mov	  ds:p400.keyb_buffer_tail_ptr,	si
bios:EDC6		  retn
bios:EDC7 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EDC7
bios:EDC7 l1:							      ;	CODE XREF: sub_FEDAA+4j
bios:EDC7		  sti
bios:EDC8		  call	  play_bell_sound?
bios:EDCB		  retn
bios:EDCB sub_FEDAA	  endp
bios:EDCB
bios:EDCC
bios:EDCC ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:EDCC
bios:EDCC
bios:EDCC sub_FEDCC	  proc near				      ;	CODE XREF: int_09+419p
bios:EDCC							      ;	sub_FEDAA+1p
bios:EDCC		  mov	  si, ds:p400.keyb_buffer_tail_ptr
bios:EDD0		  inc	  si
bios:EDD1		  inc	  si
bios:EDD2		  cmp	  si, ds:p400.keyb_buffer_end_offset_ptr
bios:EDD6		  jb	  short	loc_FEDDC
bios:EDD8		  mov	  si, ds:p400.keyb_buffer_start_offset_ptr
bios:EDDC
bios:EDDC loc_FEDDC:						      ;	CODE XREF: sub_FEDCC+Aj
bios:EDDC		  cmp	  si, ds:p400.keyb_buffer_head_ptr
bios:EDE0		  jz	  short	loc_FEDE5
bios:EDE2		  clc
bios:EDE3		  jmp	  short	locret_FEDE6
bios:EDE5 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EDE5
bios:EDE5 loc_FEDE5:						      ;	CODE XREF: sub_FEDCC+14j
bios:EDE5		  stc
bios:EDE6
bios:EDE6 locret_FEDE6:						      ;	CODE XREF: sub_FEDCC+17j
bios:EDE6		  retn
bios:EDE6 sub_FEDCC	  endp
bios:EDE6
bios:EDE7
bios:EDE7 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:EDE7
bios:EDE7
bios:EDE7 sub_FEDE7	  proc near				      ;	CODE XREF: int_09:l21p
bios:EDE7							      ;	int_09+309p
bios:EDE7							      ;	int_09+33Ep
bios:EDE7							      ;	int_09+38Fp
bios:EDE7		  push	  ds
bios:EDE8		  push	  ax
bios:EDE9		  mov	  ax, cs
bios:EDEB		  mov	  ds, ax
bios:EDED		  pop	  ax
bios:EDEE		  dec	  al
bios:EDF0		  xlat
bios:EDF1		  pop	  ds
bios:EDF2		  retn
bios:EDF2 sub_FEDE7	  endp
bios:EDF2
bios:EDF3
bios:EDF3 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:EDF3
bios:EDF3
bios:EDF3 kbd_reset_and_ack_int	proc near			      ;	CODE XREF: int_09:l10p
bios:EDF3							      ;	int_09:l29p
bios:EDF3							      ;	int_09+3F0p
bios:EDF3							      ;	int_09:l84p
bios:EDF3		  cli
bios:EDF4		  mov	  dx, 61h ; 'a'
bios:EDF7		  in	  al, dx			      ;	PC/XT PPI port B bits:
bios:EDF7							      ;	0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
bios:EDF7							      ;	1: Tmr 2 data Í¼  AND 0fcH=spkr	OFF
bios:EDF7							      ;	3: 1=read high switches
bios:EDF7							      ;	4: 0=enable RAM	parity checking
bios:EDF7							      ;	5: 0=enable I/O	channel	check
bios:EDF7							      ;	6: 0=hold keyboard clock low
bios:EDF7							      ;	7: 0=enable kbrd
bios:EDF8		  or	  al, 80h
bios:EDFA		  out	  dx, al			      ;	PC/XT PPI port B bits:
bios:EDFA							      ;	0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
bios:EDFA							      ;	1: Tmr 2 data Í¼  AND 0fcH=spkr	OFF
bios:EDFA							      ;	3: 1=read high switches
bios:EDFA							      ;	4: 0=enable RAM	parity checking
bios:EDFA							      ;	5: 0=enable I/O	channel	check
bios:EDFA							      ;	6: 0=hold keyboard clock low
bios:EDFA							      ;	7: 0=enable kbrd
bios:EDFB		  and	  al, 7Fh
bios:EDFD		  out	  dx, al			      ;	PC/XT PPI port B bits:
bios:EDFD							      ;	0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
bios:EDFD							      ;	1: Tmr 2 data Í¼  AND 0fcH=spkr	OFF
bios:EDFD							      ;	3: 1=read high switches
bios:EDFD							      ;	4: 0=enable RAM	parity checking
bios:EDFD							      ;	5: 0=enable I/O	channel	check
bios:EDFD							      ;	6: 0=hold keyboard clock low
bios:EDFD							      ;	7: 0=enable kbrd
bios:EDFE		  mov	  al, 20h ; ' '
bios:EE00		  mov	  dx, 20h ; ' '
bios:EE03		  out	  dx, al			      ;	Interrupt controller, 8259A.
bios:EE04		  retn
bios:EE04 kbd_reset_and_ack_int	endp
bios:EE04
bios:EE04 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EE05 byte_FEE05	  db 1Bh, 31h, 32h, 33h, 34h, 35h, 36h,	37h, 38h, 39h, 30h, 2Dh, 3Dh, 8, 9, 71h, 77h, 65h
bios:EE05							      ;	DATA XREF: int_09:l15o
bios:EE05							      ;	int_09+CFo
bios:EE05		  db 72h, 74h, 79h, 75h, 69h, 6Fh, 70h,	5Bh, 5Dh, 0Dh, 0FEh, 61h, 73h, 64h, 66h, 67h, 68h
bios:EE05		  db 6Ah, 6Bh, 6Ch, 3Bh, 27h, 48h, 0FEh, 4Bh, 7Ah, 78h,	63h, 76h, 62h, 6Eh, 6Dh, 2Ch, 2Eh
bios:EE05		  db 2Fh, 0FEh,	10h, 0FEh, 20h,	0FEh, 3Bh, 3Ch,	3Dh, 3Eh, 3Fh, 40h, 41h, 42h, 43h, 44h
bios:EE05		  db 0FEh, 0FEh
bios:EE4B byte_FEE4B	  db 1Bh, 21h, 40h, 23h, 24h, 25h, 5Eh,	26h, 2Ah, 28h, 29h, 5Fh, 2Bh, 8, 0Fh, 51h, 57h
bios:EE4B							      ;	DATA XREF: int_09:l16o
bios:EE4B							      ;	int_09+C9o
bios:EE4B							      ;	int_09:l18o
bios:EE4B		  db 45h, 52h, 54h, 59h, 55h, 49h, 4Fh,	50h, 7Bh, 7Dh, 0Dh, 0FFh, 41h, 53h, 44h, 46h, 47h
bios:EE4B		  db 48h, 4Ah, 4Bh, 4Ch, 3Ah, 22h, 85h,	0FFh, 87h, 5Ah,	58h, 43h, 56h, 42h, 4Eh, 4Dh, 3Ch
bios:EE4B		  db 3Eh, 3Fh, 0FFh, 0FEh, 0FFh, 20h, 0FFh, 54h, 55h, 56h, 57h,	58h, 59h, 5Ah, 5Bh, 5Ch
bios:EE4B		  db 5Dh, 0FFh,	0FEh
bios:EE91 byte_FEE91	  db 1Bh, 0E1h,	3, 0E3h, 0E4h, 0E5h, 1Eh, 0E7h,	0E8h, 0E9h, 0E0h, 1Fh, 0F5h, 7Fh, 8Dh
bios:EE91							      ;	DATA XREF: int_09+E9o
bios:EE91		  db 11h, 17h, 5, 12h, 14h, 19h, 15h, 9, 0Fh, 10h, 1Bh,	1Dh, 0Ah, 0FFh,	1, 13h,	4, 6, 7
bios:EE91		  db 8,	0Ah, 0Bh, 0Ch, 0F6h, 0F7h, 90h,	0FFh, 73h, 1Ah,	18h, 3,	16h, 2,	0Eh, 0Dh, 0F9h
bios:EE91		  db 0FAh, 0FBh, 0FFh, 72h, 0FFh, 20h, 0FFh, 5Eh, 5Fh, 60h, 61h, 62h, 63h, 64h,	65h, 66h
bios:EE91		  db 67h, 0FFh,	0FEh
bios:EED7 byte_FEED7	  db 8Bh, 78h, 79h, 7Ah, 7Bh, 7Ch, 7Dh,	7Eh, 7Fh, 80h, 81h, 82h, 83h, 8Ch, 8Eh,	10h, 11h
bios:EED7							      ;	DATA XREF: int_09+DEo
bios:EED7		  db 12h, 13h, 14h, 15h, 16h, 17h, 18h,	19h, 0EBh, 0F0h, 8Fh, 0FFh, 1Eh, 1Fh, 20h, 21h
bios:EED7		  db 22h, 23h, 24h, 25h, 26h, 0F8h, 0F1h, 91h, 0FFh, 92h, 2Ch, 2Dh, 2Eh, 2Fh, 30h, 31h
bios:EED7		  db 32h, 89h, 8Ah, 0F2h, 0FFh,	46h, 0FFh, 20h,	0FFh, 68h, 69h,	6Ah, 6Bh, 6Ch, 6Dh, 6Eh
bios:EED7		  db 6Fh, 70h, 71h, 0FFh, 0FEh
bios:EF1D byte_FEF1D	  db 37h, 38h, 39h, 50h, 34h, 35h, 36h,	4Dh, 31h, 32h, 33h, 30h, 2Dh, 0, 2Bh, 2Eh, 0Dh
bios:EF1D							      ;	DATA XREF: int_09+303o
bios:EF1D							      ;	int_09:l77o
bios:EF1D							      ;	int_09:l79o
bios:EF1D		  db 47h, 98h, 99h, 5Eh, 3Eh, 40h, 5Bh,	5Dh
bios:EF36 byte_FEF36	  db 5Ch, 7Eh, 49h, 86h, 7Ch, 0F3h, 0F4h, 88h, 4Fh, 60h, 51h, 9Bh, 53h,	0, 52h,	0A1h, 0Dh
bios:EF36							      ;	DATA XREF: int_09:l74o
bios:EF36		  db 4Ah, 0A2h,	0A3h, 5Eh, 3Ch,	23h, 7Bh, 7Dh
bios:EF4F byte_FEF4F	  db 93h, 94h, 84h, 96h, 95h, 0FCh, 0FDh, 74h, 75h, 9Ah, 76h, 9Ch, 9Dh,	0, 9Fh,	0A4h, 0Ah
bios:EF4F							      ;	DATA XREF: int_09:l62o
bios:EF4F		  db 77h, 0ACh,	0ADh, 0A7h, 0A8h, 0A9h,	0AAh, 0ABh
bios:EF68 byte_FEF68	  db 0FEh, 0FEh, 0FEh, 97h, 0FEh, 0FEh,	0FEh, 0EAh, 0FEh, 0FEh,	0FEh, 0FEh, 9Eh, 0FEh
bios:EF68							      ;	DATA XREF: int_09:l69o
bios:EF68		  db 0A0h, 0A5h, 8Fh, 0A6h, 0B6h, 0B7h,	0AEh, 0AFh, 45h, 4Ch, 4Eh, 0DEh, 0ADh, 0DEh, 0ADh
bios:EF68		  db 0DEh, 0ADh, 0DEh, 0ADh, 0DEh, 0ADh, 0DEh, 0ADh, 0DEh, 0ADh, 0DEh, 0ADh, 0DEh, 0ADh
bios:EF68		  db 0DEh, 0ADh, 0DEh, 0ADh, 0DEh, 0ADh, 0DEh, 0ADh, 0DEh, 0ADh, 0DEh, 0ADh, 0DEh, 0ADh
bios:EF68		  db 0DEh, 0ADh, 0DEh, 0ADh, 0DEh, 0ADh, 0DEh, 0ADh, 0DEh, 0ADh, 0DEh, 0ADh, 0DEh, 0ADh
bios:EF68		  db 0DEh, 0ADh, 0DEh, 0ADh, 0DEh, 0ADh, 0DEh, 0ADh, 0DEh, 0ADh, 0DEh, 0ADh, 0DEh, 0ADh
bios:EF68		  db 0DEh, 0ADh, 0DEh, 0ADh, 0DEh, 0ADh, 0DEh, 0ADh, 0DEh, 0ADh
bios:EFC7
bios:EFC7 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:EFC7
bios:EFC7
bios:EFC7 int_1e	  proc far				      ;	DATA XREF: bios:FF1Fo
bios:EFC7		  iret
bios:EFC7 int_1e	  endp
bios:EFC7
bios:EFC7 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EFC8		  db	2
bios:EFC9		  db  25h ; %
bios:EFCA		  db	2
bios:EFCB		  db	9
bios:EFCC		  db  2Ah ; *
bios:EFCD		  db 0FFh
bios:EFCE		  db  50h ; P
bios:EFCF		  db 0F6h ; ö
bios:EFD0		  db  19h
bios:EFD1		  db	4
bios:EFD2
bios:EFD2 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:EFD2
bios:EFD2
bios:EFD2 int_17	  proc far				      ;	DATA XREF: bios:FF11o
bios:EFD2		  call	  int_push_regs
bios:EFD5		  mov	  di, 6
bios:EFD8		  nop
bios:EFD9		  call	  check_valid_subfunction
bios:EFDC		  jb	  short	exit0
bios:EFDE		  mov	  bx, dx
bios:EFE0		  xor	  cx, cx
bios:EFE2		  mov	  cl, [bx+p400.lpt0_timeout]
bios:EFE6		  shl	  bx, 1
bios:EFE8		  mov	  dx, [bx+p400.lpt0_base_addr]
bios:EFEC		  or	  dx, dx
bios:EFEE		  jz	  short	exit1
bios:EFF0		  jmp	  word ptr cs:int_17_jmp_tbl[di]
bios:EFF0 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EFF5 int_17_jmp_tbl:					      ;	DATA XREF: int_17+1Er
bios:EFF5		  dw offset int_17_00
bios:EFF7		  dw offset int_17_01
bios:EFF9		  dw offset int_17_02
bios:EFFB ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EFFB
bios:EFFB exit0:						      ;	CODE XREF: int_17+Aj
bios:EFFB		  jmp	  short	exit1
bios:EFFD ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:EFFD
bios:EFFD int_17_00:						      ;	CODE XREF: int_17+1Ej
bios:EFFD							      ;	DATA XREF: int_17:int_17_jmp_tblo
bios:EFFD		  mov	  ah, al
bios:EFFF		  xor	  bx, bx
bios:F001		  inc	  dx
bios:F002
bios:F002 l0:							      ;	CODE XREF: int_17+46j
bios:F002							      ;	int_17+48j
bios:F002		  in	  al, dx
bios:F003		  test	  al, 80h
bios:F005		  jz	  short	l1
bios:F007		  mov	  al, ah
bios:F009		  dec	  dx
bios:F00A		  out	  dx, al
bios:F00B		  inc	  dx
bios:F00C		  inc	  dx
bios:F00D		  mov	  al, 0Dh
bios:F00F		  out	  dx, al
bios:F010		  mov	  al, 0Ch
bios:F012		  out	  dx, al
bios:F013		  mov	  cl, ah
bios:F015		  jmp	  short	l3
bios:F017 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F017
bios:F017 l1:							      ;	CODE XREF: int_17+33j
bios:F017		  dec	  bx
bios:F018		  jnz	  short	l0
bios:F01A		  loop	  l0
bios:F01C		  mov	  ch, 1
bios:F01E		  mov	  cl, ah
bios:F020		  jmp	  short	l4
bios:F022 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F022
bios:F022 int_17_01:						      ;	CODE XREF: int_17+1Ej
bios:F022							      ;	DATA XREF: int_17+25o
bios:F022		  mov	  cl, al
bios:F024		  inc	  dx
bios:F025		  inc	  dx
bios:F026		  mov	  al, 8
bios:F028		  out	  dx, al
bios:F029		  push	  cx
bios:F02A		  mov	  cx, 32h ; '2'
bios:F02D
bios:F02D l2:							      ;	CODE XREF: int_17:l2j
bios:F02D		  loop	  l2
bios:F02F		  pop	  cx
bios:F030		  mov	  al, 0Ch
bios:F032		  out	  dx, al
bios:F033
bios:F033 l3:							      ;	CODE XREF: int_17+43j
bios:F033		  dec	  dx
bios:F034		  xor	  ch, ch
bios:F036		  jmp	  short	l4
bios:F038 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F038
bios:F038 int_17_02:						      ;	CODE XREF: int_17+1Ej
bios:F038							      ;	DATA XREF: int_17+27o
bios:F038		  mov	  cl, al
bios:F03A		  inc	  dx
bios:F03B
bios:F03B l4:							      ;	CODE XREF: int_17+4Ej
bios:F03B							      ;	int_17+64j
bios:F03B		  in	  al, dx
bios:F03C		  and	  al, 0F8h
bios:F03E		  xor	  al, 48h
bios:F040		  mov	  ah, al
bios:F042		  or	  ah, ch
bios:F044		  mov	  al, cl
bios:F046
bios:F046 exit1:						      ;	CODE XREF: int_17+1Cj
bios:F046							      ;	int_17:exit0j
bios:F046		  jmp	  near ptr int_pop_regs_and_exit
bios:F046 int_17	  endp
bios:F046
bios:F046 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F049		  db 1Ch dup(0)
bios:F065
bios:F065 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F065
bios:F065
bios:F065 int_10	  proc far				      ;	DATA XREF: bios:FF03o
bios:F065		  call	  int_push_regs
bios:F068		  cld
bios:F069		  mov	  di, 22h ; '"'                       ; max sub-functions / 2
bios:F06C		  nop
bios:F06D		  call	  check_valid_subfunction
bios:F070		  jb	  short	error
bios:F072		  jmp	  cs:int_10_jmp_tbl[di]
bios:F072 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F077 int_10_jmp_tbl  dw offset int_10_00			      ;	DATA XREF: int_10+Dr
bios:F079		  dw offset int_10_01
bios:F07B		  dw offset int_10_02
bios:F07D		  dw offset int_10_03
bios:F07F		  dw offset int_10_04
bios:F081		  dw offset int_10_05
bios:F083		  dw offset int_10_06
bios:F085		  dw offset int_10_07
bios:F087		  dw offset int_10_08
bios:F089		  dw offset int_10_09
bios:F08B		  dw offset int_10_0a
bios:F08D		  dw offset int_10_0b
bios:F08F		  dw offset int_10_0c
bios:F091		  dw offset int_10_0d
bios:F093		  dw offset int_10_0e
bios:F095		  dw offset int_10_0f
bios:F097		  dw offset int_10_10
bios:F099 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F099
bios:F099 error:						      ;	CODE XREF: int_10+Bj
bios:F099		  jmp	  near ptr int_pop_regs_and_exit
bios:F099 int_10	  endp
bios:F099
bios:F099 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F09C		  db	0
bios:F09D		  db	0
bios:F09E		  db	0
bios:F09F		  db	0
bios:F0A0		  db	0
bios:F0A1		  db	0
bios:F0A2		  db	0
bios:F0A3		  db	0
bios:F0A4 video_param_table db	38h ; 8				      ;	DATA XREF: reset+29Bo
bios:F0A5		  db  28h ; (
bios:F0A6		  db  2Ch ; ,
bios:F0A7		  db	8
bios:F0A8		  db  1Fh
bios:F0A9		  db	6
bios:F0AA		  db  19h
bios:F0AB		  db  1Ch
bios:F0AC		  db	2
bios:F0AD		  db	7
bios:F0AE		  db	6
bios:F0AF		  db	7
bios:F0B0		  db	0
bios:F0B1		  db	0
bios:F0B2		  db	0
bios:F0B3		  db	0
bios:F0B4		  db  71h ; q
bios:F0B5		  db  50h ; P
bios:F0B6		  db  58h ; X
bios:F0B7		  db  10h
bios:F0B8		  db  1Fh
bios:F0B9		  db	6
bios:F0BA		  db  19h
bios:F0BB		  db  1Ch
bios:F0BC		  db	2
bios:F0BD		  db	7
bios:F0BE		  db	6
bios:F0BF		  db	7
bios:F0C0		  db	0
bios:F0C1		  db	0
bios:F0C2		  db	0
bios:F0C3		  db	0
bios:F0C4		  db  38h ; 8
bios:F0C5		  db  28h ; (
bios:F0C6		  db  2Ch ; ,
bios:F0C7		  db	8
bios:F0C8		  db  7Fh ; 
bios:F0C9		  db	6
bios:F0CA		  db  64h ; d
bios:F0CB		  db  70h ; p
bios:F0CC		  db	2
bios:F0CD		  db	1
bios:F0CE		  db	6
bios:F0CF		  db	7
bios:F0D0		  db	0
bios:F0D1		  db	0
bios:F0D2		  db	0
bios:F0D3		  db	0
bios:F0D4		  db  61h ; a
bios:F0D5		  db  50h ; P
bios:F0D6		  db  52h ; R
bios:F0D7		  db  0Fh
bios:F0D8		  db  19h
bios:F0D9		  db	6
bios:F0DA		  db  19h
bios:F0DB		  db  19h
bios:F0DC		  db	2
bios:F0DD		  db  0Dh
bios:F0DE		  db  0Bh
bios:F0DF		  db  0Ch
bios:F0E0		  db	0
bios:F0E1		  db	0
bios:F0E2		  db	0
bios:F0E3		  db	0
bios:F0E4		  db  71h ; q
bios:F0E5		  db  50h ; P
bios:F0E6		  db  58h ; X
bios:F0E7		  db  10h
bios:F0E8		  db  3Fh ; ?
bios:F0E9		  db	6
bios:F0EA		  db  32h ; 2
bios:F0EB		  db  38h ; 8
bios:F0EC		  db	2
bios:F0ED		  db	3
bios:F0EE		  db	6
bios:F0EF		  db	7
bios:F0F0		  db	0
bios:F0F1		  db	0
bios:F0F2		  db	0
bios:F0F3		  db	0
bios:F0F4 video_init_vars video_init_some_vars <0, 101100b, 28h, 8>   ;	DATA XREF: int_10_00+3Ar
bios:F0F4							      ;	int_10_00+3Fr
bios:F0F4							      ;	int_10_00+46r
bios:F0F4							      ;	int_10_00+50r
bios:F0F4							      ;	video mode 0
bios:F0F8		  video_init_some_vars <0, 101000b, 28h, 8>   ;	video mode 1
bios:F0FC		  video_init_some_vars <10h, 101101b, 50h, 10h>	; video	mode 2
bios:F100		  video_init_some_vars <10h, 101001b, 50h, 10h>	; video	mode 3
bios:F104		  video_init_some_vars <20h, 101010b, 28h, 40h>	; video	mode 4
bios:F108		  video_init_some_vars <20h, 101110b, 28h, 40h>	; video	mode 5
bios:F10C		  video_init_some_vars <20h, 11110b, 50h, 40h> ; video mode 6
bios:F110		  video_init_some_vars <30h, 101001b, 50h, 40h>	; video	mode 7
bios:F114		  video_init_some_vars <20h, 101010b, 14h, 40h>	; video	mode 8
bios:F118		  video_init_some_vars <40h, 101011b, 28h, 80h>	; video	mode 9
bios:F11C		  video_init_some_vars <40h, 111011b, 50h, 80h>	; video	mode a
bios:F120
bios:F120 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F120
bios:F120 ;	Sets the video mode.
bios:F120 ;
bios:F120 ;	   On entry:	  AH	     00h
bios:F120 ;			  AL	     Video mode
bios:F120 ;
bios:F120 ;	   Returns:	  None
bios:F120 ;
bios:F120 ;	   Registers destroyed:	     AX, SP, BP, SI, DI
bios:F120 ;
bios:F120 ;   --------------------------------------------------------------------------
bios:F120 ;			     Table of Video Modes
bios:F120 ;									Buffer
bios:F120 ;   Mode     Type	   Resolution	   Adapter(s)	   Colors	Address
bios:F120 ;   00h     Text	    40 x 25	 All but MDA	   16 gray	 B8000
bios:F120 ;   01h     Text	    40 x 25	 All but MDA   16 fore/8 back	 B8000
bios:F120 ;   02h     Text	    80 x 25	 All but MDA	   16 gray	 B8000
bios:F120 ;   03h     Text	    80 x 25	 All but MDA   16 fore/8 back	 B8000
bios:F120 ;   04h   Graphics	   320 x 200	 All but MDA	     4		 B8000
bios:F120 ;   05h   Graphics	   320 x 200	 All but MDA	   4 gray	 B8000
bios:F120 ;   06h   Graphics	   640 x 200	 All but MDA	     2		 B8000
bios:F120 ;   07h     Text	    80 x 25	   MDA,EGA	    b/w		 B0000
bios:F120 ;   08h   Graphics	   160 x 200	    PCjr	    16		 B0000
bios:F120 ;   09h   Graphics	   320 x 200	    PCjr	    16		 B0000
bios:F120 ;   0Ah   Graphics	   640 x 200	    PCjr	     4		 B0000
bios:F120 ;   --------------------------------------------------------------------------
bios:F120
bios:F120 int_10_00	  proc far				      ;	CODE XREF: int_10+Dj
bios:F120							      ;	DATA XREF: int_10:int_10_jmp_tblo
bios:F120		  push	  ax
bios:F121		  and	  al, 7Fh
bios:F123		  mov	  bx, ds:p400.installed_hardware
bios:F127		  and	  bl, 110000b			      ;	filters	video bits
bios:F12A		  cmp	  bl, 110000b			      ;	is 80x25 mono?
bios:F12D		  jnz	  short	not_mono		      ;	not mono
bios:F12F		  mov	  al, 7				      ;	if 80x25 mono, mode should be 7
bios:F131
bios:F131 not_mono:						      ;	CODE XREF: int_10_00+Dj
bios:F131		  cmp	  al, 7				      ;	is mode	7?
bios:F133		  jz	  short	error			      ;	yes, error
bios:F135		  cmp	  al, 0Ah			      ;	is mode	0xa or below?
bios:F137		  jbe	  short	ok			      ;	yes, ok
bios:F139
bios:F139 error:						      ;	CODE XREF: int_10_00+13j
bios:F139		  pop	  ax
bios:F13A		  jmp	  near ptr int_pop_regs_and_exit
bios:F13D ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F13D
bios:F13D ok:							      ;	CODE XREF: int_10_00+17j
bios:F13D		  mov	  ds:p400.crt_mode, al		      ;	update video mode in shadow var
bios:F140		  xor	  ah, ah
bios:F142		  mov	  dx, 3D4h			      ;	6845 address register
bios:F145		  cmp	  al, 7				      ;	is video mode 7? (impossible, since it was filtered out	before)
bios:F147		  jnz	  short	skip			      ;	no, jump to color
bios:F149		  mov	  ah, 21h ; '!'
bios:F14B		  mov	  dx, 3B4h			      ;	use MDA	address
bios:F14E
bios:F14E skip:							      ;	CODE XREF: int_10_00+27j
bios:F14E		  push	  ax
bios:F14F		  push	  dx
bios:F150		  xor	  ah, ah
bios:F152		  shl	  al, 1
bios:F154		  shl	  al, 1				      ;	al * 4 (video mode * 4)
bios:F156		  mov	  si, ax
bios:F158		  xor	  bx, bx
bios:F15A		  mov	  bl, byte ptr cs:video_init_vars.offset_to_6845_tbl[si]
bios:F15F		  mov	  cl, cs:video_init_vars.value_for_3d8[si]
bios:F164		  xor	  ax, ax
bios:F166		  mov	  al, cs:video_init_vars.nr_columns[si]
bios:F16B		  mov	  ds:p400.crt_nr_cols, ax
bios:F16E		  xor	  ax, ax
bios:F170		  mov	  ah, cs:video_init_vars.video_page_size_256[si]
bios:F175		  mov	  ds:p400.crt_page_len,	ax
bios:F178		  pop	  dx
bios:F179		  pop	  ax
bios:F17A		  mov	  ds:p400.crt_mode_set,	cl
bios:F17E		  mov	  ds:p400.addr_6845, dx
bios:F182		  add	  dx, 4
bios:F185		  mov	  al, ah
bios:F187		  out	  dx, al
bios:F188		  xor	  ax, ax
bios:F18A		  mov	  es, ax			      ;	es = 0
bios:F18C		  push	  dx
bios:F18D		  mov	  al, 3Fh ; '?'
bios:F18F		  cmp	  byte ptr ds:p400.crt_mode, 9
bios:F194		  jb	  short	loc_FF198
bios:F196		  mov	  al, 0F6h ; 'ö'
bios:F198
bios:F198 loc_FF198:						      ;	CODE XREF: int_10_00+74j
bios:F198		  mov	  dx, 3DFh
bios:F19B		  out	  dx, al
bios:F19C		  mov	  ds:p400.video_page_data, al
bios:F19F		  mov	  si, 74h ; 't'                       ; int 0x1d (video param table)
bios:F1A2		  mov	  di, es:[si]			      ;	video param table offset
bios:F1A5		  add	  di, bx
bios:F1A7		  mov	  ax, es:[si+2]			      ;	video param table segment
bios:F1AB		  mov	  es, ax			      ;	es = segment for video param table
bios:F1AD		  xor	  bh, bh
bios:F1AF		  xor	  cx, cx
bios:F1B1
bios:F1B1 loc_FF1B1:						      ;	CODE XREF: int_10_00+A3j
bios:F1B1		  mov	  dx, ds:p400.addr_6845
bios:F1B5		  mov	  al, cl			      ;	update CRT register
bios:F1B7		  out	  dx, al
bios:F1B8		  inc	  dx
bios:F1B9		  mov	  bl, cl
bios:F1BB		  mov	  al, es:[bx+di]
bios:F1BE		  out	  dx, al			      ;	update CRT data
bios:F1BF		  inc	  cx
bios:F1C0		  cmp	  cx, 10h
bios:F1C3		  jl	  short	loc_FF1B1
bios:F1C5		  mov	  word ptr ds:p400.cursor_row_column, 607h
bios:F1CB		  mov	  word ptr ds:p400.crt_current_page_offset, 0
bios:F1D1		  mov	  byte ptr ds:p400.active_display_page,	0
bios:F1D6		  mov	  byte ptr ds:p400.shadow_3d9_crt_palette, 30h ; '0'
bios:F1DB		  pop	  dx
bios:F1DC		  pop	  ax
bios:F1DD		  push	  dx
bios:F1DE		  test	  al, 80h			      ;	clean screen?
bios:F1E0		  jnz	  short	skip_clean_screen	      ;	no, skip cleaning the screen
bios:F1E2		  mov	  ax, 0B800h
bios:F1E5		  mov	  cx, 2000h			      ;	8k words (16k bytes) to	clean by default
bios:F1E8		  cmp	  byte ptr ds:p400.crt_mode, 9	      ;	video is below 9?
bios:F1ED		  jb	  short	l0			      ;	yes, keep previous value
bios:F1EF		  mov	  cx, 4000h			      ;	16k words (32k bytes) for videos 9 and a
bios:F1F2
bios:F1F2 l0:							      ;	CODE XREF: int_10_00+CDj
bios:F1F2		  mov	  bx, 720h			      ;	for text modes,	clean it with space and	white attrib
bios:F1F5		  cmp	  byte ptr ds:p400.crt_mode, 7	      ;	video mode 7? (impossible)
bios:F1FA		  jnz	  short	l1			      ;	no, jump
bios:F1FC		  mov	  ax, 0B000h			      ;	use segment 0xb000 for mono
bios:F1FF		  mov	  cx, 800h			      ;	and only clean 2k words	(4k bytes)
bios:F202		  jmp	  short	l2
bios:F204 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F204
bios:F204 l1:							      ;	CODE XREF: int_10_00+DAj
bios:F204		  cmp	  byte ptr ds:p400.crt_mode, 4	      ;	video mode 4?
bios:F209		  jl	  short	l2			      ;	less than 4, then jump
bios:F20B		  xor	  bx, bx			      ;	for graphics mode, clean it with black screen (0x0000)
bios:F20D
bios:F20D l2:							      ;	CODE XREF: int_10_00+E2j
bios:F20D							      ;	int_10_00+E9j
bios:F20D		  mov	  es, ax			      ;	update video segment
bios:F20F		  xor	  di, di			      ;	di: offset is 0
bios:F211		  mov	  ax, bx			      ;	value to store
bios:F213		  rep stosw				      ;	clean screen
bios:F215
bios:F215 skip_clean_screen:					      ;	CODE XREF: int_10_00+C0j
bios:F215		  mov	  ax, ds
bios:F217		  mov	  es, ax			      ;	es = ds
bios:F219		  xor	  ax, ax
bios:F21B		  lea	  di, ds:p400.cursor_row_col_in_pages
bios:F21F		  mov	  cx, 8				      ;	8 pages
bios:F222		  rep stosw				      ;	clean col/row cursor values for	all 8 pages
bios:F224		  cmp	  byte ptr ds:p400.crt_mode, 7
bios:F229		  jz	  short	loc_FF246
bios:F22B		  mov	  al, 30h ; '0'
bios:F22D		  cmp	  byte ptr ds:p400.crt_mode, 6
bios:F232		  jl	  short	loc_FF23F
bios:F234		  mov	  al, 3Fh ; '?'
bios:F236		  cmp	  byte ptr ds:p400.crt_mode, 0Ah
bios:F23B		  jnz	  short	loc_FF23F
bios:F23D		  mov	  al, 0
bios:F23F
bios:F23F loc_FF23F:						      ;	CODE XREF: int_10_00+112j
bios:F23F							      ;	int_10_00+11Bj
bios:F23F		  mov	  dx, 3D9h
bios:F242		  out	  dx, al
bios:F243		  mov	  ds:p400.shadow_3d9_crt_palette, al
bios:F246
bios:F246 loc_FF246:						      ;	CODE XREF: int_10_00+109j
bios:F246		  mov	  bl, 10h
bios:F248		  mov	  cx, 10h
bios:F24B		  mov	  dx, 3DAh
bios:F24E		  xor	  ah, ah
bios:F250
bios:F250 loc_FF250:						      ;	CODE XREF: int_10_00+140j
bios:F250		  mov	  al, bl
bios:F252		  out	  dx, al			      ;	Video: bits 0-1	control
bios:F252							      ;	Feature	Control	outputs	FC0 and	FC1
bios:F253		  add	  dx, 4
bios:F256		  mov	  al, ah
bios:F258		  out	  dx, al
bios:F259		  inc	  bl
bios:F25B		  inc	  ah
bios:F25D		  sub	  dx, 4
bios:F260		  loop	  loc_FF250
bios:F262		  cmp	  byte ptr ds:p400.crt_mode, 0Ah
bios:F267		  jnz	  short	loc_FF28D
bios:F269		  mov	  al, 11h
bios:F26B		  out	  dx, al			      ;	Video: bits 0-1	control
bios:F26B							      ;	Feature	Control	outputs	FC0 and	FC1
bios:F26C		  mov	  al, 3
bios:F26E		  add	  dx, 4
bios:F271		  out	  dx, al
bios:F272		  sub	  dx, 4
bios:F275		  mov	  al, 12h
bios:F277		  out	  dx, al			      ;	Video: bits 0-1	control
bios:F277							      ;	Feature	Control	outputs	FC0 and	FC1
bios:F278		  mov	  al, 5
bios:F27A		  add	  dx, 4
bios:F27D		  out	  dx, al
bios:F27E		  sub	  dx, 4
bios:F281		  mov	  al, 13h
bios:F283		  out	  dx, al			      ;	Video: bits 0-1	control
bios:F283							      ;	Feature	Control	outputs	FC0 and	FC1
bios:F284		  mov	  al, 0Fh
bios:F286		  add	  dx, 4
bios:F289		  out	  dx, al
bios:F28A		  sub	  dx, 4
bios:F28D
bios:F28D loc_FF28D:						      ;	CODE XREF: int_10_00+147j
bios:F28D		  mov	  al, 1
bios:F28F		  out	  dx, al			      ;	Video: bits 0-1	control
bios:F28F							      ;	Feature	Control	outputs	FC0 and	FC1
bios:F290		  add	  dx, 4
bios:F293		  mov	  al, 0Fh
bios:F295		  out	  dx, al
bios:F296		  sub	  dx, 4
bios:F299		  mov	  al, 2
bios:F29B		  out	  dx, al			      ;	Video: bits 0-1	control
bios:F29B							      ;	Feature	Control	outputs	FC0 and	FC1
bios:F29C		  add	  dx, 4
bios:F29F		  xor	  al, al
bios:F2A1		  out	  dx, al
bios:F2A2		  sub	  dx, 4
bios:F2A5		  mov	  al, 3
bios:F2A7		  out	  dx, al			      ;	Video: bits 0-1	control
bios:F2A7							      ;	Feature	Control	outputs	FC0 and	FC1
bios:F2A8		  add	  dx, 4
bios:F2AB		  mov	  al, 0
bios:F2AD		  cmp	  byte ptr ds:p400.crt_mode, 6
bios:F2B2		  jle	  short	loc_FF2C2
bios:F2B4		  mov	  al, 4
bios:F2B6		  cmp	  byte ptr ds:p400.crt_mode, 8
bios:F2BB		  jnz	  short	loc_FF2C2
bios:F2BD		  mov	  al, 14h
bios:F2BF		  jmp	  short	loc_FF2D7
bios:F2BF ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F2C1		  db  90h ; 
bios:F2C2 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F2C2
bios:F2C2 loc_FF2C2:						      ;	CODE XREF: int_10_00+192j
bios:F2C2							      ;	int_10_00+19Bj
bios:F2C2		  cmp	  byte ptr ds:p400.crt_mode, 9
bios:F2C7		  jnz	  short	loc_FF2CE
bios:F2C9		  mov	  al, 14h
bios:F2CB		  jmp	  short	loc_FF2D7
bios:F2CB ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F2CD		  db  90h ; 
bios:F2CE ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F2CE
bios:F2CE loc_FF2CE:						      ;	CODE XREF: int_10_00+1A7j
bios:F2CE		  cmp	  byte ptr ds:p400.crt_mode, 0Ah
bios:F2D3		  jnz	  short	loc_FF2D7
bios:F2D5		  mov	  al, 0Ch
bios:F2D7
bios:F2D7 loc_FF2D7:						      ;	CODE XREF: int_10_00+19Fj
bios:F2D7							      ;	int_10_00+1ABj
bios:F2D7							      ;	int_10_00+1B3j
bios:F2D7		  out	  dx, al
bios:F2D8		  mov	  dx, 3DAh
bios:F2DB		  xor	  al, al
bios:F2DD		  out	  dx, al			      ;	Video: bits 0-1	control
bios:F2DD							      ;	Feature	Control	outputs	FC0 and	FC1
bios:F2DE		  pop	  dx
bios:F2DF		  mov	  al, ds:p400.crt_mode_set
bios:F2E2		  out	  dx, al
bios:F2E3		  jmp	  near ptr int_pop_regs_and_exit
bios:F2E3 int_10_00	  endp
bios:F2E3
bios:F2E6
bios:F2E6 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F2E6
bios:F2E6 ;	Adjusts	the size of the	cursor by setting its start and	end lines.
bios:F2E6 ;
bios:F2E6 ;	   On entry:	  AH	     01h
bios:F2E6 ;			  CH	     Cursor start line (bits 4 to 0)
bios:F2E6 ;			  CL	     Cursor end	line   (bits 4 to 0)
bios:F2E6 ;
bios:F2E6 ;	   Returns:	  None
bios:F2E6 ;
bios:F2E6 ;	   Registers destroyed:	     AX, SP, BP, SI, DI
bios:F2E6 ;
bios:F2E6
bios:F2E6 int_10_01	  proc far				      ;	CODE XREF: int_10+Dj
bios:F2E6							      ;	DATA XREF: int_10+14o
bios:F2E6		  mov	  bh, 0Ah
bios:F2E8		  mov	  bl, 0Bh
bios:F2EA		  call	  sub_FF92B
bios:F2ED		  mov	  ds:p400.cursor_row_column, cx
bios:F2F1		  jmp	  near ptr int_pop_regs_and_exit
bios:F2F1 int_10_01	  endp
bios:F2F1
bios:F2F4
bios:F2F4 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F2F4
bios:F2F4 ;	Sets the cursor	position (row and column) for a	specified display
bios:F2F4 ;	page.
bios:F2F4 ;
bios:F2F4 ;	   On entry:	  AH	     02h
bios:F2F4 ;			  BH	     Display page number
bios:F2F4 ;			  DH	     Row
bios:F2F4 ;			  DL	     Column
bios:F2F4 ;
bios:F2F4 ;	   Returns:	  None
bios:F2F4 ;
bios:F2F4 ;	   Registers destroyed:	     AX, SP, BP, SI, DI
bios:F2F4 ;
bios:F2F4
bios:F2F4 int_10_02	  proc far				      ;	CODE XREF: int_10+Dj
bios:F2F4							      ;	DATA XREF: int_10+16o
bios:F2F4		  call	  sub_FF2FA
bios:F2F7		  jmp	  near ptr int_pop_regs_and_exit
bios:F2F7 int_10_02	  endp
bios:F2F7
bios:F2FA
bios:F2FA ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F2FA
bios:F2FA
bios:F2FA sub_FF2FA	  proc near				      ;	CODE XREF: int_10_02p
bios:F2FA							      ;	int_10_0e+8Ap
bios:F2FA							      ;	int_10_0e+99p
bios:F2FA		  cmp	  byte ptr ds:p400.crt_mode, 4
bios:F2FF		  jl	  short	loc_FF303
bios:F301		  xor	  bh, bh
bios:F303
bios:F303 loc_FF303:						      ;	CODE XREF: sub_FF2FA+5j
bios:F303		  lea	  di, ds:p400.cursor_row_col_in_pages
bios:F307		  push	  bx
bios:F308		  mov	  bl, bh
bios:F30A		  xor	  bh, bh
bios:F30C		  shl	  bx, 1
bios:F30E		  mov	  [bx+di], dx
bios:F310		  pop	  bx
bios:F311		  cmp	  ds:p400.active_display_page, bh
bios:F315		  jnz	  short	locret_FF31A
bios:F317		  call	  sub_FF31B
bios:F31A
bios:F31A locret_FF31A:						      ;	CODE XREF: sub_FF2FA+1Bj
bios:F31A		  retn
bios:F31A sub_FF2FA	  endp
bios:F31A
bios:F31B
bios:F31B ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F31B
bios:F31B
bios:F31B sub_FF31B	  proc near				      ;	CODE XREF: sub_FF2FA+1Dp
bios:F31B							      ;	int_10_05+31p
bios:F31B		  mov	  al, dh
bios:F31D		  mul	  byte ptr ds:p400.crt_nr_cols
bios:F321		  xor	  dh, dh
bios:F323		  add	  ax, dx
bios:F325		  mov	  cx, ax
bios:F327		  mov	  ax, ds:p400.crt_current_page_offset
bios:F32A		  shr	  ax, 1
bios:F32C		  add	  cx, ax
bios:F32E		  mov	  bh, 0Eh
bios:F330		  mov	  bl, 0Fh
bios:F332		  jmp	  sub_FF92B
bios:F332 sub_FF31B	  endp
bios:F332
bios:F335
bios:F335 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F335
bios:F335 ;	Reports	the cursor position (row and column) and size for a specified
bios:F335 ;	display	page.
bios:F335 ;
bios:F335 ;	   On entry:	  AH	     03h
bios:F335 ;			  BH	     Display page number
bios:F335 ;
bios:F335 ;	   Returns:	  CH	     Cursor start line
bios:F335 ;			  CL	     Cursor end	line
bios:F335 ;			  DH	     Row
bios:F335 ;			  DL	     Column
bios:F335 ;
bios:F335 ;	   Registers destroyed:	     AX, SP, BP, SI, DI
bios:F335 ; Attributes:	bp-based frame
bios:F335
bios:F335 int_10_03	  proc far				      ;	CODE XREF: int_10+Dj
bios:F335							      ;	DATA XREF: int_10+18o
bios:F335
bios:F335 arg_6		  = word ptr  0Ah
bios:F335 arg_8		  = word ptr  0Ch
bios:F335
bios:F335		  cmp	  byte ptr ds:p400.crt_mode, 4
bios:F33A		  jl	  short	loc_FF33E
bios:F33C		  xor	  bh, bh
bios:F33E
bios:F33E loc_FF33E:						      ;	CODE XREF: int_10_03+5j
bios:F33E		  mov	  bl, bh
bios:F340		  call	  get_rowcols_for_page
bios:F343		  mov	  bp, sp
bios:F345		  mov	  [bp+arg_6], dx
bios:F348		  mov	  cx, ds:p400.cursor_row_column
bios:F34C		  mov	  [bp+arg_8], cx
bios:F34F		  jmp	  near ptr int_pop_regs_and_exit
bios:F34F int_10_03	  endp
bios:F34F
bios:F352
bios:F352 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F352
bios:F352 ;	Reports	the position and status	of the light pen.
bios:F352 ;
bios:F352 ;	   On entry:	  AH	     04h
bios:F352 ;
bios:F352 ;	   Returns:	  AH	     Status (0=not triggered, 1=triggered)
bios:F352 ;			  BX	     Pixel column number (0-639)
bios:F352 ;			  CH	     Pixel line	number (0-199)
bios:F352 ;			  CX	     Pixel line	number for modes 0Fh-10h (0-nnn)
bios:F352 ;			  DH	     Character row number (0-24)
bios:F352 ;			  DL	     Character column number (0-39 or 0-79)
bios:F352 ;
bios:F352 ;	   Registers destroyed:	     AX, SP, BP, SI, DI
bios:F352
bios:F352 int_10_04	  proc far				      ;	CODE XREF: int_10+Dj
bios:F352							      ;	DATA XREF: int_10+1Ao
bios:F352		  mov	  dx, 3DAh
bios:F355		  in	  al, dx			      ;	Video status bits:
bios:F355							      ;	0: retrace.  1=display is in vert or horiz retrace.
bios:F355							      ;	1: 1=light pen is triggered; 0=armed
bios:F355							      ;	2: 1=light pen switch is open; 0=closed
bios:F355							      ;	3: 1=vertical sync pulse is occurring.
bios:F356		  mov	  ah, 0
bios:F358		  test	  al, 2
bios:F35A		  jnz	  short	loc_FF35F
bios:F35C		  jmp	  loc_FF447
bios:F35F ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F35F
bios:F35F loc_FF35F:						      ;	CODE XREF: int_10_04+8j
bios:F35F		  mov	  dx, ds:p400.addr_6845
bios:F363		  mov	  al, 10h
bios:F365		  out	  dx, al
bios:F366		  inc	  dx
bios:F367		  in	  al, dx
bios:F368		  mov	  bh, al
bios:F36A		  dec	  dx
bios:F36B		  mov	  al, 11h
bios:F36D		  out	  dx, al
bios:F36E		  inc	  dx
bios:F36F		  in	  al, dx
bios:F370		  mov	  ah, bh
bios:F372		  sub	  ax, 4
bios:F375		  mov	  dx, 3DBh
bios:F378		  out	  dx, al			      ;	Video: light pen latch reset.
bios:F378							      ;	Any OUT	clears the latch.
bios:F379		  mov	  bp, sp
bios:F37B		  cmp	  byte ptr ds:p400.crt_mode, 4
bios:F380		  jnb	  short	loc_FF3A2
bios:F382		  xor	  dx, dx
bios:F384		  mov	  bx, ds:p400.crt_nr_cols
bios:F388		  div	  bx
bios:F38A		  mov	  dh, al
bios:F38C		  mov	  [bp+0Ah], dx
bios:F38F		  mov	  cl, 3
bios:F391		  shl	  al, cl
bios:F393		  mov	  [bp+0Dh], al
bios:F396		  xor	  bx, bx
bios:F398		  mov	  bl, dl
bios:F39A		  shl	  bx, cl
bios:F39C		  mov	  [bp+0Eh], bx
bios:F39F		  jmp	  loc_FF445
bios:F3A2 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F3A2
bios:F3A2 loc_FF3A2:						      ;	CODE XREF: int_10_04+2Ej
bios:F3A2		  xor	  dx, dx
bios:F3A4		  cmp	  byte ptr ds:p400.crt_mode, 9
bios:F3A9		  jnb	  short	loc_FF3DC
bios:F3AB		  add	  ax, 2
bios:F3AE		  cmp	  ax, 1000h
bios:F3B1		  jb	  short	loc_FF3B6
bios:F3B3		  sub	  ax, 0FD8h
bios:F3B6
bios:F3B6 loc_FF3B6:						      ;	CODE XREF: int_10_04+5Fj
bios:F3B6		  mov	  bx, 28h ; '('
bios:F3B9		  div	  bx
bios:F3BB		  shl	  ax, 1
bios:F3BD		  mov	  [bp+0Dh], al
bios:F3C0		  shl	  dx, 1
bios:F3C2		  shl	  dx, 1
bios:F3C4		  cmp	  byte ptr ds:p400.crt_mode, 8
bios:F3C9		  jz	  short	loc_FF3D6
bios:F3CB		  shl	  dx, 1
bios:F3CD		  cmp	  byte ptr ds:p400.crt_mode, 6
bios:F3D2		  jnz	  short	loc_FF3D6
bios:F3D4		  shl	  dx, 1
bios:F3D6
bios:F3D6 loc_FF3D6:						      ;	CODE XREF: int_10_04+77j
bios:F3D6							      ;	int_10_04+80j
bios:F3D6		  mov	  [bp+0Eh], dx
bios:F3D9		  jmp	  short	loc_FF434
bios:F3D9 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F3DB		  db  90h ; 
bios:F3DC ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F3DC
bios:F3DC loc_FF3DC:						      ;	CODE XREF: int_10_04+57j
bios:F3DC		  mov	  bx, 50h ; 'P'
bios:F3DF		  cmp	  ax, 3000h
bios:F3E2		  jb	  short	loc_FF3F3
bios:F3E4		  sub	  ax, 3000h
bios:F3E7		  div	  bx
bios:F3E9		  shl	  ax, 1
bios:F3EB		  shl	  ax, 1
bios:F3ED		  add	  ax, 3
bios:F3F0		  jmp	  short	loc_FF421
bios:F3F0 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F3F2		  db  90h ; 
bios:F3F3 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F3F3
bios:F3F3 loc_FF3F3:						      ;	CODE XREF: int_10_04+90j
bios:F3F3		  cmp	  ax, 2000h
bios:F3F6		  jb	  short	loc_FF407
bios:F3F8		  sub	  ax, 2000h
bios:F3FB		  div	  bx
bios:F3FD		  shl	  ax, 1
bios:F3FF		  shl	  ax, 1
bios:F401		  add	  ax, 2
bios:F404		  jmp	  short	loc_FF421
bios:F404 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F406		  db  90h ; 
bios:F407 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F407
bios:F407 loc_FF407:						      ;	CODE XREF: int_10_04+A4j
bios:F407		  cmp	  ax, 1000h
bios:F40A		  jb	  short	loc_FF41B
bios:F40C		  sub	  ax, 1000h
bios:F40F		  div	  bx
bios:F411		  shl	  ax, 1
bios:F413		  shl	  ax, 1
bios:F415		  add	  ax, 1
bios:F418		  jmp	  short	loc_FF421
bios:F418 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F41A		  db  90h ; 
bios:F41B ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F41B
bios:F41B loc_FF41B:						      ;	CODE XREF: int_10_04+B8j
bios:F41B		  div	  bx
bios:F41D		  shl	  ax, 1
bios:F41F		  shl	  ax, 1
bios:F421
bios:F421 loc_FF421:						      ;	CODE XREF: int_10_04+9Ej
bios:F421							      ;	int_10_04+B2j
bios:F421							      ;	int_10_04+C6j
bios:F421		  shl	  dx, 1
bios:F423		  shl	  dx, 1
bios:F425		  cmp	  byte ptr ds:p400.crt_mode, 0Ah
bios:F42A		  jnz	  short	loc_FF42E
bios:F42C		  shl	  dx, 1
bios:F42E
bios:F42E loc_FF42E:						      ;	CODE XREF: int_10_04+D8j
bios:F42E		  mov	  [bp+0Dh], al
bios:F431		  mov	  [bp+0Eh], dx
bios:F434
bios:F434 loc_FF434:						      ;	CODE XREF: int_10_04+87j
bios:F434		  mov	  al, [bp+0Dh]
bios:F437		  mov	  cl, 3
bios:F439		  shr	  al, cl
bios:F43B		  mov	  dx, [bp+0Eh]
bios:F43E		  shr	  dx, cl
bios:F440		  mov	  dh, al
bios:F442		  mov	  [bp+0Ah], dx
bios:F445
bios:F445 loc_FF445:						      ;	CODE XREF: int_10_04+4Dj
bios:F445		  mov	  ah, 1
bios:F447
bios:F447 loc_FF447:						      ;	CODE XREF: int_10_04+Aj
bios:F447		  jmp	  near ptr int_pop_regs_and_exit
bios:F447 int_10_04	  endp
bios:F447
bios:F44A
bios:F44A ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F44A
bios:F44A ;	Sets the active	display	page.
bios:F44A ;
bios:F44A ;	   On entry:	  AH	     05h
bios:F44A ;			  AL	     Display page number
bios:F44A ;
bios:F44A ;	   Returns:	  None
bios:F44A ;
bios:F44A ;	   Registers destroyed:	     AX, SP, BP, SI, DI
bios:F44A
bios:F44A int_10_05	  proc far				      ;	CODE XREF: int_10+Dj
bios:F44A							      ;	DATA XREF: int_10+1Co
bios:F44A		  test	  al, 80h
bios:F44C		  jnz	  short	loc_FF481
bios:F44E		  cmp	  byte ptr ds:p400.crt_mode, 4
bios:F453		  jl	  short	loc_FF458
bios:F455		  jmp	  near ptr int_pop_regs_and_exit
bios:F458 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F458
bios:F458 loc_FF458:						      ;	CODE XREF: int_10_05+9j
bios:F458		  mov	  ds:p400.active_display_page, al
bios:F45B		  mov	  ax, ds:p400.crt_page_len
bios:F45E		  xor	  bh, bh
bios:F460		  mov	  bl, ds:p400.active_display_page
bios:F464		  mul	  bx
bios:F466		  mov	  ds:p400.crt_current_page_offset, ax
bios:F469		  mov	  cx, ax
bios:F46B		  sar	  cx, 1
bios:F46D		  mov	  bh, 0Ch
bios:F46F		  mov	  bl, 0Dh
bios:F471		  call	  sub_FF92B
bios:F474		  mov	  bl, ds:p400.active_display_page
bios:F478		  call	  get_rowcols_for_page
bios:F47B		  call	  sub_FF31B
bios:F47E		  jmp	  near ptr int_pop_regs_and_exit
bios:F481 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F481
bios:F481 loc_FF481:						      ;	CODE XREF: int_10_05+2j
bios:F481		  mov	  ah, al
bios:F483		  cmp	  ah, 84h ; '„'
bios:F486		  jnb	  short	loc_FF4DA
bios:F488		  cmp	  ah, 80h ; '€'
bios:F48B		  jz	  short	loc_FF4BF
bios:F48D		  and	  bl, 7
bios:F490		  and	  bh, 7
bios:F493		  mov	  cl, 3
bios:F495		  shl	  bl, cl
bios:F497		  mov	  al, ds:p400.video_page_data
bios:F49A		  cmp	  ah, 81h ; ''
bios:F49D		  jnz	  short	loc_FF4A6
bios:F49F		  and	  al, 0C7h
bios:F4A1		  or	  al, bl
bios:F4A3		  jmp	  short	loc_FF4B8
bios:F4A3 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F4A5		  db  90h ; 
bios:F4A6 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F4A6
bios:F4A6 loc_FF4A6:						      ;	CODE XREF: int_10_05+53j
bios:F4A6		  cmp	  ah, 82h ; '‚'
bios:F4A9		  jnz	  short	loc_FF4B2
bios:F4AB		  and	  al, 0F8h
bios:F4AD		  or	  al, bh
bios:F4AF		  jmp	  short	loc_FF4B8
bios:F4AF ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F4B1		  db  90h ; 
bios:F4B2 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F4B2
bios:F4B2 loc_FF4B2:						      ;	CODE XREF: int_10_05+5Fj
bios:F4B2		  and	  al, 0C0h
bios:F4B4		  or	  al, bl
bios:F4B6		  or	  al, bh
bios:F4B8
bios:F4B8 loc_FF4B8:						      ;	CODE XREF: int_10_05+59j
bios:F4B8							      ;	int_10_05+65j
bios:F4B8		  mov	  ds:p400.video_page_data, al
bios:F4BB		  mov	  dx, 3DFh
bios:F4BE		  out	  dx, al
bios:F4BF
bios:F4BF loc_FF4BF:						      ;	CODE XREF: int_10_05+41j
bios:F4BF		  mov	  bp, sp
bios:F4C1		  mov	  al, ds:p400.video_page_data
bios:F4C4		  and	  al, 7
bios:F4C6		  mov	  bh, al
bios:F4C8		  mov	  al, ds:p400.video_page_data
bios:F4CB		  mov	  cl, 3
bios:F4CD		  shr	  al, cl
bios:F4CF		  and	  al, 7
bios:F4D1		  mov	  bl, al
bios:F4D3		  mov	  [bp+0Eh], bx
bios:F4D6		  clc
bios:F4D7		  jmp	  near ptr int_pop_regs_and_exit
bios:F4DA ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F4DA
bios:F4DA loc_FF4DA:						      ;	CODE XREF: int_10_05+3Cj
bios:F4DA		  stc
bios:F4DB		  jmp	  near ptr int_pop_regs_and_exit
bios:F4DB int_10_05	  endp
bios:F4DB
bios:F4DE
bios:F4DE ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F4DE
bios:F4DE ;	Scrolls	a specified window upward a specified number of	lines.
bios:F4DE ;
bios:F4DE ;	   On entry:	  AH	     06h
bios:F4DE ;			  AL	     Number of lines to	scroll (if 0, clear entire
bios:F4DE ;				     window)
bios:F4DE ;			  BH	     Display attribute for blank lines
bios:F4DE ;			  CH	     Row number	of upper left corner
bios:F4DE ;			  CL	     Column number of upper left corner
bios:F4DE ;			  DH	     Row number	of lower right corner
bios:F4DE ;			  DL	     Column number of lower right corner
bios:F4DE ;
bios:F4DE ;	   Returns:	  None
bios:F4DE ;
bios:F4DE ;	   Registers destroyed:	     AX, SP, BP, SI, DI
bios:F4DE ;
bios:F4DE ; Attributes:	bp-based frame
bios:F4DE
bios:F4DE int_10_06	  proc far				      ;	CODE XREF: int_10+Dj
bios:F4DE							      ;	DATA XREF: int_10+1Eo
bios:F4DE		  push	  ax
bios:F4DF		  mov	  bp, sp
bios:F4E1		  mov	  word ptr [bp+0], 0
bios:F4E6		  call	  sub_FF4ED
bios:F4E9		  pop	  bx
bios:F4EA		  jmp	  near ptr int_pop_regs_and_exit
bios:F4EA int_10_06	  endp
bios:F4EA
bios:F4ED
bios:F4ED ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F4ED
bios:F4ED
bios:F4ED sub_FF4ED	  proc near				      ;	CODE XREF: int_10_06+8p
bios:F4ED							      ;	int_10_07+8p
bios:F4ED
bios:F4ED ; FUNCTION CHUNK AT bios:D413	SIZE 00000119 BYTES
bios:F4ED ; FUNCTION CHUNK AT bios:D52D	SIZE 00000085 BYTES
bios:F4ED ; FUNCTION CHUNK AT bios:D5B3	SIZE 00000014 BYTES
bios:F4ED
bios:F4ED		  mov	  ah, dl
bios:F4EF		  sub	  ah, cl
bios:F4F1		  inc	  ah
bios:F4F3		  cmp	  ah, 0
bios:F4F6		  jg	  short	loc_FF4FB
bios:F4F8		  jmp	  locret_FF5AC
bios:F4FB ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F4FB
bios:F4FB loc_FF4FB:						      ;	CODE XREF: sub_FF4ED+9j
bios:F4FB		  mov	  bl, dh
bios:F4FD		  sub	  bl, ch
bios:F4FF		  cmp	  al, bl
bios:F501		  jle	  short	loc_FF505
bios:F503		  xor	  al, al
bios:F505
bios:F505 loc_FF505:						      ;	CODE XREF: sub_FF4ED+14j
bios:F505		  call	  is_text_mode
bios:F508		  jnb	  short	loc_FF50D
bios:F50A		  jmp	  loc_FD413
bios:F50D ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F50D
bios:F50D loc_FF50D:						      ;	CODE XREF: sub_FF4ED+1Bj
bios:F50D		  cmp	  word ptr [bp+0], 0
bios:F511		  jz	  short	loc_FF515
bios:F513		  mov	  dh, ch
bios:F515
bios:F515 loc_FF515:						      ;	CODE XREF: sub_FF4ED+24j
bios:F515		  mov	  bh, ds:p400.active_display_page
bios:F519		  xor	  bl, bl
bios:F51B		  call	  sub_FD96F
bios:F51E		  inc	  bx
bios:F51F		  inc	  bx
bios:F520		  push	  bx
bios:F521		  mov	  bp, sp
bios:F523		  xor	  ch, ch
bios:F525		  cmp	  word ptr [bp+4], 0
bios:F529		  jz	  short	loc_FF531
bios:F52B		  mov	  ch, [bp+11h]
bios:F52E		  sub	  ch, [bp+13h]
bios:F531
bios:F531 loc_FF531:						      ;	CODE XREF: sub_FF4ED+3Cj
bios:F531		  mov	  dx, [bp+12h]
bios:F534		  add	  dh, ch
bios:F536		  mov	  bh, ds:p400.active_display_page
bios:F53A		  xor	  bl, bl
bios:F53C		  call	  sub_FD96F
bios:F53F		  mov	  di, bx
bios:F541		  mov	  dh, [bp+11h]
bios:F544		  sub	  dh, [bp+13h]
bios:F547		  cmp	  dh, 0
bios:F54A		  jnz	  short	loc_FF54F
bios:F54C		  jmp	  short	loc_FF590
bios:F54C ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F54E		  db  90h ; 
bios:F54F ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F54F
bios:F54F loc_FF54F:						      ;	CODE XREF: sub_FF4ED+5Dj
bios:F54F		  mov	  dx, [bp+12h]
bios:F552		  add	  dh, ch
bios:F554		  cmp	  word ptr [bp+4], 0
bios:F558		  jnz	  short	loc_FF55E
bios:F55A		  add	  dh, al
bios:F55C		  jmp	  short	loc_FF560
bios:F55E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F55E
bios:F55E loc_FF55E:						      ;	CODE XREF: sub_FF4ED+6Bj
bios:F55E		  sub	  dh, al
bios:F560
bios:F560 loc_FF560:						      ;	CODE XREF: sub_FF4ED+6Fj
bios:F560		  mov	  bh, ds:p400.active_display_page
bios:F564		  xor	  bl, bl
bios:F566		  call	  sub_FD96F
bios:F569		  mov	  si, bx
bios:F56B		  xor	  cx, cx
bios:F56D		  cmp	  al, 0
bios:F56F		  jz	  short	loc_FF590
bios:F571
bios:F571 loc_FF571:						      ;	CODE XREF: sub_FF4ED+9Cj
bios:F571		  push	  si
bios:F572		  push	  di
bios:F573		  push	  ds
bios:F574		  push	  ax
bios:F575		  mov	  ax, es
bios:F577		  mov	  ds, ax
bios:F579		  pop	  ax
bios:F57A		  mov	  cl, ah
bios:F57C		  rep movsw
bios:F57E		  pop	  ds
bios:F57F		  cmp	  si, [bp+0]
bios:F582		  jz	  short	loc_FF58B
bios:F584		  pop	  di
bios:F585		  pop	  si
bios:F586		  call	  sub_FDB09
bios:F589		  jmp	  short	loc_FF571
bios:F58B ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F58B
bios:F58B loc_FF58B:						      ;	CODE XREF: sub_FF4ED+95j
bios:F58B		  pop	  di
bios:F58C		  pop	  si
bios:F58D		  call	  sub_FDB09
bios:F590
bios:F590 loc_FF590:						      ;	CODE XREF: sub_FF4ED+5Fj
bios:F590							      ;	sub_FF4ED+82j
bios:F590							      ;	sub_FF4ED+BAj
bios:F590		  push	  si
bios:F591		  push	  di
bios:F592		  mov	  cl, ah
bios:F594		  push	  ax
bios:F595		  mov	  al, 20h ; ' '
bios:F597		  mov	  ah, [bp+15h]
bios:F59A		  rep stosw
bios:F59C		  pop	  ax
bios:F59D		  cmp	  di, [bp+0]
bios:F5A0		  jz	  short	loc_FF5A9
bios:F5A2		  pop	  di
bios:F5A3		  pop	  si
bios:F5A4		  call	  sub_FDB09
bios:F5A7		  jmp	  short	loc_FF590
bios:F5A9 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F5A9
bios:F5A9 loc_FF5A9:						      ;	CODE XREF: sub_FF4ED+B3j
bios:F5A9		  pop	  di
bios:F5AA		  pop	  si
bios:F5AB		  pop	  bx
bios:F5AC
bios:F5AC locret_FF5AC:						      ;	CODE XREF: sub_FF4ED+Bj
bios:F5AC		  retn
bios:F5AC sub_FF4ED	  endp
bios:F5AC
bios:F5AD
bios:F5AD ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F5AD
bios:F5AD ;	Scrolls	a specified window downward a specified	number of lines.
bios:F5AD ;
bios:F5AD ;	   On entry:	  AH	     07h
bios:F5AD ;			  AL	     Number of lines to	scroll (if 0, clear entire
bios:F5AD ;				     window)
bios:F5AD ;			  BH	     Display attribute for blank lines
bios:F5AD ;			  CH	     Row number	of upper left corner
bios:F5AD ;			  CL	     Column number of upper left corner
bios:F5AD ;			  DH	     Row number	of lower right corner
bios:F5AD ;			  DL	     Column number of lower right corner
bios:F5AD ;
bios:F5AD ;	   Returns:	  None
bios:F5AD ;
bios:F5AD ;	   Registers destroyed:	     AX, SP, BP, SI, DI
bios:F5AD ; Attributes:	bp-based frame
bios:F5AD
bios:F5AD int_10_07	  proc far				      ;	CODE XREF: int_10+Dj
bios:F5AD							      ;	DATA XREF: int_10+20o
bios:F5AD		  push	  ax
bios:F5AE		  mov	  bp, sp
bios:F5B0		  mov	  word ptr [bp+0], 1
bios:F5B5		  call	  sub_FF4ED
bios:F5B8		  pop	  bx
bios:F5B9		  jmp	  near ptr int_pop_regs_and_exit
bios:F5B9 int_10_07	  endp
bios:F5B9
bios:F5BC
bios:F5BC ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F5BC
bios:F5BC ;	Reports	the ASCII value	and (in	text mode) attribute of	the character
bios:F5BC ;	at the current cursor location of the specified	display	page.
bios:F5BC ;
bios:F5BC ;	   On entry:	  AH	     08h
bios:F5BC ;			  BH	     Display page number (text modes only)
bios:F5BC ;
bios:F5BC ;	   Returns:	  AH	     Attribute of character (text mode)
bios:F5BC ;			  AL	     ASCII value of character
bios:F5BC ;
bios:F5BC ;	   Registers destroyed:	     AX, SP, BP, SI, DI
bios:F5BC
bios:F5BC int_10_08	  proc far				      ;	CODE XREF: int_10+Dj
bios:F5BC							      ;	DATA XREF: int_10+22o
bios:F5BC		  call	  is_text_mode
bios:F5BF		  jnb	  short	loc_FF5CB
bios:F5C1		  xor	  bl, bl
bios:F5C3		  call	  get_rowcols_for_page
bios:F5C6		  call	  sub_FD5C7
bios:F5C9		  jmp	  short	loc_FF5D4
bios:F5CB ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F5CB
bios:F5CB loc_FF5CB:						      ;	CODE XREF: int_10_08+3j
bios:F5CB		  mov	  bl, 1
bios:F5CD		  call	  sub_FD96F
bios:F5D0		  mov	  ax, es:[bx]
bios:F5D3		  sti
bios:F5D4
bios:F5D4 loc_FF5D4:						      ;	CODE XREF: int_10_08+Dj
bios:F5D4		  jmp	  near ptr int_pop_regs_and_exit
bios:F5D4 int_10_08	  endp
bios:F5D4
bios:F5D7
bios:F5D7 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F5D7
bios:F5D7 ;	Displays a specified character with a specified	attribute a specified
bios:F5D7 ;	number of times.
bios:F5D7 ;
bios:F5D7 ;	   On entry:	  AX	     09h
bios:F5D7 ;			  AL	     ASCII value of character
bios:F5D7 ;			  BH	     Display page (text	mode only)
bios:F5D7 ;			  BL	     Attribute/Color
bios:F5D7 ;			  CX	     Number of times to	write character
bios:F5D7 ;
bios:F5D7 ;	   Returns:	  None
bios:F5D7 ;
bios:F5D7 ;	   Registers destroyed:	     AX, SP, BP, SI, DI
bios:F5D7
bios:F5D7 int_10_09	  proc far				      ;	CODE XREF: int_10+Dj
bios:F5D7							      ;	DATA XREF: int_10+24o
bios:F5D7		  xor	  dl, dl
bios:F5D9		  jmp	  short	l0
bios:F5D9 int_10_09	  endp
bios:F5D9
bios:F5DB
bios:F5DB ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F5DB
bios:F5DB ;
bios:F5DB ;	Displays a specified character a specified number of times.
bios:F5DB ;
bios:F5DB ;	   On entry:	  AH	     0Ah
bios:F5DB ;			  AL	     ASCII value of character
bios:F5DB ;			  BH	     Display page number (text mode only)
bios:F5DB ;			  CX	     Number of times to	write character
bios:F5DB ;
bios:F5DB ;	   Returns:	  None
bios:F5DB ;
bios:F5DB ;	   Registers destroyed:	     AX, SP, BP, SI, DI
bios:F5DB ;
bios:F5DB ; Attributes:	bp-based frame
bios:F5DB
bios:F5DB int_10_0a	  proc far				      ;	CODE XREF: int_10+Dj
bios:F5DB							      ;	DATA XREF: int_10+26o
bios:F5DB		  mov	  dl, 0FFh
bios:F5DD
bios:F5DD l0:							      ;	CODE XREF: int_10_09+2j
bios:F5DD		  or	  cx, cx
bios:F5DF		  jz	  short	l5
bios:F5E1		  mov	  ah, bl
bios:F5E3		  call	  is_text_mode
bios:F5E6		  jnb	  short	l1
bios:F5E8		  xor	  bl, bl
bios:F5EA		  call	  get_rowcols_for_page
bios:F5ED		  call	  sub_FD754
bios:F5F0		  jmp	  short	l5
bios:F5F2 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F5F2
bios:F5F2 l1:							      ;	CODE XREF: int_10_0a+Bj
bios:F5F2		  push	  dx
bios:F5F3		  mov	  bp, sp
bios:F5F5		  mov	  bl, 1
bios:F5F7		  call	  sub_FD96F
bios:F5FA		  mov	  di, bx
bios:F5FC		  mov	  bl, al
bios:F5FE		  cmp	  byte ptr [bp+0], 0
bios:F602		  jnz	  short	l3
bios:F604
bios:F604 l2:							      ;	CODE XREF: int_10_0a+2Dj
bios:F604		  mov	  al, bl
bios:F606		  stosw
bios:F607		  sti
bios:F608		  loop	  l2
bios:F60A		  jmp	  short	l4
bios:F60C ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F60C
bios:F60C l3:							      ;	CODE XREF: int_10_0a+27j
bios:F60C							      ;	int_10_0a+36j
bios:F60C		  mov	  al, bl
bios:F60E		  stosb
bios:F60F		  sti
bios:F610		  inc	  di
bios:F611		  loop	  l3
bios:F613
bios:F613 l4:							      ;	CODE XREF: int_10_0a+2Fj
bios:F613		  pop	  bx
bios:F614
bios:F614 l5:							      ;	CODE XREF: int_10_0a+4j
bios:F614							      ;	int_10_0a+15j
bios:F614		  jmp	  near ptr int_pop_regs_and_exit
bios:F614 int_10_0a	  endp
bios:F614
bios:F617
bios:F617 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F617
bios:F617 ;
bios:F617 ;	Selects	color palette for various display modes.
bios:F617 ;
bios:F617 ;	   On entry:	  AX	     0Bh
bios:F617 ;			  BH	     Palette Color ID (0 or 1, See below)
bios:F617 ;			  BL	     Color or palette value to be used with Color
bios:F617 ;				     ID	(0 - 31)
bios:F617 ;
bios:F617 ;	   Returns:	  None
bios:F617 ;
bios:F617 ;	   Registers destroyed:	     AX, SP, BP, SI, DI
bios:F617
bios:F617 int_10_0b	  proc far				      ;	CODE XREF: int_10+Dj
bios:F617							      ;	DATA XREF: int_10+28o
bios:F617		  mov	  dx, 3D9h
bios:F61A		  mov	  al, ds:p400.shadow_3d9_crt_palette
bios:F61D		  cmp	  bh, 0
bios:F620		  jnz	  short	l2
bios:F622		  cmp	  byte ptr ds:p400.crt_mode, 8
bios:F627		  jb	  short	l0
bios:F629		  mov	  bh, bl
bios:F62B		  mov	  bl, 0
bios:F62D		  call	  sub_FF8F2
bios:F630		  mov	  bl, bh
bios:F632
bios:F632 l0:							      ;	CODE XREF: int_10_0b+10j
bios:F632		  cmp	  byte ptr ds:p400.crt_mode, 6
bios:F637		  jz	  short	l1
bios:F639		  mov	  dx, 3DAh
bios:F63C		  mov	  al, 2
bios:F63E		  out	  dx, al			      ;	Video: bits 0-1	control
bios:F63E							      ;	Feature	Control	outputs	FC0 and	FC1
bios:F63F		  mov	  al, bl
bios:F641		  add	  dx, 4
bios:F644		  out	  dx, al
bios:F645		  xor	  al, al
bios:F647		  sub	  dx, 4
bios:F64A		  out	  dx, al			      ;	Video: bits 0-1	control
bios:F64A							      ;	Feature	Control	outputs	FC0 and	FC1
bios:F64B
bios:F64B l1:							      ;	CODE XREF: int_10_0b+20j
bios:F64B		  mov	  dx, 3D9h
bios:F64E		  mov	  al, ds:p400.shadow_3d9_crt_palette
bios:F651		  and	  al, 0E0h
bios:F653		  and	  bl, 1Fh
bios:F656		  or	  al, bl
bios:F658		  jmp	  short	l3
bios:F65A ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F65A
bios:F65A l2:							      ;	CODE XREF: int_10_0b+9j
bios:F65A		  and	  al, 0DFh
bios:F65C		  cmp	  bl, 0
bios:F65F		  jz	  short	l3
bios:F661		  or	  al, 20h
bios:F663
bios:F663 l3:							      ;	CODE XREF: int_10_0b+41j
bios:F663							      ;	int_10_0b+48j
bios:F663		  cmp	  byte ptr ds:p400.crt_mode, 0Ah
bios:F668		  jnz	  short	l4
bios:F66A		  mov	  al, 0
bios:F66C
bios:F66C l4:							      ;	CODE XREF: int_10_0b+51j
bios:F66C		  out	  dx, al
bios:F66D		  mov	  ds:p400.shadow_3d9_crt_palette, al
bios:F670		  cmp	  byte ptr ds:p400.crt_mode, 0Ah
bios:F675		  jnz	  short	l7
bios:F677		  cmp	  bl, 0
bios:F67A		  jz	  short	l5
bios:F67C		  mov	  bx, 301h
bios:F67F		  call	  sub_FF8F2
bios:F682		  mov	  bx, 502h
bios:F685		  call	  sub_FF8F2
bios:F688		  mov	  bx, 0F03h
bios:F68B		  call	  sub_FF8F2
bios:F68E		  jmp	  short	l6
bios:F68E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F690		  db  90h ; 
bios:F691 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F691
bios:F691 l5:							      ;	CODE XREF: int_10_0b+63j
bios:F691		  mov	  bx, 201h
bios:F694		  call	  sub_FF8F2
bios:F697		  mov	  bx, 402h
bios:F69A		  call	  sub_FF8F2
bios:F69D		  mov	  bx, 603h
bios:F6A0		  call	  sub_FF8F2
bios:F6A3
bios:F6A3 l6:							      ;	CODE XREF: int_10_0b+77j
bios:F6A3		  mov	  dx, 3DAh
bios:F6A6		  xor	  al, al
bios:F6A8		  out	  dx, al			      ;	Video: bits 0-1	control
bios:F6A8							      ;	Feature	Control	outputs	FC0 and	FC1
bios:F6A9
bios:F6A9 l7:							      ;	CODE XREF: int_10_0b+5Ej
bios:F6A9		  jmp	  near ptr int_pop_regs_and_exit
bios:F6A9 int_10_0b	  endp
bios:F6A9
bios:F6AC
bios:F6AC ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F6AC
bios:F6AC ;
bios:F6AC ;	Writes a pixel dot of a	specified color	at a specified screen
bios:F6AC ;	coordinate.
bios:F6AC ;
bios:F6AC ;	   On entry:	  AH	     0Ch
bios:F6AC ;			  AL	     Pixel color
bios:F6AC ;			  CX	     Horizontal	position of pixel
bios:F6AC ;			  DX	     Vertical position of pixel
bios:F6AC ;			  BH	     Display page number (graphics modes with more
bios:F6AC ;				     than 1 page)
bios:F6AC ;
bios:F6AC ;	   Returns:	  None
bios:F6AC ;
bios:F6AC ;	   Registers destroyed:	     AX, SP, BP, SI, DI
bios:F6AC
bios:F6AC int_10_0c	  proc far				      ;	CODE XREF: int_10+Dj
bios:F6AC							      ;	DATA XREF: int_10+2Ao
bios:F6AC		  call	  sub_FF93F
bios:F6AF		  jb	  short	l2
bios:F6B1		  cmp	  byte ptr ds:p400.crt_mode, 8
bios:F6B6		  jz	  short	l3
bios:F6B8		  cmp	  byte ptr ds:p400.crt_mode, 9
bios:F6BD		  jz	  short	l3
bios:F6BF		  cmp	  byte ptr ds:p400.crt_mode, 0Ah
bios:F6C4		  jz	  short	l4
bios:F6C6
bios:F6C6 l0:							      ;	CODE XREF: int_10_0c+39j
bios:F6C6		  mov	  ah, al
bios:F6C8		  and	  al, dl
bios:F6CA		  shl	  al, cl
bios:F6CC		  test	  ah, 80h
bios:F6CF		  jnz	  short	l1
bios:F6D1		  rol	  dh, cl
bios:F6D3		  and	  es:[bx], dh
bios:F6D6		  or	  es:[bx], al
bios:F6D9		  jmp	  near ptr int_pop_regs_and_exit
bios:F6DC ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F6DC
bios:F6DC l1:							      ;	CODE XREF: int_10_0c+23j
bios:F6DC		  xor	  es:[bx], al
bios:F6DF
bios:F6DF l2:							      ;	CODE XREF: int_10_0c+3j
bios:F6DF		  jmp	  near ptr int_pop_regs_and_exit
bios:F6E2 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F6E2
bios:F6E2 l3:							      ;	CODE XREF: int_10_0c+Aj
bios:F6E2							      ;	int_10_0c+11j
bios:F6E2		  mov	  dx, 0F00Fh
bios:F6E5		  jmp	  short	l0
bios:F6E7 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F6E7
bios:F6E7 l4:							      ;	CODE XREF: int_10_0c+18j
bios:F6E7		  mov	  dx, 0FE01h
bios:F6EA		  mov	  ah, al
bios:F6EC		  and	  al, dl
bios:F6EE		  shl	  al, cl
bios:F6F0		  test	  ah, 80h
bios:F6F3		  jnz	  short	l5
bios:F6F5		  rol	  dh, cl
bios:F6F7		  and	  es:[bx], dh
bios:F6FA		  or	  es:[bx], al
bios:F6FD		  jmp	  short	l6
bios:F6FD ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F6FF		  db  90h ; 
bios:F700 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F700
bios:F700 l5:							      ;	CODE XREF: int_10_0c+47j
bios:F700		  xor	  es:[bx], al
bios:F703
bios:F703 l6:							      ;	CODE XREF: int_10_0c+51j
bios:F703		  mov	  al, ah
bios:F705		  shr	  al, 1
bios:F707		  and	  al, dl
bios:F709		  shl	  al, cl
bios:F70B		  test	  ah, 80h
bios:F70E		  jnz	  short	l7
bios:F710		  and	  es:[bx+1], dh
bios:F714		  or	  es:[bx+1], al
bios:F718		  jmp	  near ptr int_pop_regs_and_exit
bios:F71B ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F71B
bios:F71B l7:							      ;	CODE XREF: int_10_0c+62j
bios:F71B		  xor	  es:[bx+1], al
bios:F71F		  jmp	  near ptr int_pop_regs_and_exit
bios:F71F int_10_0c	  endp
bios:F71F
bios:F722
bios:F722 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F722
bios:F722 ; Reports the	color of the pixel at a	specified screen coordinate.
bios:F722 ;
bios:F722 ;	   On entry:	  AH	     0Dh
bios:F722 ;			  CX	     Horizontal	position of pixel
bios:F722 ;			  DX	     Vertical position of pixel
bios:F722 ;			  BH	     Display page number (graphics modes with more
bios:F722 ;				     than 1 page)
bios:F722 ;
bios:F722 ;	   Returns:	  AL	     Color of pixel
bios:F722 ;
bios:F722 ;	   Registers destroyed:	     AX, SP, BP, SI, DI
bios:F722
bios:F722 int_10_0d	  proc far				      ;	CODE XREF: int_10+Dj
bios:F722							      ;	DATA XREF: int_10+2Co
bios:F722		  call	  sub_FF93F
bios:F725		  jb	  short	l1
bios:F727		  cmp	  byte ptr ds:p400.crt_mode, 8
bios:F72C		  jz	  short	l2
bios:F72E		  cmp	  byte ptr ds:p400.crt_mode, 9
bios:F733		  jz	  short	l2
bios:F735		  cmp	  byte ptr ds:p400.crt_mode, 0Ah
bios:F73A		  jz	  short	l3
bios:F73C
bios:F73C l0:							      ;	CODE XREF: int_10_0d+26j
bios:F73C		  mov	  al, es:[bx]
bios:F73F		  shr	  al, cl
bios:F741		  and	  al, ah
bios:F743
bios:F743 l1:							      ;	CODE XREF: int_10_0d+3j
bios:F743		  jmp	  near ptr int_pop_regs_and_exit
bios:F746 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F746
bios:F746 l2:							      ;	CODE XREF: int_10_0d+Aj
bios:F746							      ;	int_10_0d+11j
bios:F746		  mov	  ah, 0Fh
bios:F748		  jmp	  short	l0
bios:F74A ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F74A
bios:F74A l3:							      ;	CODE XREF: int_10_0d+18j
bios:F74A		  mov	  ah, 1
bios:F74C		  mov	  al, es:[bx]
bios:F74F		  shr	  al, cl
bios:F751		  and	  al, ah
bios:F753		  mov	  dl, es:[bx+1]
bios:F757		  shr	  dl, cl
bios:F759		  and	  dl, ah
bios:F75B		  shl	  dl, 1
bios:F75D		  or	  al, dl
bios:F75F		  jmp	  near ptr int_pop_regs_and_exit
bios:F75F int_10_0d	  endp
bios:F75F
bios:F762
bios:F762 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F762
bios:F762 ;  Writes one	character at the current cursor	location and advances the
bios:F762 ;	cursor.
bios:F762 ;
bios:F762 ;	   On entry:	  AH	     0Eh
bios:F762 ;			  AL	     Character to write
bios:F762 ;			  BL	     Foreground	color (graphics	modes only)
bios:F762 ;			  BH	     Display page number (text modes only)
bios:F762 ;
bios:F762 ;	   Returns:	  None
bios:F762
bios:F762 int_10_0e	  proc far				      ;	CODE XREF: int_10+Dj
bios:F762							      ;	DATA XREF: int_10+2Eo
bios:F762		  push	  ax
bios:F763		  mov	  cl, bl
bios:F765		  call	  sub_FF91B
bios:F768		  call	  get_rowcols_for_page
bios:F76B		  cmp	  al, 7
bios:F76D		  jnz	  short	l0
bios:F76F		  call	  play_bell_sound?
bios:F772		  jmp	  l12
bios:F775 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F775
bios:F775 l0:							      ;	CODE XREF: int_10_0e+Bj
bios:F775		  cmp	  al, 0Dh
bios:F777		  jnz	  short	l1
bios:F779		  xor	  dl, dl
bios:F77B		  jmp	  short	l11
bios:F77B ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F77D		  db  90h ; 
bios:F77E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F77E
bios:F77E l1:							      ;	CODE XREF: int_10_0e+15j
bios:F77E		  cmp	  al, 8
bios:F780		  jnz	  short	l4
bios:F782		  dec	  dl
bios:F784		  jge	  short	l2
bios:F786		  cmp	  dh, 0
bios:F789		  jg	  short	l3
bios:F78B		  xor	  dl, dl
bios:F78D
bios:F78D l2:							      ;	CODE XREF: int_10_0e+22j
bios:F78D		  jmp	  short	l11
bios:F78D ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F78F		  db  90h ; 
bios:F790 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F790
bios:F790 l3:							      ;	CODE XREF: int_10_0e+27j
bios:F790		  dec	  dh
bios:F792		  add	  dl, ds:p400.crt_nr_cols
bios:F796		  jmp	  short	l11
bios:F796 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F798		  db  90h ; 
bios:F799 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F799
bios:F799 l4:							      ;	CODE XREF: int_10_0e+1Ej
bios:F799		  cmp	  al, 0Ah
bios:F79B		  jnz	  short	l9
bios:F79D		  cmp	  dh, 18h
bios:F7A0		  jnz	  short	l8
bios:F7A2
bios:F7A2 l5:							      ;	CODE XREF: int_10_0e+90j
bios:F7A2		  call	  is_text_mode
bios:F7A5		  jnb	  short	l6
bios:F7A7		  mov	  ah, 0
bios:F7A9		  jmp	  short	l7
bios:F7AB ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F7AB
bios:F7AB l6:							      ;	CODE XREF: int_10_0e+43j
bios:F7AB		  mov	  bp, sp
bios:F7AD		  call	  sub_FF91B
bios:F7B0		  mov	  ah, 8
bios:F7B2		  int	  10h				      ;	- VIDEO	- READ ATTRIBUTES/CHARACTER AT CURSOR POSITION
bios:F7B2							      ;	BH = display page
bios:F7B2							      ;	Return:	AL = character
bios:F7B2							      ;	AH = attribute of character (alpha modes)
bios:F7B4
bios:F7B4 l7:							      ;	CODE XREF: int_10_0e+47j
bios:F7B4		  mov	  bh, ah
bios:F7B6		  mov	  ah, 6
bios:F7B8		  mov	  al, 1
bios:F7BA		  xor	  cx, cx
bios:F7BC		  mov	  dl, ds:p400.crt_nr_cols
bios:F7C0		  dec	  dl
bios:F7C2		  int	  10h				      ;	- VIDEO	- SCROLL PAGE UP
bios:F7C2							      ;	AL = number of lines to	scroll window (0 = blank whole window)
bios:F7C2							      ;	BH = attributes	to be used on blanked lines
bios:F7C2							      ;	CH,CL =	row,column of upper left corner	of window to scroll
bios:F7C2							      ;	DH,DL =	row,column of lower right corner of window
bios:F7C4		  jmp	  short	l12
bios:F7C4 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F7C6		  db  90h ; 
bios:F7C7 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F7C7
bios:F7C7 l8:							      ;	CODE XREF: int_10_0e+3Ej
bios:F7C7		  inc	  dh
bios:F7C9		  jmp	  short	l11
bios:F7C9 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F7CB		  db  90h ; 
bios:F7CC ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F7CC
bios:F7CC l9:							      ;	CODE XREF: int_10_0e+39j
bios:F7CC		  mov	  ah, 0Ah
bios:F7CE		  mov	  bl, cl
bios:F7D0		  mov	  cx, 1
bios:F7D3		  int	  10h				      ;	- VIDEO	- WRITE	CHARACTERS ONLY	AT CURSOR POSITION
bios:F7D3							      ;	AL = character,	BH = display page - alpha mode
bios:F7D3							      ;	BL = color of character	(graphics mode,	PCjr only)
bios:F7D3							      ;	CX = number of times to	write character
bios:F7D5		  inc	  dl
bios:F7D7		  cmp	  dl, ds:p400.crt_nr_cols
bios:F7DB		  jnz	  short	l11
bios:F7DD		  xor	  dl, dl
bios:F7DF		  cmp	  dh, 18h
bios:F7E2		  jnz	  short	l10
bios:F7E4		  mov	  bp, sp
bios:F7E6		  push	  ax
bios:F7E7		  push	  cx
bios:F7E8		  push	  dx
bios:F7E9		  call	  sub_FF91B
bios:F7EC		  call	  sub_FF2FA
bios:F7EF		  pop	  dx
bios:F7F0		  pop	  cx
bios:F7F1		  pop	  ax
bios:F7F2		  jmp	  short	l5
bios:F7F4 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F7F4
bios:F7F4 l10:							      ;	CODE XREF: int_10_0e+80j
bios:F7F4		  inc	  dh
bios:F7F6
bios:F7F6 l11:							      ;	CODE XREF: int_10_0e+19j
bios:F7F6							      ;	int_10_0e:l2j
bios:F7F6							      ;	int_10_0e+34j
bios:F7F6							      ;	int_10_0e+67j
bios:F7F6							      ;	int_10_0e+79j
bios:F7F6		  mov	  bp, sp
bios:F7F8		  call	  sub_FF91B
bios:F7FB		  call	  sub_FF2FA
bios:F7FE
bios:F7FE l12:							      ;	CODE XREF: int_10_0e+10j
bios:F7FE							      ;	int_10_0e+62j
bios:F7FE		  pop	  ax
bios:F7FF		  jmp	  short	int_10_exit
bios:F7FF int_10_0e	  endp
bios:F7FF
bios:F801
bios:F801 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F801
bios:F801 ;  Reports the current video mode, the number	of character positions per
bios:F801 ;	line in	that video mode, and the current display page.
bios:F801 ;
bios:F801 ;	   On entry:	  AH	     0Fh
bios:F801 ;
bios:F801 ;	   Returns:	  AL	     Video mode
bios:F801 ;			  AH	     Number of character columns per line
bios:F801 ;			  BH	     Active display page number
bios:F801 ;
bios:F801 ;	   Registers destroyed:	     AX, SP, BP, SI, DI
bios:F801 ;
bios:F801 ; Attributes:	bp-based frame
bios:F801
bios:F801 int_10_0f	  proc far				      ;	CODE XREF: int_10+Dj
bios:F801							      ;	DATA XREF: int_10+30o
bios:F801
bios:F801 arg_A		  = word ptr  0Eh
bios:F801
bios:F801		  mov	  ax, ds:p400.crt_nr_cols
bios:F804		  mov	  ah, al
bios:F806		  mov	  al, ds:p400.crt_mode
bios:F809		  mov	  bh, ds:p400.active_display_page
bios:F80D		  mov	  bp, sp
bios:F80F		  mov	  [bp+arg_A], bx
bios:F812
bios:F812 int_10_exit:						      ;	CODE XREF: int_10_0e+9Dj
bios:F812							      ;	int_10_10+D6j
bios:F812							      ;	int_10_10+DAj
bios:F812		  jmp	  near ptr int_pop_regs_and_exit
bios:F812 int_10_0f	  endp
bios:F812
bios:F815
bios:F815 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F815
bios:F815 ; Sets the palette and overscan (border) registers on	the PCjr and EGA.
bios:F815 ;
bios:F815 ;	   On entry:	  AH	     10h
bios:F815 ;			  AL	     Subservice
bios:F815 ;				     0 - Set palette register
bios:F815 ;					 BL	 Palette register
bios:F815 ;					 BH	 Value to set
bios:F815 ;
bios:F815 ;				     1 - Set overscan (border) color register
bios:F815 ;					 BH	 Value to set
bios:F815 ;
bios:F815 ;				     2 - Set palette registers and border register
bios:F815 ;					 ES:DX	 Pointer to color list
bios:F815 ;
bios:F815 ;				     3 - Toggle	intensify/blinking bit
bios:F815 ;					 BL	 0 - Enable intensify
bios:F815 ;					 BL	 1 - Enable blinking
bios:F815 ;
bios:F815 ;	   Registers destroyed:	     AX, SP, BP, SI, DI
bios:F815 ;
bios:F815
bios:F815 int_10_10	  proc far				      ;	CODE XREF: int_10+Dj
bios:F815							      ;	DATA XREF: int_10+32o
bios:F815		  cmp	  al, 3
bios:F817		  jb	  short	ok
bios:F819		  jmp	  error
bios:F81C ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F81C
bios:F81C ok:							      ;	CODE XREF: int_10_10+2j
bios:F81C		  cmp	  al, 0
bios:F81E		  jnz	  short	l8
bios:F820		  cmp	  byte ptr ds:p400.crt_mode, 6
bios:F825		  jnz	  short	l0
bios:F827		  cmp	  bl, 1
bios:F82A		  jnz	  short	l7
bios:F82C		  mov	  bl, 0Fh
bios:F82E		  jmp	  short	l7
bios:F82E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F830		  db  90h ; 
bios:F831 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F831
bios:F831 l0:							      ;	CODE XREF: int_10_10+10j
bios:F831		  jnb	  short	l7
bios:F833		  cmp	  byte ptr ds:p400.crt_mode, 4
bios:F838		  jb	  short	l7
bios:F83A		  mov	  al, ds:p400.shadow_3d9_crt_palette
bios:F83D		  and	  al, 20h
bios:F83F		  jz	  short	l4
bios:F841		  cmp	  bl, 1
bios:F844		  jnz	  short	l1
bios:F846		  mov	  bl, 0Bh
bios:F848		  jmp	  short	l7
bios:F848 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F84A		  db  90h ; 
bios:F84B ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F84B
bios:F84B l1:							      ;	CODE XREF: int_10_10+2Fj
bios:F84B		  cmp	  bl, 2
bios:F84E		  jnz	  short	l3
bios:F850		  mov	  bl, 0Dh
bios:F852		  jmp	  short	l7
bios:F852 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F854		  db  90h ; 
bios:F855 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F855
bios:F855 l3:							      ;	CODE XREF: int_10_10+39j
bios:F855		  cmp	  bl, 3
bios:F858		  jnz	  short	l7
bios:F85A		  mov	  bl, 0Fh
bios:F85C		  jmp	  short	l7
bios:F85C ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F85E		  db  90h ; 
bios:F85F ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F85F
bios:F85F l4:							      ;	CODE XREF: int_10_10+2Aj
bios:F85F		  cmp	  bl, 1
bios:F862		  jnz	  short	l5
bios:F864		  mov	  bl, 0Ah
bios:F866		  jmp	  short	l7
bios:F866 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F868		  db  90h ; 
bios:F869 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F869
bios:F869 l5:							      ;	CODE XREF: int_10_10+4Dj
bios:F869		  cmp	  bl, 2
bios:F86C		  jnz	  short	l6
bios:F86E		  mov	  bl, 0Ch
bios:F870		  jmp	  short	l7
bios:F870 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F872		  db  90h ; 
bios:F873 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F873
bios:F873 l6:							      ;	CODE XREF: int_10_10+57j
bios:F873		  cmp	  bl, 3
bios:F876		  jnz	  short	l7
bios:F878		  mov	  bl, 0Eh
bios:F87A
bios:F87A l7:							      ;	CODE XREF: int_10_10+15j
bios:F87A							      ;	int_10_10+19j
bios:F87A							      ;	int_10_10:l0j
bios:F87A							      ;	int_10_10+23j
bios:F87A							      ;	int_10_10+33j
bios:F87A							      ;	int_10_10+3Dj ...
bios:F87A		  call	  sub_FF8F2
bios:F87D		  jb	  short	error
bios:F87F		  jmp	  short	l14
bios:F87F ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F881		  db  90h ; 
bios:F882 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F882
bios:F882 l8:							      ;	CODE XREF: int_10_10+9j
bios:F882		  push	  ax
bios:F883		  cmp	  byte ptr ds:p400.crt_mode, 7
bios:F888		  jnb	  short	l9
bios:F88A		  mov	  dx, 3DAh
bios:F88D		  mov	  al, 3
bios:F88F		  out	  dx, al			      ;	Video: bits 0-1	control
bios:F88F							      ;	Feature	Control	outputs	FC0 and	FC1
bios:F890		  add	  dx, 4
bios:F893		  mov	  al, 4
bios:F895		  out	  dx, al
bios:F896
bios:F896 l9:							      ;	CODE XREF: int_10_10+73j
bios:F896		  pop	  ax
bios:F897		  cmp	  al, 1
bios:F899		  jnz	  short	l10
bios:F89B		  mov	  al, 2
bios:F89D		  mov	  dx, 3DAh
bios:F8A0		  out	  dx, al			      ;	Video: bits 0-1	control
bios:F8A0							      ;	Feature	Control	outputs	FC0 and	FC1
bios:F8A1		  mov	  al, bh
bios:F8A3		  add	  dx, 4
bios:F8A6		  out	  dx, al
bios:F8A7		  jmp	  short	l14
bios:F8A7 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F8A9		  db  90h ; 
bios:F8AA ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F8AA
bios:F8AA l10:							      ;	CODE XREF: int_10_10+84j
bios:F8AA		  mov	  bl, 10h
bios:F8AC		  mov	  si, dx
bios:F8AE		  mov	  dx, 3DAh
bios:F8B1		  mov	  cx, 10h
bios:F8B4
bios:F8B4 l11:							      ;	CODE XREF: int_10_10+C3j
bios:F8B4		  push	  dx
bios:F8B5		  mov	  dx, 3DAh
bios:F8B8
bios:F8B8 l12:							      ;	CODE XREF: int_10_10+A6j
bios:F8B8		  in	  al, dx			      ;	Video status bits:
bios:F8B8							      ;	0: retrace.  1=display is in vert or horiz retrace.
bios:F8B8							      ;	1: 1=light pen is triggered; 0=armed
bios:F8B8							      ;	2: 1=light pen switch is open; 0=closed
bios:F8B8							      ;	3: 1=vertical sync pulse is occurring.
bios:F8B9		  test	  al, 8
bios:F8BB		  jnz	  short	l12
bios:F8BD		  cli
bios:F8BE
bios:F8BE l13:							      ;	CODE XREF: int_10_10+ACj
bios:F8BE		  in	  al, dx			      ;	Video status bits:
bios:F8BE							      ;	0: retrace.  1=display is in vert or horiz retrace.
bios:F8BE							      ;	1: 1=light pen is triggered; 0=armed
bios:F8BE							      ;	2: 1=light pen switch is open; 0=closed
bios:F8BE							      ;	3: 1=vertical sync pulse is occurring.
bios:F8BF		  test	  al, 8
bios:F8C1		  jz	  short	l13
bios:F8C3		  pop	  dx
bios:F8C4		  mov	  al, bl
bios:F8C6		  out	  dx, al
bios:F8C7		  mov	  al, es:[si]
bios:F8CA		  add	  dx, 4
bios:F8CD		  out	  dx, al
bios:F8CE		  sti
bios:F8CF		  inc	  si
bios:F8D0		  sub	  dx, 4
bios:F8D3		  xor	  al, al
bios:F8D5		  out	  dx, al
bios:F8D6		  inc	  bl
bios:F8D8		  loop	  l11
bios:F8DA		  mov	  al, 2
bios:F8DC		  out	  dx, al
bios:F8DD		  add	  dx, 4
bios:F8E0		  mov	  al, es:[si]
bios:F8E3		  out	  dx, al
bios:F8E4
bios:F8E4 l14:							      ;	CODE XREF: int_10_10+6Aj
bios:F8E4							      ;	int_10_10+92j
bios:F8E4		  mov	  dx, 3DAh
bios:F8E7		  xor	  al, al
bios:F8E9		  out	  dx, al			      ;	Video: bits 0-1	control
bios:F8E9							      ;	Feature	Control	outputs	FC0 and	FC1
bios:F8EA		  clc
bios:F8EB		  jmp	  int_10_exit
bios:F8EE ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F8EE
bios:F8EE error:						      ;	CODE XREF: int_10_10+4j
bios:F8EE							      ;	int_10_10+68j
bios:F8EE		  stc
bios:F8EF		  jmp	  int_10_exit
bios:F8EF int_10_10	  endp
bios:F8EF
bios:F8F2
bios:F8F2 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F8F2
bios:F8F2
bios:F8F2 sub_FF8F2	  proc near				      ;	CODE XREF: int_10_0b+16p
bios:F8F2							      ;	int_10_0b+68p
bios:F8F2							      ;	int_10_0b+6Ep
bios:F8F2							      ;	int_10_0b+74p
bios:F8F2							      ;	int_10_0b+7Dp
bios:F8F2							      ;	int_10_0b+83p ...
bios:F8F2		  mov	  dx, 3DAh
bios:F8F5		  mov	  al, bl
bios:F8F7		  cmp	  al, 10h
bios:F8F9		  jnb	  short	error
bios:F8FB		  push	  ax
bios:F8FC		  push	  dx
bios:F8FD		  mov	  dx, 3DAh
bios:F900
bios:F900 l0:							      ;	CODE XREF: sub_FF8F2+11j
bios:F900		  in	  al, dx			      ;	Video status bits:
bios:F900							      ;	0: retrace.  1=display is in vert or horiz retrace.
bios:F900							      ;	1: 1=light pen is triggered; 0=armed
bios:F900							      ;	2: 1=light pen switch is open; 0=closed
bios:F900							      ;	3: 1=vertical sync pulse is occurring.
bios:F901		  test	  al, 8
bios:F903		  jnz	  short	l0
bios:F905		  cli
bios:F906
bios:F906 l1:							      ;	CODE XREF: sub_FF8F2+17j
bios:F906		  in	  al, dx			      ;	Video status bits:
bios:F906							      ;	0: retrace.  1=display is in vert or horiz retrace.
bios:F906							      ;	1: 1=light pen is triggered; 0=armed
bios:F906							      ;	2: 1=light pen switch is open; 0=closed
bios:F906							      ;	3: 1=vertical sync pulse is occurring.
bios:F907		  test	  al, 8
bios:F909		  jz	  short	l1
bios:F90B		  pop	  dx
bios:F90C		  pop	  ax
bios:F90D		  add	  al, 10h
bios:F90F		  out	  dx, al
bios:F910		  add	  dx, 4
bios:F913		  mov	  al, bh
bios:F915		  out	  dx, al
bios:F916		  sti
bios:F917		  clc
bios:F918		  retn
bios:F919 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F919
bios:F919 error:						      ;	CODE XREF: sub_FF8F2+7j
bios:F919		  stc
bios:F91A		  retn
bios:F91A sub_FF8F2	  endp
bios:F91A
bios:F91B
bios:F91B ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F91B
bios:F91B
bios:F91B sub_FF91B	  proc near				      ;	CODE XREF: int_10_0e+3p
bios:F91B							      ;	int_10_0e+4Bp
bios:F91B							      ;	int_10_0e+87p
bios:F91B							      ;	int_10_0e+96p
bios:F91B		  mov	  bl, ds:p400.active_display_page
bios:F91F		  cmp	  byte ptr ds:p400.crt_mode, 4
bios:F924		  jl	  short	l0
bios:F926		  xor	  bl, bl
bios:F928
bios:F928 l0:							      ;	CODE XREF: sub_FF91B+9j
bios:F928		  mov	  bh, bl
bios:F92A		  retn
bios:F92A sub_FF91B	  endp
bios:F92A
bios:F92B
bios:F92B ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F92B
bios:F92B
bios:F92B sub_FF92B	  proc near				      ;	CODE XREF: int_10_01+4p
bios:F92B							      ;	sub_FF31B+17j
bios:F92B							      ;	int_10_05+27p
bios:F92B		  mov	  dx, ds:p400.addr_6845
bios:F92F		  mov	  al, bh
bios:F931		  out	  dx, al
bios:F932		  inc	  dx
bios:F933		  mov	  al, ch
bios:F935		  out	  dx, al
bios:F936		  dec	  dx
bios:F937		  mov	  al, bl
bios:F939		  out	  dx, al
bios:F93A		  inc	  dx
bios:F93B		  mov	  al, cl
bios:F93D		  out	  dx, al
bios:F93E		  retn
bios:F93E sub_FF92B	  endp
bios:F93E
bios:F93F
bios:F93F ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F93F
bios:F93F
bios:F93F sub_FF93F	  proc near				      ;	CODE XREF: int_10_0cp
bios:F93F							      ;	int_10_0dp
bios:F93F		  push	  ax
bios:F940		  mov	  ax, 0B000h
bios:F943		  mov	  es, ax
bios:F945		  pop	  ax
bios:F946		  cmp	  dx, 0C7h ; 'Ç'
bios:F94A		  ja	  short	l0
bios:F94C		  mov	  ah, ds:p400.crt_mode
bios:F950		  cmp	  ah, 4
bios:F953		  jz	  short	l2
bios:F955		  cmp	  ah, 5
bios:F958		  jz	  short	l2
bios:F95A		  cmp	  ah, 6
bios:F95D		  jz	  short	l4
bios:F95F		  cmp	  ah, 8
bios:F962		  jz	  short	l1
bios:F964		  cmp	  ah, 9
bios:F967		  jz	  short	l2
bios:F969		  cmp	  ah, 0Ah
bios:F96C		  jz	  short	l4
bios:F96E
bios:F96E l0:							      ;	CODE XREF: sub_FF93F+Bj
bios:F96E							      ;	sub_FF93F+36j
bios:F96E							      ;	sub_FF93F+3Fj
bios:F96E							      ;	sub_FF93F+4Fj
bios:F96E		  stc
bios:F96F		  jmp	  short	exit
bios:F971 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F971
bios:F971 l1:							      ;	CODE XREF: sub_FF93F+23j
bios:F971		  cmp	  cx, 9Fh ; 'Ÿ'
bios:F975		  ja	  short	l0
bios:F977		  jmp	  short	l3
bios:F977 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F979		  db  90h ; 
bios:F97A ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F97A
bios:F97A l2:							      ;	CODE XREF: sub_FF93F+14j
bios:F97A							      ;	sub_FF93F+19j
bios:F97A							      ;	sub_FF93F+28j
bios:F97A		  cmp	  cx, 13Fh
bios:F97E		  ja	  short	l0
bios:F980
bios:F980 l3:							      ;	CODE XREF: sub_FF93F+38j
bios:F980		  call	  loc_FD9CB
bios:F983		  mov	  ah, 3
bios:F985		  mov	  dx, 0FC03h
bios:F988		  jmp	  short	ok
bios:F98A ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F98A
bios:F98A l4:							      ;	CODE XREF: sub_FF93F+1Ej
bios:F98A							      ;	sub_FF93F+2Dj
bios:F98A		  cmp	  cx, 27Fh
bios:F98E		  ja	  short	l0
bios:F990		  call	  loc_FD9CB
bios:F993		  mov	  ah, 1
bios:F995		  mov	  dx, 0FE01h
bios:F998
bios:F998 ok:							      ;	CODE XREF: sub_FF93F+49j
bios:F998		  clc
bios:F999
bios:F999 exit:							      ;	CODE XREF: sub_FF93F+30j
bios:F999		  retn
bios:F999 sub_FF93F	  endp
bios:F999
bios:F99A
bios:F99A ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:F99A
bios:F99A
bios:F99A is_text_mode	  proc near				      ;	CODE XREF: sub_FF4ED:loc_FF505p
bios:F99A							      ;	int_10_08p
bios:F99A							      ;	int_10_0a+8p
bios:F99A							      ;	int_10_0e:l5p
bios:F99A		  cmp	  byte ptr ds:p400.crt_mode, 7
bios:F99F		  jz	  short	ok
bios:F9A1		  cmp	  byte ptr ds:p400.crt_mode, 4
bios:F9A6		  jl	  short	ok
bios:F9A8		  stc
bios:F9A9		  retn
bios:F9AA ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F9AA
bios:F9AA ok:							      ;	CODE XREF: is_text_mode+5j
bios:F9AA							      ;	is_text_mode+Cj
bios:F9AA		  clc
bios:F9AB		  retn
bios:F9AB is_text_mode	  endp
bios:F9AB
bios:F9AB ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:F9AC		  db 0C2h dup(0)
bios:FA6E int_44_charset_0_127 db 8 dup(0), 7Eh, 81h, 0A5h, 81h, 0BDh, 99h, 81h, 2 dup(7Eh), 0FFh, 0DBh, 0FFh, 0C3h
bios:FA6E							      ;	DATA XREF: bios:tbl_int_44o
bios:FA6E		  db 0E7h, 0FFh, 7Eh, 36h, 3 dup(7Fh), 3Eh, 1Ch, 8, 0, 8, 1Ch, 3Eh, 7Fh, 3Eh, 1Ch, 8, 0
bios:FA6E		  db 1Ch, 3Eh, 1Ch, 2 dup(7Fh),	3Eh, 1Ch, 3Eh, 2 dup(8), 1Ch, 3Eh, 7Fh,	3Eh, 1Ch, 3Eh
bios:FA6E		  db 2 dup(0), 18h, 2 dup(3Ch),	18h, 2 dup(0), 2 dup(0FFh), 0E7h, 2 dup(0C3h), 0E7h, 2 dup(0FFh)
bios:FA6E		  db 0,	3Ch, 66h, 2 dup(42h), 66h, 3Ch,	0, 0FFh, 0C3h, 99h, 2 dup(0BDh), 99h, 0C3h, 0FFh
bios:FA6E		  db 0Fh, 7, 0Fh, 7Dh, 3 dup(0CCh), 78h, 3Ch, 3	dup(66h), 3Ch, 18h, 7Eh, 18h, 30h, 3Ch
bios:FA6E		  db 33h, 2 dup(31h), 2	dup(70h), 0, 60h, 78h, 66h, 73h, 6Fh, 0E3h, 0E7h, 7, 99h, 5Ah
bios:FA6E		  db 3Ch, 2 dup(0E7h), 3Ch, 5Ah, 99h, 40h, 70h,	7Ch, 7Fh, 7Ch, 70h, 40h, 0, 1, 7, 1Fh
bios:FA6E		  db 7Fh, 1Fh, 7, 1, 0,	18h, 3Ch, 7Eh, 2 dup(18h), 7Eh,	3Ch, 18h, 5 dup(66h), 0, 66h, 0
bios:FA6E		  db 7Fh, 2 dup(0DBh), 7Bh, 3 dup(1Bh),	0, 3Fh,	60h, 3Eh, 63h, 3Eh, 3, 7Eh, 5 dup(0), 3	dup(7Eh)
bios:FA6E		  db 0,	18h, 3Ch, 7Eh, 18h, 7Eh, 3Ch, 18h, 0FFh, 18h, 3Ch, 7Eh,	4 dup(18h), 0, 4 dup(18h)
bios:FA6E		  db 7Eh, 3Ch, 18h, 2 dup(0), 0Ch, 6, 7Fh, 6, 0Ch, 3 dup(0), 18h, 30h, 7Fh, 30h, 18h, 4	dup(0)
bios:FA6E		  db 3 dup(60h), 7Fh, 3	dup(0),	24h, 66h, 0FFh,	66h, 24h, 3 dup(0), 18h, 3Ch, 7Eh, 2 dup(0FFh)
bios:FA6E		  db 3 dup(0), 2 dup(0FFh), 7Eh, 3Ch, 18h, 0Ah dup(0), 18h, 2 dup(3Ch),	2 dup(18h), 0
bios:FA6E		  db 18h, 0, 3 dup(36h), 5 dup(0), 2 dup(36h), 7Fh, 36h, 7Fh, 2	dup(36h), 0, 18h, 3Eh
bios:FA6E		  db 60h, 3Ch, 6, 7Ch, 18h, 2 dup(0), 63h, 66h,	0Ch, 18h, 33h, 63h, 0, 1Ch, 36h, 1Ch, 3Bh
bios:FA6E		  db 6Eh, 66h, 3Bh, 0, 2 dup(18h), 30h,	5 dup(0), 0Ch, 18h, 3 dup(30h),	18h, 0Ch, 0, 30h
bios:FA6E		  db 18h, 3 dup(0Ch), 18h, 30h,	2 dup(0), 66h, 3Ch, 0FFh, 3Ch, 66h, 3 dup(0), 2	dup(18h)
bios:FA6E		  db 7Eh, 2 dup(18h), 7	dup(0),	2 dup(18h), 30h, 3 dup(0), 7Eh,	9 dup(0), 2 dup(18h), 0
bios:FA6E		  db 3,	6, 0Ch,	18h, 30h, 60h, 0C0h, 0,	3Eh, 63h, 67h, 6Fh, 7Bh, 73h, 3Eh, 0, 18h, 38h
bios:FA6E		  db 4 dup(18h), 7Eh, 0, 3Ch, 66h, 6, 1Ch, 30h,	66h, 7Eh, 0, 3Ch, 66h, 6, 1Ch, 6, 66h
bios:FA6E		  db 3Ch, 0, 0Eh, 1Eh, 36h, 66h, 7Fh, 6, 0Fh, 0, 7Eh, 60h, 7Ch,	2 dup(6), 66h, 3Ch, 0
bios:FA6E		  db 1Ch, 30h, 60h, 7Ch, 2 dup(66h), 3Ch, 0, 7Eh, 66h, 6, 0Ch, 3 dup(18h), 0, 3Ch, 2 dup(66h)
bios:FA6E		  db 3Ch, 2 dup(66h), 3Ch, 0, 3Ch, 2 dup(66h), 3Eh, 6, 0Ch, 38h, 2 dup(0), 2 dup(18h)
bios:FA6E		  db 2 dup(0), 2 dup(18h), 2 dup(0), 2 dup(18h), 2 dup(0), 2 dup(18h), 30h, 6, 0Ch, 18h
bios:FA6E		  db 30h, 18h, 0Ch, 6, 3 dup(0), 7Eh, 0, 7Eh, 3	dup(0),	30h, 18h, 0Ch, 6, 0Ch, 18h, 30h
bios:FA6E		  db 0,	3Ch, 66h, 6, 0Ch, 18h, 0, 18h, 0, 3Eh, 63h, 3 dup(6Fh),	60h, 3Ch, 0, 1Ch, 36h
bios:FA6E		  db 2 dup(63h), 7Fh, 2	dup(63h), 0, 7Eh, 2 dup(33h), 3Eh, 2 dup(33h), 7Eh, 0, 1Eh, 33h
bios:FA6E		  db 3 dup(60h), 33h, 1Eh, 0, 7Ch, 36h,	3 dup(33h), 36h, 7Ch, 0, 7Fh, 31h, 34h,	3Ch, 34h
bios:FA6E		  db 31h, 7Fh, 0, 7Fh, 31h, 34h, 3Ch, 34h, 30h,	78h, 0,	1Eh, 33h, 2 dup(60h), 67h, 33h
bios:FA6E		  db 1Fh, 0, 3 dup(66h), 7Eh, 3	dup(66h), 0, 3Ch, 5 dup(18h), 3Ch, 0, 0Fh, 3 dup(6), 2 dup(66h)
bios:FA6E		  db 3Ch, 0, 73h, 33h, 36h, 3Ch, 36h, 33h, 73h,	0, 78h,	3 dup(30h), 31h, 33h, 7Fh, 0, 63h
bios:FA6E		  db 77h, 2 dup(7Fh), 6Bh, 2 dup(63h), 0, 63h, 73h, 7Bh, 6Fh, 67h, 2 dup(63h), 0, 3Eh
bios:FA6E		  db 5 dup(63h), 3Eh, 0, 7Eh, 2	dup(33h), 3Eh, 2 dup(30h), 78h,	0, 3Eh,	4 dup(63h), 6Fh
bios:FA6E		  db 3Eh, 3, 7Eh, 2 dup(33h), 3Eh, 36h,	33h, 73h, 0, 3Ch, 66h, 70h, 38h, 0Eh, 66h, 3Ch
bios:FA6E		  db 0,	7Eh, 5Ah, 4 dup(18h), 3Ch, 0, 6	dup(63h), 3Eh, 0, 5 dup(66h), 3Ch, 18h,	0, 3 dup(63h)
bios:FA6E		  db 6Bh, 7Fh, 77h, 63h, 0, 2 dup(63h),	36h, 2 dup(1Ch), 36h, 63h, 0, 3	dup(66h), 3Ch
bios:FA6E		  db 2 dup(18h), 3Ch, 0, 7Fh, 63h, 46h,	0Ch, 19h, 33h, 7Fh, 0, 3Ch, 5 dup(30h),	3Ch, 0
bios:FA6E		  db 60h, 30h, 18h, 0Ch, 6, 3, 1, 0, 3Ch, 5 dup(0Ch), 3Ch, 0, 8, 1Ch, 36h, 0Ch dup(0)
bios:FA6E		  db 0FFh, 2 dup(18h), 0Ch, 7 dup(0), 3Ch, 6, 3Eh, 66h,	3Bh, 0,	70h, 30h, 3Eh, 3 dup(33h)
bios:FA6E		  db 6Eh, 3 dup(0), 3Ch, 66h, 60h, 66h,	3Ch, 0,	0Eh, 6,	3Eh, 3 dup(66h), 3Bh, 3	dup(0)
bios:FA6E		  db 3Ch, 66h, 7Eh, 60h, 3Ch, 0, 1Ch, 36h, 30h,	78h, 2 dup(30h), 78h, 3	dup(0),	3Bh, 2 dup(66h)
bios:FA6E		  db 3Eh, 6, 7Ch, 70h, 30h, 36h, 3Bh, 2	dup(33h), 73h, 0, 18h, 0, 38h, 3 dup(18h), 3Ch
bios:FA6E		  db 0,	6, 0, 0Eh, 2 dup(6), 2 dup(66h), 3Ch, 70h, 30h,	33h, 36h, 3Ch, 36h, 73h, 0, 38h
bios:FA6E		  db 5 dup(18h), 3Ch, 3	dup(0),	0E6h, 2	dup(7Fh), 6Bh, 63h, 3 dup(0), 6Eh, 4 dup(33h)
bios:FA6E		  db 3 dup(0), 3Ch, 3 dup(66h),	3Ch, 3 dup(0), 6Eh, 2 dup(33h),	3Eh, 30h, 78h, 2 dup(0)
bios:FA6E		  db 3Bh, 2 dup(66h), 3Eh, 6, 0Fh, 2 dup(0), 6Eh, 3Bh, 33h, 30h, 78h, 3	dup(0),	3Eh, 60h
bios:FA6E		  db 3Ch, 6, 7Ch, 0, 10h, 30h, 7Ch, 2 dup(30h),	36h, 1Ch, 3 dup(0), 4 dup(66h),	3Bh, 3 dup(0)
bios:FA6E		  db 3 dup(66h), 3Ch, 18h, 3 dup(0), 63h, 6Bh, 2 dup(7Fh), 36h,	3 dup(0), 63h, 36h, 1Ch
bios:FA6E		  db 36h, 63h, 3 dup(0), 3 dup(66h), 3Eh, 6, 7Ch, 2 dup(0), 7Eh, 4Ch, 18h, 32h,	7Eh, 0
bios:FA6E		  db 0Eh, 2 dup(18h), 70h, 2 dup(18h), 0Eh, 0, 3 dup(18h), 0, 3	dup(18h), 0, 70h, 2 dup(18h)
bios:FA6E		  db 0Eh, 2 dup(18h), 70h, 0, 3Bh, 6Eh,	7 dup(0), 8, 1Ch, 36h, 2 dup(63h), 7Fh,	0
bios:FE6E		  dw 42h dup(0ADDEh)
bios:FEF2		  db 0FFh
bios:FEF3 int_08_1f_tbl	  dw offset int_08			      ;	int 0x08
bios:FEF5		  dw offset int_09			      ;	int 0x09
bios:FEF7		  dw offset int_ack_handler		      ;	int 0x0a
bios:FEF9		  dw offset int_ack_handler		      ;	int 0x0b
bios:FEFB		  dw offset int_ack_handler		      ;	int 0x0c
bios:FEFD		  dw offset int_ack_handler		      ;	int 0x0d
bios:FEFF		  dw offset int_0e			      ;	int 0x0e
bios:FF01		  dw offset int_ack_handler		      ;	int 0x0f
bios:FF03		  dw offset int_10			      ;	int 0x10
bios:FF05		  dw offset int_11			      ;	int 0x11
bios:FF07		  dw offset int_12			      ;	int 0x12
bios:FF09		  dw offset int_13			      ;	int 0x13
bios:FF0B		  dw offset int_14			      ;	int 0x14
bios:FF0D		  dw offset int_15			      ;	int 0x15
bios:FF0F		  dw offset int_16			      ;	int 0x16
bios:FF11		  dw offset int_17			      ;	int 0x17
bios:FF13		  dw offset int_18			      ;	int 0x18
bios:FF15		  dw offset int_19			      ;	int 0x19
bios:FF17		  dw offset int_1a			      ;	int 0x1a
bios:FF19		  dw offset nullsub_1			      ;	int 0x1b
bios:FF1B		  dw offset nullsub_1			      ;	int 0x1c
bios:FF1D		  dw offset int_1d			      ;	int 0x1d: video	init param
bios:FF1F		  dw offset int_1e			      ;	int 0x1e
bios:FF21		  dw offset int_1f_charset_128_255	      ;	int 0x1f: charset 128-255
bios:FF23 int_00_07_tbl	  dw offset nullsub_1			      ;	int 0
bios:FF25		  dw offset nullsub_1			      ;	int 1
bios:FF27		  dw offset nullsub_1			      ;	int 2
bios:FF29		  dw offset nullsub_1			      ;	int 3
bios:FF2B		  dw offset nullsub_1			      ;	int 4
bios:FF2D		  dw offset int_05			      ;	int 5
bios:FF2F		  dw offset nullsub_1			      ;	int 6
bios:FF31		  dw offset nullsub_1			      ;	int 7
bios:FF33 tbl_int_44	  dw offset int_44_charset_0_127	      ;	int 0x44
bios:FF35 value_0040	  dw 40h				      ;	DATA XREF: int_1a+1r
bios:FF35							      ;	int_08+5r
bios:FF37		  db 1Ch dup(0)
bios:FF53
bios:FF53 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:FF53
bios:FF53
bios:FF53 nullsub_1	  proc far				      ;	DATA XREF: bios:FF19o
bios:FF53							      ;	bios:FF1Bo
bios:FF53							      ;	bios:int_00_07_tblo
bios:FF53							      ;	bios:FF25o
bios:FF53							      ;	bios:FF27o
bios:FF53							      ;	bios:FF29o ...
bios:FF53		  iret
bios:FF53 nullsub_1	  endp
bios:FF53
bios:FF54
bios:FF54 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:FF54
bios:FF54
bios:FF54 int_05	  proc far				      ;	DATA XREF: bios:FF2Do
bios:FF54		  push	  ax
bios:FF55		  push	  bx
bios:FF56		  push	  cx
bios:FF57		  push	  dx
bios:FF58		  push	  ds
bios:FF59		  mov	  ax, 50h ; 'P'
bios:FF5C		  mov	  ds, ax
bios:FF5E		  xor	  bx, bx
bios:FF60		  cmp	  byte ptr [bx], 1
bios:FF63		  jz	  short	l3
bios:FF65		  mov	  byte ptr [bx], 1
bios:FF68		  sti
bios:FF69		  mov	  ah, 3
bios:FF6B		  int	  10h				      ;	- VIDEO	- READ CURSOR POSITION
bios:FF6B							      ;	BH = page number
bios:FF6B							      ;	Return:	DH,DL =	row,column, CH = cursor	start line, CL = cursor	end line
bios:FF6D		  push	  dx
bios:FF6E		  mov	  ah, 0Fh
bios:FF70		  int	  10h				      ;	- VIDEO	- GET CURRENT VIDEO MODE
bios:FF70							      ;	Return:	AH = number of columns on screen
bios:FF70							      ;	AL = current video mode
bios:FF70							      ;	BH = current active display page
bios:FF72		  mov	  cl, ah
bios:FF74		  call	  near ptr sub_FFFC0
bios:FF77		  xor	  dx, dx
bios:FF79
bios:FF79 l0:							      ;	CODE XREF: int_05+3Cj
bios:FF79							      ;	int_05+48j
bios:FF79		  mov	  ah, 2
bios:FF7B		  int	  10h				      ;	- VIDEO	- SET CURSOR POSITION
bios:FF7B							      ;	DH,DL =	row, column (0,0 = upper left)
bios:FF7B							      ;	BH = page number
bios:FF7D		  mov	  ah, 8
bios:FF7F		  int	  10h				      ;	- VIDEO	- READ ATTRIBUTES/CHARACTER AT CURSOR POSITION
bios:FF7F							      ;	BH = display page
bios:FF7F							      ;	Return:	AL = character
bios:FF7F							      ;	AH = attribute of character (alpha modes)
bios:FF81		  cmp	  al, 0
bios:FF83		  jnz	  short	l1
bios:FF85		  mov	  al, 20h ; ' '
bios:FF87
bios:FF87 l1:							      ;	CODE XREF: int_05+2Fj
bios:FF87		  call	  sub_FFFAD
bios:FF8A		  jnz	  short	loc_FFFA0
bios:FF8C		  inc	  dl
bios:FF8E		  cmp	  dl, cl
bios:FF90		  jnz	  short	l0
bios:FF92		  call	  near ptr sub_FFFC0
bios:FF95		  xor	  dl, dl
bios:FF97		  inc	  dh
bios:FF99		  cmp	  dh, 19h
bios:FF9C		  jnz	  short	l0
bios:FF9E		  mov	  cl, 0
bios:FFA0
bios:FFA0 loc_FFFA0:						      ;	CODE XREF: int_05+36j
bios:FFA0							      ;	sub_FFFC0+10j
bios:FFA0		  pop	  dx
bios:FFA1		  mov	  ah, 2
bios:FFA3		  int	  10h				      ;	- VIDEO	- SET CURSOR POSITION
bios:FFA3							      ;	DH,DL =	row, column (0,0 = upper left)
bios:FFA3							      ;	BH = page number
bios:FFA5		  mov	  [bx],	cl
bios:FFA7
bios:FFA7 l3:							      ;	CODE XREF: int_05+Fj
bios:FFA7		  pop	  ds
bios:FFA8		  pop	  dx
bios:FFA9		  pop	  cx
bios:FFAA		  pop	  bx
bios:FFAB		  pop	  ax
bios:FFAC		  iret
bios:FFAC int_05	  endp ; sp =  4
bios:FFAC
bios:FFAD
bios:FFAD ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:FFAD
bios:FFAD
bios:FFAD sub_FFFAD	  proc near				      ;	CODE XREF: int_05:l1p
bios:FFAD							      ;	sub_FFFC0+2p
bios:FFAD							      ;	sub_FFFC0+9p
bios:FFAD		  push	  dx
bios:FFAE		  xor	  ah, ah
bios:FFB0		  xor	  dx, dx
bios:FFB2		  int	  17h				      ;	PRINTER	- OUTPUT CHARACTER
bios:FFB2							      ;	AL = character,	DX = printer port (0-3)
bios:FFB2							      ;	Return:	AH = status bits
bios:FFB4		  and	  ah, 9
bios:FFB7		  cmp	  ah, 0
bios:FFBA		  jz	  short	l0
bios:FFBC		  mov	  cl, 0FFh
bios:FFBE
bios:FFBE l0:							      ;	CODE XREF: sub_FFFAD+Dj
bios:FFBE		  pop	  dx
bios:FFBF		  retn
bios:FFBF sub_FFFAD	  endp
bios:FFBF
bios:FFC0
bios:FFC0 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S U	B R O U	T I N E	ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
bios:FFC0
bios:FFC0
bios:FFC0 sub_FFFC0	  proc far				      ;	CODE XREF: int_05+20p
bios:FFC0							      ;	int_05+3Ep
bios:FFC0		  mov	  al, 0Dh
bios:FFC2		  call	  sub_FFFAD
bios:FFC5		  jnz	  short	l0
bios:FFC7		  mov	  al, 0Ah
bios:FFC9		  call	  sub_FFFAD
bios:FFCC		  jnz	  short	l0
bios:FFCE		  retn
bios:FFCF ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:FFCF
bios:FFCF l0:							      ;	CODE XREF: sub_FFFC0+5j
bios:FFCF							      ;	sub_FFFC0+Cj
bios:FFCF		  pop	  dx
bios:FFD0		  jmp	  short	loc_FFFA0
bios:FFD0 sub_FFFC0	  endp
bios:FFD0
bios:FFD0 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:FFD2		  db 1Eh dup(0)
bios:FFF0 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:FFF0
bios:FFF0 reset_entry:						      ;	CODE XREF: int_09+3F3j
bios:FFF0		  jmp	  far ptr reset
bios:FFF0 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
bios:FFF5 a100384	  db '10/03/84'
bios:FFFD		  db 0FFh
bios:FFFE		  db 0FFh
bios:FFFF		  db 0FFh
bios:FFFF bios		  ends
bios:FFFF
bios:FFFF
bios:FFFF		  end
