seg000:E000 ;
seg000:E000 ; ÉÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ»
seg000:E000 ; º	    This file is generated by The Interactive Disassembler (IDA)	º
seg000:E000 ; º	    Copyright (c) 2010 by Hex-Rays SA, <support@hex-rays.com>		º
seg000:E000 ; º			     Licensed to: Freeware version			º
seg000:E000 ; ÈÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ¼
seg000:E000 ;
seg000:E000 ; Input MD5	  : F453EB2DF6DAF21EC644D33663D85434
seg000:E000
seg000:E000 ; File Name	  : H:\progs\bios-8088\ibm_5150\BIOS_5150_27OCT82_U33.BIN
seg000:E000 ; Format	  : Binary file
seg000:E000 ; Base Address: F000h Range: FE000h	- 100000h Loaded length: 2000h
seg000:E000
seg000:E000		    .8086
seg000:E000		    .model flat
seg000:E000
seg000:E000 ; ÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍ
seg000:E000
seg000:E000 ; Segment type: Pure code
seg000:E000 seg000	    segment byte public	'CODE'
seg000:E000 a1501476Copr_Ib db '1501476 COPR. IBM 1982'
seg000:E016		    dw offset c11	    ; return address
seg000:E018
seg000:E018 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:E018
seg000:E018
seg000:E018 stgtst	    proc near		    ; CODE XREF: seg000:E15Fj
seg000:E018					    ; seg000:E404p
seg000:E018		    mov	    cx,	4000h
seg000:E01B
seg000:E01B stgtst_cnt:				    ; CODE XREF: seg000:E319p
seg000:E01B		    cld
seg000:E01C		    mov	    bx,	cx
seg000:E01E		    mov	    ax,	0AAAAh
seg000:E021		    mov	    dx,	0FF55h
seg000:E024		    sub	    di,	di
seg000:E026		    rep	stosb
seg000:E028
seg000:E028 c3:					    ; CODE XREF: stgtst+2Ej
seg000:E028					    ; stgtst+38j
seg000:E028		    dec	    di
seg000:E029		    std
seg000:E02A
seg000:E02A c4:					    ; CODE XREF: stgtst+32j
seg000:E02A		    mov	    si,	di
seg000:E02C		    mov	    cx,	bx
seg000:E02E
seg000:E02E c5:					    ; CODE XREF: stgtst+1Ej
seg000:E02E		    lodsb
seg000:E02F		    xor	    al,	ah
seg000:E031		    jnz	    short c7
seg000:E033		    mov	    al,	dl
seg000:E035		    stosb
seg000:E036		    loop    c5
seg000:E038		    and	    ah,	ah
seg000:E03A		    jz	    short c6x
seg000:E03C		    mov	    ah,	al
seg000:E03E		    xchg    dh,	dl
seg000:E040		    and	    ah,	ah
seg000:E042		    jnz	    short c6
seg000:E044		    mov	    dl,	ah
seg000:E046		    jmp	    short c3
seg000:E048 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E048
seg000:E048 c6:					    ; CODE XREF: stgtst+2Aj
seg000:E048		    cld
seg000:E049		    inc	    di
seg000:E04A		    jz	    short c4
seg000:E04C		    dec	    di
seg000:E04D		    mov	    dx,	1
seg000:E050		    jmp	    short c3
seg000:E052 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E052
seg000:E052 c6x:				    ; CODE XREF: stgtst+22j
seg000:E052		    in	    al,	62h	    ; PC/XT PPI	port C.	Bits:
seg000:E052					    ; 0-3: values of DIP switches
seg000:E052					    ; 5: 1=Timer 2 channel out
seg000:E052					    ; 6: 1=I/O channel check
seg000:E052					    ; 7: 1=RAM parity check error occurred.
seg000:E054		    and	    al,	0C0h
seg000:E056		    mov	    al,	0
seg000:E058
seg000:E058 c7:					    ; CODE XREF: stgtst+19j
seg000:E058		    cld
seg000:E059		    retn
seg000:E059 stgtst	    endp
seg000:E059
seg000:E059 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E05A		    db 0FFh
seg000:E05B ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E05B
seg000:E05B reset:				    ; CODE XREF: seg000:E4FFj
seg000:E05B					    ; seg000:EA82J
seg000:E05B					    ; seg000:FFF0J
seg000:E05B		    cli
seg000:E05C		    mov	    ah,	0D5h ; 'Õ'
seg000:E05E		    sahf
seg000:E05F		    jnb	    short err01
seg000:E061		    jnz	    short err01
seg000:E063		    jnp	    short err01
seg000:E065		    jns	    short err01
seg000:E067		    lahf
seg000:E068		    mov	    cl,	5
seg000:E06A		    shr	    ah,	cl
seg000:E06C		    jnb	    short err01
seg000:E06E		    mov	    al,	40h ; '@'
seg000:E070		    shl	    al,	1
seg000:E072		    jno	    short err01
seg000:E074		    xor	    ah,	ah
seg000:E076		    sahf
seg000:E077		    jbe	    short err01
seg000:E079		    js	    short err01
seg000:E07B		    jp	    short err01
seg000:E07D		    lahf
seg000:E07E		    mov	    cl,	5
seg000:E080		    shr	    ah,	cl
seg000:E082		    jb	    short err01
seg000:E084		    shl	    ah,	1
seg000:E086		    jo	    short err01
seg000:E088		    mov	    ax,	0FFFFh
seg000:E08B		    stc
seg000:E08C
seg000:E08C c8:					    ; CODE XREF: seg000:E0A7j
seg000:E08C		    mov	    ds,	ax
seg000:E08E		    mov	    bx,	ds
seg000:E090		    mov	    es,	bx
seg000:E092		    mov	    cx,	es
seg000:E094		    mov	    ss,	cx
seg000:E096		    mov	    dx,	ss
seg000:E098		    mov	    sp,	dx
seg000:E09A		    mov	    bp,	sp
seg000:E09C		    mov	    si,	bp
seg000:E09E		    mov	    di,	si
seg000:E0A0		    jnb	    short c9
seg000:E0A2		    xor	    ax,	di
seg000:E0A4		    jnz	    short err01
seg000:E0A6		    clc
seg000:E0A7		    jmp	    short c8
seg000:E0A9 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E0A9
seg000:E0A9 c9:					    ; CODE XREF: seg000:E0A0j
seg000:E0A9		    or	    ax,	di
seg000:E0AB		    jz	    short c10
seg000:E0AD
seg000:E0AD err01:				    ; CODE XREF: seg000:E05Fj
seg000:E0AD					    ; seg000:E061j
seg000:E0AD					    ; seg000:E063j
seg000:E0AD					    ; seg000:E065j ...
seg000:E0AD		    hlt
seg000:E0AE
seg000:E0AE c10:				    ; CODE XREF: seg000:E0ABj
seg000:E0AE		    out	    0A0h, al	    ; PIC 2  same as 0020 for PIC 1
seg000:E0B0		    out	    83h, al	    ; DMA page register	74LS612:
seg000:E0B0					    ; Channel 1	(address bits 16-23)
seg000:E0B2		    mov	    dx,	3D8h
seg000:E0B5		    out	    dx,	al
seg000:E0B6		    inc	    al
seg000:E0B8		    mov	    dl,	0B8h ; '¸'
seg000:E0BA		    out	    dx,	al
seg000:E0BB		    mov	    al,	99h ; '™'
seg000:E0BD		    out	    63h, al	    ; PC/XT PPI	Command/Mode Register.
seg000:E0BD					    ; Selects which PPI	ports are input	or output.
seg000:E0BD					    ; BIOS sets	to 99H (Ports A	and C are input, B is output).
seg000:E0BF		    mov	    al,	0FCh ; 'ü'
seg000:E0C1		    out	    61h, al	    ; PC/XT PPI	port B bits:
seg000:E0C1					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:E0C1					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:E0C1					    ; 3: 1=read	high switches
seg000:E0C1					    ; 4: 0=enable RAM parity checking
seg000:E0C1					    ; 5: 0=enable I/O channel check
seg000:E0C1					    ; 6: 0=hold	keyboard clock low
seg000:E0C1					    ; 7: 0=enable kbrd
seg000:E0C3		    mov	    ax,	cs
seg000:E0C5		    mov	    ss,	ax
seg000:E0C7		    mov	    ds,	ax
seg000:E0C9		    mov	    bh,	0E0h ; 'à'
seg000:E0CB		    mov	    sp,	0E016h
seg000:E0CE		    jmp	    sub_FEC4C
seg000:E0D1 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E0D1
seg000:E0D1 c11:				    ; DATA XREF: seg000:E016o
seg000:E0D1		    jnz	    short err01
seg000:E0D3		    mov	    al,	4
seg000:E0D5		    out	    8, al	    ; DMA 8237A-5. cmd reg bits:
seg000:E0D5					    ; 0: enable	mem-to-mem DMA
seg000:E0D5					    ; 1: enable	Ch0 address hold
seg000:E0D5					    ; 2: disable controller
seg000:E0D5					    ; 3: compressed timing mode
seg000:E0D5					    ; 4: enable	rotating priority
seg000:E0D5					    ; 5: extended write	mode; 0=late write
seg000:E0D5					    ; 6: DRQ sensing - active high
seg000:E0D5					    ; 7: DACK sensing -	active high
seg000:E0D7		    mov	    al,	54h ; 'T'
seg000:E0D9		    out	    43h, al	    ; Timer 8253-5 (AT:	8254.2).
seg000:E0DB		    mov	    al,	cl
seg000:E0DD		    out	    41h, al	    ; Timer 8253-5 (AT:	8254.2).
seg000:E0DF
seg000:E0DF c12:				    ; CODE XREF: seg000:E0ECj
seg000:E0DF		    mov	    al,	40h ; '@'
seg000:E0E1		    out	    43h, al	    ; Timer 8253-5 (AT:	8254.2).
seg000:E0E3		    cmp	    bl,	0FFh
seg000:E0E6		    jz	    short c13
seg000:E0E8		    in	    al,	41h	    ; Timer 8253-5 (AT:	8254.2).
seg000:E0EA		    or	    bl,	al
seg000:E0EC		    loop    c12
seg000:E0EE		    hlt
seg000:E0EF
seg000:E0EF c13:				    ; CODE XREF: seg000:E0E6j
seg000:E0EF		    mov	    al,	bl
seg000:E0F1		    sub	    cx,	cx
seg000:E0F3		    out	    41h, al	    ; Timer 8253-5 (AT:	8254.2).
seg000:E0F5
seg000:E0F5 c14:				    ; CODE XREF: seg000:E101j
seg000:E0F5		    mov	    al,	40h ; '@'
seg000:E0F7		    out	    43h, al	    ; Timer 8253-5 (AT:	8254.2).
seg000:E0F9		    nop
seg000:E0FA		    nop
seg000:E0FB		    in	    al,	41h	    ; Timer 8253-5 (AT:	8254.2).
seg000:E0FD		    and	    bl,	al
seg000:E0FF		    jz	    short c15
seg000:E101		    loop    c14
seg000:E103		    hlt
seg000:E104
seg000:E104 c15:				    ; CODE XREF: seg000:E0FFj
seg000:E104		    mov	    al,	18
seg000:E106		    out	    41h, al	    ; Timer 8253-5 (AT:	8254.2).
seg000:E108		    out	    0Dh, al	    ; DMA controller, 8237A-5.
seg000:E108					    ; master clear.
seg000:E108					    ; Any OUT clears the ctrlr (must be	re-initialized)
seg000:E10A		    mov	    al,	0FFh
seg000:E10C
seg000:E10C c16:				    ; CODE XREF: seg000:E129j
seg000:E10C		    mov	    bl,	al
seg000:E10E		    mov	    bh,	al
seg000:E110		    mov	    cx,	8
seg000:E113		    sub	    dx,	dx
seg000:E115
seg000:E115 c17:				    ; CODE XREF: seg000:E125j
seg000:E115		    out	    dx,	al
seg000:E116		    push    ax
seg000:E117		    out	    dx,	al
seg000:E118		    mov	    ax,	101h
seg000:E11B		    in	    al,	dx
seg000:E11C		    mov	    ah,	al
seg000:E11E		    in	    al,	dx
seg000:E11F		    cmp	    bx,	ax
seg000:E121		    jz	    short c18
seg000:E123		    hlt
seg000:E124
seg000:E124 c18:				    ; CODE XREF: seg000:E121j
seg000:E124		    inc	    dx
seg000:E125		    loop    c17
seg000:E127		    inc	    al
seg000:E129		    jz	    short c16
seg000:E12B		    mov	    ds,	bx
seg000:E12D		    mov	    es,	bx
seg000:E12F		    mov	    al,	0FFh
seg000:E131		    out	    1, al	    ; DMA controller, 8237A-5.
seg000:E131					    ; channel 0	base address and word count
seg000:E133		    push    ax
seg000:E134		    out	    1, al	    ; DMA controller, 8237A-5.
seg000:E134					    ; channel 0	base address and word count
seg000:E136		    mov	    dl,	0Bh
seg000:E138		    mov	    al,	58h ; 'X'
seg000:E13A		    out	    dx,	al	    ; DMA 8237A-5. mode	register bits:
seg000:E13A					    ; 0-1: channel (00=0; 01=1;	10=2; 11=3)
seg000:E13A					    ; 2-3: transfer type (00=verify=Nop; 01=write; 10=read)
seg000:E13A					    ; 4: 1=enable auto-initialization
seg000:E13A					    ; 5: 1=address increment; 0=address	decrement
seg000:E13A					    ; 6-7: 00=demand mode; 01=single; 10=block;	11=cascade
seg000:E13B		    mov	    al,	0
seg000:E13D		    out	    8, al	    ; DMA 8237A-5. cmd reg bits:
seg000:E13D					    ; 0: enable	mem-to-mem DMA
seg000:E13D					    ; 1: enable	Ch0 address hold
seg000:E13D					    ; 2: disable controller
seg000:E13D					    ; 3: compressed timing mode
seg000:E13D					    ; 4: enable	rotating priority
seg000:E13D					    ; 5: extended write	mode; 0=late write
seg000:E13D					    ; 6: DRQ sensing - active high
seg000:E13D					    ; 7: DACK sensing -	active high
seg000:E13F		    push    ax
seg000:E140		    out	    0Ah, al	    ; DMA controller, 8237A-5.
seg000:E140					    ; single mask bit register
seg000:E140					    ; 0-1: select channel (00=0; 01=1; 10=2; 11=3)
seg000:E140					    ; 2: 1=set mask for	channel; 0=clear mask (enable)
seg000:E142		    mov	    cl,	3
seg000:E144		    mov	    al,	41h ; 'A'
seg000:E146
seg000:E146 c18a:				    ; CODE XREF: seg000:E149j
seg000:E146		    out	    dx,	al	    ; DMA 8237A-5. mode	register bits:
seg000:E146					    ; 0-1: channel (00=0; 01=1;	10=2; 11=3)
seg000:E146					    ; 2-3: transfer type (00=verify=Nop; 01=write; 10=read)
seg000:E146					    ; 4: 1=enable auto-initialization
seg000:E146					    ; 5: 1=address increment; 0=address	decrement
seg000:E146					    ; 6-7: 00=demand mode; 01=single; 10=block;	11=cascade
seg000:E147		    inc	    al
seg000:E149		    loop    c18a
seg000:E14B		    mov	    dx,	213h
seg000:E14E		    mov	    al,	1
seg000:E150		    out	    dx,	al	    ; XT Expansion chassis enable
seg000:E151		    mov	    bp,	ds:472h
seg000:E155		    cmp	    bp,	1234h
seg000:E159		    jz	    short c18b
seg000:E15B		    mov	    sp,	0F041h
seg000:E15E		    nop
seg000:E15F		    jmp	    stgtst
seg000:E162 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E162
seg000:E162 c24:				    ; DATA XREF: seg000:F041o
seg000:E162		    jz	    short c18b
seg000:E164		    hlt
seg000:E165
seg000:E165 c18b:				    ; CODE XREF: seg000:E159j
seg000:E165					    ; seg000:c24j
seg000:E165		    sub	    di,	di
seg000:E167		    in	    al,	60h	    ; AT Keyboard controller 8042.
seg000:E169		    and	    al,	0Ch
seg000:E16B		    add	    al,	4
seg000:E16D		    mov	    cl,	0Ch
seg000:E16F		    shl	    ax,	cl
seg000:E171		    mov	    cx,	ax
seg000:E173		    cld
seg000:E174
seg000:E174 c19:				    ; CODE XREF: seg000:E175j
seg000:E174		    stosb
seg000:E175		    loop    c19
seg000:E177		    mov	    ds:472h, bp
seg000:E17B		    mov	    al,	0F8h ; 'ø'
seg000:E17D		    out	    61h, al	    ; PC/XT PPI	port B bits:
seg000:E17D					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:E17D					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:E17D					    ; 3: 1=read	high switches
seg000:E17D					    ; 4: 0=enable RAM parity checking
seg000:E17D					    ; 5: 0=enable I/O channel check
seg000:E17D					    ; 6: 0=hold	keyboard clock low
seg000:E17D					    ; 7: 0=enable kbrd
seg000:E17F		    in	    al,	62h	    ; PC/XT PPI	port C.	Bits:
seg000:E17F					    ; 0-3: values of DIP switches
seg000:E17F					    ; 5: 1=Timer 2 channel out
seg000:E17F					    ; 6: 1=I/O channel check
seg000:E17F					    ; 7: 1=RAM parity check error occurred.
seg000:E181		    and	    al,	1
seg000:E183		    mov	    cl,	0Ch
seg000:E185		    rol	    ax,	cl
seg000:E187		    mov	    al,	0FCh ; 'ü'
seg000:E189		    out	    61h, al	    ; PC/XT PPI	port B bits:
seg000:E189					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:E189					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:E189					    ; 3: 1=read	high switches
seg000:E189					    ; 4: 0=enable RAM parity checking
seg000:E189					    ; 5: 0=enable I/O channel check
seg000:E189					    ; 6: 0=hold	keyboard clock low
seg000:E189					    ; 7: 0=enable kbrd
seg000:E18B		    in	    al,	62h	    ; PC/XT PPI	port C.	Bits:
seg000:E18B					    ; 0-3: values of DIP switches
seg000:E18B					    ; 5: 1=Timer 2 channel out
seg000:E18B					    ; 6: 1=I/O channel check
seg000:E18B					    ; 7: 1=RAM parity check error occurred.
seg000:E18D		    and	    al,	0Fh
seg000:E18F		    or	    al,	ah
seg000:E191		    mov	    bl,	al
seg000:E193		    mov	    ah,	20h ; ' '
seg000:E195		    mul	    ah
seg000:E197		    mov	    ds:415h, ax
seg000:E19A		    jz	    short c21
seg000:E19C		    mov	    dx,	1000h
seg000:E19F		    mov	    ah,	al
seg000:E1A1		    mov	    al,	0
seg000:E1A3
seg000:E1A3 c20:				    ; CODE XREF: seg000:E1B2j
seg000:E1A3		    mov	    es,	dx
seg000:E1A5		    mov	    cx,	8000h
seg000:E1A8		    sub	    di,	di
seg000:E1AA		    rep	stosb
seg000:E1AC		    add	    dx,	800h
seg000:E1B0		    dec	    bl
seg000:E1B2		    jnz	    short c20
seg000:E1B4
seg000:E1B4 c21:				    ; CODE XREF: seg000:E19Aj
seg000:E1B4		    mov	    al,	13h
seg000:E1B6		    out	    20h, al	    ; Interrupt	controller, 8259A.
seg000:E1B8		    mov	    al,	8
seg000:E1BA		    out	    21h, al	    ; Interrupt	controller, 8259A.
seg000:E1BC		    mov	    al,	9
seg000:E1BE		    out	    21h, al	    ; Interrupt	controller, 8259A.
seg000:E1C0		    sub	    ax,	ax
seg000:E1C2		    mov	    es,	ax	    ; es = 0x00
seg000:E1C4		    mov	    ax,	30h ; '0'
seg000:E1C7		    mov	    ss,	ax	    ; stack seg	0x30
seg000:E1C9		    mov	    sp,	100h
seg000:E1CC		    cmp	    bp,	1234h
seg000:E1D0		    jz	    short c25
seg000:E1D2		    sub	    di,	di
seg000:E1D4		    mov	    ds,	di	    ; ds = 0x00
seg000:E1D6		    mov	    bx,	24h ; '$'   ; int 9 offset
seg000:E1D9		    mov	    word ptr [bx], offset d11
seg000:E1DD		    inc	    bx
seg000:E1DE		    inc	    bx
seg000:E1DF		    mov	    word ptr [bx], cs ;	int 9 segment
seg000:E1E1		    call    sub_FE643
seg000:E1E4		    cmp	    bl,	65h ; 'e'
seg000:E1E7		    jnz	    short c25
seg000:E1E9		    mov	    dl,	0FFh
seg000:E1EB
seg000:E1EB c22:				    ; CODE XREF: seg000:E1F3j
seg000:E1EB		    call    sub_FE650
seg000:E1EE		    mov	    al,	bl
seg000:E1F0		    stosb
seg000:E1F1		    dec	    dl
seg000:E1F3		    jnz	    short c22
seg000:E1F5		    int	    3Eh		    ; set interrupt type 62 address 0xf8
seg000:E1F7
seg000:E1F7 c25:				    ; CODE XREF: seg000:E1D0j
seg000:E1F7					    ; seg000:E1E7j
seg000:E1F7		    mov	    cx,	20h ; ' '
seg000:E1FA		    sub	    di,	di
seg000:E1FC
seg000:E1FC d3:					    ; CODE XREF: seg000:E203j
seg000:E1FC		    mov	    ax,	offset d11
seg000:E1FF		    stosw
seg000:E200		    mov	    ax,	cs
seg000:E202		    stosw
seg000:E203		    loop    d3
seg000:E205		    mov	    word ptr ds:8, offset nmi_int ; nmi	interrupt (int 0x02)
seg000:E20B		    mov	    word ptr ds:14h, offset print_screen ; print screen	(int 0x05)
seg000:E211		    mov	    word ptr ds:62h, 0F600h ; segment for casette basic	(int 0x18)
seg000:E217		    mov	    dx,	21h ; '!'
seg000:E21A		    mov	    al,	0
seg000:E21C		    out	    dx,	al	    ; Interrupt	controller, 8259A.
seg000:E21D		    in	    al,	dx	    ; Interrupt	controller, 8259A.
seg000:E21E		    or	    al,	al
seg000:E220		    jnz	    short d6
seg000:E222		    mov	    al,	0FFh
seg000:E224		    out	    dx,	al	    ; Interrupt	controller, 8259A.
seg000:E225		    in	    al,	dx	    ; Interrupt	controller, 8259A.
seg000:E226		    add	    al,	1
seg000:E228		    jnz	    short d6
seg000:E22A		    xor	    ah,	ah
seg000:E22C		    sti
seg000:E22D		    sub	    cx,	cx
seg000:E22F
seg000:E22F d4:					    ; CODE XREF: seg000:d4j
seg000:E22F		    loop    d4
seg000:E231
seg000:E231 d5:					    ; CODE XREF: seg000:d5j
seg000:E231		    loop    d5
seg000:E233		    or	    ah,	ah
seg000:E235		    jz	    short d7
seg000:E237
seg000:E237 d6:					    ; CODE XREF: seg000:E220j
seg000:E237					    ; seg000:E228j
seg000:E237					    ; seg000:E254j
seg000:E237					    ; seg000:E263j
seg000:E237		    mov	    dx,	101h
seg000:E23A		    call    sub_FE5CF
seg000:E23D		    cli
seg000:E23E		    hlt
seg000:E23F
seg000:E23F d7:					    ; CODE XREF: seg000:E235j
seg000:E23F		    mov	    al,	0FEh ; 'ş'
seg000:E241		    out	    dx,	al
seg000:E242		    mov	    al,	10h
seg000:E244		    out	    43h, al	    ; Timer 8253-5 (AT:	8254.2).
seg000:E246		    mov	    cx,	16h
seg000:E249		    mov	    al,	cl
seg000:E24B		    out	    40h, al	    ; Timer 8253-5 (AT:	8254.2).
seg000:E24D
seg000:E24D d8:					    ; CODE XREF: seg000:E252j
seg000:E24D		    test    ah,	0FFh
seg000:E250		    jnz	    short d9
seg000:E252		    loop    d8
seg000:E254		    jmp	    short d6
seg000:E256 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E256
seg000:E256 d9:					    ; CODE XREF: seg000:E250j
seg000:E256		    mov	    cl,	12h
seg000:E258		    mov	    al,	0FFh
seg000:E25A		    out	    40h, al	    ; Timer 8253-5 (AT:	8254.2).
seg000:E25C		    mov	    ax,	0FEh ; 'ş'
seg000:E25F		    out	    dx,	al
seg000:E260
seg000:E260 d10:				    ; CODE XREF: seg000:E265j
seg000:E260		    test    ah,	0FFh
seg000:E263		    jnz	    short d6
seg000:E265		    loop    d10
seg000:E267		    push    ds
seg000:E268		    mov	    di,	40h ; '@'   ; start pointing at int 0x10
seg000:E26B		    push    cs
seg000:E26C		    pop	    ds		    ; ds = cs
seg000:E26D		    mov	    si,	offset off_FFF03
seg000:E270		    nop
seg000:E271		    mov	    cx,	10h
seg000:E274		    mov	    al,	0FFh
seg000:E276		    out	    dx,	al
seg000:E277		    mov	    al,	36h ; '6'
seg000:E279		    out	    43h, al	    ; Timer 8253-5 (AT:	8254.2).
seg000:E27B		    mov	    al,	0
seg000:E27D		    out	    40h, al	    ; Timer 8253-5 (AT:	8254.2).
seg000:E27F
seg000:E27F e1a:				    ; CODE XREF: seg000:E282j
seg000:E27F		    movsw		    ; populate int table
seg000:E280		    inc	    di
seg000:E281		    inc	    di
seg000:E282		    loop    e1a
seg000:E284		    out	    40h, al	    ; Timer 8253-5 (AT:	8254.2).
seg000:E286		    pop	    ds		    ; ds = 0
seg000:E287		    call    sub_FE643
seg000:E28A		    cmp	    bl,	0AAh ; 'ª'
seg000:E28D		    jz	    short e6
seg000:E28F		    mov	    al,	3Ch ; '<'
seg000:E291		    out	    61h, al	    ; PC/XT PPI	port B bits:
seg000:E291					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:E291					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:E291					    ; 3: 1=read	high switches
seg000:E291					    ; 4: 0=enable RAM parity checking
seg000:E291					    ; 5: 0=enable I/O channel check
seg000:E291					    ; 6: 0=hold	keyboard clock low
seg000:E291					    ; 7: 0=enable kbrd
seg000:E293		    nop
seg000:E294		    nop
seg000:E295		    in	    al,	60h	    ; AT Keyboard controller 8042.
seg000:E297		    and	    al,	0FFh
seg000:E299		    jnz	    short e2
seg000:E29B		    inc	    byte ptr ds:412h
seg000:E29F		    mov	    word ptr ds:20h, offset blink_int ;	setup timer to blink led
seg000:E2A5		    mov	    al,	0FEh ; 'ş'
seg000:E2A7		    out	    21h, al	    ; Interrupt	controller, 8259A.
seg000:E2A9
seg000:E2A9 e2:					    ; CODE XREF: seg000:E299j
seg000:E2A9		    mov	    al,	0CCh ; 'Ì'
seg000:E2AB		    out	    61h, al	    ; PC/XT PPI	port B bits:
seg000:E2AB					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:E2AB					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:E2AB					    ; 3: 1=read	high switches
seg000:E2AB					    ; 4: 0=enable RAM parity checking
seg000:E2AB					    ; 5: 0=enable I/O channel check
seg000:E2AB					    ; 6: 0=hold	keyboard clock low
seg000:E2AB					    ; 7: 0=enable kbrd
seg000:E2AD
seg000:E2AD e6:					    ; CODE XREF: seg000:E28Dj
seg000:E2AD		    in	    al,	60h	    ; AT Keyboard controller 8042.
seg000:E2AF		    mov	    ah,	0
seg000:E2B1		    mov	    ds:410h, ax
seg000:E2B4		    and	    al,	30h
seg000:E2B6		    jnz	    short e7
seg000:E2B8		    mov	    word ptr ds:40h, offset dummy_return ; video int
seg000:E2BE		    jmp	    e18_1	    ; skip tests for burn-in
seg000:E2BE ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E2C1		    db 0FFh
seg000:E2C2		    db 0FFh
seg000:E2C3
seg000:E2C3 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:E2C3
seg000:E2C3
seg000:E2C3 nmi_int	    proc far		    ; DATA XREF: seg000:E205o
seg000:E2C3		    push    ax
seg000:E2C4		    in	    al,	62h	    ; PC/XT PPI	port C.	Bits:
seg000:E2C4					    ; 0-3: values of DIP switches
seg000:E2C4					    ; 5: 1=Timer 2 channel out
seg000:E2C4					    ; 6: 1=I/O channel check
seg000:E2C4					    ; 7: 1=RAM parity check error occurred.
seg000:E2C6		    test    al,	0C0h
seg000:E2C8		    jz	    short d14
seg000:E2CA		    mov	    si,	0FFDAh
seg000:E2CD		    nop
seg000:E2CE		    test    al,	40h
seg000:E2D0		    jnz	    short d13
seg000:E2D2		    mov	    si,	offset d2   ; "PARITY CHECK 1\r\n"
seg000:E2D5		    nop
seg000:E2D6
seg000:E2D6 d13:				    ; CODE XREF: nmi_int+Dj
seg000:E2D6		    sub	    ax,	ax
seg000:E2D8		    int	    10h		    ; -	VIDEO -	SET VIDEO MODE
seg000:E2D8					    ; AL = mode
seg000:E2DA		    call    write_string
seg000:E2DD		    cli
seg000:E2DE		    hlt
seg000:E2DF
seg000:E2DF d14:				    ; CODE XREF: nmi_int+5j
seg000:E2DF		    pop	    ax
seg000:E2E0		    iret
seg000:E2E0 nmi_int	    endp
seg000:E2E0
seg000:E2E1 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E2E1
seg000:E2E1 e7:					    ; CODE XREF: seg000:E2B6j
seg000:E2E1		    cmp	    al,	30h ; '0'
seg000:E2E3		    jz	    short loc_FE2ED
seg000:E2E5		    inc	    ah
seg000:E2E7		    cmp	    al,	20h ; ' '
seg000:E2E9		    jnz	    short loc_FE2ED
seg000:E2EB		    mov	    ah,	3
seg000:E2ED
seg000:E2ED loc_FE2ED:				    ; CODE XREF: seg000:E2E3j
seg000:E2ED					    ; seg000:E2E9j
seg000:E2ED		    xchg    ah,	al
seg000:E2EF		    push    ax
seg000:E2F0		    sub	    ah,	ah
seg000:E2F2		    int	    10h		    ; -	VIDEO -	SET VIDEO MODE
seg000:E2F2					    ; AL = mode
seg000:E2F4		    pop	    ax
seg000:E2F5		    push    ax
seg000:E2F6		    mov	    bx,	0B000h
seg000:E2F9		    mov	    dx,	3B8h
seg000:E2FC		    mov	    cx,	1000h
seg000:E2FF		    mov	    al,	1
seg000:E301		    cmp	    ah,	30h ; '0'
seg000:E304		    jz	    short loc_FE30E
seg000:E306		    mov	    bh,	0B8h ; '¸'
seg000:E308		    mov	    dl,	0D8h ; 'Ø'
seg000:E30A		    mov	    ch,	40h ; '@'
seg000:E30C		    dec	    al
seg000:E30E
seg000:E30E loc_FE30E:				    ; CODE XREF: seg000:E304j
seg000:E30E		    out	    dx,	al
seg000:E30F		    cmp	    bp,	1234h
seg000:E313		    mov	    es,	bx
seg000:E315		    jz	    short loc_FE31E
seg000:E317		    mov	    ds,	bx
seg000:E319		    call    stgtst_cnt
seg000:E31C		    jnz	    short loc_FE350
seg000:E31E
seg000:E31E loc_FE31E:				    ; CODE XREF: seg000:E315j
seg000:E31E		    pop	    ax
seg000:E31F		    push    ax
seg000:E320		    mov	    ah,	0
seg000:E322		    int	    10h		    ; -	VIDEO -	SET VIDEO MODE
seg000:E322					    ; AL = mode
seg000:E324		    mov	    ax,	7020h
seg000:E327		    sub	    di,	di
seg000:E329		    mov	    cx,	28h ; '('
seg000:E32C		    rep	stosw
seg000:E32E		    pop	    ax
seg000:E32F		    push    ax
seg000:E330		    cmp	    ah,	30h ; '0'
seg000:E333		    mov	    dx,	3BAh
seg000:E336		    jz	    short loc_FE33A
seg000:E338		    mov	    dl,	0DAh ; 'Ú'
seg000:E33A
seg000:E33A loc_FE33A:				    ; CODE XREF: seg000:E336j
seg000:E33A		    mov	    ah,	8
seg000:E33C
seg000:E33C loc_FE33C:				    ; CODE XREF: seg000:E35Cj
seg000:E33C		    sub	    cx,	cx
seg000:E33E
seg000:E33E loc_FE33E:				    ; CODE XREF: seg000:E343j
seg000:E33E		    in	    al,	dx	    ; Video status bits:
seg000:E33E					    ; 0: retrace.  1=display is	in vert	or horiz retrace.
seg000:E33E					    ; 1: 1=light pen is	triggered; 0=armed
seg000:E33E					    ; 2: 1=light pen switch is open; 0=closed
seg000:E33E					    ; 3: 1=vertical sync pulse is occurring.
seg000:E33F		    and	    al,	ah
seg000:E341		    jnz	    short loc_FE347
seg000:E343		    loop    loc_FE33E
seg000:E345		    jmp	    short loc_FE350
seg000:E347 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E347
seg000:E347 loc_FE347:				    ; CODE XREF: seg000:E341j
seg000:E347		    sub	    cx,	cx
seg000:E349
seg000:E349 loc_FE349:				    ; CODE XREF: seg000:E34Ej
seg000:E349		    in	    al,	dx	    ; Video status bits:
seg000:E349					    ; 0: retrace.  1=display is	in vert	or horiz retrace.
seg000:E349					    ; 1: 1=light pen is	triggered; 0=armed
seg000:E349					    ; 2: 1=light pen switch is open; 0=closed
seg000:E349					    ; 3: 1=vertical sync pulse is occurring.
seg000:E34A		    and	    al,	ah
seg000:E34C		    jz	    short loc_FE358
seg000:E34E		    loop    loc_FE349
seg000:E350
seg000:E350 loc_FE350:				    ; CODE XREF: seg000:E31Cj
seg000:E350					    ; seg000:E345j
seg000:E350		    mov	    dx,	102h
seg000:E353		    call    sub_FE5CF
seg000:E356		    jmp	    short loc_FE35E
seg000:E358 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E358
seg000:E358 loc_FE358:				    ; CODE XREF: seg000:E34Cj
seg000:E358		    mov	    cl,	3
seg000:E35A		    shr	    ah,	cl
seg000:E35C		    jnz	    short loc_FE33C
seg000:E35E
seg000:E35E loc_FE35E:				    ; CODE XREF: seg000:E356j
seg000:E35E		    pop	    ax
seg000:E35F		    mov	    ah,	0
seg000:E361		    int	    10h		    ; -	VIDEO -	SET VIDEO MODE
seg000:E361					    ; AL = mode
seg000:E363
seg000:E363 e18_1:				    ; CODE XREF: seg000:E2BEj
seg000:E363		    mov	    dx,	0C000h
seg000:E366
seg000:E366 loc_FE366:				    ; CODE XREF: seg000:E380j
seg000:E366		    mov	    ds,	dx
seg000:E368		    sub	    bx,	bx
seg000:E36A		    mov	    ax,	[bx]
seg000:E36C		    push    bx
seg000:E36D		    pop	    bx
seg000:E36E		    cmp	    ax,	0AA55h
seg000:E371		    jnz	    short loc_FE378
seg000:E373		    call    sub_FE684
seg000:E376		    jmp	    short loc_FE37C
seg000:E378 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E378
seg000:E378 loc_FE378:				    ; CODE XREF: seg000:E371j
seg000:E378		    add	    dx,	80h ; '€'
seg000:E37C
seg000:E37C loc_FE37C:				    ; CODE XREF: seg000:E376j
seg000:E37C		    cmp	    dx,	0C800h
seg000:E380		    jl	    short loc_FE366
seg000:E382		    mov	    dx,	210h
seg000:E385		    mov	    ax,	5555h
seg000:E388		    out	    dx,	al	    ; XT Expansion chassis control port
seg000:E389		    mov	    al,	1
seg000:E38B		    in	    al,	dx	    ; XT Expansion chassis control port
seg000:E38C		    cmp	    al,	ah
seg000:E38E		    jnz	    short loc_FE3C4
seg000:E390		    not	    ax
seg000:E392		    out	    dx,	al	    ; XT Expansion chassis control port
seg000:E393		    mov	    al,	1
seg000:E395		    in	    al,	dx	    ; XT Expansion chassis control port
seg000:E396		    cmp	    al,	ah
seg000:E398		    jnz	    short loc_FE3C4
seg000:E39A
seg000:E39A loc_FE39A:				    ; CODE XREF: seg000:E3BBj
seg000:E39A		    mov	    bx,	ax
seg000:E39C		    mov	    dx,	214h
seg000:E39F		    mov	    cs:[bx], al
seg000:E3A2		    out	    dx,	al
seg000:E3A3		    nop
seg000:E3A4		    in	    al,	dx
seg000:E3A5		    cmp	    al,	bh
seg000:E3A7		    jnz	    short loc_FE3BD
seg000:E3A9		    inc	    dx
seg000:E3AA		    in	    al,	dx	    ; XT Expansion chassis address register (high byte)
seg000:E3AB		    cmp	    al,	ah
seg000:E3AD		    jnz	    short loc_FE3BD
seg000:E3AF		    inc	    dx
seg000:E3B0		    in	    al,	dx	    ; XT Expansion chassis address register (low byte)
seg000:E3B1		    cmp	    al,	ah
seg000:E3B3		    jnz	    short loc_FE3BD
seg000:E3B5		    not	    ax
seg000:E3B7		    cmp	    al,	0AAh ; 'ª'
seg000:E3B9		    jz	    short loc_FE3C4
seg000:E3BB		    jmp	    short loc_FE39A
seg000:E3BD ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E3BD
seg000:E3BD loc_FE3BD:				    ; CODE XREF: seg000:E3A7j
seg000:E3BD					    ; seg000:E3ADj
seg000:E3BD					    ; seg000:E3B3j
seg000:E3BD		    mov	    si,	offset a1801 ; "1801\r\n"
seg000:E3C0		    nop
seg000:E3C1		    call    write_string
seg000:E3C4
seg000:E3C4 loc_FE3C4:				    ; CODE XREF: seg000:E38Ej
seg000:E3C4					    ; seg000:E398j
seg000:E3C4					    ; seg000:E3B9j
seg000:E3C4		    call    dds
seg000:E3C7		    mov	    al,	ds:p400.installed_hardware
seg000:E3CA		    and	    al,	0Ch
seg000:E3CC		    mov	    ah,	4
seg000:E3CE		    mul	    ah
seg000:E3D0		    add	    al,	10h
seg000:E3D2		    mov	    dx,	ax
seg000:E3D4		    mov	    bx,	ax
seg000:E3D6		    mov	    ax,	ds:p400.IO_channel_RAM_size
seg000:E3D9		    cmp	    bx,	40h ; '@'
seg000:E3DC		    jz	    short loc_FE3E0
seg000:E3DE		    sub	    ax,	ax
seg000:E3E0
seg000:E3E0 loc_FE3E0:				    ; CODE XREF: seg000:E3DCj
seg000:E3E0		    add	    ax,	bx
seg000:E3E2		    mov	    ds:p400.base_mem_kb, ax
seg000:E3E5		    cmp	    bp,	1234h
seg000:E3E9		    push    ds
seg000:E3EA		    jz	    short loc_FE43B
seg000:E3EC		    mov	    bx,	400h
seg000:E3EF		    mov	    cx,	10h
seg000:E3F2
seg000:E3F2 loc_FE3F2:				    ; CODE XREF: seg000:E40Aj
seg000:E3F2					    ; seg000:E439j
seg000:E3F2		    cmp	    dx,	cx
seg000:E3F4		    jbe	    short loc_FE423
seg000:E3F6		    mov	    ds,	bx
seg000:E3F8		    mov	    es,	bx
seg000:E3FA		    add	    cx,	10h
seg000:E3FD		    add	    bx,	400h
seg000:E401		    push    cx
seg000:E402		    push    bx
seg000:E403		    push    dx
seg000:E404		    call    stgtst
seg000:E407		    pop	    dx
seg000:E408		    pop	    bx
seg000:E409		    pop	    cx
seg000:E40A		    jz	    short loc_FE3F2
seg000:E40C		    mov	    dx,	ds
seg000:E40E		    mov	    ch,	al
seg000:E410		    mov	    al,	dh
seg000:E412		    call    sub_FE625
seg000:E415		    mov	    al,	ch
seg000:E417		    call    sub_FE625
seg000:E41A		    mov	    si,	offset a201 ; "	201\r\n"
seg000:E41D		    nop
seg000:E41E		    call    write_string
seg000:E421		    jmp	    short loc_FE43B
seg000:E423 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E423
seg000:E423 loc_FE423:				    ; CODE XREF: seg000:E3F4j
seg000:E423		    pop	    ds
seg000:E424		    push    ds
seg000:E425		    mov	    dx,	ds:p400.IO_channel_RAM_size
seg000:E429		    or	    dx,	dx
seg000:E42B		    jz	    short loc_FE43B
seg000:E42D		    mov	    cx,	0
seg000:E430		    cmp	    bx,	1000h
seg000:E434		    ja	    short loc_FE43B
seg000:E436		    mov	    bx,	1000h
seg000:E439		    jmp	    short loc_FE3F2
seg000:E43B ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E43B
seg000:E43B loc_FE43B:				    ; CODE XREF: seg000:E3EAj
seg000:E43B					    ; seg000:E421j
seg000:E43B					    ; seg000:E42Bj
seg000:E43B					    ; seg000:E434j
seg000:E43B		    pop	    ds
seg000:E43C		    cmp	    byte ptr ds:p400.POST_status, 1
seg000:E441		    jz	    short loc_FE46D
seg000:E443		    call    sub_FE643
seg000:E446		    jcxz    short loc_FE466
seg000:E448		    mov	    al,	4Dh ; 'M'
seg000:E44A		    out	    61h, al	    ; PC/XT PPI	port B bits:
seg000:E44A					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:E44A					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:E44A					    ; 3: 1=read	high switches
seg000:E44A					    ; 4: 0=enable RAM parity checking
seg000:E44A					    ; 5: 0=enable I/O channel check
seg000:E44A					    ; 6: 0=hold	keyboard clock low
seg000:E44A					    ; 7: 0=enable kbrd
seg000:E44C		    cmp	    bl,	0AAh ; 'ª'
seg000:E44F		    jnz	    short loc_FE466
seg000:E451		    mov	    al,	0CCh ; 'Ì'
seg000:E453		    out	    61h, al	    ; PC/XT PPI	port B bits:
seg000:E453					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:E453					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:E453					    ; 3: 1=read	high switches
seg000:E453					    ; 4: 0=enable RAM parity checking
seg000:E453					    ; 5: 0=enable I/O channel check
seg000:E453					    ; 6: 0=hold	keyboard clock low
seg000:E453					    ; 7: 0=enable kbrd
seg000:E455		    mov	    al,	4Ch ; 'L'
seg000:E457		    out	    61h, al	    ; PC/XT PPI	port B bits:
seg000:E457					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:E457					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:E457					    ; 3: 1=read	high switches
seg000:E457					    ; 4: 0=enable RAM parity checking
seg000:E457					    ; 5: 0=enable I/O channel check
seg000:E457					    ; 6: 0=hold	keyboard clock low
seg000:E457					    ; 7: 0=enable kbrd
seg000:E459		    sub	    cx,	cx
seg000:E45B
seg000:E45B loc_FE45B:				    ; CODE XREF: seg000:loc_FE45Bj
seg000:E45B		    loop    loc_FE45B
seg000:E45D		    in	    al,	60h	    ; AT Keyboard controller 8042.
seg000:E45F		    cmp	    al,	0
seg000:E461		    jz	    short loc_FE46D
seg000:E463		    call    sub_FE625
seg000:E466
seg000:E466 loc_FE466:				    ; CODE XREF: seg000:E446j
seg000:E466					    ; seg000:E44Fj
seg000:E466		    mov	    si,	offset f1   ; "	301\r\n"
seg000:E469		    nop
seg000:E46A		    call    write_string
seg000:E46D
seg000:E46D loc_FE46D:				    ; CODE XREF: seg000:E441j
seg000:E46D					    ; seg000:E461j
seg000:E46D		    sub	    ax,	ax
seg000:E46F		    mov	    es,	ax
seg000:E471		    mov	    cx,	8
seg000:E474		    push    ds
seg000:E475		    push    cs
seg000:E476		    pop	    ds
seg000:E477		    mov	    si,	0FEF3h
seg000:E47A		    nop
seg000:E47B		    mov	    di,	20h ; ' '
seg000:E47E
seg000:E47E loc_FE47E:				    ; CODE XREF: seg000:E481j
seg000:E47E		    movsw
seg000:E47F		    inc	    di
seg000:E480		    inc	    di
seg000:E481		    loop    loc_FE47E
seg000:E483		    pop	    ds
seg000:E484		    push    ds
seg000:E485		    mov	    al,	4Dh ; 'M'
seg000:E487		    out	    61h, al	    ; PC/XT PPI	port B bits:
seg000:E487					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:E487					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:E487					    ; 3: 1=read	high switches
seg000:E487					    ; 4: 0=enable RAM parity checking
seg000:E487					    ; 5: 0=enable I/O channel check
seg000:E487					    ; 6: 0=hold	keyboard clock low
seg000:E487					    ; 7: 0=enable kbrd
seg000:E489		    mov	    al,	0FFh
seg000:E48B		    out	    21h, al	    ; Interrupt	controller, 8259A.
seg000:E48D		    mov	    al,	0B6h ; '¶'
seg000:E48F		    out	    43h, al	    ; Timer 8253-5 (AT:	8254.2).
seg000:E491		    mov	    ax,	4D3h
seg000:E494		    out	    42h, al	    ; Timer 8253-5 (AT:	8254.2).
seg000:E496		    mov	    al,	ah
seg000:E498		    out	    42h, al	    ; Timer 8253-5 (AT:	8254.2).
seg000:E49A		    in	    al,	62h	    ; PC/XT PPI	port C.	Bits:
seg000:E49A					    ; 0-3: values of DIP switches
seg000:E49A					    ; 5: 1=Timer 2 channel out
seg000:E49A					    ; 6: 1=I/O channel check
seg000:E49A					    ; 7: 1=RAM parity check error occurred.
seg000:E49C		    and	    al,	10h
seg000:E49E		    mov	    ds:p400.POST_last_unexpected_int, al
seg000:E4A1		    call    sub_FF979
seg000:E4A4		    call    sub_FF979
seg000:E4A7		    jcxz    short loc_FE4B5
seg000:E4A9		    cmp	    bx,	540h
seg000:E4AD		    jnb	    short loc_FE4B5
seg000:E4AF		    cmp	    bx,	410h
seg000:E4B3		    jnb	    short loc_FE4BC
seg000:E4B5
seg000:E4B5 loc_FE4B5:				    ; CODE XREF: seg000:E4A7j
seg000:E4B5					    ; seg000:E4ADj
seg000:E4B5		    mov	    si,	offset f2   ; "131\r\n"
seg000:E4B8		    nop
seg000:E4B9		    call    write_string
seg000:E4BC
seg000:E4BC loc_FE4BC:				    ; CODE XREF: seg000:E4B3j
seg000:E4BC		    mov	    dx,	0C800h
seg000:E4BF
seg000:E4BF loc_FE4BF:				    ; CODE XREF: seg000:E4D7j
seg000:E4BF		    mov	    ds,	dx
seg000:E4C1		    sub	    bx,	bx
seg000:E4C3		    mov	    ax,	[bx]
seg000:E4C5		    cmp	    ax,	0AA55h
seg000:E4C8		    jnz	    short loc_FE4CF
seg000:E4CA		    call    sub_FE684
seg000:E4CD		    jmp	    short loc_FE4D3
seg000:E4CF ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E4CF
seg000:E4CF loc_FE4CF:				    ; CODE XREF: seg000:E4C8j
seg000:E4CF		    add	    dx,	80h ; '€'
seg000:E4D3
seg000:E4D3 loc_FE4D3:				    ; CODE XREF: seg000:E4CDj
seg000:E4D3		    cmp	    dx,	0F600h
seg000:E4D7		    jl	    short loc_FE4BF
seg000:E4D9		    jmp	    short loc_FE4DC
seg000:E4D9 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E4DB		    db	90h ; 
seg000:E4DC ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E4DC
seg000:E4DC loc_FE4DC:				    ; CODE XREF: seg000:E4D9j
seg000:E4DC					    ; seg000:E4EEj
seg000:E4DC		    sub	    bx,	bx
seg000:E4DE		    mov	    ds,	dx
seg000:E4E0		    call    sub_FEC4C
seg000:E4E3		    jz	    short loc_FE4E8
seg000:E4E5		    call    sub_FE809
seg000:E4E8
seg000:E4E8 loc_FE4E8:				    ; CODE XREF: seg000:E4E3j
seg000:E4E8		    add	    dh,	2
seg000:E4EB		    cmp	    dh,	0FEh ; 'ş'
seg000:E4EE		    jnz	    short loc_FE4DC
seg000:E4F0		    pop	    ds
seg000:E4F1		    mov	    al,	ds:p400.installed_hardware
seg000:E4F4		    test    al,	1
seg000:E4F6		    jnz	    short loc_FE502
seg000:E4F8		    cmp	    byte ptr ds:p400.POST_status, 1
seg000:E4FD		    jnz	    short loc_FE53C
seg000:E4FF		    jmp	    reset
seg000:E502 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E502
seg000:E502 loc_FE502:				    ; CODE XREF: seg000:E4F6j
seg000:E502		    in	    al,	21h	    ; Interrupt	controller, 8259A.
seg000:E504		    and	    al,	0BFh
seg000:E506		    out	    21h, al	    ; Interrupt	controller, 8259A.
seg000:E508		    mov	    ah,	0
seg000:E50A		    mov	    dl,	ah
seg000:E50C		    int	    13h		    ; DISK - RESET DISK	SYSTEM
seg000:E50C					    ; DL = drive (if bit 7 is set both hard disks and floppy disks reset)
seg000:E50E		    jb	    short loc_FE531
seg000:E510		    mov	    dx,	3F2h
seg000:E513		    push    dx
seg000:E514		    mov	    al,	1Ch
seg000:E516		    out	    dx,	al	    ; Floppy: digital output reg bits:
seg000:E516					    ; 0-1: Drive to select 0-3 (AT: bit	1 not used)
seg000:E516					    ; 2:   0=reset diskette controller;	1=enable controller
seg000:E516					    ; 3:   1=enable diskette DMA and interrupts
seg000:E516					    ; 4-7: drive motor enable.	Set bits to turn drive ON.
seg000:E516					    ;
seg000:E517		    sub	    cx,	cx
seg000:E519
seg000:E519 loc_FE519:				    ; CODE XREF: seg000:loc_FE519j
seg000:E519		    loop    loc_FE519
seg000:E51B
seg000:E51B loc_FE51B:				    ; CODE XREF: seg000:loc_FE51Bj
seg000:E51B		    loop    loc_FE51B
seg000:E51D		    xor	    dx,	dx
seg000:E51F		    mov	    ch,	1
seg000:E521		    mov	    ds:3Eh, dl
seg000:E525		    call    sub_FEE7D
seg000:E528		    jb	    short loc_FE531
seg000:E52A		    mov	    ch,	22h ; '"'
seg000:E52C		    call    sub_FEE7D
seg000:E52F		    jnb	    short loc_FE538
seg000:E531
seg000:E531 loc_FE531:				    ; CODE XREF: seg000:E50Ej
seg000:E531					    ; seg000:E528j
seg000:E531		    mov	    si,	offset a601 ; "601\r\n"
seg000:E534		    nop
seg000:E535		    call    write_string
seg000:E538
seg000:E538 loc_FE538:				    ; CODE XREF: seg000:E52Fj
seg000:E538		    mov	    al,	0Ch
seg000:E53A		    pop	    dx
seg000:E53B		    out	    dx,	al
seg000:E53C
seg000:E53C loc_FE53C:				    ; CODE XREF: seg000:E4FDj
seg000:E53C		    mov	    si,	1Eh
seg000:E53F		    mov	    ds:1Ah, si
seg000:E543		    mov	    ds:1Ch, si
seg000:E547		    mov	    ds:80h, si
seg000:E54B		    add	    si,	20h ; ' '
seg000:E54E		    mov	    ds:82h, si
seg000:E552		    in	    al,	21h	    ; Interrupt	controller, 8259A.
seg000:E554		    and	    al,	0FCh
seg000:E556		    out	    21h, al	    ; Interrupt	controller, 8259A.
seg000:E558		    mov	    bp,	0E63Dh
seg000:E55B		    nop
seg000:E55C		    sub	    si,	si
seg000:E55E
seg000:E55E loc_FE55E:				    ; CODE XREF: seg000:E577j
seg000:E55E		    mov	    dx,	cs:[bp+0]
seg000:E562		    mov	    al,	0AAh ; 'ª'
seg000:E564		    out	    dx,	al
seg000:E565		    push    dx
seg000:E566		    in	    al,	dx
seg000:E567		    pop	    dx
seg000:E568		    cmp	    al,	0AAh ; 'ª'
seg000:E56A		    jnz	    short loc_FE571
seg000:E56C		    mov	    [si+8], dx
seg000:E56F		    inc	    si
seg000:E570		    inc	    si
seg000:E571
seg000:E571 loc_FE571:				    ; CODE XREF: seg000:E56Aj
seg000:E571		    inc	    bp
seg000:E572		    inc	    bp
seg000:E573		    cmp	    bp,	0E643h
seg000:E577		    jnz	    short loc_FE55E
seg000:E579		    sub	    bx,	bx
seg000:E57B		    mov	    dx,	3FAh
seg000:E57E		    in	    al,	dx	    ; COM: interrupt identification register bits:
seg000:E57E					    ; 0: 1=no interrupt	pending
seg000:E57E					    ; 1: 00=receiver line status interrupt.  Occurs upon:
seg000:E57E					    ;	    overrun, parity, or	framing	error, or break
seg000:E57E					    ;	 01=received data available
seg000:E57E					    ;	 10=transmitter	buffer empty
seg000:E57E					    ;	 11=modem status.
seg000:E57F		    test    al,	0F8h
seg000:E581		    jnz	    short loc_FE589
seg000:E583		    mov	    word ptr [bx], 3F8h
seg000:E587		    inc	    bx
seg000:E588		    inc	    bx
seg000:E589
seg000:E589 loc_FE589:				    ; CODE XREF: seg000:E581j
seg000:E589		    mov	    dh,	2
seg000:E58B		    in	    al,	dx	    ; COM: interrupt identification register bits:
seg000:E58B					    ; 0: 1=no interrupt	pending
seg000:E58B					    ; 1: 00=receiver line status interrupt.  Occurs upon:
seg000:E58B					    ;	    overrun, parity, or	framing	error, or break
seg000:E58B					    ;	 01=received data available
seg000:E58B					    ;	 10=transmitter	buffer empty
seg000:E58B					    ;	 11=modem status.
seg000:E58C		    test    al,	0F8h
seg000:E58E		    jnz	    short loc_FE596
seg000:E590		    mov	    word ptr [bx], 2F8h
seg000:E594		    inc	    bx
seg000:E595		    inc	    bx
seg000:E596
seg000:E596 loc_FE596:				    ; CODE XREF: seg000:E58Ej
seg000:E596		    mov	    ax,	si
seg000:E598		    mov	    cl,	3
seg000:E59A		    ror	    al,	cl
seg000:E59C		    or	    al,	bl
seg000:E59E		    mov	    ds:11h, al
seg000:E5A1		    mov	    dl,	1
seg000:E5A3		    in	    al,	dx	    ; Game I/O port
seg000:E5A3					    ; bits 0-3:	Coordinates (resistive,	time-dependent inputs)
seg000:E5A3					    ; bits 4-7:	Buttons/Triggers (digital inputs)
seg000:E5A4		    test    al,	0Fh
seg000:E5A6		    jnz	    short loc_FE5AD
seg000:E5A8		    or	    byte ptr ds:11h, 10h
seg000:E5AD
seg000:E5AD loc_FE5AD:				    ; CODE XREF: seg000:E5A6j
seg000:E5AD		    push    ds
seg000:E5AE		    pop	    es
seg000:E5AF		    mov	    di,	78h ; 'x'
seg000:E5B2		    mov	    ax,	1414h
seg000:E5B5		    stosw
seg000:E5B6		    stosw
seg000:E5B7		    mov	    ax,	101h
seg000:E5BA		    stosw
seg000:E5BB		    stosw
seg000:E5BC		    mov	    al,	80h ; '€'
seg000:E5BE		    out	    0A0h, al	    ; PIC 2  same as 0020 for PIC 1
seg000:E5C0		    cmp	    byte ptr ds:12h, 1
seg000:E5C5		    jz	    short loc_FE5CD
seg000:E5C7		    mov	    dx,	1
seg000:E5CA		    call    sub_FE5CF
seg000:E5CD
seg000:E5CD loc_FE5CD:				    ; CODE XREF: seg000:E5C5j
seg000:E5CD		    int	    19h		    ; DISK BOOT
seg000:E5CD					    ; causes reboot of disk system
seg000:E5CF
seg000:E5CF ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:E5CF
seg000:E5CF
seg000:E5CF sub_FE5CF	    proc near		    ; CODE XREF: seg000:E23Ap
seg000:E5CF					    ; seg000:E353p
seg000:E5CF					    ; seg000:E5CAp
seg000:E5CF					    ; write_string+Cj ...
seg000:E5CF		    pushf
seg000:E5D0		    cli
seg000:E5D1		    push    ds
seg000:E5D2		    call    dds
seg000:E5D5		    or	    dh,	dh
seg000:E5D7		    jz	    short loc_FE5F1
seg000:E5D9
seg000:E5D9 loc_FE5D9:				    ; CODE XREF: sub_FE5CF+13j
seg000:E5D9					    ; sub_FE5CF+20j
seg000:E5D9		    mov	    bl,	6
seg000:E5DB		    call    sub_FE603
seg000:E5DE
seg000:E5DE loc_FE5DE:				    ; CODE XREF: sub_FE5CF:loc_FE5DEj
seg000:E5DE		    loop    loc_FE5DE
seg000:E5E0		    dec	    dh
seg000:E5E2		    jnz	    short loc_FE5D9
seg000:E5E4		    cmp	    byte ptr ds:p400.POST_status, 1
seg000:E5E9		    jnz	    short loc_FE5F1
seg000:E5EB		    mov	    al,	0CDh ; 'Í'
seg000:E5ED		    out	    61h, al	    ; PC/XT PPI	port B bits:
seg000:E5ED					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:E5ED					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:E5ED					    ; 3: 1=read	high switches
seg000:E5ED					    ; 4: 0=enable RAM parity checking
seg000:E5ED					    ; 5: 0=enable I/O channel check
seg000:E5ED					    ; 6: 0=hold	keyboard clock low
seg000:E5ED					    ; 7: 0=enable kbrd
seg000:E5EF		    jmp	    short loc_FE5D9
seg000:E5F1 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E5F1
seg000:E5F1 loc_FE5F1:				    ; CODE XREF: sub_FE5CF+8j
seg000:E5F1					    ; sub_FE5CF+1Aj
seg000:E5F1					    ; sub_FE5CF+2Bj
seg000:E5F1		    mov	    bl,	1
seg000:E5F3		    call    sub_FE603
seg000:E5F6
seg000:E5F6 loc_FE5F6:				    ; CODE XREF: sub_FE5CF:loc_FE5F6j
seg000:E5F6		    loop    loc_FE5F6
seg000:E5F8		    dec	    dl
seg000:E5FA		    jnz	    short loc_FE5F1
seg000:E5FC
seg000:E5FC loc_FE5FC:				    ; CODE XREF: sub_FE5CF:loc_FE5FCj
seg000:E5FC		    loop    loc_FE5FC
seg000:E5FE
seg000:E5FE loc_FE5FE:				    ; CODE XREF: sub_FE5CF:loc_FE5FEj
seg000:E5FE		    loop    loc_FE5FE
seg000:E600		    pop	    ds
seg000:E601		    popf
seg000:E602		    retn
seg000:E602 sub_FE5CF	    endp
seg000:E602
seg000:E603
seg000:E603 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:E603
seg000:E603
seg000:E603 sub_FE603	    proc near		    ; CODE XREF: sub_FE5CF+Cp
seg000:E603					    ; sub_FE5CF+24p
seg000:E603					    ; seg000:F78Fp
seg000:E603		    mov	    al,	0B6h ; '¶'
seg000:E605		    out	    43h, al	    ; Timer 8253-5 (AT:	8254.2).
seg000:E607		    mov	    ax,	533h
seg000:E60A		    out	    42h, al	    ; Timer 8253-5 (AT:	8254.2).
seg000:E60C		    mov	    al,	ah
seg000:E60E		    out	    42h, al	    ; Timer 8253-5 (AT:	8254.2).
seg000:E610		    in	    al,	61h	    ; PC/XT PPI	port B bits:
seg000:E610					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:E610					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:E610					    ; 3: 1=read	high switches
seg000:E610					    ; 4: 0=enable RAM parity checking
seg000:E610					    ; 5: 0=enable I/O channel check
seg000:E610					    ; 6: 0=hold	keyboard clock low
seg000:E610					    ; 7: 0=enable kbrd
seg000:E612		    mov	    ah,	al
seg000:E614		    or	    al,	3
seg000:E616		    out	    61h, al	    ; PC/XT PPI	port B bits:
seg000:E616					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:E616					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:E616					    ; 3: 1=read	high switches
seg000:E616					    ; 4: 0=enable RAM parity checking
seg000:E616					    ; 5: 0=enable I/O channel check
seg000:E616					    ; 6: 0=hold	keyboard clock low
seg000:E616					    ; 7: 0=enable kbrd
seg000:E618		    sub	    cx,	cx
seg000:E61A
seg000:E61A loc_FE61A:				    ; CODE XREF: sub_FE603:loc_FE61Aj
seg000:E61A					    ; sub_FE603+1Bj
seg000:E61A		    loop    loc_FE61A
seg000:E61C		    dec	    bl
seg000:E61E		    jnz	    short loc_FE61A
seg000:E620		    mov	    al,	ah
seg000:E622		    out	    61h, al	    ; PC/XT PPI	port B bits:
seg000:E622					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:E622					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:E622					    ; 3: 1=read	high switches
seg000:E622					    ; 4: 0=enable RAM parity checking
seg000:E622					    ; 5: 0=enable I/O channel check
seg000:E622					    ; 6: 0=hold	keyboard clock low
seg000:E622					    ; 7: 0=enable kbrd
seg000:E624		    retn
seg000:E624 sub_FE603	    endp
seg000:E624
seg000:E625
seg000:E625 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:E625
seg000:E625
seg000:E625 sub_FE625	    proc near		    ; CODE XREF: seg000:E412p
seg000:E625					    ; seg000:E417p
seg000:E625					    ; seg000:E463p
seg000:E625					    ; sub_FE809+Cp ...
seg000:E625		    push    ax
seg000:E626		    mov	    cl,	4
seg000:E628		    shr	    al,	cl
seg000:E62A		    call    sub_FE630
seg000:E62D		    pop	    ax
seg000:E62E		    and	    al,	0Fh
seg000:E62E sub_FE625	    endp
seg000:E62E
seg000:E630
seg000:E630 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:E630
seg000:E630
seg000:E630 sub_FE630	    proc near		    ; CODE XREF: sub_FE625+5p
seg000:E630		    add	    al,	90h ; ''
seg000:E632		    daa
seg000:E633		    adc	    al,	40h ; '@'
seg000:E635		    daa
seg000:E635 sub_FE630	    endp
seg000:E635
seg000:E636
seg000:E636 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:E636
seg000:E636
seg000:E636 tty_write	    proc near		    ; CODE XREF: write_string+14p
seg000:E636		    mov	    ah,	0Eh
seg000:E638		    mov	    bh,	0
seg000:E63A		    int	    10h		    ; -	VIDEO -	WRITE CHARACTER	AND ADVANCE CURSOR (TTY	WRITE)
seg000:E63A					    ; AL = character, BH = display page	(alpha modes)
seg000:E63A					    ; BL = foreground color (graphics modes)
seg000:E63C		    retn
seg000:E63C tty_write	    endp
seg000:E63C
seg000:E63C ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E63D		    db 0BCh ; ¼
seg000:E63E		    db	  3
seg000:E63F		    db	78h ; x
seg000:E640		    db	  3
seg000:E641		    db	78h ; x
seg000:E642		    db	  2
seg000:E643
seg000:E643 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:E643
seg000:E643
seg000:E643 sub_FE643	    proc near		    ; CODE XREF: seg000:E1E1p
seg000:E643					    ; seg000:E287p
seg000:E643					    ; seg000:E443p
seg000:E643		    mov	    al,	0Ch
seg000:E645		    out	    61h, al	    ; PC/XT PPI	port B bits:
seg000:E645					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:E645					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:E645					    ; 3: 1=read	high switches
seg000:E645					    ; 4: 0=enable RAM parity checking
seg000:E645					    ; 5: 0=enable I/O channel check
seg000:E645					    ; 6: 0=hold	keyboard clock low
seg000:E645					    ; 7: 0=enable kbrd
seg000:E647		    mov	    cx,	2956h
seg000:E64A
seg000:E64A loc_FE64A:				    ; CODE XREF: sub_FE643:loc_FE64Aj
seg000:E64A		    loop    loc_FE64A
seg000:E64C		    mov	    al,	0CCh ; 'Ì'
seg000:E64E		    out	    61h, al	    ; PC/XT PPI	port B bits:
seg000:E64E sub_FE643	    endp		    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:E64E					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:E64E					    ; 3: 1=read	high switches
seg000:E64E					    ; 4: 0=enable RAM parity checking
seg000:E64E					    ; 5: 0=enable I/O channel check
seg000:E64E					    ; 6: 0=hold	keyboard clock low
seg000:E64E					    ; 7: 0=enable kbrd
seg000:E650
seg000:E650 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:E650
seg000:E650
seg000:E650 sub_FE650	    proc near		    ; CODE XREF: seg000:c22p
seg000:E650		    mov	    al,	4Ch ; 'L'
seg000:E652		    out	    61h, al	    ; PC/XT PPI	port B bits:
seg000:E652					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:E652					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:E652					    ; 3: 1=read	high switches
seg000:E652					    ; 4: 0=enable RAM parity checking
seg000:E652					    ; 5: 0=enable I/O channel check
seg000:E652					    ; 6: 0=hold	keyboard clock low
seg000:E652					    ; 7: 0=enable kbrd
seg000:E654		    mov	    al,	0FDh ; 'ı'
seg000:E656		    out	    21h, al	    ; Interrupt	controller, 8259A.
seg000:E658		    sti
seg000:E659		    mov	    ah,	0
seg000:E65B		    sub	    cx,	cx
seg000:E65D
seg000:E65D loc_FE65D:				    ; CODE XREF: sub_FE650+12j
seg000:E65D		    test    ah,	0FFh
seg000:E660		    jnz	    short loc_FE664
seg000:E662		    loop    loc_FE65D
seg000:E664
seg000:E664 loc_FE664:				    ; CODE XREF: sub_FE650+10j
seg000:E664		    in	    al,	60h	    ; AT Keyboard controller 8042.
seg000:E666		    mov	    bl,	al
seg000:E668		    mov	    al,	0CCh ; 'Ì'
seg000:E66A		    out	    61h, al	    ; PC/XT PPI	port B bits:
seg000:E66A					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:E66A					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:E66A					    ; 3: 1=read	high switches
seg000:E66A					    ; 4: 0=enable RAM parity checking
seg000:E66A					    ; 5: 0=enable I/O channel check
seg000:E66A					    ; 6: 0=hold	keyboard clock low
seg000:E66A					    ; 7: 0=enable kbrd
seg000:E66C		    retn
seg000:E66C sub_FE650	    endp
seg000:E66C
seg000:E66D
seg000:E66D ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:E66D
seg000:E66D
seg000:E66D blink_int	    proc far		    ; DATA XREF: seg000:E29Fo
seg000:E66D		    sti
seg000:E66E		    push    ax
seg000:E66F		    in	    al,	61h	    ; PC/XT PPI	port B bits:
seg000:E66F					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:E66F					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:E66F					    ; 3: 1=read	high switches
seg000:E66F					    ; 4: 0=enable RAM parity checking
seg000:E66F					    ; 5: 0=enable I/O channel check
seg000:E66F					    ; 6: 0=hold	keyboard clock low
seg000:E66F					    ; 7: 0=enable kbrd
seg000:E671		    mov	    ah,	al
seg000:E673		    not	    al
seg000:E675		    and	    al,	40h
seg000:E677		    and	    ah,	0BFh
seg000:E67A		    or	    al,	ah
seg000:E67C		    out	    61h, al	    ; PC/XT PPI	port B bits:
seg000:E67C					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:E67C					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:E67C					    ; 3: 1=read	high switches
seg000:E67C					    ; 4: 0=enable RAM parity checking
seg000:E67C					    ; 5: 0=enable I/O channel check
seg000:E67C					    ; 6: 0=hold	keyboard clock low
seg000:E67C					    ; 7: 0=enable kbrd
seg000:E67E		    mov	    al,	20h ; ' '
seg000:E680		    out	    20h, al	    ; Interrupt	controller, 8259A.
seg000:E682		    pop	    ax
seg000:E683		    iret
seg000:E683 blink_int	    endp
seg000:E683
seg000:E684
seg000:E684 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:E684
seg000:E684
seg000:E684 sub_FE684	    proc near		    ; CODE XREF: seg000:E373p
seg000:E684					    ; seg000:E4CAp
seg000:E684		    mov	    ax,	40h ; '@'
seg000:E687		    mov	    es,	ax
seg000:E689		    sub	    ah,	ah
seg000:E68B		    mov	    al,	[bx+2]
seg000:E68E		    mov	    cl,	9
seg000:E690		    shl	    ax,	cl
seg000:E692		    mov	    cx,	ax
seg000:E694		    push    cx
seg000:E695		    mov	    cl,	4
seg000:E697		    shr	    ax,	cl
seg000:E699		    add	    dx,	ax
seg000:E69B		    pop	    cx
seg000:E69C		    call    sub_FEC4F
seg000:E69F		    jz	    short loc_FE6A6
seg000:E6A1		    call    sub_FE809
seg000:E6A4		    jmp	    short locret_FE6B9
seg000:E6A6 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E6A6
seg000:E6A6 loc_FE6A6:				    ; CODE XREF: sub_FE684+1Bj
seg000:E6A6		    push    dx
seg000:E6A7		    mov	    word ptr es:100h, 3
seg000:E6AE		    mov	    word ptr es:102h, ds
seg000:E6B3		    call    dword ptr es:100h
seg000:E6B8		    pop	    dx
seg000:E6B9
seg000:E6B9 locret_FE6B9:			    ; CODE XREF: sub_FE684+20j
seg000:E6B9		    retn
seg000:E6B9 sub_FE684	    endp
seg000:E6B9
seg000:E6BA
seg000:E6BA ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:E6BA
seg000:E6BA ; write string to screen
seg000:E6BA ;
seg000:E6BA ; in:
seg000:E6BA ;	si = pointer to	string.	0x0a terminated
seg000:E6BA
seg000:E6BA write_string    proc near		    ; CODE XREF: nmi_int+17p
seg000:E6BA					    ; seg000:E3C1p
seg000:E6BA					    ; seg000:E41Ep
seg000:E6BA					    ; seg000:E46Ap ...
seg000:E6BA		    call    dds
seg000:E6BD		    cmp	    byte ptr ds:p400.POST_status, 1
seg000:E6C2		    jnz	    short l0
seg000:E6C4		    mov	    dh,	1
seg000:E6C6		    jmp	    sub_FE5CF
seg000:E6C9 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E6C9
seg000:E6C9 l0:					    ; CODE XREF: write_string+8j
seg000:E6C9					    ; write_string+1Aj
seg000:E6C9		    mov	    al,	cs:[si]
seg000:E6CC		    inc	    si		    ; next char	to write
seg000:E6CD		    push    ax
seg000:E6CE		    call    tty_write
seg000:E6D1		    pop	    ax
seg000:E6D2		    cmp	    al,	0Ah
seg000:E6D4		    jnz	    short l0
seg000:E6D6		    retn
seg000:E6D6 write_string    endp
seg000:E6D6
seg000:E6D6 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E6D7 aRom	    db ' ROM',0Dh,0Ah       ; DATA XREF: sub_FE809+14o
seg000:E6DD ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E6DD
seg000:E6DD d_eoi:				    ; DATA XREF: seg000:FEF7o
seg000:E6DD					    ; seg000:FEF9o
seg000:E6DD					    ; seg000:FEFBo
seg000:E6DD					    ; seg000:FEFDo ...
seg000:E6DD		    push    ax
seg000:E6DE		    mov	    al,	20h ; ' '
seg000:E6E0		    out	    20h, al	    ; Interrupt	controller, 8259A.
seg000:E6E2		    pop	    ax
seg000:E6E3		    iret
seg000:E6E4 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E6E4
seg000:E6E4 loc_FE6E4:				    ; CODE XREF: seg000:E722j
seg000:E6E4		    jmp	    far	ptr 0:7C00h
seg000:E6E4 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E6E9		    db 0FFh
seg000:E6EA		    db 0FFh
seg000:E6EB		    db 0FFh
seg000:E6EC		    db 0FFh
seg000:E6ED		    db 0FFh
seg000:E6EE		    db 0FFh
seg000:E6EF		    db 0FFh
seg000:E6F0		    db 0FFh
seg000:E6F1		    db 0FFh
seg000:E6F2 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E6F2
seg000:E6F2 boot_strap:				    ; DATA XREF: seg000:FF15o
seg000:E6F2		    sti
seg000:E6F3		    sub	    ax,	ax
seg000:E6F5		    mov	    ds,	ax
seg000:E6F7		    mov	    word ptr ds:78h, offset disk_base
seg000:E6FD		    mov	    word ptr ds:7Ah, cs
seg000:E701		    mov	    ax,	ds:410h
seg000:E704		    test    al,	1
seg000:E706		    jz	    short loc_FE726
seg000:E708		    mov	    cx,	4
seg000:E70B
seg000:E70B loc_FE70B:				    ; CODE XREF: seg000:E724j
seg000:E70B		    push    cx
seg000:E70C		    mov	    ah,	0
seg000:E70E		    int	    13h		    ; DISK - RESET DISK	SYSTEM
seg000:E70E					    ; DL = drive (if bit 7 is set both hard disks and floppy disks reset)
seg000:E710		    jb	    short loc_FE721
seg000:E712		    mov	    ax,	201h
seg000:E715		    sub	    dx,	dx
seg000:E717		    mov	    es,	dx
seg000:E719		    mov	    bx,	7C00h
seg000:E71C		    mov	    cx,	1
seg000:E71F		    int	    13h		    ; DISK - READ SECTORS INTO MEMORY
seg000:E71F					    ; AL = number of sectors to	read, CH = track, CL = sector
seg000:E71F					    ; DH = head, DL = drive, ES:BX -> buffer to	fill
seg000:E71F					    ; Return: CF set on	error, AH = status, AL = number	of sectors read
seg000:E721
seg000:E721 loc_FE721:				    ; CODE XREF: seg000:E710j
seg000:E721		    pop	    cx
seg000:E722		    jnb	    short loc_FE6E4
seg000:E724		    loop    loc_FE70B
seg000:E726
seg000:E726 loc_FE726:				    ; CODE XREF: seg000:E706j
seg000:E726		    int	    18h		    ; TRANSFER TO ROM BASIC
seg000:E726					    ; causes transfer to ROM-based BASIC (IBM-PC)
seg000:E726					    ; often reboots a compatible; often	has no effect at all
seg000:E728		    call    word ptr [bx]
seg000:E72A		    add	    al,	0
seg000:E72C		    add	    ax,	[bx+si-3FFFh]
seg000:E730		    add	    [bx+si+0], ah
seg000:E733		    xor	    [bx+si], al
seg000:E735		    sbb	    [bx+si], al
seg000:E737		    or	    al,	0
seg000:E739
seg000:E739 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:E739
seg000:E739
seg000:E739 rs232_io	    proc far		    ; DATA XREF: seg000:FF0Bo
seg000:E739		    sti
seg000:E73A		    push    ds
seg000:E73B		    push    dx
seg000:E73C		    push    si
seg000:E73D		    push    di
seg000:E73E		    push    cx
seg000:E73F		    push    bx
seg000:E740		    mov	    si,	dx
seg000:E742		    mov	    di,	dx
seg000:E744		    shl	    si,	1
seg000:E746		    call    dds
seg000:E749		    mov	    dx,	[si]
seg000:E74B		    or	    dx,	dx
seg000:E74D		    jz	    short loc_FE762
seg000:E74F		    or	    ah,	ah
seg000:E751		    jz	    short loc_FE769
seg000:E753		    dec	    ah
seg000:E755		    jz	    short loc_FE79C
seg000:E757		    dec	    ah
seg000:E759		    jz	    short loc_FE7C5
seg000:E75B		    dec	    ah
seg000:E75D		    jnz	    short loc_FE762
seg000:E75F		    jmp	    loc_FE7E5
seg000:E762 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E762
seg000:E762 loc_FE762:				    ; CODE XREF: rs232_io+14j
seg000:E762					    ; rs232_io+24j
seg000:E762					    ; rs232_io+79j
seg000:E762					    ; rs232_io+8Aj ...
seg000:E762		    pop	    bx
seg000:E763		    pop	    cx
seg000:E764		    pop	    di
seg000:E765		    pop	    si
seg000:E766		    pop	    dx
seg000:E767		    pop	    ds
seg000:E768		    iret
seg000:E769 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E769
seg000:E769 loc_FE769:				    ; CODE XREF: rs232_io+18j
seg000:E769		    mov	    ah,	al
seg000:E76B		    add	    dx,	3
seg000:E76E		    mov	    al,	80h ; '€'
seg000:E770		    out	    dx,	al
seg000:E771		    mov	    dl,	ah
seg000:E773		    mov	    cl,	4
seg000:E775		    rol	    dl,	cl
seg000:E777		    and	    dx,	0Eh
seg000:E77B		    mov	    di,	0E729h
seg000:E77E		    add	    di,	dx
seg000:E780		    mov	    dx,	[si]
seg000:E782		    inc	    dx
seg000:E783		    mov	    al,	cs:[di+1]
seg000:E787		    out	    dx,	al
seg000:E788		    dec	    dx
seg000:E789		    mov	    al,	cs:[di]
seg000:E78C		    out	    dx,	al
seg000:E78D		    add	    dx,	3
seg000:E790		    mov	    al,	ah
seg000:E792		    and	    al,	1Fh
seg000:E794		    out	    dx,	al
seg000:E795		    dec	    dx
seg000:E796		    dec	    dx
seg000:E797		    mov	    al,	0
seg000:E799		    out	    dx,	al
seg000:E79A		    jmp	    short loc_FE7E5
seg000:E79C ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E79C
seg000:E79C loc_FE79C:				    ; CODE XREF: rs232_io+1Cj
seg000:E79C		    push    ax
seg000:E79D		    add	    dx,	4
seg000:E7A0		    mov	    al,	3
seg000:E7A2		    out	    dx,	al
seg000:E7A3		    inc	    dx
seg000:E7A4		    inc	    dx
seg000:E7A5		    mov	    bh,	30h ; '0'
seg000:E7A7		    call    sub_FE7F2
seg000:E7AA		    jz	    short loc_FE7B4
seg000:E7AC
seg000:E7AC loc_FE7AC:				    ; CODE XREF: rs232_io+81j
seg000:E7AC		    pop	    cx
seg000:E7AD		    mov	    al,	cl
seg000:E7AF
seg000:E7AF loc_FE7AF:				    ; CODE XREF: rs232_io+99j
seg000:E7AF					    ; rs232_io+A1j
seg000:E7AF		    or	    ah,	80h
seg000:E7B2		    jmp	    short loc_FE762
seg000:E7B4 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E7B4
seg000:E7B4 loc_FE7B4:				    ; CODE XREF: rs232_io+71j
seg000:E7B4		    dec	    dx
seg000:E7B5		    mov	    bh,	20h ; ' '
seg000:E7B7		    call    sub_FE7F2
seg000:E7BA		    jnz	    short loc_FE7AC
seg000:E7BC		    sub	    dx,	5
seg000:E7BF		    pop	    cx
seg000:E7C0		    mov	    al,	cl
seg000:E7C2		    out	    dx,	al
seg000:E7C3		    jmp	    short loc_FE762
seg000:E7C5 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E7C5
seg000:E7C5 loc_FE7C5:				    ; CODE XREF: rs232_io+20j
seg000:E7C5		    add	    dx,	4
seg000:E7C8		    mov	    al,	1
seg000:E7CA		    out	    dx,	al
seg000:E7CB		    inc	    dx
seg000:E7CC		    inc	    dx
seg000:E7CD		    mov	    bh,	20h ; ' '
seg000:E7CF		    call    sub_FE7F2
seg000:E7D2		    jnz	    short loc_FE7AF
seg000:E7D4		    dec	    dx
seg000:E7D5		    mov	    bh,	1
seg000:E7D7		    call    sub_FE7F2
seg000:E7DA		    jnz	    short loc_FE7AF
seg000:E7DC		    and	    ah,	1Eh
seg000:E7DF		    mov	    dx,	[si]
seg000:E7E1		    in	    al,	dx
seg000:E7E2		    jmp	    loc_FE762
seg000:E7E5 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E7E5
seg000:E7E5 loc_FE7E5:				    ; CODE XREF: rs232_io+26j
seg000:E7E5					    ; rs232_io+61j
seg000:E7E5		    mov	    dx,	[si]
seg000:E7E7		    add	    dx,	5
seg000:E7EA		    in	    al,	dx
seg000:E7EB		    mov	    ah,	al
seg000:E7ED		    inc	    dx
seg000:E7EE		    in	    al,	dx
seg000:E7EF		    jmp	    loc_FE762
seg000:E7EF rs232_io	    endp
seg000:E7EF
seg000:E7F2
seg000:E7F2 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:E7F2
seg000:E7F2
seg000:E7F2 sub_FE7F2	    proc near		    ; CODE XREF: rs232_io+6Ep
seg000:E7F2					    ; rs232_io+7Ep
seg000:E7F2					    ; rs232_io+96p
seg000:E7F2					    ; rs232_io+9Ep
seg000:E7F2		    mov	    bl,	[di+7Ch]
seg000:E7F5
seg000:E7F5 loc_FE7F5:				    ; CODE XREF: sub_FE7F2+12j
seg000:E7F5		    sub	    cx,	cx
seg000:E7F7
seg000:E7F7 loc_FE7F7:				    ; CODE XREF: sub_FE7F2+Ej
seg000:E7F7		    in	    al,	dx
seg000:E7F8		    mov	    ah,	al
seg000:E7FA		    and	    al,	bh
seg000:E7FC		    cmp	    al,	bh
seg000:E7FE		    jz	    short locret_FE808
seg000:E800		    loop    loc_FE7F7
seg000:E802		    dec	    bl
seg000:E804		    jnz	    short loc_FE7F5
seg000:E806		    or	    bh,	bh
seg000:E808
seg000:E808 locret_FE808:			    ; CODE XREF: sub_FE7F2+Cj
seg000:E808		    retn
seg000:E808 sub_FE7F2	    endp
seg000:E808
seg000:E809
seg000:E809 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:E809
seg000:E809
seg000:E809 sub_FE809	    proc near		    ; CODE XREF: seg000:E4E5p
seg000:E809					    ; sub_FE684+1Dp
seg000:E809		    push    dx
seg000:E80A		    push    ax
seg000:E80B		    mov	    dx,	ds
seg000:E80D		    cmp	    dx,	0C800h
seg000:E811		    jle	    short loc_FE826
seg000:E813		    mov	    al,	dh
seg000:E815		    call    sub_FE625
seg000:E818		    mov	    al,	dl
seg000:E81A		    call    sub_FE625
seg000:E81D		    mov	    si,	offset aRom ; "	ROM\r\n"
seg000:E820		    call    write_string
seg000:E823
seg000:E823 loc_FE823:				    ; CODE XREF: sub_FE809+23j
seg000:E823		    pop	    ax
seg000:E824		    pop	    dx
seg000:E825		    retn
seg000:E826 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E826
seg000:E826 loc_FE826:				    ; CODE XREF: sub_FE809+8j
seg000:E826		    mov	    dx,	102h
seg000:E829		    call    sub_FE5CF
seg000:E82C		    jmp	    short loc_FE823
seg000:E82C sub_FE809	    endp
seg000:E82C
seg000:E82E
seg000:E82E ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:E82E
seg000:E82E
seg000:E82E keyboard_io	    proc far		    ; DATA XREF: seg000:FF0Fo
seg000:E82E		    sti
seg000:E82F		    push    ds
seg000:E830		    push    bx
seg000:E831		    call    dds
seg000:E834		    or	    ah,	ah
seg000:E836		    jz	    short int_16_00
seg000:E838		    dec	    ah
seg000:E83A		    jz	    short int_16_01
seg000:E83C		    dec	    ah
seg000:E83E		    jz	    short int_16_02
seg000:E840		    jmp	    short exit
seg000:E842 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E842
seg000:E842 int_16_00:				    ; CODE XREF: keyboard_io+8j
seg000:E842					    ; keyboard_io+1Fj
seg000:E842		    sti
seg000:E843		    nop
seg000:E844		    cli
seg000:E845		    mov	    bx,	ds:p400.keyb_buffer_head_ptr
seg000:E849		    cmp	    bx,	ds:p400.keyb_buffer_tail_ptr
seg000:E84D		    jz	    short int_16_00
seg000:E84F		    mov	    ax,	[bx]
seg000:E851		    call    keyb_next_ptr
seg000:E854		    mov	    ds:p400.keyb_buffer_head_ptr, bx
seg000:E858		    jmp	    short exit
seg000:E85A ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E85A
seg000:E85A int_16_01:				    ; CODE XREF: keyboard_io+Cj
seg000:E85A		    cli
seg000:E85B		    mov	    bx,	ds:p400.keyb_buffer_head_ptr
seg000:E85F		    cmp	    bx,	ds:p400.keyb_buffer_tail_ptr
seg000:E863		    mov	    ax,	[bx]
seg000:E865		    sti
seg000:E866		    pop	    bx
seg000:E867		    pop	    ds
seg000:E868		    retf    2
seg000:E86B ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E86B
seg000:E86B int_16_02:				    ; CODE XREF: keyboard_io+10j
seg000:E86B		    mov	    al,	ds:p400.keyb_status_flags_1
seg000:E86E
seg000:E86E exit:				    ; CODE XREF: keyboard_io+12j
seg000:E86E					    ; keyboard_io+2Aj
seg000:E86E		    pop	    bx
seg000:E86F		    pop	    ds
seg000:E870		    iret
seg000:E870 keyboard_io	    endp
seg000:E870
seg000:E871
seg000:E871 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:E871
seg000:E871
seg000:E871 keyb_next_ptr   proc near		    ; CODE XREF: keyboard_io+23p
seg000:E871					    ; seg000:EC0Bp
seg000:E871		    inc	    bx
seg000:E872		    inc	    bx
seg000:E873		    cmp	    bx,	ds:p400.keyb_buffer_end_offset_ptr
seg000:E877		    jnz	    short l0
seg000:E879		    mov	    bx,	ds:p400.keyb_buffer_start_offset_ptr
seg000:E87D
seg000:E87D l0:					    ; CODE XREF: keyb_next_ptr+6j
seg000:E87D		    retn
seg000:E87D keyb_next_ptr   endp
seg000:E87D
seg000:E87D ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E87E		    db	52h ; R
seg000:E87F		    db	3Ah ; :
seg000:E880		    db	45h ; E
seg000:E881		    db	46h ; F
seg000:E882		    db	38h ; 8
seg000:E883		    db	1Dh
seg000:E884		    db	2Ah ; *
seg000:E885		    db	36h ; 6
seg000:E886		    db	80h ; €
seg000:E887		    db	40h ; @
seg000:E888		    db	20h
seg000:E889		    db	10h
seg000:E88A		    db	  8
seg000:E88B		    db	  4
seg000:E88C		    db	  2
seg000:E88D		    db	  1
seg000:E88E		    db	1Bh
seg000:E88F		    db 0FFh
seg000:E890		    db	  0
seg000:E891		    db 0FFh
seg000:E892		    db 0FFh
seg000:E893		    db 0FFh
seg000:E894		    db	1Eh
seg000:E895		    db 0FFh
seg000:E896		    db 0FFh
seg000:E897		    db 0FFh
seg000:E898		    db 0FFh
seg000:E899		    db	1Fh
seg000:E89A		    db 0FFh
seg000:E89B		    db	7Fh ; 
seg000:E89C		    db 0FFh
seg000:E89D		    db	11h
seg000:E89E		    db	17h
seg000:E89F		    db	  5
seg000:E8A0		    db	12h
seg000:E8A1		    db	14h
seg000:E8A2		    db	19h
seg000:E8A3		    db	15h
seg000:E8A4		    db	  9
seg000:E8A5		    db	0Fh
seg000:E8A6		    db	10h
seg000:E8A7		    db	1Bh
seg000:E8A8		    db	1Dh
seg000:E8A9		    db	0Ah
seg000:E8AA		    db 0FFh
seg000:E8AB		    db	  1
seg000:E8AC		    db	13h
seg000:E8AD		    db	  4
seg000:E8AE		    db	  6
seg000:E8AF		    db	  7
seg000:E8B0		    db	  8
seg000:E8B1		    db	0Ah
seg000:E8B2		    db	0Bh
seg000:E8B3		    db	0Ch
seg000:E8B4		    db 0FFh
seg000:E8B5		    db 0FFh
seg000:E8B6		    db 0FFh
seg000:E8B7		    db 0FFh
seg000:E8B8		    db	1Ch
seg000:E8B9		    db	1Ah
seg000:E8BA		    db	18h
seg000:E8BB		    db	  3
seg000:E8BC		    db	16h
seg000:E8BD		    db	  2
seg000:E8BE		    db	0Eh
seg000:E8BF		    db	0Dh
seg000:E8C0		    db 0FFh
seg000:E8C1		    db 0FFh
seg000:E8C2		    db 0FFh
seg000:E8C3		    db 0FFh
seg000:E8C4		    db 0FFh
seg000:E8C5		    db 0FFh
seg000:E8C6		    db	20h
seg000:E8C7		    db 0FFh
seg000:E8C8		    db	5Eh ; ^
seg000:E8C9		    db	5Fh ; _
seg000:E8CA		    db	60h ; `
seg000:E8CB		    db	61h ; a
seg000:E8CC		    db	62h ; b
seg000:E8CD		    db	63h ; c
seg000:E8CE		    db	64h ; d
seg000:E8CF		    db	65h ; e
seg000:E8D0		    db	66h ; f
seg000:E8D1		    db	67h ; g
seg000:E8D2		    db 0FFh
seg000:E8D3		    db 0FFh
seg000:E8D4		    db	77h ; w
seg000:E8D5		    db 0FFh
seg000:E8D6		    db	84h ; „
seg000:E8D7		    db 0FFh
seg000:E8D8		    db	73h ; s
seg000:E8D9		    db 0FFh
seg000:E8DA		    db	74h ; t
seg000:E8DB		    db 0FFh
seg000:E8DC		    db	75h ; u
seg000:E8DD		    db 0FFh
seg000:E8DE		    db	76h ; v
seg000:E8DF		    db 0FFh
seg000:E8E0		    db 0FFh
seg000:E8E1		    db	1Bh
seg000:E8E2		    db	31h ; 1
seg000:E8E3		    db	32h ; 2
seg000:E8E4		    db	33h ; 3
seg000:E8E5		    db	34h ; 4
seg000:E8E6		    db	35h ; 5
seg000:E8E7		    db	36h ; 6
seg000:E8E8		    db	37h ; 7
seg000:E8E9		    db	38h ; 8
seg000:E8EA		    db	39h ; 9
seg000:E8EB		    db	30h ; 0
seg000:E8EC		    db	2Dh ; -
seg000:E8ED		    db	3Dh ; =
seg000:E8EE		    db	  8
seg000:E8EF		    db	  9
seg000:E8F0		    db	71h ; q
seg000:E8F1		    db	77h ; w
seg000:E8F2		    db	65h ; e
seg000:E8F3		    db	72h ; r
seg000:E8F4		    db	74h ; t
seg000:E8F5		    db	79h ; y
seg000:E8F6		    db	75h ; u
seg000:E8F7		    db	69h ; i
seg000:E8F8		    db	6Fh ; o
seg000:E8F9		    db	70h ; p
seg000:E8FA		    db	5Bh ; [
seg000:E8FB		    db	5Dh ; ]
seg000:E8FC		    db	0Dh
seg000:E8FD		    db 0FFh
seg000:E8FE		    db	61h ; a
seg000:E8FF		    db	73h ; s
seg000:E900		    db	64h ; d
seg000:E901		    db	66h ; f
seg000:E902		    db	67h ; g
seg000:E903		    db	68h ; h
seg000:E904		    db	6Ah ; j
seg000:E905		    db	6Bh ; k
seg000:E906		    db	6Ch ; l
seg000:E907		    db	3Bh ; ;
seg000:E908		    db	27h ; '
seg000:E909		    db	60h ; `
seg000:E90A		    db 0FFh
seg000:E90B		    db	5Ch ; \
seg000:E90C		    db	7Ah ; z
seg000:E90D		    db	78h ; x
seg000:E90E		    db	63h ; c
seg000:E90F		    db	76h ; v
seg000:E910		    db	62h ; b
seg000:E911		    db	6Eh ; n
seg000:E912		    db	6Dh ; m
seg000:E913		    db	2Ch ; ,
seg000:E914		    db	2Eh ; .
seg000:E915		    db	2Fh ; /
seg000:E916		    db 0FFh
seg000:E917		    db	2Ah ; *
seg000:E918		    db 0FFh
seg000:E919		    db	20h
seg000:E91A		    db 0FFh
seg000:E91B		    db	1Bh
seg000:E91C		    db	21h ; !
seg000:E91D		    db	40h ; @
seg000:E91E		    db	23h ; #
seg000:E91F		    db	24h ; $
seg000:E920		    db	25h ; %
seg000:E921		    db	5Eh ; ^
seg000:E922		    db	26h ; &
seg000:E923		    db	2Ah ; *
seg000:E924		    db	28h ; (
seg000:E925		    db	29h ; )
seg000:E926		    db	5Fh ; _
seg000:E927		    db	2Bh ; +
seg000:E928		    db	  8
seg000:E929		    db	  0
seg000:E92A		    db	51h ; Q
seg000:E92B		    db	57h ; W
seg000:E92C		    db	45h ; E
seg000:E92D		    db	52h ; R
seg000:E92E		    db	54h ; T
seg000:E92F		    db	59h ; Y
seg000:E930		    db	55h ; U
seg000:E931		    db	49h ; I
seg000:E932		    db	4Fh ; O
seg000:E933		    db	50h ; P
seg000:E934		    db	7Bh ; {
seg000:E935		    db	7Dh ; }
seg000:E936		    db	0Dh
seg000:E937		    db 0FFh
seg000:E938		    db	41h ; A
seg000:E939		    db	53h ; S
seg000:E93A		    db	44h ; D
seg000:E93B		    db	46h ; F
seg000:E93C		    db	47h ; G
seg000:E93D		    db	48h ; H
seg000:E93E		    db	4Ah ; J
seg000:E93F		    db	4Bh ; K
seg000:E940		    db	4Ch ; L
seg000:E941		    db	3Ah ; :
seg000:E942		    db	22h ; "
seg000:E943		    db	7Eh ; ~
seg000:E944		    db 0FFh
seg000:E945		    db	7Ch ; |
seg000:E946		    db	5Ah ; Z
seg000:E947		    db	58h ; X
seg000:E948		    db	43h ; C
seg000:E949		    db	56h ; V
seg000:E94A		    db	42h ; B
seg000:E94B		    db	4Eh ; N
seg000:E94C		    db	4Dh ; M
seg000:E94D		    db	3Ch ; <
seg000:E94E		    db	3Eh ; >
seg000:E94F		    db	3Fh ; ?
seg000:E950		    db 0FFh
seg000:E951		    db	  0
seg000:E952		    db 0FFh
seg000:E953		    db	20h
seg000:E954		    db 0FFh
seg000:E955		    db	54h ; T
seg000:E956		    db	55h ; U
seg000:E957		    db	56h ; V
seg000:E958		    db	57h ; W
seg000:E959		    db	58h ; X
seg000:E95A		    db	59h ; Y
seg000:E95B		    db	5Ah ; Z
seg000:E95C		    db	5Bh ; [
seg000:E95D		    db	5Ch ; \
seg000:E95E		    db	5Dh ; ]
seg000:E95F		    db	68h ; h
seg000:E960		    db	69h ; i
seg000:E961		    db	6Ah ; j
seg000:E962		    db	6Bh ; k
seg000:E963		    db	6Ch ; l
seg000:E964		    db	6Dh ; m
seg000:E965		    db	6Eh ; n
seg000:E966		    db	6Fh ; o
seg000:E967		    db	70h ; p
seg000:E968		    db	71h ; q
seg000:E969		    db	37h ; 7
seg000:E96A		    db	38h ; 8
seg000:E96B		    db	39h ; 9
seg000:E96C		    db	2Dh ; -
seg000:E96D		    db	34h ; 4
seg000:E96E		    db	35h ; 5
seg000:E96F		    db	36h ; 6
seg000:E970		    db	2Bh ; +
seg000:E971		    db	31h ; 1
seg000:E972		    db	32h ; 2
seg000:E973		    db	33h ; 3
seg000:E974		    db	30h ; 0
seg000:E975		    db	2Eh ; .
seg000:E976		    db	47h ; G
seg000:E977		    db	48h ; H
seg000:E978		    db	49h ; I
seg000:E979		    db 0FFh
seg000:E97A		    db	4Bh ; K
seg000:E97B		    db 0FFh
seg000:E97C		    db	4Dh ; M
seg000:E97D		    db 0FFh
seg000:E97E		    db	4Fh ; O
seg000:E97F		    db	50h ; P
seg000:E980		    db	51h ; Q
seg000:E981		    db	52h ; R
seg000:E982		    db	53h ; S
seg000:E983		    db 0FFh
seg000:E984		    db 0FFh
seg000:E985		    db 0FFh
seg000:E986		    db 0FFh
seg000:E987 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E987
seg000:E987 kb_int:				    ; DATA XREF: seg000:FEF5o
seg000:E987		    sti
seg000:E988		    push    ax
seg000:E989		    push    bx
seg000:E98A		    push    cx
seg000:E98B		    push    dx
seg000:E98C		    push    si
seg000:E98D		    push    di
seg000:E98E		    push    ds
seg000:E98F		    push    es
seg000:E990		    cld
seg000:E991		    call    dds
seg000:E994		    in	    al,	60h	    ; AT Keyboard controller 8042.
seg000:E996		    push    ax
seg000:E997		    in	    al,	61h	    ; PC/XT PPI	port B bits:
seg000:E997					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:E997					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:E997					    ; 3: 1=read	high switches
seg000:E997					    ; 4: 0=enable RAM parity checking
seg000:E997					    ; 5: 0=enable I/O channel check
seg000:E997					    ; 6: 0=hold	keyboard clock low
seg000:E997					    ; 7: 0=enable kbrd
seg000:E999		    mov	    ah,	al
seg000:E99B		    or	    al,	80h
seg000:E99D		    out	    61h, al	    ; PC/XT PPI	port B bits:
seg000:E99D					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:E99D					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:E99D					    ; 3: 1=read	high switches
seg000:E99D					    ; 4: 0=enable RAM parity checking
seg000:E99D					    ; 5: 0=enable I/O channel check
seg000:E99D					    ; 6: 0=hold	keyboard clock low
seg000:E99D					    ; 7: 0=enable kbrd
seg000:E99F		    xchg    ah,	al
seg000:E9A1		    out	    61h, al	    ; PC/XT PPI	port B bits:
seg000:E9A1					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:E9A1					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:E9A1					    ; 3: 1=read	high switches
seg000:E9A1					    ; 4: 0=enable RAM parity checking
seg000:E9A1					    ; 5: 0=enable I/O channel check
seg000:E9A1					    ; 6: 0=hold	keyboard clock low
seg000:E9A1					    ; 7: 0=enable kbrd
seg000:E9A3		    pop	    ax
seg000:E9A4		    mov	    ah,	al
seg000:E9A6		    cmp	    al,	0FFh
seg000:E9A8		    jnz	    short loc_FE9AD
seg000:E9AA		    jmp	    loc_FEC27
seg000:E9AD ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E9AD
seg000:E9AD loc_FE9AD:				    ; CODE XREF: seg000:E9A8j
seg000:E9AD		    and	    al,	7Fh
seg000:E9AF		    push    cs
seg000:E9B0		    pop	    es
seg000:E9B1		    mov	    di,	0E87Eh
seg000:E9B4		    mov	    cx,	8
seg000:E9B7		    repne scasb
seg000:E9B9		    mov	    al,	ah
seg000:E9BB		    jz	    short loc_FE9C0
seg000:E9BD		    jmp	    loc_FEA45
seg000:E9C0 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E9C0
seg000:E9C0 loc_FE9C0:				    ; CODE XREF: seg000:E9BBj
seg000:E9C0		    sub	    di,	0E87Fh
seg000:E9C4		    mov	    ah,	cs:[di-177Ah]
seg000:E9C9		    test    al,	80h
seg000:E9CB		    jnz	    short loc_FEA1E
seg000:E9CD		    cmp	    ah,	10h
seg000:E9D0		    jnb	    short loc_FE9D9
seg000:E9D2		    or	    ds:17h, ah
seg000:E9D6		    jmp	    loc_FEA59
seg000:E9D9 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E9D9
seg000:E9D9 loc_FE9D9:				    ; CODE XREF: seg000:E9D0j
seg000:E9D9		    test    byte ptr ds:17h, 4
seg000:E9DE		    jnz	    short loc_FEA45
seg000:E9E0		    cmp	    al,	52h ; 'R'
seg000:E9E2		    jnz	    short loc_FEA06
seg000:E9E4		    test    byte ptr ds:17h, 8
seg000:E9E9		    jnz	    short loc_FEA45
seg000:E9EB		    test    byte ptr ds:17h, 20h
seg000:E9F0		    jnz	    short loc_FE9FF
seg000:E9F2		    test    byte ptr ds:17h, 3
seg000:E9F7		    jz	    short loc_FEA06
seg000:E9F9
seg000:E9F9 loc_FE9F9:				    ; CODE XREF: seg000:EA04j
seg000:E9F9		    mov	    ax,	5230h
seg000:E9FC		    jmp	    loc_FEBD5
seg000:E9FF ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:E9FF
seg000:E9FF loc_FE9FF:				    ; CODE XREF: seg000:E9F0j
seg000:E9FF		    test    byte ptr ds:17h, 3
seg000:EA04		    jz	    short loc_FE9F9
seg000:EA06
seg000:EA06 loc_FEA06:				    ; CODE XREF: seg000:E9E2j
seg000:EA06					    ; seg000:E9F7j
seg000:EA06		    test    ds:18h, ah
seg000:EA0A		    jnz	    short loc_FEA59
seg000:EA0C		    or	    ds:18h, ah
seg000:EA10		    xor	    ds:17h, ah
seg000:EA14		    cmp	    al,	52h ; 'R'
seg000:EA16		    jnz	    short loc_FEA59
seg000:EA18		    mov	    ax,	5200h
seg000:EA1B		    jmp	    loc_FEBD5
seg000:EA1E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EA1E
seg000:EA1E loc_FEA1E:				    ; CODE XREF: seg000:E9CBj
seg000:EA1E		    cmp	    ah,	10h
seg000:EA21		    jnb	    short loc_FEA3D
seg000:EA23		    not	    ah
seg000:EA25		    and	    ds:17h, ah
seg000:EA29		    cmp	    al,	0B8h ; '¸'
seg000:EA2B		    jnz	    short loc_FEA59
seg000:EA2D		    mov	    al,	ds:19h
seg000:EA30		    mov	    ah,	0
seg000:EA32		    mov	    ds:19h, ah
seg000:EA36		    cmp	    al,	0
seg000:EA38		    jz	    short loc_FEA59
seg000:EA3A		    jmp	    loc_FEBDE
seg000:EA3D ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EA3D
seg000:EA3D loc_FEA3D:				    ; CODE XREF: seg000:EA21j
seg000:EA3D		    not	    ah
seg000:EA3F		    and	    ds:18h, ah
seg000:EA43		    jmp	    short loc_FEA59
seg000:EA45 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EA45
seg000:EA45 loc_FEA45:				    ; CODE XREF: seg000:E9BDj
seg000:EA45					    ; seg000:E9DEj
seg000:EA45					    ; seg000:E9E9j
seg000:EA45		    cmp	    al,	80h ; '€'
seg000:EA47		    jnb	    short loc_FEA59
seg000:EA49		    test    byte ptr ds:18h, 8
seg000:EA4E		    jz	    short loc_FEA67
seg000:EA50		    cmp	    al,	45h ; 'E'
seg000:EA52		    jz	    short loc_FEA59
seg000:EA54		    and	    byte ptr ds:18h, 0F7h
seg000:EA59
seg000:EA59 loc_FEA59:				    ; CODE XREF: seg000:E9D6j
seg000:EA59					    ; seg000:EA0Aj
seg000:EA59					    ; seg000:EA16j
seg000:EA59					    ; seg000:EA2Bj ...
seg000:EA59		    cli
seg000:EA5A		    mov	    al,	20h ; ' '
seg000:EA5C		    out	    20h, al	    ; Interrupt	controller, 8259A.
seg000:EA5E
seg000:EA5E loc_FEA5E:				    ; CODE XREF: seg000:EB47j
seg000:EA5E					    ; seg000:EB7Fj
seg000:EA5E					    ; seg000:EC49j
seg000:EA5E		    pop	    es
seg000:EA5F		    pop	    ds
seg000:EA60		    pop	    di
seg000:EA61		    pop	    si
seg000:EA62		    pop	    dx
seg000:EA63		    pop	    cx
seg000:EA64		    pop	    bx
seg000:EA65		    pop	    ax
seg000:EA66		    iret
seg000:EA67 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EA67
seg000:EA67 loc_FEA67:				    ; CODE XREF: seg000:EA4Ej
seg000:EA67		    test    byte ptr ds:17h, 8
seg000:EA6C		    jnz	    short loc_FEA71
seg000:EA6E		    jmp	    loc_FEB02
seg000:EA71 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EA71
seg000:EA71 loc_FEA71:				    ; CODE XREF: seg000:EA6Cj
seg000:EA71		    test    byte ptr ds:17h, 4
seg000:EA76		    jz	    short loc_FEAAB
seg000:EA78		    cmp	    al,	53h ; 'S'
seg000:EA7A		    jnz	    short loc_FEAAB
seg000:EA7C		    mov	    word ptr ds:72h, 1234h
seg000:EA82		    jmp	    far	ptr reset
seg000:EA82 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EA87		    db	52h ; R
seg000:EA88		    db	4Fh ; O
seg000:EA89		    db	50h ; P
seg000:EA8A		    db	51h ; Q
seg000:EA8B		    db	4Bh ; K
seg000:EA8C		    db	4Ch ; L
seg000:EA8D		    db	4Dh ; M
seg000:EA8E		    db	47h ; G
seg000:EA8F		    db	48h ; H
seg000:EA90		    db	49h ; I
seg000:EA91		    db	10h
seg000:EA92		    db	11h
seg000:EA93		    db	12h
seg000:EA94		    db	13h
seg000:EA95		    db	14h
seg000:EA96		    db	15h
seg000:EA97		    db	16h
seg000:EA98		    db	17h
seg000:EA99		    db	18h
seg000:EA9A		    db	19h
seg000:EA9B		    db	1Eh
seg000:EA9C		    db	1Fh
seg000:EA9D		    db	20h
seg000:EA9E		    db	21h ; !
seg000:EA9F		    db	22h ; "
seg000:EAA0		    db	23h ; #
seg000:EAA1		    db	24h ; $
seg000:EAA2		    db	25h ; %
seg000:EAA3		    db	26h ; &
seg000:EAA4		    db	2Ch ; ,
seg000:EAA5		    db	2Dh ; -
seg000:EAA6		    db	2Eh ; .
seg000:EAA7		    db	2Fh ; /
seg000:EAA8		    db	30h ; 0
seg000:EAA9		    db	31h ; 1
seg000:EAAA		    db	32h ; 2
seg000:EAAB ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EAAB
seg000:EAAB loc_FEAAB:				    ; CODE XREF: seg000:EA76j
seg000:EAAB					    ; seg000:EA7Aj
seg000:EAAB		    cmp	    al,	39h ; '9'
seg000:EAAD		    jnz	    short loc_FEAB4
seg000:EAAF		    mov	    al,	20h ; ' '
seg000:EAB1		    jmp	    loc_FEBD5
seg000:EAB4 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EAB4
seg000:EAB4 loc_FEAB4:				    ; CODE XREF: seg000:EAADj
seg000:EAB4		    mov	    di,	0EA87h
seg000:EAB7		    mov	    cx,	0Ah
seg000:EABA		    repne scasb
seg000:EABC		    jnz	    short loc_FEAD0
seg000:EABE		    sub	    di,	0EA88h
seg000:EAC2		    mov	    al,	ds:19h
seg000:EAC5		    mov	    ah,	0Ah
seg000:EAC7		    mul	    ah
seg000:EAC9		    add	    ax,	di
seg000:EACB		    mov	    ds:19h, al
seg000:EACE		    jmp	    short loc_FEA59
seg000:EAD0 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EAD0
seg000:EAD0 loc_FEAD0:				    ; CODE XREF: seg000:EABCj
seg000:EAD0		    mov	    byte ptr ds:19h, 0
seg000:EAD5		    mov	    cx,	1Ah
seg000:EAD8		    repne scasb
seg000:EADA		    jnz	    short loc_FEAE1
seg000:EADC		    mov	    al,	0
seg000:EADE		    jmp	    loc_FEBD5
seg000:EAE1 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EAE1
seg000:EAE1 loc_FEAE1:				    ; CODE XREF: seg000:EADAj
seg000:EAE1		    cmp	    al,	2
seg000:EAE3		    jb	    short loc_FEAF1
seg000:EAE5		    cmp	    al,	0Eh
seg000:EAE7		    jnb	    short loc_FEAF1
seg000:EAE9		    add	    ah,	76h ; 'v'
seg000:EAEC		    mov	    al,	0
seg000:EAEE		    jmp	    loc_FEBD5
seg000:EAF1 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EAF1
seg000:EAF1 loc_FEAF1:				    ; CODE XREF: seg000:EAE3j
seg000:EAF1					    ; seg000:EAE7j
seg000:EAF1		    cmp	    al,	3Bh ; ';'
seg000:EAF3		    jnb	    short loc_FEAF8
seg000:EAF5
seg000:EAF5 loc_FEAF5:				    ; CODE XREF: seg000:EAFAj
seg000:EAF5		    jmp	    loc_FEA59
seg000:EAF8 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EAF8
seg000:EAF8 loc_FEAF8:				    ; CODE XREF: seg000:EAF3j
seg000:EAF8		    cmp	    al,	47h ; 'G'
seg000:EAFA		    jnb	    short loc_FEAF5
seg000:EAFC		    mov	    bx,	0E95Fh
seg000:EAFF		    jmp	    loc_FEC1D
seg000:EB02 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EB02
seg000:EB02 loc_FEB02:				    ; CODE XREF: seg000:EA6Ej
seg000:EB02		    test    byte ptr ds:17h, 4
seg000:EB07		    jz	    short loc_FEB61
seg000:EB09		    cmp	    al,	46h ; 'F'
seg000:EB0B		    jnz	    short loc_FEB25
seg000:EB0D		    mov	    bx,	ds:80h
seg000:EB11		    mov	    ds:1Ah, bx
seg000:EB15		    mov	    ds:1Ch, bx
seg000:EB19		    mov	    byte ptr ds:71h, 80h ; '€'
seg000:EB1E		    int	    1Bh		    ; CTRL-BREAK KEY
seg000:EB20		    sub	    ax,	ax
seg000:EB22		    jmp	    loc_FEBD5
seg000:EB25 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EB25
seg000:EB25 loc_FEB25:				    ; CODE XREF: seg000:EB0Bj
seg000:EB25		    cmp	    al,	45h ; 'E'
seg000:EB27		    jnz	    short loc_FEB4A
seg000:EB29		    or	    byte ptr ds:18h, 8
seg000:EB2E		    mov	    al,	20h ; ' '
seg000:EB30		    out	    20h, al	    ; Interrupt	controller, 8259A.
seg000:EB32		    cmp	    byte ptr ds:49h, 7
seg000:EB37		    jz	    short loc_FEB40
seg000:EB39		    mov	    dx,	3D8h
seg000:EB3C		    mov	    al,	ds:65h
seg000:EB3F		    out	    dx,	al
seg000:EB40
seg000:EB40 loc_FEB40:				    ; CODE XREF: seg000:EB37j
seg000:EB40					    ; seg000:EB45j
seg000:EB40		    test    byte ptr ds:18h, 8
seg000:EB45		    jnz	    short loc_FEB40
seg000:EB47		    jmp	    loc_FEA5E
seg000:EB4A ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EB4A
seg000:EB4A loc_FEB4A:				    ; CODE XREF: seg000:EB27j
seg000:EB4A		    cmp	    al,	37h ; '7'
seg000:EB4C		    jnz	    short loc_FEB54
seg000:EB4E		    mov	    ax,	7200h
seg000:EB51		    jmp	    loc_FEBD5
seg000:EB54 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EB54
seg000:EB54 loc_FEB54:				    ; CODE XREF: seg000:EB4Cj
seg000:EB54		    mov	    bx,	0E88Eh
seg000:EB57		    cmp	    al,	3Bh ; ';'
seg000:EB59		    jb	    short loc_FEBD1
seg000:EB5B		    mov	    bx,	0E8C8h
seg000:EB5E		    jmp	    loc_FEC1D
seg000:EB61 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EB61
seg000:EB61 loc_FEB61:				    ; CODE XREF: seg000:EB07j
seg000:EB61		    cmp	    al,	47h ; 'G'
seg000:EB63		    jnb	    short loc_FEB91
seg000:EB65		    test    byte ptr ds:17h, 3
seg000:EB6A		    jz	    short loc_FEBC6
seg000:EB6C		    cmp	    al,	0Fh
seg000:EB6E		    jnz	    short loc_FEB75
seg000:EB70		    mov	    ax,	0F00h
seg000:EB73		    jmp	    short loc_FEBD5
seg000:EB75 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EB75
seg000:EB75 loc_FEB75:				    ; CODE XREF: seg000:EB6Ej
seg000:EB75		    cmp	    al,	37h ; '7'
seg000:EB77		    jnz	    short loc_FEB82
seg000:EB79		    mov	    al,	20h ; ' '
seg000:EB7B		    out	    20h, al	    ; Interrupt	controller, 8259A.
seg000:EB7D		    int	    5		    ;  - PRINT-SCREEN KEY
seg000:EB7D					    ; automatically called by keyboard scanner when print-screen key is	pressed
seg000:EB7F		    jmp	    loc_FEA5E
seg000:EB82 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EB82
seg000:EB82 loc_FEB82:				    ; CODE XREF: seg000:EB77j
seg000:EB82		    cmp	    al,	3Bh ; ';'
seg000:EB84		    jb	    short loc_FEB8C
seg000:EB86		    mov	    bx,	0E955h
seg000:EB89		    jmp	    loc_FEC1D
seg000:EB8C ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EB8C
seg000:EB8C loc_FEB8C:				    ; CODE XREF: seg000:EB84j
seg000:EB8C		    mov	    bx,	0E91Bh
seg000:EB8F		    jmp	    short loc_FEBD1
seg000:EB91 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EB91
seg000:EB91 loc_FEB91:				    ; CODE XREF: seg000:EB63j
seg000:EB91		    test    byte ptr ds:17h, 20h
seg000:EB96		    jnz	    short loc_FEBB8
seg000:EB98		    test    byte ptr ds:17h, 3
seg000:EB9D		    jnz	    short loc_FEBBF
seg000:EB9F
seg000:EB9F loc_FEB9F:				    ; CODE XREF: seg000:EBBDj
seg000:EB9F		    cmp	    al,	4Ah ; 'J'
seg000:EBA1		    jz	    short loc_FEBAE
seg000:EBA3		    cmp	    al,	4Eh ; 'N'
seg000:EBA5		    jz	    short loc_FEBB3
seg000:EBA7		    sub	    al,	47h ; 'G'
seg000:EBA9		    mov	    bx,	0E976h
seg000:EBAC		    jmp	    short loc_FEC1F
seg000:EBAE ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EBAE
seg000:EBAE loc_FEBAE:				    ; CODE XREF: seg000:EBA1j
seg000:EBAE		    mov	    ax,	4A2Dh
seg000:EBB1		    jmp	    short loc_FEBD5
seg000:EBB3 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EBB3
seg000:EBB3 loc_FEBB3:				    ; CODE XREF: seg000:EBA5j
seg000:EBB3		    mov	    ax,	4E2Bh
seg000:EBB6		    jmp	    short loc_FEBD5
seg000:EBB8 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EBB8
seg000:EBB8 loc_FEBB8:				    ; CODE XREF: seg000:EB96j
seg000:EBB8		    test    byte ptr ds:17h, 3
seg000:EBBD		    jnz	    short loc_FEB9F
seg000:EBBF
seg000:EBBF loc_FEBBF:				    ; CODE XREF: seg000:EB9Dj
seg000:EBBF		    sub	    al,	46h ; 'F'
seg000:EBC1		    mov	    bx,	0E969h
seg000:EBC4		    jmp	    short loc_FEBD1
seg000:EBC6 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EBC6
seg000:EBC6 loc_FEBC6:				    ; CODE XREF: seg000:EB6Aj
seg000:EBC6		    cmp	    al,	3Bh ; ';'
seg000:EBC8		    jb	    short loc_FEBCE
seg000:EBCA		    mov	    al,	0
seg000:EBCC		    jmp	    short loc_FEBD5
seg000:EBCE ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EBCE
seg000:EBCE loc_FEBCE:				    ; CODE XREF: seg000:EBC8j
seg000:EBCE		    mov	    bx,	0E8E1h
seg000:EBD1
seg000:EBD1 loc_FEBD1:				    ; CODE XREF: seg000:EB59j
seg000:EBD1					    ; seg000:EB8Fj
seg000:EBD1					    ; seg000:EBC4j
seg000:EBD1		    dec	    al
seg000:EBD3		    xlat    byte ptr cs:[bx]
seg000:EBD5
seg000:EBD5 loc_FEBD5:				    ; CODE XREF: seg000:E9FCj
seg000:EBD5					    ; seg000:EA1Bj
seg000:EBD5					    ; seg000:EAB1j
seg000:EBD5					    ; seg000:EADEj ...
seg000:EBD5		    cmp	    al,	0FFh
seg000:EBD7		    jz	    short loc_FEBF8
seg000:EBD9		    cmp	    ah,	0FFh
seg000:EBDC		    jz	    short loc_FEBF8
seg000:EBDE
seg000:EBDE loc_FEBDE:				    ; CODE XREF: seg000:EA3Aj
seg000:EBDE		    test    byte ptr ds:17h, 40h
seg000:EBE3		    jz	    short loc_FEC05
seg000:EBE5		    test    byte ptr ds:17h, 3
seg000:EBEA		    jz	    short loc_FEBFB
seg000:EBEC		    cmp	    al,	41h ; 'A'
seg000:EBEE		    jb	    short loc_FEC05
seg000:EBF0		    cmp	    al,	5Ah ; 'Z'
seg000:EBF2		    ja	    short loc_FEC05
seg000:EBF4		    add	    al,	20h ; ' '
seg000:EBF6		    jmp	    short loc_FEC05
seg000:EBF8 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EBF8
seg000:EBF8 loc_FEBF8:				    ; CODE XREF: seg000:EBD7j
seg000:EBF8					    ; seg000:EBDCj
seg000:EBF8		    jmp	    loc_FEA59
seg000:EBFB ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EBFB
seg000:EBFB loc_FEBFB:				    ; CODE XREF: seg000:EBEAj
seg000:EBFB		    cmp	    al,	61h ; 'a'
seg000:EBFD		    jb	    short loc_FEC05
seg000:EBFF		    cmp	    al,	7Ah ; 'z'
seg000:EC01		    ja	    short loc_FEC05
seg000:EC03		    sub	    al,	20h ; ' '
seg000:EC05
seg000:EC05 loc_FEC05:				    ; CODE XREF: seg000:EBE3j
seg000:EC05					    ; seg000:EBEEj
seg000:EC05					    ; seg000:EBF2j
seg000:EC05					    ; seg000:EBF6j ...
seg000:EC05		    mov	    bx,	ds:1Ch
seg000:EC09		    mov	    si,	bx
seg000:EC0B		    call    keyb_next_ptr
seg000:EC0E		    cmp	    bx,	ds:1Ah
seg000:EC12		    jz	    short loc_FEC27
seg000:EC14		    mov	    [si], ax
seg000:EC16		    mov	    ds:1Ch, bx
seg000:EC1A		    jmp	    loc_FEA59
seg000:EC1D ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EC1D
seg000:EC1D loc_FEC1D:				    ; CODE XREF: seg000:EAFFj
seg000:EC1D					    ; seg000:EB5Ej
seg000:EC1D					    ; seg000:EB89j
seg000:EC1D		    sub	    al,	3Bh ; ';'
seg000:EC1F
seg000:EC1F loc_FEC1F:				    ; CODE XREF: seg000:EBACj
seg000:EC1F		    xlat    byte ptr cs:[bx]
seg000:EC21		    mov	    ah,	al
seg000:EC23		    mov	    al,	0
seg000:EC25		    jmp	    short loc_FEBD5
seg000:EC27 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EC27
seg000:EC27 loc_FEC27:				    ; CODE XREF: seg000:E9AAj
seg000:EC27					    ; seg000:EC12j
seg000:EC27		    mov	    al,	20h ; ' '
seg000:EC29		    out	    20h, al	    ; Interrupt	controller, 8259A.
seg000:EC2B		    mov	    bx,	80h ; '€'
seg000:EC2E		    in	    al,	61h	    ; PC/XT PPI	port B bits:
seg000:EC2E					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:EC2E					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:EC2E					    ; 3: 1=read	high switches
seg000:EC2E					    ; 4: 0=enable RAM parity checking
seg000:EC2E					    ; 5: 0=enable I/O channel check
seg000:EC2E					    ; 6: 0=hold	keyboard clock low
seg000:EC2E					    ; 7: 0=enable kbrd
seg000:EC30		    push    ax
seg000:EC31
seg000:EC31 loc_FEC31:				    ; CODE XREF: seg000:EC44j
seg000:EC31		    and	    al,	0FCh
seg000:EC33		    out	    61h, al	    ; PC/XT PPI	port B bits:
seg000:EC33					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:EC33					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:EC33					    ; 3: 1=read	high switches
seg000:EC33					    ; 4: 0=enable RAM parity checking
seg000:EC33					    ; 5: 0=enable I/O channel check
seg000:EC33					    ; 6: 0=hold	keyboard clock low
seg000:EC33					    ; 7: 0=enable kbrd
seg000:EC35		    mov	    cx,	48h ; 'H'
seg000:EC38
seg000:EC38 loc_FEC38:				    ; CODE XREF: seg000:loc_FEC38j
seg000:EC38		    loop    loc_FEC38
seg000:EC3A		    or	    al,	2
seg000:EC3C		    out	    61h, al	    ; PC/XT PPI	port B bits:
seg000:EC3C					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:EC3C					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:EC3C					    ; 3: 1=read	high switches
seg000:EC3C					    ; 4: 0=enable RAM parity checking
seg000:EC3C					    ; 5: 0=enable I/O channel check
seg000:EC3C					    ; 6: 0=hold	keyboard clock low
seg000:EC3C					    ; 7: 0=enable kbrd
seg000:EC3E		    mov	    cx,	48h ; 'H'
seg000:EC41
seg000:EC41 loc_FEC41:				    ; CODE XREF: seg000:loc_FEC41j
seg000:EC41		    loop    loc_FEC41
seg000:EC43		    dec	    bx
seg000:EC44		    jnz	    short loc_FEC31
seg000:EC46		    pop	    ax
seg000:EC47		    out	    61h, al	    ; PC/XT PPI	port B bits:
seg000:EC47					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:EC47					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:EC47					    ; 3: 1=read	high switches
seg000:EC47					    ; 4: 0=enable RAM parity checking
seg000:EC47					    ; 5: 0=enable I/O channel check
seg000:EC47					    ; 6: 0=hold	keyboard clock low
seg000:EC47					    ; 7: 0=enable kbrd
seg000:EC49		    jmp	    loc_FEA5E
seg000:EC4C
seg000:EC4C ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:EC4C
seg000:EC4C
seg000:EC4C sub_FEC4C	    proc near		    ; CODE XREF: seg000:E0CEj
seg000:EC4C					    ; seg000:E4E0p
seg000:EC4C		    mov	    cx,	2000h
seg000:EC4C sub_FEC4C	    endp
seg000:EC4C
seg000:EC4F
seg000:EC4F ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:EC4F
seg000:EC4F
seg000:EC4F sub_FEC4F	    proc near		    ; CODE XREF: sub_FE684+18p
seg000:EC4F		    xor	    al,	al
seg000:EC51
seg000:EC51 loc_FEC51:				    ; CODE XREF: sub_FEC4F+5j
seg000:EC51		    add	    al,	[bx]
seg000:EC53		    inc	    bx
seg000:EC54		    loop    loc_FEC51
seg000:EC56		    or	    al,	al
seg000:EC58		    retn
seg000:EC58 sub_FEC4F	    endp
seg000:EC58
seg000:EC59
seg000:EC59 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:EC59
seg000:EC59 ; Attributes: bp-based frame
seg000:EC59
seg000:EC59 diskette_io	    proc far		    ; DATA XREF: seg000:FF09o
seg000:EC59		    sti
seg000:EC5A		    push    bx
seg000:EC5B		    push    cx
seg000:EC5C		    push    ds
seg000:EC5D		    push    si
seg000:EC5E		    push    di
seg000:EC5F		    push    bp
seg000:EC60		    push    dx
seg000:EC61		    mov	    bp,	sp
seg000:EC63		    call    dds
seg000:EC66		    call    sub_FEC85
seg000:EC69		    mov	    bx,	4
seg000:EC6C		    call    sub_FEE6C
seg000:EC6F		    mov	    ds:40h, ah
seg000:EC73		    mov	    ah,	ds:41h
seg000:EC77		    cmp	    ah,	1
seg000:EC7A		    cmc
seg000:EC7B		    pop	    dx
seg000:EC7C		    pop	    bp
seg000:EC7D		    pop	    di
seg000:EC7E		    pop	    si
seg000:EC7F		    pop	    ds
seg000:EC80		    pop	    cx
seg000:EC81		    pop	    bx
seg000:EC82		    retf    2
seg000:EC82 diskette_io	    endp
seg000:EC82
seg000:EC85
seg000:EC85 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:EC85
seg000:EC85
seg000:EC85 sub_FEC85	    proc near		    ; CODE XREF: diskette_io+Dp
seg000:EC85		    mov	    dh,	al
seg000:EC87		    and	    byte ptr ds:3Fh, 7Fh
seg000:EC8C		    or	    ah,	ah
seg000:EC8E		    jz	    short loc_FECB7
seg000:EC90		    dec	    ah
seg000:EC92		    jz	    short loc_FED07
seg000:EC94		    mov	    byte ptr ds:41h, 0
seg000:EC99		    cmp	    dl,	4
seg000:EC9C		    jnb	    short loc_FECB1
seg000:EC9E		    dec	    ah
seg000:ECA0		    jz	    short loc_FED0B
seg000:ECA2		    dec	    ah
seg000:ECA4		    jnz	    short loc_FECA9
seg000:ECA6		    jmp	    loc_FED3E
seg000:ECA9 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:ECA9
seg000:ECA9 loc_FECA9:				    ; CODE XREF: sub_FEC85+1Fj
seg000:ECA9		    dec	    ah
seg000:ECAB		    jz	    short loc_FED14
seg000:ECAD		    dec	    ah
seg000:ECAF		    jz	    short loc_FED18
seg000:ECB1
seg000:ECB1 loc_FECB1:				    ; CODE XREF: sub_FEC85+17j
seg000:ECB1		    mov	    byte ptr ds:41h, 1
seg000:ECB6		    retn
seg000:ECB7 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:ECB7
seg000:ECB7 loc_FECB7:				    ; CODE XREF: sub_FEC85+9j
seg000:ECB7		    mov	    dx,	3F2h
seg000:ECBA		    cli
seg000:ECBB		    mov	    al,	ds:3Fh
seg000:ECBE		    mov	    cl,	4
seg000:ECC0		    shl	    al,	cl
seg000:ECC2		    test    al,	20h
seg000:ECC4		    jnz	    short loc_FECD2
seg000:ECC6		    test    al,	40h
seg000:ECC8		    jnz	    short loc_FECD0
seg000:ECCA		    test    al,	80h
seg000:ECCC		    jz	    short loc_FECD4
seg000:ECCE		    inc	    al
seg000:ECD0
seg000:ECD0 loc_FECD0:				    ; CODE XREF: sub_FEC85+43j
seg000:ECD0		    inc	    al
seg000:ECD2
seg000:ECD2 loc_FECD2:				    ; CODE XREF: sub_FEC85+3Fj
seg000:ECD2		    inc	    al
seg000:ECD4
seg000:ECD4 loc_FECD4:				    ; CODE XREF: sub_FEC85+47j
seg000:ECD4		    or	    al,	8
seg000:ECD6		    out	    dx,	al	    ; Floppy: digital output reg bits:
seg000:ECD6					    ; 0-1: Drive to select 0-3 (AT: bit	1 not used)
seg000:ECD6					    ; 2:   0=reset diskette controller;	1=enable controller
seg000:ECD6					    ; 3:   1=enable diskette DMA and interrupts
seg000:ECD6					    ; 4-7: drive motor enable.	Set bits to turn drive ON.
seg000:ECD6					    ;
seg000:ECD7		    mov	    byte ptr ds:3Eh, 0
seg000:ECDC		    mov	    byte ptr ds:41h, 0
seg000:ECE1		    or	    al,	4
seg000:ECE3		    out	    dx,	al	    ; Floppy: digital output reg bits:
seg000:ECE3					    ; 0-1: Drive to select 0-3 (AT: bit	1 not used)
seg000:ECE3					    ; 2:   0=reset diskette controller;	1=enable controller
seg000:ECE3					    ; 3:   1=enable diskette DMA and interrupts
seg000:ECE3					    ; 4-7: drive motor enable.	Set bits to turn drive ON.
seg000:ECE3					    ;
seg000:ECE4		    sti
seg000:ECE5		    call    sub_FEF12
seg000:ECE8		    mov	    al,	ds:42h
seg000:ECEB		    cmp	    al,	0C0h ; 'À'
seg000:ECED		    jz	    short loc_FECF5
seg000:ECEF		    or	    byte ptr ds:41h, 20h
seg000:ECF4		    retn
seg000:ECF5 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:ECF5
seg000:ECF5 loc_FECF5:				    ; CODE XREF: sub_FEC85+68j
seg000:ECF5		    mov	    ah,	3
seg000:ECF7		    call    sub_FEE41
seg000:ECFA		    mov	    bx,	1
seg000:ECFD		    call    sub_FEE6C
seg000:ED00		    mov	    bx,	3
seg000:ED03		    call    sub_FEE6C
seg000:ED06		    retn
seg000:ED07 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:ED07
seg000:ED07 loc_FED07:				    ; CODE XREF: sub_FEC85+Dj
seg000:ED07		    mov	    al,	ds:41h
seg000:ED0A		    retn
seg000:ED0B ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:ED0B
seg000:ED0B loc_FED0B:				    ; CODE XREF: sub_FEC85+1Bj
seg000:ED0B		    mov	    al,	46h ; 'F'
seg000:ED0D
seg000:ED0D loc_FED0D:				    ; CODE XREF: sub_FEC85+91j
seg000:ED0D		    call    sub_FEEC8
seg000:ED10		    mov	    ah,	0E6h ; 'æ'
seg000:ED12		    jmp	    short loc_FED4A
seg000:ED14 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:ED14
seg000:ED14 loc_FED14:				    ; CODE XREF: sub_FEC85+26j
seg000:ED14		    mov	    al,	42h ; 'B'
seg000:ED16		    jmp	    short loc_FED0D
seg000:ED18 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:ED18
seg000:ED18 loc_FED18:				    ; CODE XREF: sub_FEC85+2Aj
seg000:ED18		    or	    byte ptr ds:3Fh, 80h
seg000:ED1D		    mov	    al,	4Ah ; 'J'
seg000:ED1F		    call    sub_FEEC8
seg000:ED22		    mov	    ah,	4Dh ; 'M'
seg000:ED24		    jmp	    short loc_FED4A
seg000:ED26 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:ED26
seg000:ED26 loc_FED26:				    ; CODE XREF: sub_FEC85+13Cj
seg000:ED26		    mov	    bx,	7
seg000:ED29		    call    sub_FEE6C
seg000:ED2C		    mov	    bx,	9
seg000:ED2F		    call    sub_FEE6C
seg000:ED32		    mov	    bx,	0Fh
seg000:ED35		    call    sub_FEE6C
seg000:ED38		    mov	    bx,	11h
seg000:ED3B		    jmp	    loc_FEDE9
seg000:ED3E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:ED3E
seg000:ED3E loc_FED3E:				    ; CODE XREF: sub_FEC85+21j
seg000:ED3E		    or	    byte ptr ds:3Fh, 80h
seg000:ED43		    mov	    al,	4Ah ; 'J'
seg000:ED45		    call    sub_FEEC8
seg000:ED48		    mov	    ah,	0C5h ; 'Å'
seg000:ED4A
seg000:ED4A loc_FED4A:				    ; CODE XREF: sub_FEC85+8Dj
seg000:ED4A					    ; sub_FEC85+9Fj
seg000:ED4A		    jnb	    short loc_FED54
seg000:ED4C		    mov	    byte ptr ds:41h, 9
seg000:ED51		    mov	    al,	0
seg000:ED53		    retn
seg000:ED54 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:ED54
seg000:ED54 loc_FED54:				    ; CODE XREF: sub_FEC85:loc_FED4Aj
seg000:ED54		    push    ax
seg000:ED55		    push    cx
seg000:ED56		    mov	    cl,	dl
seg000:ED58		    mov	    al,	1
seg000:ED5A		    shl	    al,	cl
seg000:ED5C		    cli
seg000:ED5D		    mov	    byte ptr ds:40h, 0FFh
seg000:ED62		    test    ds:3Fh, al
seg000:ED66		    jnz	    short loc_FED99
seg000:ED68		    and	    byte ptr ds:3Fh, 0F0h
seg000:ED6D		    or	    ds:3Fh, al
seg000:ED71		    sti
seg000:ED72		    mov	    al,	10h
seg000:ED74		    shl	    al,	cl
seg000:ED76		    or	    al,	dl
seg000:ED78		    or	    al,	0Ch
seg000:ED7A		    push    dx
seg000:ED7B		    mov	    dx,	3F2h
seg000:ED7E		    out	    dx,	al	    ; Floppy: digital output reg bits:
seg000:ED7E					    ; 0-1: Drive to select 0-3 (AT: bit	1 not used)
seg000:ED7E					    ; 2:   0=reset diskette controller;	1=enable controller
seg000:ED7E					    ; 3:   1=enable diskette DMA and interrupts
seg000:ED7E					    ; 4-7: drive motor enable.	Set bits to turn drive ON.
seg000:ED7E					    ;
seg000:ED7F		    pop	    dx
seg000:ED80		    test    byte ptr ds:3Fh, 80h
seg000:ED85		    jz	    short loc_FED99
seg000:ED87		    mov	    bx,	14h
seg000:ED8A		    call    sub_FEE6C
seg000:ED8D		    or	    ah,	ah
seg000:ED8F
seg000:ED8F loc_FED8F:				    ; CODE XREF: sub_FEC85+112j
seg000:ED8F		    jz	    short loc_FED99
seg000:ED91		    sub	    cx,	cx
seg000:ED93
seg000:ED93 loc_FED93:				    ; CODE XREF: sub_FEC85:loc_FED93j
seg000:ED93		    loop    loc_FED93
seg000:ED95		    dec	    ah
seg000:ED97		    jmp	    short loc_FED8F
seg000:ED99 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:ED99
seg000:ED99 loc_FED99:				    ; CODE XREF: sub_FEC85+E1j
seg000:ED99					    ; sub_FEC85+100j
seg000:ED99					    ; sub_FEC85:loc_FED8Fj
seg000:ED99		    sti
seg000:ED9A		    pop	    cx
seg000:ED9B		    call    sub_FEE7D
seg000:ED9E		    pop	    ax
seg000:ED9F		    mov	    bh,	ah
seg000:EDA1		    mov	    dh,	0
seg000:EDA3		    jb	    short loc_FEDF0
seg000:EDA5		    mov	    si,	0EDF0h
seg000:EDA8		    nop
seg000:EDA9		    push    si
seg000:EDAA		    call    sub_FEE41
seg000:EDAD		    mov	    ah,	[bp+1]
seg000:EDB0		    shl	    ah,	1
seg000:EDB2		    shl	    ah,	1
seg000:EDB4		    and	    ah,	4
seg000:EDB7		    or	    ah,	dl
seg000:EDB9		    call    sub_FEE41
seg000:EDBC		    cmp	    bh,	4Dh ; 'M'
seg000:EDBF		    jnz	    short loc_FEDC4
seg000:EDC1		    jmp	    loc_FED26
seg000:EDC4 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EDC4
seg000:EDC4 loc_FEDC4:				    ; CODE XREF: sub_FEC85+13Aj
seg000:EDC4		    mov	    ah,	ch
seg000:EDC6		    call    sub_FEE41
seg000:EDC9		    mov	    ah,	[bp+1]
seg000:EDCC		    call    sub_FEE41
seg000:EDCF		    mov	    ah,	cl
seg000:EDD1		    call    sub_FEE41
seg000:EDD4		    mov	    bx,	7
seg000:EDD7		    call    sub_FEE6C
seg000:EDDA		    mov	    bx,	9
seg000:EDDD		    call    sub_FEE6C
seg000:EDE0		    mov	    bx,	0Bh
seg000:EDE3		    call    sub_FEE6C
seg000:EDE6		    mov	    bx,	0Dh
seg000:EDE9
seg000:EDE9 loc_FEDE9:				    ; CODE XREF: sub_FEC85+B6j
seg000:EDE9		    call    sub_FEE6C
seg000:EDEC		    pop	    si
seg000:EDED		    call    sub_FEF33
seg000:EDF0
seg000:EDF0 loc_FEDF0:				    ; CODE XREF: sub_FEC85+11Ej
seg000:EDF0		    jb	    short loc_FEE37
seg000:EDF2		    call    sub_FEF69
seg000:EDF5		    jb	    short locret_FEE36
seg000:EDF7		    cld
seg000:EDF8		    mov	    si,	42h ; 'B'
seg000:EDFB		    lodsb
seg000:EDFC		    and	    al,	0C0h
seg000:EDFE		    jz	    short loc_FEE3B
seg000:EE00		    cmp	    al,	40h ; '@'
seg000:EE02		    jnz	    short loc_FEE2D
seg000:EE04		    lodsb
seg000:EE05		    shl	    al,	1
seg000:EE07		    mov	    ah,	4
seg000:EE09		    jb	    short loc_FEE2F
seg000:EE0B		    shl	    al,	1
seg000:EE0D		    shl	    al,	1
seg000:EE0F		    mov	    ah,	10h
seg000:EE11		    jb	    short loc_FEE2F
seg000:EE13		    shl	    al,	1
seg000:EE15		    mov	    ah,	8
seg000:EE17		    jb	    short loc_FEE2F
seg000:EE19		    shl	    al,	1
seg000:EE1B		    shl	    al,	1
seg000:EE1D		    mov	    ah,	4
seg000:EE1F		    jb	    short loc_FEE2F
seg000:EE21		    shl	    al,	1
seg000:EE23		    mov	    ah,	3
seg000:EE25		    jb	    short loc_FEE2F
seg000:EE27		    shl	    al,	1
seg000:EE29		    mov	    ah,	2
seg000:EE2B		    jb	    short loc_FEE2F
seg000:EE2D
seg000:EE2D loc_FEE2D:				    ; CODE XREF: sub_FEC85+17Dj
seg000:EE2D		    mov	    ah,	20h ; ' '
seg000:EE2F
seg000:EE2F loc_FEE2F:				    ; CODE XREF: sub_FEC85+184j
seg000:EE2F					    ; sub_FEC85+18Cj
seg000:EE2F					    ; sub_FEC85+192j
seg000:EE2F					    ; sub_FEC85+19Aj ...
seg000:EE2F		    or	    ds:41h, ah
seg000:EE33		    call    sub_FEFAE
seg000:EE36
seg000:EE36 locret_FEE36:			    ; CODE XREF: sub_FEC85+170j
seg000:EE36		    retn
seg000:EE37 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EE37
seg000:EE37 loc_FEE37:				    ; CODE XREF: sub_FEC85:loc_FEDF0j
seg000:EE37		    call    sub_FEF69
seg000:EE3A		    retn
seg000:EE3B ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EE3B
seg000:EE3B loc_FEE3B:				    ; CODE XREF: sub_FEC85+179j
seg000:EE3B		    call    sub_FEFAE
seg000:EE3E		    xor	    ah,	ah
seg000:EE40		    retn
seg000:EE40 sub_FEC85	    endp
seg000:EE40
seg000:EE41
seg000:EE41 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:EE41
seg000:EE41
seg000:EE41 sub_FEE41	    proc near		    ; CODE XREF: sub_FEC85+72p
seg000:EE41					    ; sub_FEC85+125p
seg000:EE41					    ; sub_FEC85+134p
seg000:EE41					    ; sub_FEC85+141p ...
seg000:EE41		    push    dx
seg000:EE42		    push    cx
seg000:EE43		    mov	    dx,	3F4h
seg000:EE46		    xor	    cx,	cx
seg000:EE48
seg000:EE48 loc_FEE48:				    ; CODE XREF: sub_FEE41+Cj
seg000:EE48		    in	    al,	dx	    ; Floppy: main status reg bits:
seg000:EE48					    ; 0-3: diskette busy
seg000:EE48					    ; 4: 1=cntrlr busy
seg000:EE48					    ; 5: 1=non-DMA mode
seg000:EE48					    ; 6: Data dir: 1=cntrlr to CPU
seg000:EE48					    ; 7: 1=OK to snd/rcv cmd or	data
seg000:EE49		    test    al,	40h
seg000:EE4B		    jz	    short loc_FEE59
seg000:EE4D		    loop    loc_FEE48
seg000:EE4F
seg000:EE4F loc_FEE4F:				    ; CODE XREF: sub_FEE41+21j
seg000:EE4F		    or	    byte ptr ds:41h, 80h
seg000:EE54		    pop	    cx
seg000:EE55		    pop	    dx
seg000:EE56		    pop	    ax
seg000:EE57		    stc
seg000:EE58		    retn
seg000:EE59 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EE59
seg000:EE59 loc_FEE59:				    ; CODE XREF: sub_FEE41+Aj
seg000:EE59		    xor	    cx,	cx
seg000:EE5B
seg000:EE5B loc_FEE5B:				    ; CODE XREF: sub_FEE41+1Fj
seg000:EE5B		    in	    al,	dx
seg000:EE5C		    test    al,	80h
seg000:EE5E		    jnz	    short loc_FEE64
seg000:EE60		    loop    loc_FEE5B
seg000:EE62		    jmp	    short loc_FEE4F
seg000:EE64 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EE64
seg000:EE64 loc_FEE64:				    ; CODE XREF: sub_FEE41+1Dj
seg000:EE64		    mov	    al,	ah
seg000:EE66		    mov	    dl,	0F5h ; 'õ'
seg000:EE68		    out	    dx,	al
seg000:EE69		    pop	    cx
seg000:EE6A		    pop	    dx
seg000:EE6B		    retn
seg000:EE6B sub_FEE41	    endp
seg000:EE6B
seg000:EE6C
seg000:EE6C ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:EE6C
seg000:EE6C
seg000:EE6C sub_FEE6C	    proc near		    ; CODE XREF: diskette_io+13p
seg000:EE6C					    ; sub_FEC85+78p
seg000:EE6C					    ; sub_FEC85+7Ep
seg000:EE6C					    ; sub_FEC85+A4p ...
seg000:EE6C		    push    ds
seg000:EE6D		    sub	    ax,	ax
seg000:EE6F		    mov	    ds,	ax
seg000:EE71		    lds	    si,	ds:78h
seg000:EE75		    shr	    bx,	1
seg000:EE77		    mov	    ah,	[bx+si]
seg000:EE79		    pop	    ds
seg000:EE7A		    jb	    short sub_FEE41
seg000:EE7C		    retn
seg000:EE7C sub_FEE6C	    endp
seg000:EE7C
seg000:EE7D
seg000:EE7D ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:EE7D
seg000:EE7D
seg000:EE7D sub_FEE7D	    proc near		    ; CODE XREF: seg000:E525p
seg000:EE7D					    ; seg000:E52Cp
seg000:EE7D					    ; sub_FEC85+116p
seg000:EE7D		    mov	    al,	1
seg000:EE7F		    push    cx
seg000:EE80		    mov	    cl,	dl
seg000:EE82		    rol	    al,	cl
seg000:EE84		    pop	    cx
seg000:EE85		    test    ds:3Eh, al
seg000:EE89		    jnz	    short loc_FEE9E
seg000:EE8B		    or	    ds:3Eh, al
seg000:EE8F		    mov	    ah,	7
seg000:EE91		    call    sub_FEE41
seg000:EE94		    mov	    ah,	dl
seg000:EE96		    call    sub_FEE41
seg000:EE99		    call    sub_FEF12
seg000:EE9C		    jb	    short locret_FEEC7
seg000:EE9E
seg000:EE9E loc_FEE9E:				    ; CODE XREF: sub_FEE7D+Cj
seg000:EE9E		    mov	    ah,	0Fh
seg000:EEA0		    call    sub_FEE41
seg000:EEA3		    mov	    ah,	dl
seg000:EEA5		    call    sub_FEE41
seg000:EEA8		    mov	    ah,	ch
seg000:EEAA		    call    sub_FEE41
seg000:EEAD		    call    sub_FEF12
seg000:EEB0		    pushf
seg000:EEB1		    mov	    bx,	12h
seg000:EEB4		    call    sub_FEE6C
seg000:EEB7		    push    cx
seg000:EEB8
seg000:EEB8 loc_FEEB8:				    ; CODE XREF: sub_FEE7D+46j
seg000:EEB8		    mov	    cx,	226h
seg000:EEBB		    or	    ah,	ah
seg000:EEBD		    jz	    short loc_FEEC5
seg000:EEBF
seg000:EEBF loc_FEEBF:				    ; CODE XREF: sub_FEE7D:loc_FEEBFj
seg000:EEBF		    loop    loc_FEEBF
seg000:EEC1		    dec	    ah
seg000:EEC3		    jmp	    short loc_FEEB8
seg000:EEC5 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EEC5
seg000:EEC5 loc_FEEC5:				    ; CODE XREF: sub_FEE7D+40j
seg000:EEC5		    pop	    cx
seg000:EEC6		    popf
seg000:EEC7
seg000:EEC7 locret_FEEC7:			    ; CODE XREF: sub_FEE7D+1Fj
seg000:EEC7		    retn
seg000:EEC7 sub_FEE7D	    endp
seg000:EEC7
seg000:EEC8
seg000:EEC8 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:EEC8
seg000:EEC8
seg000:EEC8 sub_FEEC8	    proc near		    ; CODE XREF: sub_FEC85:loc_FED0Dp
seg000:EEC8					    ; sub_FEC85+9Ap
seg000:EEC8					    ; sub_FEC85+C0p
seg000:EEC8		    push    cx
seg000:EEC9		    cli
seg000:EECA		    out	    0Ch, al	    ; DMA controller, 8237A-5.
seg000:EECA					    ; clear byte pointer flip-flop.
seg000:EECC		    push    ax
seg000:EECD		    pop	    ax
seg000:EECE		    out	    0Bh, al	    ; DMA 8237A-5. mode	register bits:
seg000:EECE					    ; 0-1: channel (00=0; 01=1;	10=2; 11=3)
seg000:EECE					    ; 2-3: transfer type (00=verify=Nop; 01=write; 10=read)
seg000:EECE					    ; 4: 1=enable auto-initialization
seg000:EECE					    ; 5: 1=address increment; 0=address	decrement
seg000:EECE					    ; 6-7: 00=demand mode; 01=single; 10=block;	11=cascade
seg000:EED0		    mov	    ax,	es
seg000:EED2		    mov	    cl,	4
seg000:EED4		    rol	    ax,	cl
seg000:EED6		    mov	    ch,	al
seg000:EED8		    and	    al,	0F0h
seg000:EEDA		    add	    ax,	bx
seg000:EEDC		    jnb	    short loc_FEEE0
seg000:EEDE		    inc	    ch
seg000:EEE0
seg000:EEE0 loc_FEEE0:				    ; CODE XREF: sub_FEEC8+14j
seg000:EEE0		    push    ax
seg000:EEE1		    out	    4, al	    ; DMA controller, 8237A-5.
seg000:EEE1					    ; channel 2	base address
seg000:EEE1					    ; (also sets current address)
seg000:EEE3		    mov	    al,	ah
seg000:EEE5		    out	    4, al	    ; DMA controller, 8237A-5.
seg000:EEE5					    ; channel 2	base address
seg000:EEE5					    ; (also sets current address)
seg000:EEE7		    mov	    al,	ch
seg000:EEE9		    and	    al,	0Fh
seg000:EEEB		    out	    81h, al	    ; DMA page register	74LS612:
seg000:EEEB					    ; Channel 2	(diskette DMA)	(address bits 16-23)
seg000:EEED		    mov	    ah,	dh
seg000:EEEF		    sub	    al,	al
seg000:EEF1		    shr	    ax,	1
seg000:EEF3		    push    ax
seg000:EEF4		    mov	    bx,	6
seg000:EEF7		    call    sub_FEE6C
seg000:EEFA		    mov	    cl,	ah
seg000:EEFC		    pop	    ax
seg000:EEFD		    shl	    ax,	cl
seg000:EEFF		    dec	    ax
seg000:EF00		    push    ax
seg000:EF01		    out	    5, al	    ; DMA controller, 8237A-5.
seg000:EF01					    ; channel 2	base address and word count
seg000:EF03		    mov	    al,	ah
seg000:EF05		    out	    5, al	    ; DMA controller, 8237A-5.
seg000:EF05					    ; channel 2	base address and word count
seg000:EF07		    sti
seg000:EF08		    pop	    cx
seg000:EF09		    pop	    ax
seg000:EF0A		    add	    ax,	cx
seg000:EF0C		    pop	    cx
seg000:EF0D		    mov	    al,	2
seg000:EF0F		    out	    0Ah, al	    ; DMA controller, 8237A-5.
seg000:EF0F					    ; single mask bit register
seg000:EF0F					    ; 0-1: select channel (00=0; 01=1; 10=2; 11=3)
seg000:EF0F					    ; 2: 1=set mask for	channel; 0=clear mask (enable)
seg000:EF11		    retn
seg000:EF11 sub_FEEC8	    endp
seg000:EF11
seg000:EF12
seg000:EF12 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:EF12
seg000:EF12
seg000:EF12 sub_FEF12	    proc near		    ; CODE XREF: sub_FEC85+60p
seg000:EF12					    ; sub_FEE7D+1Cp
seg000:EF12					    ; sub_FEE7D+30p
seg000:EF12		    call    sub_FEF33
seg000:EF15		    jb	    short locret_FEF2B
seg000:EF17		    mov	    ah,	8
seg000:EF19		    call    sub_FEE41
seg000:EF1C		    call    sub_FEF69
seg000:EF1F		    jb	    short locret_FEF2B
seg000:EF21		    mov	    al,	ds:42h
seg000:EF24		    and	    al,	60h
seg000:EF26		    cmp	    al,	60h ; '`'
seg000:EF28		    jz	    short loc_FEF2C
seg000:EF2A		    clc
seg000:EF2B
seg000:EF2B locret_FEF2B:			    ; CODE XREF: sub_FEF12+3j
seg000:EF2B					    ; sub_FEF12+Dj
seg000:EF2B		    retn
seg000:EF2C ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EF2C
seg000:EF2C loc_FEF2C:				    ; CODE XREF: sub_FEF12+16j
seg000:EF2C		    or	    byte ptr ds:41h, 40h
seg000:EF31		    stc
seg000:EF32		    retn
seg000:EF32 sub_FEF12	    endp
seg000:EF32
seg000:EF33
seg000:EF33 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:EF33
seg000:EF33
seg000:EF33 sub_FEF33	    proc near		    ; CODE XREF: sub_FEC85+168p
seg000:EF33					    ; sub_FEF12p
seg000:EF33		    sti
seg000:EF34		    push    bx
seg000:EF35		    push    cx
seg000:EF36		    mov	    bl,	2
seg000:EF38		    xor	    cx,	cx
seg000:EF3A
seg000:EF3A loc_FEF3A:				    ; CODE XREF: sub_FEF33+Ej
seg000:EF3A					    ; sub_FEF33+12j
seg000:EF3A		    test    byte ptr ds:3Eh, 80h
seg000:EF3F		    jnz	    short loc_FEF4D
seg000:EF41		    loop    loc_FEF3A
seg000:EF43		    dec	    bl
seg000:EF45		    jnz	    short loc_FEF3A
seg000:EF47		    or	    byte ptr ds:41h, 80h
seg000:EF4C		    stc
seg000:EF4D
seg000:EF4D loc_FEF4D:				    ; CODE XREF: sub_FEF33+Cj
seg000:EF4D		    pushf
seg000:EF4E		    and	    byte ptr ds:3Eh, 7Fh
seg000:EF53		    popf
seg000:EF54		    pop	    cx
seg000:EF55		    pop	    bx
seg000:EF56		    retn
seg000:EF56 sub_FEF33	    endp
seg000:EF56
seg000:EF57 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EF57
seg000:EF57 disk_int:				    ; DATA XREF: seg000:FEFFo
seg000:EF57		    sti
seg000:EF58		    push    ds
seg000:EF59		    push    ax
seg000:EF5A		    call    dds
seg000:EF5D		    or	    byte ptr ds:3Eh, 80h
seg000:EF62		    mov	    al,	20h ; ' '
seg000:EF64		    out	    20h, al	    ; Interrupt	controller, 8259A.
seg000:EF66		    pop	    ax
seg000:EF67		    pop	    ds
seg000:EF68		    iret
seg000:EF69
seg000:EF69 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:EF69
seg000:EF69
seg000:EF69 sub_FEF69	    proc near		    ; CODE XREF: sub_FEC85+16Dp
seg000:EF69					    ; sub_FEC85:loc_FEE37p
seg000:EF69					    ; sub_FEF12+Ap
seg000:EF69		    cld
seg000:EF6A		    mov	    di,	42h ; 'B'
seg000:EF6D		    push    cx
seg000:EF6E		    push    dx
seg000:EF6F		    push    bx
seg000:EF70		    mov	    bl,	7
seg000:EF72
seg000:EF72 loc_FEF72:				    ; CODE XREF: sub_FEF69+3Dj
seg000:EF72		    xor	    cx,	cx
seg000:EF74		    mov	    dx,	3F4h
seg000:EF77
seg000:EF77 loc_FEF77:				    ; CODE XREF: sub_FEF69+13j
seg000:EF77		    in	    al,	dx	    ; Floppy: main status reg bits:
seg000:EF77					    ; 0-3: diskette busy
seg000:EF77					    ; 4: 1=cntrlr busy
seg000:EF77					    ; 5: 1=non-DMA mode
seg000:EF77					    ; 6: Data dir: 1=cntrlr to CPU
seg000:EF77					    ; 7: 1=OK to snd/rcv cmd or	data
seg000:EF78		    test    al,	80h
seg000:EF7A		    jnz	    short loc_FEF88
seg000:EF7C		    loop    loc_FEF77
seg000:EF7E		    or	    byte ptr ds:41h, 80h
seg000:EF83
seg000:EF83 loc_FEF83:				    ; CODE XREF: sub_FEF69+29j
seg000:EF83		    stc
seg000:EF84		    pop	    bx
seg000:EF85		    pop	    dx
seg000:EF86		    pop	    cx
seg000:EF87		    retn
seg000:EF88 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EF88
seg000:EF88 loc_FEF88:				    ; CODE XREF: sub_FEF69+11j
seg000:EF88		    in	    al,	dx
seg000:EF89		    test    al,	40h
seg000:EF8B		    jnz	    short loc_FEF94
seg000:EF8D
seg000:EF8D loc_FEF8D:				    ; CODE XREF: sub_FEF69+3Fj
seg000:EF8D		    or	    byte ptr ds:41h, 20h
seg000:EF92		    jmp	    short loc_FEF83
seg000:EF94 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EF94
seg000:EF94 loc_FEF94:				    ; CODE XREF: sub_FEF69+22j
seg000:EF94		    inc	    dx
seg000:EF95		    in	    al,	dx
seg000:EF96		    mov	    [di], al
seg000:EF98		    inc	    di
seg000:EF99		    mov	    cx,	0Ah
seg000:EF9C
seg000:EF9C loc_FEF9C:				    ; CODE XREF: sub_FEF69:loc_FEF9Cj
seg000:EF9C		    loop    loc_FEF9C
seg000:EF9E		    dec	    dx
seg000:EF9F		    in	    al,	dx
seg000:EFA0		    test    al,	10h
seg000:EFA2		    jz	    short loc_FEFAA
seg000:EFA4		    dec	    bl
seg000:EFA6		    jnz	    short loc_FEF72
seg000:EFA8		    jmp	    short loc_FEF8D
seg000:EFAA ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EFAA
seg000:EFAA loc_FEFAA:				    ; CODE XREF: sub_FEF69+39j
seg000:EFAA		    pop	    bx
seg000:EFAB		    pop	    dx
seg000:EFAC		    pop	    cx
seg000:EFAD		    retn
seg000:EFAD sub_FEF69	    endp
seg000:EFAD
seg000:EFAE
seg000:EFAE ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:EFAE
seg000:EFAE
seg000:EFAE sub_FEFAE	    proc near		    ; CODE XREF: sub_FEC85+1AEp
seg000:EFAE					    ; sub_FEC85:loc_FEE3Bp
seg000:EFAE		    mov	    al,	ds:45h
seg000:EFB1		    cmp	    al,	ch
seg000:EFB3		    mov	    al,	ds:47h
seg000:EFB6		    jz	    short loc_FEFC2
seg000:EFB8		    mov	    bx,	8
seg000:EFBB		    call    sub_FEE6C
seg000:EFBE		    mov	    al,	ah
seg000:EFC0		    inc	    al
seg000:EFC2
seg000:EFC2 loc_FEFC2:				    ; CODE XREF: sub_FEFAE+8j
seg000:EFC2		    sub	    al,	cl
seg000:EFC4		    retn
seg000:EFC4 sub_FEFAE	    endp
seg000:EFC4
seg000:EFC4 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EFC5		    db 0FFh
seg000:EFC6		    db 0FFh
seg000:EFC7 disk_base	    db 11001111b	    ; DATA XREF: seg000:E6F7o
seg000:EFC7					    ; seg000:FF1Fo
seg000:EFC8		    db	  2
seg000:EFC9		    db	25h ; %
seg000:EFCA		    db	  2
seg000:EFCB		    db	  8
seg000:EFCC		    db	2Ah ; *
seg000:EFCD		    db 0FFh
seg000:EFCE		    db	50h ; P
seg000:EFCF		    db 0F6h ; ö
seg000:EFD0		    db	19h
seg000:EFD1		    db	  4
seg000:EFD2
seg000:EFD2 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:EFD2
seg000:EFD2
seg000:EFD2 printer_io	    proc far		    ; DATA XREF: seg000:FF11o
seg000:EFD2		    sti
seg000:EFD3		    push    ds
seg000:EFD4		    push    dx
seg000:EFD5		    push    si
seg000:EFD6		    push    cx
seg000:EFD7		    push    bx
seg000:EFD8		    call    dds
seg000:EFDB		    mov	    si,	dx
seg000:EFDD		    mov	    bl,	[si+78h]
seg000:EFE0		    shl	    si,	1
seg000:EFE2		    mov	    dx,	[si+8]
seg000:EFE5		    or	    dx,	dx
seg000:EFE7		    jz	    short loc_FEFF5
seg000:EFE9		    or	    ah,	ah
seg000:EFEB		    jz	    short loc_FEFFB
seg000:EFED		    dec	    ah
seg000:EFEF		    jz	    short loc_FF030
seg000:EFF1		    dec	    ah
seg000:EFF3		    jz	    short loc_FF01D
seg000:EFF5
seg000:EFF5 loc_FEFF5:				    ; CODE XREF: printer_io+15j
seg000:EFF5					    ; printer_io+5Cj
seg000:EFF5		    pop	    bx
seg000:EFF6		    pop	    cx
seg000:EFF7		    pop	    si
seg000:EFF8		    pop	    dx
seg000:EFF9		    pop	    ds
seg000:EFFA		    iret
seg000:EFFB ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:EFFB
seg000:EFFB loc_FEFFB:				    ; CODE XREF: printer_io+19j
seg000:EFFB		    push    ax
seg000:EFFC		    out	    dx,	al
seg000:EFFD		    inc	    dx
seg000:EFFE
seg000:EFFE loc_FEFFE:				    ; CODE XREF: printer_io+39j
seg000:EFFE		    sub	    cx,	cx
seg000:F000
seg000:F000 loc_FF000:				    ; CODE XREF: printer_io+35j
seg000:F000		    in	    al,	dx
seg000:F001		    mov	    ah,	al
seg000:F003		    test    al,	80h
seg000:F005		    jnz	    short loc_FF015
seg000:F007		    loop    loc_FF000
seg000:F009		    dec	    bl
seg000:F00B		    jnz	    short loc_FEFFE
seg000:F00D		    or	    ah,	1
seg000:F010		    and	    ah,	0F9h
seg000:F013		    jmp	    short loc_FF028
seg000:F015 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F015
seg000:F015 loc_FF015:				    ; CODE XREF: printer_io+33j
seg000:F015		    mov	    al,	0Dh
seg000:F017		    inc	    dx
seg000:F018		    out	    dx,	al
seg000:F019		    mov	    al,	0Ch
seg000:F01B		    out	    dx,	al
seg000:F01C		    pop	    ax
seg000:F01D
seg000:F01D loc_FF01D:				    ; CODE XREF: printer_io+21j
seg000:F01D		    push    ax
seg000:F01E
seg000:F01E loc_FF01E:				    ; CODE XREF: printer_io+6Dj
seg000:F01E		    mov	    dx,	[si+8]
seg000:F021		    inc	    dx
seg000:F022		    in	    al,	dx
seg000:F023		    mov	    ah,	al
seg000:F025		    and	    ah,	0F8h
seg000:F028
seg000:F028 loc_FF028:				    ; CODE XREF: printer_io+41j
seg000:F028		    pop	    dx
seg000:F029		    mov	    al,	dl
seg000:F02B		    xor	    ah,	48h
seg000:F02E		    jmp	    short loc_FEFF5
seg000:F030 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F030
seg000:F030 loc_FF030:				    ; CODE XREF: printer_io+1Dj
seg000:F030		    push    ax
seg000:F031		    inc	    dx
seg000:F032		    inc	    dx
seg000:F033		    mov	    al,	8
seg000:F035		    out	    dx,	al
seg000:F036		    mov	    ax,	3E8h
seg000:F039
seg000:F039 loc_FF039:				    ; CODE XREF: printer_io+68j
seg000:F039		    dec	    ax
seg000:F03A		    jnz	    short loc_FF039
seg000:F03C		    mov	    al,	0Ch
seg000:F03E		    out	    dx,	al
seg000:F03F		    jmp	    short loc_FF01E
seg000:F03F printer_io	    endp
seg000:F03F
seg000:F03F ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F041		    dw offset c24
seg000:F043		    db 0FFh
seg000:F044		    db 0FFh
seg000:F045 int_10_jmp_tbl  dw offset int_10_00_set_mode ; DATA	XREF: seg000:F09Cr
seg000:F047		    dw offset int_10_01_set_ctype
seg000:F049		    dw offset int_10_02_set_cpos
seg000:F04B		    dw offset int_10_03_read_cursor
seg000:F04D		    dw offset int_10_04_read_lpen
seg000:F04F		    dw offset int_10_05_act_disp_page
seg000:F051		    dw offset int_10_06_scroll_up
seg000:F053		    dw offset int_10_07_scroll_down
seg000:F055		    dw offset int_10_08_read_ac_current
seg000:F057		    dw offset int_10_09_write_ac_current
seg000:F059		    dw offset int_10_0a_wirte_c_current
seg000:F05B		    dw offset int_10_0b_set_color
seg000:F05D		    dw offset int_10_0c_write_dot
seg000:F05F		    dw offset int_10_0d_read_dot
seg000:F061		    dw offset int_10_0e_write_tty
seg000:F063		    dw offset int_10_0f_video_state
seg000:F065 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F065
seg000:F065 video_io:				    ; DATA XREF: seg000:off_FFF03o
seg000:F065		    sti
seg000:F066		    cld
seg000:F067		    push    es
seg000:F068		    push    ds
seg000:F069		    push    dx
seg000:F06A		    push    cx
seg000:F06B		    push    bx
seg000:F06C		    push    si
seg000:F06D		    push    di
seg000:F06E		    push    ax
seg000:F06F		    mov	    al,	ah
seg000:F071		    xor	    ah,	ah
seg000:F073		    shl	    ax,	1
seg000:F075		    mov	    si,	ax
seg000:F077		    cmp	    ax,	20h ; ' '
seg000:F07A		    jb	    short loc_FF080
seg000:F07C		    pop	    ax
seg000:F07D		    jmp	    loc_FF1C5
seg000:F080 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F080
seg000:F080 loc_FF080:				    ; CODE XREF: seg000:F07Aj
seg000:F080		    call    dds
seg000:F083		    mov	    ax,	0B800h
seg000:F086		    mov	    di,	ds:10h
seg000:F08A		    and	    di,	30h
seg000:F08E		    cmp	    di,	30h ; '0'
seg000:F091		    jnz	    short loc_FF095
seg000:F093		    mov	    ah,	0B0h ; '°'
seg000:F095
seg000:F095 loc_FF095:				    ; CODE XREF: seg000:F091j
seg000:F095		    mov	    es,	ax
seg000:F097		    pop	    ax
seg000:F098		    mov	    ah,	ds:49h
seg000:F09C		    jmp	    cs:int_10_jmp_tbl[si]
seg000:F09C ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F0A1		    db 0FFh
seg000:F0A2		    db 0FFh
seg000:F0A3		    db 0FFh
seg000:F0A4 video_parms	    db	38h ; 8		    ; DATA XREF: seg000:FF1Do
seg000:F0A5		    db	28h ; (
seg000:F0A6		    db	2Dh ; -
seg000:F0A7		    db	0Ah
seg000:F0A8		    db	1Fh
seg000:F0A9		    db	  6
seg000:F0AA		    db	19h
seg000:F0AB		    db	1Ch
seg000:F0AC		    db	  2
seg000:F0AD		    db	  7
seg000:F0AE		    db	  6
seg000:F0AF		    db	  7
seg000:F0B0		    db	  0
seg000:F0B1		    db	  0
seg000:F0B2		    db	  0
seg000:F0B3		    db	  0
seg000:F0B4		    db	71h ; q
seg000:F0B5		    db	50h ; P
seg000:F0B6		    db	5Ah ; Z
seg000:F0B7		    db	0Ah
seg000:F0B8		    db	1Fh
seg000:F0B9		    db	  6
seg000:F0BA		    db	19h
seg000:F0BB		    db	1Ch
seg000:F0BC		    db	  2
seg000:F0BD		    db	  7
seg000:F0BE		    db	  6
seg000:F0BF		    db	  7
seg000:F0C0		    db	  0
seg000:F0C1		    db	  0
seg000:F0C2		    db	  0
seg000:F0C3		    db	  0
seg000:F0C4		    db	38h ; 8
seg000:F0C5		    db	28h ; (
seg000:F0C6		    db	2Dh ; -
seg000:F0C7		    db	0Ah
seg000:F0C8		    db	7Fh ; 
seg000:F0C9		    db	  6
seg000:F0CA		    db	64h ; d
seg000:F0CB		    db	70h ; p
seg000:F0CC		    db	  2
seg000:F0CD		    db	  1
seg000:F0CE		    db	  6
seg000:F0CF		    db	  7
seg000:F0D0		    db	  0
seg000:F0D1		    db	  0
seg000:F0D2		    db	  0
seg000:F0D3		    db	  0
seg000:F0D4		    db	61h ; a
seg000:F0D5		    db	50h ; P
seg000:F0D6		    db	52h ; R
seg000:F0D7		    db	0Fh
seg000:F0D8		    db	19h
seg000:F0D9		    db	  6
seg000:F0DA		    db	19h
seg000:F0DB		    db	19h
seg000:F0DC		    db	  2
seg000:F0DD		    db	0Dh
seg000:F0DE		    db	0Bh
seg000:F0DF		    db	0Ch
seg000:F0E0		    db	  0
seg000:F0E1		    db	  0
seg000:F0E2		    db	  0
seg000:F0E3		    db	  0
seg000:F0E4		    db	  0
seg000:F0E5		    db	  8
seg000:F0E6		    db	  0
seg000:F0E7		    db	10h
seg000:F0E8		    db	  0
seg000:F0E9		    db	40h ; @
seg000:F0EA		    db	  0
seg000:F0EB		    db	40h ; @
seg000:F0EC		    db	28h ; (
seg000:F0ED		    db	28h ; (
seg000:F0EE		    db	50h ; P
seg000:F0EF		    db	50h ; P
seg000:F0F0		    db	28h ; (
seg000:F0F1		    db	28h ; (
seg000:F0F2		    db	50h ; P
seg000:F0F3		    db	50h ; P
seg000:F0F4		    db	2Ch ; ,
seg000:F0F5		    db	28h ; (
seg000:F0F6		    db	2Dh ; -
seg000:F0F7		    db	29h ; )
seg000:F0F8		    db	2Ah ; *
seg000:F0F9		    db	2Eh ; .
seg000:F0FA		    db	1Eh
seg000:F0FB		    db	29h ; )
seg000:F0FC ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F0FC
seg000:F0FC int_10_00_set_mode:			    ; CODE XREF: seg000:F09Cj
seg000:F0FC					    ; DATA XREF: seg000:int_10_jmp_tblo
seg000:F0FC		    mov	    dx,	3D4h	    ; address of color card
seg000:F0FF		    mov	    bl,	0	    ; mode set for color card
seg000:F101		    cmp	    di,	30h ; '0'   ; is bw card installed
seg000:F104		    jnz	    short m8	    ; ok with color
seg000:F106		    mov	    al,	7	    ; indicate bw card mode
seg000:F108		    mov	    dl,	0B4h ; '´'  ; address of bw card (0x03b4)
seg000:F10A		    inc	    bl		    ; mode set for bw card
seg000:F10C
seg000:F10C m8:					    ; CODE XREF: seg000:F104j
seg000:F10C		    mov	    ah,	al	    ; save mode	in ah
seg000:F10E		    mov	    ds:p400.crt_mode, al ; save	in global variable
seg000:F111		    mov	    ds:p400.addr_6845, dx ; save address of base
seg000:F115		    push    ds		    ; save pointer to data segment
seg000:F116		    push    ax		    ; save mode
seg000:F117		    push    dx		    ; save output port value
seg000:F118		    add	    dx,	4	    ; point to control register
seg000:F11B		    mov	    al,	bl	    ; get mode set for card
seg000:F11D		    out	    dx,	al	    ; reset video
seg000:F11E		    pop	    dx		    ; back to base register
seg000:F11F		    sub	    ax,	ax	    ; setup for	abs 0 segment
seg000:F121		    mov	    ds,	ax	    ; establish	vector table addressing
seg000:F123		    lds	    bx,	ds:74h	    ; get pointer to video params
seg000:F127		    pop	    ax		    ; recover parms
seg000:F128		    mov	    cx,	10h	    ; length of	each row of table
seg000:F12B		    cmp	    ah,	2
seg000:F12E		    jb	    short loc_FF140
seg000:F130		    add	    bx,	cx
seg000:F132		    cmp	    ah,	4
seg000:F135		    jb	    short loc_FF140
seg000:F137		    add	    bx,	cx
seg000:F139		    cmp	    ah,	7
seg000:F13C		    jb	    short loc_FF140
seg000:F13E		    add	    bx,	cx
seg000:F140
seg000:F140 loc_FF140:				    ; CODE XREF: seg000:F12Ej
seg000:F140					    ; seg000:F135j
seg000:F140					    ; seg000:F13Cj
seg000:F140		    push    ax
seg000:F141		    xor	    ah,	ah
seg000:F143
seg000:F143 loc_FF143:				    ; CODE XREF: seg000:F14Ej
seg000:F143		    mov	    al,	ah
seg000:F145		    out	    dx,	al
seg000:F146		    inc	    dx
seg000:F147		    inc	    ah
seg000:F149		    mov	    al,	[bx]
seg000:F14B		    out	    dx,	al
seg000:F14C		    inc	    bx
seg000:F14D		    dec	    dx
seg000:F14E		    loop    loc_FF143
seg000:F150		    pop	    ax
seg000:F151		    pop	    ds
seg000:F152		    xor	    di,	di
seg000:F154		    mov	    ds:4Eh, di
seg000:F158		    mov	    byte ptr ds:62h, 0
seg000:F15D		    mov	    cx,	2000h
seg000:F160		    cmp	    ah,	4
seg000:F163		    jb	    short loc_FF170
seg000:F165		    cmp	    ah,	7
seg000:F168		    jz	    short loc_FF16E
seg000:F16A		    xor	    ax,	ax
seg000:F16C		    jmp	    short loc_FF173
seg000:F16E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F16E
seg000:F16E loc_FF16E:				    ; CODE XREF: seg000:F168j
seg000:F16E		    mov	    ch,	8
seg000:F170
seg000:F170 loc_FF170:				    ; CODE XREF: seg000:F163j
seg000:F170		    mov	    ax,	720h
seg000:F173
seg000:F173 loc_FF173:				    ; CODE XREF: seg000:F16Cj
seg000:F173		    rep	stosw
seg000:F175		    mov	    word ptr ds:60h, 607h
seg000:F17B		    mov	    al,	ds:49h
seg000:F17E		    xor	    ah,	ah
seg000:F180		    mov	    si,	ax
seg000:F182		    mov	    dx,	ds:63h
seg000:F186		    add	    dx,	4
seg000:F189		    mov	    al,	cs:[si-0F0Ch]
seg000:F18E		    out	    dx,	al
seg000:F18F		    mov	    ds:65h, al
seg000:F192		    mov	    al,	cs:[si-0F14h]
seg000:F197		    xor	    ah,	ah
seg000:F199		    mov	    ds:4Ah, ax
seg000:F19C		    and	    si,	0Eh
seg000:F1A0		    mov	    cx,	cs:[si-0F1Ch]
seg000:F1A5		    mov	    ds:4Ch, cx
seg000:F1A9		    mov	    cx,	8
seg000:F1AC		    mov	    di,	50h ; 'P'
seg000:F1AF		    push    ds
seg000:F1B0		    pop	    es
seg000:F1B1		    xor	    ax,	ax
seg000:F1B3		    rep	stosw
seg000:F1B5		    inc	    dx
seg000:F1B6		    mov	    al,	30h ; '0'
seg000:F1B8		    cmp	    byte ptr ds:49h, 6
seg000:F1BD		    jnz	    short loc_FF1C1
seg000:F1BF		    mov	    al,	3Fh ; '?'
seg000:F1C1
seg000:F1C1 loc_FF1C1:				    ; CODE XREF: seg000:F1BDj
seg000:F1C1		    out	    dx,	al
seg000:F1C2		    mov	    ds:66h, al
seg000:F1C5
seg000:F1C5 loc_FF1C5:				    ; CODE XREF: seg000:F07Dj
seg000:F1C5					    ; seg000:F1D6j
seg000:F1C5					    ; seg000:loc_FF204j
seg000:F1C5					    ; seg000:F237j ...
seg000:F1C5		    pop	    di
seg000:F1C6		    pop	    si
seg000:F1C7		    pop	    bx
seg000:F1C8
seg000:F1C8 loc_FF1C8:				    ; CODE XREF: seg000:F282j
seg000:F1C8		    pop	    cx
seg000:F1C9		    pop	    dx
seg000:F1CA		    pop	    ds
seg000:F1CB		    pop	    es
seg000:F1CC		    iret
seg000:F1CD ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F1CD
seg000:F1CD int_10_01_set_ctype:		    ; CODE XREF: seg000:F09Cj
seg000:F1CD					    ; DATA XREF: seg000:F047o
seg000:F1CD		    mov	    ah,	0Ah
seg000:F1CF		    mov	    ds:60h, cx
seg000:F1D3		    call    sub_FF1D8
seg000:F1D6		    jmp	    short loc_FF1C5
seg000:F1D8
seg000:F1D8 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:F1D8
seg000:F1D8
seg000:F1D8 sub_FF1D8	    proc near		    ; CODE XREF: seg000:F1D3p
seg000:F1D8					    ; sub_FF206+Dp
seg000:F1D8					    ; seg000:F22Bp
seg000:F1D8		    mov	    dx,	ds:63h
seg000:F1DC		    mov	    al,	ah
seg000:F1DE		    out	    dx,	al
seg000:F1DF		    inc	    dx
seg000:F1E0		    mov	    al,	ch
seg000:F1E2		    out	    dx,	al
seg000:F1E3		    dec	    dx
seg000:F1E4		    mov	    al,	ah
seg000:F1E6		    inc	    al
seg000:F1E8		    out	    dx,	al
seg000:F1E9		    inc	    dx
seg000:F1EA		    mov	    al,	cl
seg000:F1EC		    out	    dx,	al
seg000:F1ED		    retn
seg000:F1ED sub_FF1D8	    endp
seg000:F1ED
seg000:F1EE ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F1EE
seg000:F1EE int_10_02_set_cpos:			    ; CODE XREF: seg000:F09Cj
seg000:F1EE					    ; DATA XREF: seg000:F049o
seg000:F1EE		    mov	    cl,	bh
seg000:F1F0		    xor	    ch,	ch
seg000:F1F2		    shl	    cx,	1
seg000:F1F4		    mov	    si,	cx
seg000:F1F6		    mov	    [si+50h], dx
seg000:F1F9		    cmp	    ds:62h, bh
seg000:F1FD		    jnz	    short loc_FF204
seg000:F1FF		    mov	    ax,	dx
seg000:F201		    call    sub_FF206
seg000:F204
seg000:F204 loc_FF204:				    ; CODE XREF: seg000:F1FDj
seg000:F204		    jmp	    short loc_FF1C5
seg000:F206
seg000:F206 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:F206
seg000:F206
seg000:F206 sub_FF206	    proc near		    ; CODE XREF: seg000:F201p
seg000:F206					    ; seg000:F234p
seg000:F206		    call    sub_FF285
seg000:F209		    mov	    cx,	ax
seg000:F20B		    add	    cx,	ds:4Eh
seg000:F20F		    sar	    cx,	1
seg000:F211		    mov	    ah,	0Eh
seg000:F213		    call    sub_FF1D8
seg000:F216		    retn
seg000:F216 sub_FF206	    endp
seg000:F216
seg000:F217 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F217
seg000:F217 int_10_05_act_disp_page:		    ; CODE XREF: seg000:F09Cj
seg000:F217					    ; DATA XREF: seg000:F04Fo
seg000:F217		    mov	    ds:62h, al
seg000:F21A		    mov	    cx,	ds:4Ch
seg000:F21E		    cbw
seg000:F21F		    push    ax
seg000:F220		    mul	    cx
seg000:F222		    mov	    ds:4Eh, ax
seg000:F225		    mov	    cx,	ax
seg000:F227		    sar	    cx,	1
seg000:F229		    mov	    ah,	0Ch
seg000:F22B		    call    sub_FF1D8
seg000:F22E		    pop	    bx
seg000:F22F		    shl	    bx,	1
seg000:F231		    mov	    ax,	[bx+50h]
seg000:F234		    call    sub_FF206
seg000:F237		    jmp	    short loc_FF1C5
seg000:F239 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F239
seg000:F239 int_10_03_read_cursor:		    ; CODE XREF: seg000:F09Cj
seg000:F239					    ; DATA XREF: seg000:F04Bo
seg000:F239		    mov	    bl,	bh
seg000:F23B		    xor	    bh,	bh
seg000:F23D		    shl	    bx,	1
seg000:F23F		    mov	    dx,	[bx+50h]
seg000:F242		    mov	    cx,	ds:60h
seg000:F246		    pop	    di
seg000:F247		    pop	    si
seg000:F248		    pop	    bx
seg000:F249		    pop	    ax
seg000:F24A		    pop	    ax
seg000:F24B		    pop	    ds
seg000:F24C		    pop	    es
seg000:F24D		    iret
seg000:F24E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F24E
seg000:F24E int_10_0b_set_color:		    ; CODE XREF: seg000:F09Cj
seg000:F24E					    ; DATA XREF: seg000:F05Bo
seg000:F24E		    mov	    dx,	ds:63h
seg000:F252		    add	    dx,	5
seg000:F255		    mov	    al,	ds:66h
seg000:F258		    or	    bh,	bh
seg000:F25A		    jnz	    short loc_FF26A
seg000:F25C		    and	    al,	0E0h
seg000:F25E		    and	    bl,	1Fh
seg000:F261		    or	    al,	bl
seg000:F263
seg000:F263 loc_FF263:				    ; CODE XREF: seg000:F26Ej
seg000:F263					    ; seg000:F272j
seg000:F263		    out	    dx,	al
seg000:F264		    mov	    ds:66h, al
seg000:F267		    jmp	    loc_FF1C5
seg000:F26A ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F26A
seg000:F26A loc_FF26A:				    ; CODE XREF: seg000:F25Aj
seg000:F26A		    and	    al,	0DFh
seg000:F26C		    shr	    bl,	1
seg000:F26E		    jnb	    short loc_FF263
seg000:F270		    or	    al,	20h
seg000:F272		    jmp	    short loc_FF263
seg000:F274 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F274
seg000:F274 int_10_0f_video_state:		    ; CODE XREF: seg000:F09Cj
seg000:F274					    ; DATA XREF: seg000:F063o
seg000:F274		    mov	    ah,	ds:4Ah
seg000:F278		    mov	    al,	ds:49h
seg000:F27B		    mov	    bh,	ds:62h
seg000:F27F		    pop	    di
seg000:F280		    pop	    si
seg000:F281		    pop	    cx
seg000:F282		    jmp	    loc_FF1C8
seg000:F285
seg000:F285 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:F285
seg000:F285
seg000:F285 sub_FF285	    proc near		    ; CODE XREF: sub_FF206p
seg000:F285					    ; sub_FF2E2:loc_FF301p
seg000:F285					    ; sub_FF39E:loc_FF3B3p
seg000:F285		    push    bx
seg000:F286		    mov	    bx,	ax
seg000:F288		    mov	    al,	ah
seg000:F28A		    mul	    byte ptr ds:4Ah
seg000:F28E		    xor	    bh,	bh
seg000:F290		    add	    ax,	bx
seg000:F292		    shl	    ax,	1
seg000:F294		    pop	    bx
seg000:F295		    retn
seg000:F295 sub_FF285	    endp
seg000:F295
seg000:F296 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F296
seg000:F296 int_10_06_scroll_up:		    ; CODE XREF: seg000:F09Cj
seg000:F296					    ; DATA XREF: seg000:F051o
seg000:F296		    mov	    bl,	al
seg000:F298		    cmp	    ah,	4
seg000:F29B		    jb	    short loc_FF2A5
seg000:F29D		    cmp	    ah,	7
seg000:F2A0		    jz	    short loc_FF2A5
seg000:F2A2		    jmp	    loc_FF495
seg000:F2A5 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F2A5
seg000:F2A5 loc_FF2A5:				    ; CODE XREF: seg000:F29Bj
seg000:F2A5					    ; seg000:F2A0j
seg000:F2A5		    push    bx
seg000:F2A6		    mov	    ax,	cx
seg000:F2A8		    call    sub_FF2E2
seg000:F2AB		    jz	    short loc_FF2DE
seg000:F2AD		    add	    si,	ax
seg000:F2AF		    mov	    ah,	dh
seg000:F2B1		    sub	    ah,	bl
seg000:F2B3
seg000:F2B3 loc_FF2B3:				    ; CODE XREF: seg000:F2BCj
seg000:F2B3		    call    sub_FF328
seg000:F2B6		    add	    si,	bp
seg000:F2B8		    add	    di,	bp
seg000:F2BA		    dec	    ah
seg000:F2BC		    jnz	    short loc_FF2B3
seg000:F2BE
seg000:F2BE loc_FF2BE:				    ; CODE XREF: seg000:F2E0j
seg000:F2BE		    pop	    ax
seg000:F2BF		    mov	    al,	20h ; ' '
seg000:F2C1
seg000:F2C1 loc_FF2C1:				    ; CODE XREF: seg000:F2C8j
seg000:F2C1		    call    sub_FF331
seg000:F2C4		    add	    di,	bp
seg000:F2C6		    dec	    bl
seg000:F2C8		    jnz	    short loc_FF2C1
seg000:F2CA
seg000:F2CA loc_FF2CA:				    ; CODE XREF: seg000:F36Dj
seg000:F2CA		    call    dds
seg000:F2CD		    cmp	    byte ptr ds:49h, 7
seg000:F2D2		    jz	    short loc_FF2DB
seg000:F2D4		    mov	    al,	ds:65h
seg000:F2D7		    mov	    dx,	3D8h
seg000:F2DA		    out	    dx,	al
seg000:F2DB
seg000:F2DB loc_FF2DB:				    ; CODE XREF: seg000:F2D2j
seg000:F2DB		    jmp	    loc_FF1C5
seg000:F2DE ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F2DE
seg000:F2DE loc_FF2DE:				    ; CODE XREF: seg000:F2ABj
seg000:F2DE		    mov	    bl,	dh
seg000:F2E0		    jmp	    short loc_FF2BE
seg000:F2E2
seg000:F2E2 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:F2E2
seg000:F2E2
seg000:F2E2 sub_FF2E2	    proc near		    ; CODE XREF: seg000:F2A8p
seg000:F2E2					    ; seg000:F34Bp
seg000:F2E2		    cmp	    byte ptr ds:49h, 2
seg000:F2E7		    jb	    short loc_FF301
seg000:F2E9		    cmp	    byte ptr ds:49h, 3
seg000:F2EE		    ja	    short loc_FF301
seg000:F2F0		    push    dx
seg000:F2F1		    mov	    dx,	3DAh
seg000:F2F4		    push    ax
seg000:F2F5
seg000:F2F5 loc_FF2F5:				    ; CODE XREF: sub_FF2E2+16j
seg000:F2F5		    in	    al,	dx	    ; Video status bits:
seg000:F2F5					    ; 0: retrace.  1=display is	in vert	or horiz retrace.
seg000:F2F5					    ; 1: 1=light pen is	triggered; 0=armed
seg000:F2F5					    ; 2: 1=light pen switch is open; 0=closed
seg000:F2F5					    ; 3: 1=vertical sync pulse is occurring.
seg000:F2F6		    test    al,	8
seg000:F2F8		    jz	    short loc_FF2F5
seg000:F2FA		    mov	    al,	25h ; '%'
seg000:F2FC		    mov	    dl,	0D8h ; 'Ø'
seg000:F2FE		    out	    dx,	al
seg000:F2FF		    pop	    ax
seg000:F300		    pop	    dx
seg000:F301
seg000:F301 loc_FF301:				    ; CODE XREF: sub_FF2E2+5j
seg000:F301					    ; sub_FF2E2+Cj
seg000:F301		    call    sub_FF285
seg000:F304		    add	    ax,	ds:4Eh
seg000:F308		    mov	    di,	ax
seg000:F30A		    mov	    si,	ax
seg000:F30C		    sub	    dx,	cx
seg000:F30E		    inc	    dh
seg000:F310		    inc	    dl
seg000:F312		    xor	    ch,	ch
seg000:F314		    mov	    bp,	ds:4Ah
seg000:F318		    add	    bp,	bp
seg000:F31A		    mov	    al,	bl
seg000:F31C		    mul	    byte ptr ds:4Ah
seg000:F320		    add	    ax,	ax
seg000:F322		    push    es
seg000:F323		    pop	    ds
seg000:F324		    cmp	    bl,	0
seg000:F327		    retn
seg000:F327 sub_FF2E2	    endp
seg000:F327
seg000:F328
seg000:F328 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:F328
seg000:F328
seg000:F328 sub_FF328	    proc near		    ; CODE XREF: seg000:loc_FF2B3p
seg000:F328					    ; seg000:loc_FF356p
seg000:F328		    mov	    cl,	dl
seg000:F32A		    push    si
seg000:F32B		    push    di
seg000:F32C		    rep	movsw
seg000:F32E		    pop	    di
seg000:F32F		    pop	    si
seg000:F330		    retn
seg000:F330 sub_FF328	    endp
seg000:F330
seg000:F331
seg000:F331 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:F331
seg000:F331
seg000:F331 sub_FF331	    proc near		    ; CODE XREF: seg000:loc_FF2C1p
seg000:F331					    ; seg000:loc_FF364p
seg000:F331		    mov	    cl,	dl
seg000:F333		    push    di
seg000:F334		    rep	stosw
seg000:F336		    pop	    di
seg000:F337		    retn
seg000:F337 sub_FF331	    endp
seg000:F337
seg000:F338 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F338
seg000:F338 int_10_07_scroll_down:		    ; CODE XREF: seg000:F09Cj
seg000:F338					    ; DATA XREF: seg000:F053o
seg000:F338		    std
seg000:F339		    mov	    bl,	al
seg000:F33B		    cmp	    ah,	4
seg000:F33E		    jb	    short loc_FF348
seg000:F340		    cmp	    ah,	7
seg000:F343		    jz	    short loc_FF348
seg000:F345		    jmp	    loc_FF4EE
seg000:F348 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F348
seg000:F348 loc_FF348:				    ; CODE XREF: seg000:F33Ej
seg000:F348					    ; seg000:F343j
seg000:F348		    push    bx
seg000:F349		    mov	    ax,	dx
seg000:F34B		    call    sub_FF2E2
seg000:F34E		    jz	    short loc_FF370
seg000:F350		    sub	    si,	ax
seg000:F352		    mov	    ah,	dh
seg000:F354		    sub	    ah,	bl
seg000:F356
seg000:F356 loc_FF356:				    ; CODE XREF: seg000:F35Fj
seg000:F356		    call    sub_FF328
seg000:F359		    sub	    si,	bp
seg000:F35B		    sub	    di,	bp
seg000:F35D		    dec	    ah
seg000:F35F		    jnz	    short loc_FF356
seg000:F361
seg000:F361 loc_FF361:				    ; CODE XREF: seg000:F372j
seg000:F361		    pop	    ax
seg000:F362		    mov	    al,	20h ; ' '
seg000:F364
seg000:F364 loc_FF364:				    ; CODE XREF: seg000:F36Bj
seg000:F364		    call    sub_FF331
seg000:F367		    sub	    di,	bp
seg000:F369		    dec	    bl
seg000:F36B		    jnz	    short loc_FF364
seg000:F36D		    jmp	    loc_FF2CA
seg000:F370 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F370
seg000:F370 loc_FF370:				    ; CODE XREF: seg000:F34Ej
seg000:F370		    mov	    bl,	dh
seg000:F372		    jmp	    short loc_FF361
seg000:F374 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F374
seg000:F374 int_10_08_read_ac_current:		    ; CODE XREF: seg000:F09Cj
seg000:F374					    ; DATA XREF: seg000:F055o
seg000:F374		    cmp	    ah,	4
seg000:F377		    jb	    short loc_FF381
seg000:F379		    cmp	    ah,	7
seg000:F37C		    jz	    short loc_FF381
seg000:F37E		    jmp	    loc_FF629
seg000:F381 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F381
seg000:F381 loc_FF381:				    ; CODE XREF: seg000:F377j
seg000:F381					    ; seg000:F37Cj
seg000:F381		    call    sub_FF39E
seg000:F384		    mov	    si,	bx
seg000:F386		    mov	    dx,	ds:63h
seg000:F38A		    add	    dx,	6
seg000:F38D		    push    es
seg000:F38E		    pop	    ds
seg000:F38F
seg000:F38F loc_FF38F:				    ; CODE XREF: seg000:F392j
seg000:F38F		    in	    al,	dx
seg000:F390		    test    al,	1
seg000:F392		    jnz	    short loc_FF38F
seg000:F394		    cli
seg000:F395
seg000:F395 loc_FF395:				    ; CODE XREF: seg000:F398j
seg000:F395		    in	    al,	dx
seg000:F396		    test    al,	1
seg000:F398		    jz	    short loc_FF395
seg000:F39A		    lodsw
seg000:F39B		    jmp	    loc_FF1C5
seg000:F39E
seg000:F39E ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:F39E
seg000:F39E
seg000:F39E sub_FF39E	    proc near		    ; CODE XREF: seg000:loc_FF381p
seg000:F39E					    ; seg000:F3CAp
seg000:F39E					    ; seg000:F3FBp
seg000:F39E		    mov	    cl,	bh
seg000:F3A0		    xor	    ch,	ch
seg000:F3A2		    mov	    si,	cx
seg000:F3A4		    shl	    si,	1
seg000:F3A6		    mov	    ax,	[si+50h]
seg000:F3A9		    xor	    bx,	bx
seg000:F3AB		    jcxz    short loc_FF3B3
seg000:F3AD
seg000:F3AD loc_FF3AD:				    ; CODE XREF: sub_FF39E+13j
seg000:F3AD		    add	    bx,	ds:4Ch
seg000:F3B1		    loop    loc_FF3AD
seg000:F3B3
seg000:F3B3 loc_FF3B3:				    ; CODE XREF: sub_FF39E+Dj
seg000:F3B3		    call    sub_FF285
seg000:F3B6		    add	    bx,	ax
seg000:F3B8		    retn
seg000:F3B8 sub_FF39E	    endp
seg000:F3B8
seg000:F3B9 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F3B9
seg000:F3B9 int_10_09_write_ac_current:		    ; CODE XREF: seg000:F09Cj
seg000:F3B9					    ; DATA XREF: seg000:F057o
seg000:F3B9		    cmp	    ah,	4
seg000:F3BC		    jb	    short loc_FF3C6
seg000:F3BE		    cmp	    ah,	7
seg000:F3C1		    jz	    short loc_FF3C6
seg000:F3C3		    jmp	    loc_FF578
seg000:F3C6 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F3C6
seg000:F3C6 loc_FF3C6:				    ; CODE XREF: seg000:F3BCj
seg000:F3C6					    ; seg000:F3C1j
seg000:F3C6		    mov	    ah,	bl
seg000:F3C8		    push    ax
seg000:F3C9		    push    cx
seg000:F3CA		    call    sub_FF39E
seg000:F3CD		    mov	    di,	bx
seg000:F3CF		    pop	    cx
seg000:F3D0		    pop	    bx
seg000:F3D1
seg000:F3D1 loc_FF3D1:				    ; CODE XREF: seg000:F3E7j
seg000:F3D1		    mov	    dx,	ds:63h
seg000:F3D5		    add	    dx,	6
seg000:F3D8
seg000:F3D8 loc_FF3D8:				    ; CODE XREF: seg000:F3DBj
seg000:F3D8		    in	    al,	dx
seg000:F3D9		    test    al,	1
seg000:F3DB		    jnz	    short loc_FF3D8
seg000:F3DD		    cli
seg000:F3DE
seg000:F3DE loc_FF3DE:				    ; CODE XREF: seg000:F3E1j
seg000:F3DE		    in	    al,	dx
seg000:F3DF		    test    al,	1
seg000:F3E1		    jz	    short loc_FF3DE
seg000:F3E3		    mov	    ax,	bx
seg000:F3E5		    stosw
seg000:F3E6		    sti
seg000:F3E7		    loop    loc_FF3D1
seg000:F3E9		    jmp	    loc_FF1C5
seg000:F3EC ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F3EC
seg000:F3EC int_10_0a_wirte_c_current:		    ; CODE XREF: seg000:F09Cj
seg000:F3EC					    ; DATA XREF: seg000:F059o
seg000:F3EC		    cmp	    ah,	4
seg000:F3EF		    jb	    short loc_FF3F9
seg000:F3F1		    cmp	    ah,	7
seg000:F3F4		    jz	    short loc_FF3F9
seg000:F3F6		    jmp	    loc_FF578
seg000:F3F9 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F3F9
seg000:F3F9 loc_FF3F9:				    ; CODE XREF: seg000:F3EFj
seg000:F3F9					    ; seg000:F3F4j
seg000:F3F9		    push    ax
seg000:F3FA		    push    cx
seg000:F3FB		    call    sub_FF39E
seg000:F3FE		    mov	    di,	bx
seg000:F400		    pop	    cx
seg000:F401		    pop	    bx
seg000:F402
seg000:F402 loc_FF402:				    ; CODE XREF: seg000:F419j
seg000:F402		    mov	    dx,	ds:63h
seg000:F406		    add	    dx,	6
seg000:F409
seg000:F409 loc_FF409:				    ; CODE XREF: seg000:F40Cj
seg000:F409		    in	    al,	dx
seg000:F40A		    test    al,	1
seg000:F40C		    jnz	    short loc_FF409
seg000:F40E		    cli
seg000:F40F
seg000:F40F loc_FF40F:				    ; CODE XREF: seg000:F412j
seg000:F40F		    in	    al,	dx
seg000:F410		    test    al,	1
seg000:F412		    jz	    short loc_FF40F
seg000:F414		    mov	    al,	bl
seg000:F416		    stosb
seg000:F417		    sti
seg000:F418		    inc	    di
seg000:F419		    loop    loc_FF402
seg000:F41B		    jmp	    loc_FF1C5
seg000:F41E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F41E
seg000:F41E int_10_0d_read_dot:			    ; CODE XREF: seg000:F09Cj
seg000:F41E					    ; DATA XREF: seg000:F05Fo
seg000:F41E		    call    sub_FF452
seg000:F421		    mov	    al,	es:[si]
seg000:F424		    and	    al,	ah
seg000:F426		    shl	    al,	cl
seg000:F428		    mov	    cl,	dh
seg000:F42A		    rol	    al,	cl
seg000:F42C		    jmp	    loc_FF1C5
seg000:F42F ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F42F
seg000:F42F int_10_0c_write_dot:		    ; CODE XREF: seg000:F09Cj
seg000:F42F					    ; DATA XREF: seg000:F05Do
seg000:F42F		    push    ax
seg000:F430		    push    ax
seg000:F431		    call    sub_FF452
seg000:F434		    shr	    al,	cl
seg000:F436		    and	    al,	ah
seg000:F438		    mov	    cl,	es:[si]
seg000:F43B		    pop	    bx
seg000:F43C		    test    bl,	80h
seg000:F43F		    jnz	    short loc_FF44E
seg000:F441		    not	    ah
seg000:F443		    and	    cl,	ah
seg000:F445		    or	    al,	cl
seg000:F447
seg000:F447 loc_FF447:				    ; CODE XREF: seg000:F450j
seg000:F447		    mov	    es:[si], al
seg000:F44A		    pop	    ax
seg000:F44B		    jmp	    loc_FF1C5
seg000:F44E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F44E
seg000:F44E loc_FF44E:				    ; CODE XREF: seg000:F43Fj
seg000:F44E		    xor	    al,	cl
seg000:F450		    jmp	    short loc_FF447
seg000:F452
seg000:F452 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:F452
seg000:F452
seg000:F452 sub_FF452	    proc near		    ; CODE XREF: seg000:int_10_0d_read_dotp
seg000:F452					    ; seg000:F431p
seg000:F452		    push    bx
seg000:F453		    push    ax
seg000:F454		    mov	    al,	28h ; '('
seg000:F456		    push    dx
seg000:F457		    and	    dl,	0FEh
seg000:F45A		    mul	    dl
seg000:F45C		    pop	    dx
seg000:F45D		    test    dl,	1
seg000:F460		    jz	    short loc_FF465
seg000:F462		    add	    ax,	2000h
seg000:F465
seg000:F465 loc_FF465:				    ; CODE XREF: sub_FF452+Ej
seg000:F465		    mov	    si,	ax
seg000:F467		    pop	    ax
seg000:F468		    mov	    dx,	cx
seg000:F46A		    mov	    bx,	2C0h
seg000:F46D		    mov	    cx,	302h
seg000:F470		    cmp	    byte ptr ds:49h, 6
seg000:F475		    jb	    short loc_FF47D
seg000:F477		    mov	    bx,	180h
seg000:F47A		    mov	    cx,	703h
seg000:F47D
seg000:F47D loc_FF47D:				    ; CODE XREF: sub_FF452+23j
seg000:F47D		    and	    ch,	dl
seg000:F47F		    shr	    dx,	cl
seg000:F481		    add	    si,	dx
seg000:F483		    mov	    dh,	bh
seg000:F485		    sub	    cl,	cl
seg000:F487
seg000:F487 loc_FF487:				    ; CODE XREF: sub_FF452+3Bj
seg000:F487		    ror	    al,	1
seg000:F489		    add	    cl,	ch
seg000:F48B		    dec	    bh
seg000:F48D		    jnz	    short loc_FF487
seg000:F48F		    mov	    ah,	bl
seg000:F491		    shr	    ah,	cl
seg000:F493		    pop	    bx
seg000:F494		    retn
seg000:F494 sub_FF452	    endp
seg000:F494
seg000:F495 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F495
seg000:F495 loc_FF495:				    ; CODE XREF: seg000:F2A2j
seg000:F495		    mov	    bl,	al
seg000:F497		    mov	    ax,	cx
seg000:F499		    call    sub_FF705
seg000:F49C		    mov	    di,	ax
seg000:F49E		    sub	    dx,	cx
seg000:F4A0		    add	    dx,	101h
seg000:F4A4		    shl	    dh,	1
seg000:F4A6		    shl	    dh,	1
seg000:F4A8		    cmp	    byte ptr ds:49h, 6
seg000:F4AD		    jnb	    short loc_FF4B3
seg000:F4AF		    shl	    dl,	1
seg000:F4B1		    shl	    di,	1
seg000:F4B3
seg000:F4B3 loc_FF4B3:				    ; CODE XREF: seg000:F4ADj
seg000:F4B3		    push    es
seg000:F4B4		    pop	    ds
seg000:F4B5		    sub	    ch,	ch
seg000:F4B7		    shl	    bl,	1
seg000:F4B9		    shl	    bl,	1
seg000:F4BB		    jz	    short loc_FF4EA
seg000:F4BD		    mov	    al,	bl
seg000:F4BF		    mov	    ah,	50h ; 'P'
seg000:F4C1		    mul	    ah
seg000:F4C3		    mov	    si,	di
seg000:F4C5		    add	    si,	ax
seg000:F4C7		    mov	    ah,	dh
seg000:F4C9		    sub	    ah,	bl
seg000:F4CB
seg000:F4CB loc_FF4CB:				    ; CODE XREF: seg000:F4D8j
seg000:F4CB		    call    sub_FF54E
seg000:F4CE		    sub	    si,	1FB0h
seg000:F4D2		    sub	    di,	1FB0h
seg000:F4D6		    dec	    ah
seg000:F4D8		    jnz	    short loc_FF4CB
seg000:F4DA
seg000:F4DA loc_FF4DA:				    ; CODE XREF: seg000:F4ECj
seg000:F4DA		    mov	    al,	bh
seg000:F4DC
seg000:F4DC loc_FF4DC:				    ; CODE XREF: seg000:F4E5j
seg000:F4DC		    call    sub_FF567
seg000:F4DF		    sub	    di,	1FB0h
seg000:F4E3		    dec	    bl
seg000:F4E5		    jnz	    short loc_FF4DC
seg000:F4E7		    jmp	    loc_FF1C5
seg000:F4EA ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F4EA
seg000:F4EA loc_FF4EA:				    ; CODE XREF: seg000:F4BBj
seg000:F4EA		    mov	    bl,	dh
seg000:F4EC		    jmp	    short loc_FF4DA
seg000:F4EE ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F4EE
seg000:F4EE loc_FF4EE:				    ; CODE XREF: seg000:F345j
seg000:F4EE		    std
seg000:F4EF		    mov	    bl,	al
seg000:F4F1		    mov	    ax,	dx
seg000:F4F3		    call    sub_FF705
seg000:F4F6		    mov	    di,	ax
seg000:F4F8		    sub	    dx,	cx
seg000:F4FA		    add	    dx,	101h
seg000:F4FE		    shl	    dh,	1
seg000:F500		    shl	    dh,	1
seg000:F502		    cmp	    byte ptr ds:49h, 6
seg000:F507		    jnb	    short loc_FF50E
seg000:F509		    shl	    dl,	1
seg000:F50B		    shl	    di,	1
seg000:F50D		    inc	    di
seg000:F50E
seg000:F50E loc_FF50E:				    ; CODE XREF: seg000:F507j
seg000:F50E		    push    es
seg000:F50F		    pop	    ds
seg000:F510		    sub	    ch,	ch
seg000:F512		    add	    di,	0F0h ; 'ğ'
seg000:F516		    shl	    bl,	1
seg000:F518		    shl	    bl,	1
seg000:F51A		    jz	    short loc_FF54A
seg000:F51C		    mov	    al,	bl
seg000:F51E		    mov	    ah,	50h ; 'P'
seg000:F520		    mul	    ah
seg000:F522		    mov	    si,	di
seg000:F524		    sub	    si,	ax
seg000:F526		    mov	    ah,	dh
seg000:F528		    sub	    ah,	bl
seg000:F52A
seg000:F52A loc_FF52A:				    ; CODE XREF: seg000:F537j
seg000:F52A		    call    sub_FF54E
seg000:F52D		    sub	    si,	2050h
seg000:F531		    sub	    di,	2050h
seg000:F535		    dec	    ah
seg000:F537		    jnz	    short loc_FF52A
seg000:F539
seg000:F539 loc_FF539:				    ; CODE XREF: seg000:F54Cj
seg000:F539		    mov	    al,	bh
seg000:F53B
seg000:F53B loc_FF53B:				    ; CODE XREF: seg000:F544j
seg000:F53B		    call    sub_FF567
seg000:F53E		    sub	    di,	2050h
seg000:F542		    dec	    bl
seg000:F544		    jnz	    short loc_FF53B
seg000:F546		    cld
seg000:F547		    jmp	    loc_FF1C5
seg000:F54A ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F54A
seg000:F54A loc_FF54A:				    ; CODE XREF: seg000:F51Aj
seg000:F54A		    mov	    bl,	dh
seg000:F54C		    jmp	    short loc_FF539
seg000:F54E
seg000:F54E ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:F54E
seg000:F54E
seg000:F54E sub_FF54E	    proc near		    ; CODE XREF: seg000:loc_FF4CBp
seg000:F54E					    ; seg000:loc_FF52Ap
seg000:F54E		    mov	    cl,	dl
seg000:F550		    push    si
seg000:F551		    push    di
seg000:F552		    rep	movsb
seg000:F554		    pop	    di
seg000:F555		    pop	    si
seg000:F556		    add	    si,	2000h
seg000:F55A		    add	    di,	2000h
seg000:F55E		    push    si
seg000:F55F		    push    di
seg000:F560		    mov	    cl,	dl
seg000:F562		    rep	movsb
seg000:F564		    pop	    di
seg000:F565		    pop	    si
seg000:F566		    retn
seg000:F566 sub_FF54E	    endp
seg000:F566
seg000:F567
seg000:F567 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:F567
seg000:F567
seg000:F567 sub_FF567	    proc near		    ; CODE XREF: seg000:loc_FF4DCp
seg000:F567					    ; seg000:loc_FF53Bp
seg000:F567		    mov	    cl,	dl
seg000:F569		    push    di
seg000:F56A		    rep	stosb
seg000:F56C		    pop	    di
seg000:F56D		    add	    di,	2000h
seg000:F571		    push    di
seg000:F572		    mov	    cl,	dl
seg000:F574		    rep	stosb
seg000:F576		    pop	    di
seg000:F577		    retn
seg000:F577 sub_FF567	    endp
seg000:F577
seg000:F578 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F578
seg000:F578 loc_FF578:				    ; CODE XREF: seg000:F3C3j
seg000:F578					    ; seg000:F3F6j
seg000:F578		    mov	    ah,	0
seg000:F57A		    push    ax
seg000:F57B		    call    sub_FF702
seg000:F57E		    mov	    di,	ax
seg000:F580		    pop	    ax
seg000:F581		    cmp	    al,	80h ; '€'
seg000:F583		    jnb	    short loc_FF58B
seg000:F585		    mov	    si,	0FA6Eh
seg000:F588		    push    cs
seg000:F589		    jmp	    short loc_FF59A
seg000:F58B ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F58B
seg000:F58B loc_FF58B:				    ; CODE XREF: seg000:F583j
seg000:F58B		    sub	    al,	80h ; '€'
seg000:F58D		    push    ds
seg000:F58E		    sub	    si,	si
seg000:F590		    mov	    ds,	si
seg000:F592		    lds	    si,	ds:7Ch
seg000:F596		    mov	    dx,	ds
seg000:F598		    pop	    ds
seg000:F599		    push    dx
seg000:F59A
seg000:F59A loc_FF59A:				    ; CODE XREF: seg000:F589j
seg000:F59A		    shl	    ax,	1
seg000:F59C		    shl	    ax,	1
seg000:F59E		    shl	    ax,	1
seg000:F5A0		    add	    si,	ax
seg000:F5A2		    cmp	    byte ptr ds:49h, 6
seg000:F5A7		    pop	    ds
seg000:F5A8		    jb	    short loc_FF5D6
seg000:F5AA
seg000:F5AA loc_FF5AA:				    ; CODE XREF: seg000:F5C5j
seg000:F5AA		    push    di
seg000:F5AB		    push    si
seg000:F5AC		    mov	    dh,	4
seg000:F5AE
seg000:F5AE loc_FF5AE:				    ; CODE XREF: seg000:F5C0j
seg000:F5AE		    lodsb
seg000:F5AF		    test    bl,	80h
seg000:F5B2		    jnz	    short loc_FF5CA
seg000:F5B4		    stosb
seg000:F5B5		    lodsb
seg000:F5B6
seg000:F5B6 loc_FF5B6:				    ; CODE XREF: seg000:F5D4j
seg000:F5B6		    mov	    es:[di+1FFFh], al
seg000:F5BB		    add	    di,	4Fh ; 'O'
seg000:F5BE		    dec	    dh
seg000:F5C0		    jnz	    short loc_FF5AE
seg000:F5C2		    pop	    si
seg000:F5C3		    pop	    di
seg000:F5C4		    inc	    di
seg000:F5C5		    loop    loc_FF5AA
seg000:F5C7		    jmp	    loc_FF1C5
seg000:F5CA ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F5CA
seg000:F5CA loc_FF5CA:				    ; CODE XREF: seg000:F5B2j
seg000:F5CA		    xor	    al,	es:[di]
seg000:F5CD		    stosb
seg000:F5CE		    lodsb
seg000:F5CF		    xor	    al,	es:[di+1FFFh]
seg000:F5D4		    jmp	    short loc_FF5B6
seg000:F5D6 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F5D6
seg000:F5D6 loc_FF5D6:				    ; CODE XREF: seg000:F5A8j
seg000:F5D6		    mov	    dl,	bl
seg000:F5D8		    shl	    di,	1
seg000:F5DA		    call    sub_FF6AE
seg000:F5DD
seg000:F5DD loc_FF5DD:				    ; CODE XREF: seg000:F624j
seg000:F5DD		    push    di
seg000:F5DE		    push    si
seg000:F5DF		    mov	    dh,	4
seg000:F5E1
seg000:F5E1 loc_FF5E1:				    ; CODE XREF: seg000:F61Ej
seg000:F5E1		    lodsb
seg000:F5E2		    call    sub_FF6C3
seg000:F5E5		    and	    ax,	bx
seg000:F5E7		    test    dl,	80h
seg000:F5EA		    jz	    short loc_FF5F3
seg000:F5EC		    xor	    ah,	es:[di]
seg000:F5EF		    xor	    al,	es:[di+1]
seg000:F5F3
seg000:F5F3 loc_FF5F3:				    ; CODE XREF: seg000:F5EAj
seg000:F5F3		    mov	    es:[di], ah
seg000:F5F6		    mov	    es:[di+1], al
seg000:F5FA		    lodsb
seg000:F5FB		    call    sub_FF6C3
seg000:F5FE		    and	    ax,	bx
seg000:F600		    test    dl,	80h
seg000:F603		    jz	    short loc_FF60F
seg000:F605		    xor	    ah,	es:[di+2000h]
seg000:F60A		    xor	    al,	es:[di+2001h]
seg000:F60F
seg000:F60F loc_FF60F:				    ; CODE XREF: seg000:F603j
seg000:F60F		    mov	    es:[di+2000h], ah
seg000:F614		    mov	    es:[di+2001h], al
seg000:F619		    add	    di,	50h ; 'P'
seg000:F61C		    dec	    dh
seg000:F61E		    jnz	    short loc_FF5E1
seg000:F620		    pop	    si
seg000:F621		    pop	    di
seg000:F622		    inc	    di
seg000:F623		    inc	    di
seg000:F624		    loop    loc_FF5DD
seg000:F626		    jmp	    loc_FF1C5
seg000:F629 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F629
seg000:F629 loc_FF629:				    ; CODE XREF: seg000:F37Ej
seg000:F629		    call    sub_FF702
seg000:F62C		    mov	    si,	ax
seg000:F62E		    sub	    sp,	8
seg000:F631		    mov	    bp,	sp
seg000:F633		    cmp	    byte ptr ds:49h, 6
seg000:F638		    push    es
seg000:F639		    pop	    ds
seg000:F63A		    jb	    short loc_FF656
seg000:F63C		    mov	    dh,	4
seg000:F63E
seg000:F63E loc_FF63E:				    ; CODE XREF: seg000:F651j
seg000:F63E		    mov	    al,	[si]
seg000:F640		    mov	    [bp+0], al
seg000:F643		    inc	    bp
seg000:F644		    mov	    al,	[si+2000h]
seg000:F648		    mov	    [bp+0], al
seg000:F64B		    inc	    bp
seg000:F64C		    add	    si,	50h ; 'P'
seg000:F64F		    dec	    dh
seg000:F651		    jnz	    short loc_FF63E
seg000:F653		    jmp	    short loc_FF66C
seg000:F653 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F655		    db	90h ; 
seg000:F656 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F656
seg000:F656 loc_FF656:				    ; CODE XREF: seg000:F63Aj
seg000:F656		    shl	    si,	1
seg000:F658		    mov	    dh,	4
seg000:F65A
seg000:F65A loc_FF65A:				    ; CODE XREF: seg000:F66Aj
seg000:F65A		    call    sub_FF6E5
seg000:F65D		    add	    si,	2000h
seg000:F661		    call    sub_FF6E5
seg000:F664		    sub	    si,	1FB0h
seg000:F668		    dec	    dh
seg000:F66A		    jnz	    short loc_FF65A
seg000:F66C
seg000:F66C loc_FF66C:				    ; CODE XREF: seg000:F653j
seg000:F66C		    mov	    di,	0FA6Eh
seg000:F66F		    nop
seg000:F670		    push    cs
seg000:F671		    pop	    es
seg000:F672		    sub	    bp,	8
seg000:F675		    mov	    si,	bp
seg000:F677		    cld
seg000:F678		    mov	    al,	0
seg000:F67A
seg000:F67A loc_FF67A:				    ; CODE XREF: seg000:F6A6j
seg000:F67A		    push    ss
seg000:F67B		    pop	    ds
seg000:F67C		    mov	    dx,	80h ; '€'
seg000:F67F
seg000:F67F loc_FF67F:				    ; CODE XREF: seg000:F690j
seg000:F67F		    push    si
seg000:F680		    push    di
seg000:F681		    mov	    cx,	8
seg000:F684		    repe cmpsb
seg000:F686		    pop	    di
seg000:F687		    pop	    si
seg000:F688		    jz	    short loc_FF6A8
seg000:F68A		    inc	    al
seg000:F68C		    add	    di,	8
seg000:F68F		    dec	    dx
seg000:F690		    jnz	    short loc_FF67F
seg000:F692		    cmp	    al,	0
seg000:F694		    jz	    short loc_FF6A8
seg000:F696		    sub	    ax,	ax
seg000:F698		    mov	    ds,	ax
seg000:F69A		    les	    di,	ds:7Ch
seg000:F69E		    mov	    ax,	es
seg000:F6A0		    or	    ax,	di
seg000:F6A2		    jz	    short loc_FF6A8
seg000:F6A4		    mov	    al,	80h ; '€'
seg000:F6A6		    jmp	    short loc_FF67A
seg000:F6A8 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F6A8
seg000:F6A8 loc_FF6A8:				    ; CODE XREF: seg000:F688j
seg000:F6A8					    ; seg000:F694j
seg000:F6A8					    ; seg000:F6A2j
seg000:F6A8		    add	    sp,	8
seg000:F6AB		    jmp	    loc_FF1C5
seg000:F6AE
seg000:F6AE ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:F6AE
seg000:F6AE
seg000:F6AE sub_FF6AE	    proc near		    ; CODE XREF: seg000:F5DAp
seg000:F6AE		    and	    bl,	3
seg000:F6B1		    mov	    al,	bl
seg000:F6B3		    push    cx
seg000:F6B4		    mov	    cx,	3
seg000:F6B7
seg000:F6B7 loc_FF6B7:				    ; CODE XREF: sub_FF6AE+Fj
seg000:F6B7		    shl	    al,	1
seg000:F6B9		    shl	    al,	1
seg000:F6BB		    or	    bl,	al
seg000:F6BD		    loop    loc_FF6B7
seg000:F6BF		    mov	    bh,	bl
seg000:F6C1		    pop	    cx
seg000:F6C2		    retn
seg000:F6C2 sub_FF6AE	    endp
seg000:F6C2
seg000:F6C3
seg000:F6C3 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:F6C3
seg000:F6C3
seg000:F6C3 sub_FF6C3	    proc near		    ; CODE XREF: seg000:F5E2p
seg000:F6C3					    ; seg000:F5FBp
seg000:F6C3		    push    dx
seg000:F6C4		    push    cx
seg000:F6C5		    push    bx
seg000:F6C6		    sub	    dx,	dx
seg000:F6C8		    mov	    cx,	1
seg000:F6CB
seg000:F6CB loc_FF6CB:				    ; CODE XREF: sub_FF6C3+1Aj
seg000:F6CB		    mov	    bx,	ax
seg000:F6CD		    and	    bx,	cx
seg000:F6CF		    or	    dx,	bx
seg000:F6D1		    shl	    ax,	1
seg000:F6D3		    shl	    cx,	1
seg000:F6D5		    mov	    bx,	ax
seg000:F6D7		    and	    bx,	cx
seg000:F6D9		    or	    dx,	bx
seg000:F6DB		    shl	    cx,	1
seg000:F6DD		    jnb	    short loc_FF6CB
seg000:F6DF		    mov	    ax,	dx
seg000:F6E1		    pop	    bx
seg000:F6E2		    pop	    cx
seg000:F6E3		    pop	    dx
seg000:F6E4		    retn
seg000:F6E4 sub_FF6C3	    endp
seg000:F6E4
seg000:F6E5
seg000:F6E5 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:F6E5
seg000:F6E5
seg000:F6E5 sub_FF6E5	    proc near		    ; CODE XREF: seg000:loc_FF65Ap
seg000:F6E5					    ; seg000:F661p
seg000:F6E5		    mov	    ah,	[si]
seg000:F6E7		    mov	    al,	[si+1]
seg000:F6EA		    mov	    cx,	0C000h
seg000:F6ED		    mov	    dl,	0
seg000:F6EF
seg000:F6EF loc_FF6EF:				    ; CODE XREF: sub_FF6E5+16j
seg000:F6EF		    test    ax,	cx
seg000:F6F1		    clc
seg000:F6F2		    jz	    short loc_FF6F5
seg000:F6F4		    stc
seg000:F6F5
seg000:F6F5 loc_FF6F5:				    ; CODE XREF: sub_FF6E5+Dj
seg000:F6F5		    rcl	    dl,	1
seg000:F6F7		    shr	    cx,	1
seg000:F6F9		    shr	    cx,	1
seg000:F6FB		    jnb	    short loc_FF6EF
seg000:F6FD		    mov	    [bp+0], dl
seg000:F700		    inc	    bp
seg000:F701		    retn
seg000:F701 sub_FF6E5	    endp
seg000:F701
seg000:F702
seg000:F702 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:F702
seg000:F702
seg000:F702 sub_FF702	    proc near		    ; CODE XREF: seg000:F57Bp
seg000:F702					    ; seg000:loc_FF629p
seg000:F702		    mov	    ax,	ds:50h
seg000:F702 sub_FF702	    endp
seg000:F702
seg000:F705
seg000:F705 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:F705
seg000:F705
seg000:F705 sub_FF705	    proc near		    ; CODE XREF: seg000:F499p
seg000:F705					    ; seg000:F4F3p
seg000:F705		    push    bx
seg000:F706		    mov	    bx,	ax
seg000:F708		    mov	    al,	ah
seg000:F70A		    mul	    byte ptr ds:4Ah
seg000:F70E		    shl	    ax,	1
seg000:F710		    shl	    ax,	1
seg000:F712		    sub	    bh,	bh
seg000:F714		    add	    ax,	bx
seg000:F716		    pop	    bx
seg000:F717		    retn
seg000:F717 sub_FF705	    endp
seg000:F717
seg000:F718 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F718
seg000:F718 int_10_0e_write_tty:		    ; CODE XREF: seg000:F09Cj
seg000:F718					    ; DATA XREF: seg000:F061o
seg000:F718		    push    ax
seg000:F719		    push    ax
seg000:F71A		    mov	    ah,	3
seg000:F71C		    mov	    bh,	ds:62h
seg000:F720		    int	    10h		    ; -	VIDEO -	READ CURSOR POSITION
seg000:F720					    ; BH = page	number
seg000:F720					    ; Return: DH,DL = row,column, CH = cursor start line, CL = cursor end line
seg000:F722		    pop	    ax
seg000:F723		    cmp	    al,	8
seg000:F725		    jz	    short loc_FF779
seg000:F727		    cmp	    al,	0Dh
seg000:F729		    jz	    short loc_FF782
seg000:F72B		    cmp	    al,	0Ah
seg000:F72D		    jz	    short loc_FF786
seg000:F72F		    cmp	    al,	7
seg000:F731		    jz	    short loc_FF78D
seg000:F733		    mov	    ah,	0Ah
seg000:F735		    mov	    cx,	1
seg000:F738		    int	    10h		    ; -	VIDEO -	WRITE CHARACTERS ONLY AT CURSOR	POSITION
seg000:F738					    ; AL = character, BH = display page	- alpha	mode
seg000:F738					    ; BL = color of character (graphics	mode, PCjr only)
seg000:F738					    ; CX = number of times to write character
seg000:F73A		    inc	    dl
seg000:F73C		    cmp	    dl,	ds:4Ah
seg000:F740		    jnz	    short loc_FF775
seg000:F742		    mov	    dl,	0
seg000:F744		    cmp	    dh,	18h
seg000:F747		    jnz	    short loc_FF773
seg000:F749
seg000:F749 loc_FF749:				    ; CODE XREF: seg000:F78Bj
seg000:F749		    mov	    ah,	2
seg000:F74B		    int	    10h		    ; -	VIDEO -	SET CURSOR POSITION
seg000:F74B					    ; DH,DL = row, column (0,0 = upper left)
seg000:F74B					    ; BH = page	number
seg000:F74D		    mov	    al,	ds:49h
seg000:F750		    cmp	    al,	4
seg000:F752		    jb	    short loc_FF75A
seg000:F754		    cmp	    al,	7
seg000:F756		    mov	    bh,	0
seg000:F758		    jnz	    short loc_FF760
seg000:F75A
seg000:F75A loc_FF75A:				    ; CODE XREF: seg000:F752j
seg000:F75A		    mov	    ah,	8
seg000:F75C		    int	    10h		    ; -	VIDEO -	READ ATTRIBUTES/CHARACTER AT CURSOR POSITION
seg000:F75C					    ; BH = display page
seg000:F75C					    ; Return: AL = character
seg000:F75C					    ; AH = attribute of	character (alpha modes)
seg000:F75E		    mov	    bh,	ah
seg000:F760
seg000:F760 loc_FF760:				    ; CODE XREF: seg000:F758j
seg000:F760		    mov	    ax,	601h
seg000:F763		    sub	    cx,	cx
seg000:F765		    mov	    dh,	18h
seg000:F767		    mov	    dl,	ds:4Ah
seg000:F76B		    dec	    dl
seg000:F76D
seg000:F76D loc_FF76D:				    ; CODE XREF: seg000:F777j
seg000:F76D		    int	    10h		    ; -	VIDEO -	SCROLL PAGE UP
seg000:F76D					    ; AL = number of lines to scroll window (0 = blank whole window)
seg000:F76D					    ; BH = attributes to be used on blanked lines
seg000:F76D					    ; CH,CL = row,column of upper left corner of window	to scroll
seg000:F76D					    ; DH,DL = row,column of lower right	corner of window
seg000:F76F
seg000:F76F loc_FF76F:				    ; CODE XREF: seg000:F792j
seg000:F76F		    pop	    ax
seg000:F770		    jmp	    loc_FF1C5
seg000:F773 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F773
seg000:F773 loc_FF773:				    ; CODE XREF: seg000:F747j
seg000:F773					    ; seg000:F789j
seg000:F773		    inc	    dh
seg000:F775
seg000:F775 loc_FF775:				    ; CODE XREF: seg000:F740j
seg000:F775					    ; seg000:F77Cj
seg000:F775					    ; seg000:F780j
seg000:F775					    ; seg000:F784j
seg000:F775		    mov	    ah,	2
seg000:F777		    jmp	    short loc_FF76D
seg000:F779 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F779
seg000:F779 loc_FF779:				    ; CODE XREF: seg000:F725j
seg000:F779		    cmp	    dl,	0
seg000:F77C		    jz	    short loc_FF775
seg000:F77E		    dec	    dl
seg000:F780		    jmp	    short loc_FF775
seg000:F782 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F782
seg000:F782 loc_FF782:				    ; CODE XREF: seg000:F729j
seg000:F782		    mov	    dl,	0
seg000:F784		    jmp	    short loc_FF775
seg000:F786 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F786
seg000:F786 loc_FF786:				    ; CODE XREF: seg000:F72Dj
seg000:F786		    cmp	    dh,	18h
seg000:F789		    jnz	    short loc_FF773
seg000:F78B		    jmp	    short loc_FF749
seg000:F78D ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F78D
seg000:F78D loc_FF78D:				    ; CODE XREF: seg000:F731j
seg000:F78D		    mov	    bl,	2
seg000:F78F		    call    sub_FE603
seg000:F792		    jmp	    short loc_FF76F
seg000:F792 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F794		    db	  3
seg000:F795		    db	  3
seg000:F796		    db	  5
seg000:F797		    db	  5
seg000:F798		    db	  3
seg000:F799		    db	  3
seg000:F79A		    db	  3
seg000:F79B		    db	  4
seg000:F79C ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F79C
seg000:F79C int_10_04_read_lpen:		    ; CODE XREF: seg000:F09Cj
seg000:F79C					    ; DATA XREF: seg000:F04Do
seg000:F79C		    mov	    ah,	0
seg000:F79E		    mov	    dx,	ds:63h
seg000:F7A2		    add	    dx,	6
seg000:F7A5		    in	    al,	dx
seg000:F7A6		    test    al,	4
seg000:F7A8		    jnz	    short loc_FF828
seg000:F7AA		    test    al,	2
seg000:F7AC		    jnz	    short loc_FF7B1
seg000:F7AE		    jmp	    loc_FF832
seg000:F7B1 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F7B1
seg000:F7B1 loc_FF7B1:				    ; CODE XREF: seg000:F7ACj
seg000:F7B1		    mov	    ah,	10h
seg000:F7B3		    mov	    dx,	ds:63h
seg000:F7B7		    mov	    al,	ah
seg000:F7B9		    out	    dx,	al
seg000:F7BA		    inc	    dx
seg000:F7BB		    in	    al,	dx
seg000:F7BC		    mov	    ch,	al
seg000:F7BE		    dec	    dx
seg000:F7BF		    inc	    ah
seg000:F7C1		    mov	    al,	ah
seg000:F7C3		    out	    dx,	al
seg000:F7C4		    inc	    dx
seg000:F7C5		    in	    al,	dx
seg000:F7C6		    mov	    ah,	ch
seg000:F7C8		    mov	    bl,	ds:49h
seg000:F7CC		    sub	    bh,	bh
seg000:F7CE		    mov	    bl,	cs:[bx-86Ch]
seg000:F7D3		    sub	    ax,	bx
seg000:F7D5		    mov	    bx,	ds:4Eh
seg000:F7D9		    shr	    bx,	1
seg000:F7DB		    sub	    ax,	bx
seg000:F7DD		    jns	    short loc_FF7E1
seg000:F7DF		    sub	    ax,	ax
seg000:F7E1
seg000:F7E1 loc_FF7E1:				    ; CODE XREF: seg000:F7DDj
seg000:F7E1		    mov	    cl,	3
seg000:F7E3		    cmp	    byte ptr ds:49h, 4
seg000:F7E8		    jb	    short loc_FF814
seg000:F7EA		    cmp	    byte ptr ds:49h, 7
seg000:F7EF		    jz	    short loc_FF814
seg000:F7F1		    mov	    dl,	28h ; '('
seg000:F7F3		    div	    dl
seg000:F7F5		    mov	    ch,	al
seg000:F7F7		    add	    ch,	ch
seg000:F7F9		    mov	    bl,	ah
seg000:F7FB		    sub	    bh,	bh
seg000:F7FD		    cmp	    byte ptr ds:49h, 6
seg000:F802		    jnz	    short loc_FF808
seg000:F804		    mov	    cl,	4
seg000:F806		    shl	    ah,	1
seg000:F808
seg000:F808 loc_FF808:				    ; CODE XREF: seg000:F802j
seg000:F808		    shl	    bx,	cl
seg000:F80A		    mov	    dl,	ah
seg000:F80C		    mov	    dh,	al
seg000:F80E		    shr	    dh,	1
seg000:F810		    shr	    dh,	1
seg000:F812		    jmp	    short loc_FF826
seg000:F814 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F814
seg000:F814 loc_FF814:				    ; CODE XREF: seg000:F7E8j
seg000:F814					    ; seg000:F7EFj
seg000:F814		    div	    byte ptr ds:4Ah
seg000:F818		    mov	    dh,	al
seg000:F81A		    mov	    dl,	ah
seg000:F81C		    shl	    al,	cl
seg000:F81E		    mov	    ch,	al
seg000:F820		    mov	    bl,	ah
seg000:F822		    xor	    bh,	bh
seg000:F824		    shl	    bx,	cl
seg000:F826
seg000:F826 loc_FF826:				    ; CODE XREF: seg000:F812j
seg000:F826		    mov	    ah,	1
seg000:F828
seg000:F828 loc_FF828:				    ; CODE XREF: seg000:F7A8j
seg000:F828		    push    dx
seg000:F829		    mov	    dx,	ds:63h
seg000:F82D		    add	    dx,	7
seg000:F830		    out	    dx,	al
seg000:F831		    pop	    dx
seg000:F832
seg000:F832 loc_FF832:				    ; CODE XREF: seg000:F7AEj
seg000:F832		    pop	    di
seg000:F833		    pop	    si
seg000:F834		    pop	    ds
seg000:F835		    pop	    ds
seg000:F836		    pop	    ds
seg000:F837		    pop	    ds
seg000:F838		    pop	    es
seg000:F839		    iret
seg000:F839 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F83A		    db 0FFh
seg000:F83B		    db 0FFh
seg000:F83C		    db 0FFh
seg000:F83D		    db 0FFh
seg000:F83E		    db 0FFh
seg000:F83F		    db 0FFh
seg000:F840		    db 0FFh
seg000:F841
seg000:F841 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:F841
seg000:F841
seg000:F841 memory_size_det proc far		    ; DATA XREF: seg000:FF07o
seg000:F841		    sti
seg000:F842		    push    ds
seg000:F843		    call    dds
seg000:F846		    mov	    ax,	ds:13h
seg000:F849		    pop	    ds
seg000:F84A		    iret
seg000:F84A memory_size_det endp
seg000:F84A
seg000:F84A ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F84B		    db 0FFh
seg000:F84C		    db 0FFh
seg000:F84D
seg000:F84D ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:F84D
seg000:F84D
seg000:F84D equipment	    proc far		    ; DATA XREF: seg000:FF05o
seg000:F84D		    sti
seg000:F84E		    push    ds
seg000:F84F		    call    dds
seg000:F852		    mov	    ax,	ds:10h
seg000:F855		    pop	    ds
seg000:F856		    iret
seg000:F856 equipment	    endp
seg000:F856
seg000:F856 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F857		    db 0FFh
seg000:F858		    db 0FFh
seg000:F859
seg000:F859 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:F859
seg000:F859
seg000:F859 cassette_io	    proc far		    ; DATA XREF: seg000:FF0Do
seg000:F859		    sti
seg000:F85A		    push    ds
seg000:F85B		    call    dds
seg000:F85E		    and	    byte ptr ds:71h, 7Fh
seg000:F863		    call    sub_FF86A
seg000:F866		    pop	    ds
seg000:F867		    retf    2
seg000:F867 cassette_io	    endp
seg000:F867
seg000:F86A
seg000:F86A ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:F86A
seg000:F86A
seg000:F86A sub_FF86A	    proc near		    ; CODE XREF: cassette_io+Ap
seg000:F86A		    or	    ah,	ah
seg000:F86C		    jz	    short sub_FF881
seg000:F86E		    dec	    ah
seg000:F870		    jz	    short sub_FF88A
seg000:F872		    dec	    ah
seg000:F874		    jz	    short sub_FF890
seg000:F876		    dec	    ah
seg000:F878		    jnz	    short loc_FF87D
seg000:F87A		    jmp	    sub_FF9A1
seg000:F87D ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F87D
seg000:F87D loc_FF87D:				    ; CODE XREF: sub_FF86A+Ej
seg000:F87D		    mov	    ah,	80h ; '€'
seg000:F87F		    stc
seg000:F880		    retn
seg000:F880 sub_FF86A	    endp
seg000:F880
seg000:F881
seg000:F881 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:F881
seg000:F881
seg000:F881 sub_FF881	    proc near		    ; CODE XREF: sub_FF86A+2j
seg000:F881					    ; sub_FFA58p
seg000:F881		    in	    al,	61h	    ; PC/XT PPI	port B bits:
seg000:F881					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:F881					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:F881					    ; 3: 1=read	high switches
seg000:F881					    ; 4: 0=enable RAM parity checking
seg000:F881					    ; 5: 0=enable I/O channel check
seg000:F881					    ; 6: 0=hold	keyboard clock low
seg000:F881					    ; 7: 0=enable kbrd
seg000:F883		    and	    al,	0F7h
seg000:F885
seg000:F885 loc_FF885:				    ; CODE XREF: sub_FF88A+4j
seg000:F885		    out	    61h, al	    ; PC/XT PPI	port B bits:
seg000:F885					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:F885					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:F885					    ; 3: 1=read	high switches
seg000:F885					    ; 4: 0=enable RAM parity checking
seg000:F885					    ; 5: 0=enable I/O channel check
seg000:F885					    ; 6: 0=hold	keyboard clock low
seg000:F885					    ; 7: 0=enable kbrd
seg000:F887		    sub	    ah,	ah
seg000:F889		    retn
seg000:F889 sub_FF881	    endp
seg000:F889
seg000:F88A
seg000:F88A ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:F88A
seg000:F88A
seg000:F88A sub_FF88A	    proc near		    ; CODE XREF: sub_FF86A+6j
seg000:F88A					    ; sub_FF890+B2p
seg000:F88A					    ; sub_FF9A1+69p
seg000:F88A		    in	    al,	61h	    ; PC/XT PPI	port B bits:
seg000:F88A					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:F88A					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:F88A					    ; 3: 1=read	high switches
seg000:F88A					    ; 4: 0=enable RAM parity checking
seg000:F88A					    ; 5: 0=enable I/O channel check
seg000:F88A					    ; 6: 0=hold	keyboard clock low
seg000:F88A					    ; 7: 0=enable kbrd
seg000:F88C		    or	    al,	8
seg000:F88E		    jmp	    short loc_FF885
seg000:F88E sub_FF88A	    endp
seg000:F88E
seg000:F890
seg000:F890 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:F890
seg000:F890
seg000:F890 sub_FF890	    proc near		    ; CODE XREF: sub_FF86A+Aj
seg000:F890		    push    bx
seg000:F891		    push    cx
seg000:F892		    push    si
seg000:F893		    mov	    si,	7
seg000:F896		    call    sub_FFA58
seg000:F899
seg000:F899 loc_FF899:				    ; CODE XREF: sub_FF890+3Fj
seg000:F899					    ; sub_FF890+45j
seg000:F899					    ; sub_FF890+A1j
seg000:F899		    in	    al,	62h	    ; PC/XT PPI	port C.	Bits:
seg000:F899					    ; 0-3: values of DIP switches
seg000:F899					    ; 5: 1=Timer 2 channel out
seg000:F899					    ; 6: 1=I/O channel check
seg000:F899					    ; 7: 1=RAM parity check error occurred.
seg000:F89B		    and	    al,	10h
seg000:F89D		    mov	    ds:6Bh, al
seg000:F8A0		    mov	    dx,	3F7Ah
seg000:F8A3
seg000:F8A3 loc_FF8A3:				    ; CODE XREF: sub_FF890+23j
seg000:F8A3		    test    byte ptr ds:71h, 80h
seg000:F8A8		    jnz	    short loc_FF8AD
seg000:F8AA		    dec	    dx
seg000:F8AB		    jnz	    short loc_FF8B0
seg000:F8AD
seg000:F8AD loc_FF8AD:				    ; CODE XREF: sub_FF890+18j
seg000:F8AD		    jmp	    loc_FF934
seg000:F8B0 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F8B0
seg000:F8B0 loc_FF8B0:				    ; CODE XREF: sub_FF890+1Bj
seg000:F8B0		    call    sub_FF979
seg000:F8B3		    jcxz    short loc_FF8A3
seg000:F8B5		    mov	    dx,	378h
seg000:F8B8		    mov	    cx,	200h
seg000:F8BB		    in	    al,	21h	    ; Interrupt	controller, 8259A.
seg000:F8BD		    or	    al,	1
seg000:F8BF		    out	    21h, al	    ; Interrupt	controller, 8259A.
seg000:F8C1
seg000:F8C1 loc_FF8C1:				    ; CODE XREF: sub_FF890+47j
seg000:F8C1					    ; sub_FF890:loc_FF8D9j
seg000:F8C1		    test    byte ptr ds:71h, 80h
seg000:F8C6		    jnz	    short loc_FF934
seg000:F8C8		    push    cx
seg000:F8C9		    call    sub_FF979
seg000:F8CC		    or	    cx,	cx
seg000:F8CE		    pop	    cx
seg000:F8CF		    jz	    short loc_FF899
seg000:F8D1		    cmp	    dx,	bx
seg000:F8D3		    jcxz    short loc_FF8D9
seg000:F8D5		    jnb	    short loc_FF899
seg000:F8D7		    loop    loc_FF8C1
seg000:F8D9
seg000:F8D9 loc_FF8D9:				    ; CODE XREF: sub_FF890+43j
seg000:F8D9		    jb	    short loc_FF8C1
seg000:F8DB		    call    sub_FF979
seg000:F8DE		    call    sub_FF94B
seg000:F8E1		    cmp	    al,	16h
seg000:F8E3		    jnz	    short loc_FF92E
seg000:F8E5		    pop	    si
seg000:F8E6		    pop	    cx
seg000:F8E7		    pop	    bx
seg000:F8E8		    push    cx
seg000:F8E9
seg000:F8E9 loc_FF8E9:				    ; CODE XREF: sub_FF890+8Aj
seg000:F8E9		    mov	    word ptr ds:69h, 0FFFFh
seg000:F8EF		    mov	    dx,	100h
seg000:F8F2
seg000:F8F2 loc_FF8F2:				    ; CODE XREF: sub_FF890+76j
seg000:F8F2		    test    byte ptr ds:71h, 80h
seg000:F8F7		    jnz	    short loc_FF91C
seg000:F8F9		    call    sub_FF94B
seg000:F8FC		    jb	    short loc_FF91C
seg000:F8FE		    jcxz    short loc_FF905
seg000:F900		    mov	    es:[bx], al
seg000:F903		    inc	    bx
seg000:F904		    dec	    cx
seg000:F905
seg000:F905 loc_FF905:				    ; CODE XREF: sub_FF890+6Ej
seg000:F905		    dec	    dx
seg000:F906		    jg	    short loc_FF8F2
seg000:F908		    call    sub_FF94B
seg000:F90B		    call    sub_FF94B
seg000:F90E		    sub	    ah,	ah
seg000:F910		    cmp	    word ptr ds:69h, 1D0Fh
seg000:F916		    jnz	    short loc_FF91E
seg000:F918		    jcxz    short loc_FF920
seg000:F91A		    jmp	    short loc_FF8E9
seg000:F91C ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F91C
seg000:F91C loc_FF91C:				    ; CODE XREF: sub_FF890+67j
seg000:F91C					    ; sub_FF890+6Cj
seg000:F91C		    mov	    ah,	1
seg000:F91E
seg000:F91E loc_FF91E:				    ; CODE XREF: sub_FF890+86j
seg000:F91E		    inc	    ah
seg000:F920
seg000:F920 loc_FF920:				    ; CODE XREF: sub_FF890+88j
seg000:F920		    pop	    dx
seg000:F921		    sub	    dx,	cx
seg000:F923		    push    ax
seg000:F924		    test    ah,	90h
seg000:F927		    jnz	    short loc_FF93C
seg000:F929		    call    sub_FF94B
seg000:F92C		    jmp	    short loc_FF93C
seg000:F92E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F92E
seg000:F92E loc_FF92E:				    ; CODE XREF: sub_FF890+53j
seg000:F92E		    dec	    si
seg000:F92F		    jz	    short loc_FF934
seg000:F931		    jmp	    loc_FF899
seg000:F934 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F934
seg000:F934 loc_FF934:				    ; CODE XREF: sub_FF890:loc_FF8ADj
seg000:F934					    ; sub_FF890+36j
seg000:F934					    ; sub_FF890+9Fj
seg000:F934		    pop	    si
seg000:F935		    pop	    cx
seg000:F936		    pop	    bx
seg000:F937		    sub	    dx,	dx
seg000:F939		    mov	    ah,	4
seg000:F93B		    push    ax
seg000:F93C
seg000:F93C loc_FF93C:				    ; CODE XREF: sub_FF890+97j
seg000:F93C					    ; sub_FF890+9Cj
seg000:F93C		    in	    al,	21h	    ; Interrupt	controller, 8259A.
seg000:F93E		    and	    al,	0FEh
seg000:F940		    out	    21h, al	    ; Interrupt	controller, 8259A.
seg000:F942		    call    sub_FF88A
seg000:F945		    pop	    ax
seg000:F946		    cmp	    ah,	1
seg000:F949		    cmc
seg000:F94A		    retn
seg000:F94A sub_FF890	    endp
seg000:F94A
seg000:F94B
seg000:F94B ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:F94B
seg000:F94B
seg000:F94B sub_FF94B	    proc near		    ; CODE XREF: sub_FF890+4Ep
seg000:F94B					    ; sub_FF890+69p
seg000:F94B					    ; sub_FF890+78p
seg000:F94B					    ; sub_FF890+7Bp ...
seg000:F94B		    push    bx
seg000:F94C		    push    cx
seg000:F94D		    mov	    cl,	8
seg000:F94F
seg000:F94F loc_FF94F:				    ; CODE XREF: sub_FF94B+22j
seg000:F94F		    push    cx
seg000:F950		    call    sub_FF979
seg000:F953		    jcxz    short loc_FF975
seg000:F955		    push    bx
seg000:F956		    call    sub_FF979
seg000:F959		    pop	    ax
seg000:F95A		    jcxz    short loc_FF975
seg000:F95C		    add	    bx,	ax
seg000:F95E		    cmp	    bx,	6F0h
seg000:F962		    cmc
seg000:F963		    lahf
seg000:F964		    pop	    cx
seg000:F965		    rcl	    ch,	1
seg000:F967		    sahf
seg000:F968		    call    sub_FFA44
seg000:F96B		    dec	    cl
seg000:F96D		    jnz	    short loc_FF94F
seg000:F96F		    mov	    al,	ch
seg000:F971		    clc
seg000:F972
seg000:F972 loc_FF972:				    ; CODE XREF: sub_FF94B+2Cj
seg000:F972		    pop	    cx
seg000:F973		    pop	    bx
seg000:F974		    retn
seg000:F975 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:F975
seg000:F975 loc_FF975:				    ; CODE XREF: sub_FF94B+8j
seg000:F975					    ; sub_FF94B+Fj
seg000:F975		    pop	    cx
seg000:F976		    stc
seg000:F977		    jmp	    short loc_FF972
seg000:F977 sub_FF94B	    endp
seg000:F977
seg000:F979
seg000:F979 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:F979
seg000:F979
seg000:F979 sub_FF979	    proc near		    ; CODE XREF: seg000:E4A1p
seg000:F979					    ; seg000:E4A4p
seg000:F979					    ; sub_FF890:loc_FF8B0p
seg000:F979					    ; sub_FF890+39p ...
seg000:F979		    mov	    cx,	64h ; 'd'
seg000:F97C		    mov	    ah,	ds:6Bh
seg000:F980
seg000:F980 loc_FF980:				    ; CODE XREF: sub_FF979+Dj
seg000:F980		    in	    al,	62h	    ; PC/XT PPI	port C.	Bits:
seg000:F980					    ; 0-3: values of DIP switches
seg000:F980					    ; 5: 1=Timer 2 channel out
seg000:F980					    ; 6: 1=I/O channel check
seg000:F980					    ; 7: 1=RAM parity check error occurred.
seg000:F982		    and	    al,	10h
seg000:F984		    cmp	    al,	ah
seg000:F986		    loope   loc_FF980
seg000:F988		    mov	    ds:6Bh, al
seg000:F98B		    mov	    al,	0
seg000:F98D		    out	    43h, al	    ; Timer 8253-5 (AT:	8254.2).
seg000:F98F		    mov	    bx,	ds:67h
seg000:F993		    in	    al,	40h	    ; Timer 8253-5 (AT:	8254.2).
seg000:F995		    mov	    ah,	al
seg000:F997		    in	    al,	40h	    ; Timer 8253-5 (AT:	8254.2).
seg000:F999		    xchg    al,	ah
seg000:F99B		    sub	    bx,	ax
seg000:F99D		    mov	    ds:67h, ax
seg000:F9A0		    retn
seg000:F9A0 sub_FF979	    endp
seg000:F9A0
seg000:F9A1
seg000:F9A1 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:F9A1
seg000:F9A1
seg000:F9A1 sub_FF9A1	    proc near		    ; CODE XREF: sub_FF86A+10j
seg000:F9A1		    push    bx
seg000:F9A2		    push    cx
seg000:F9A3		    in	    al,	61h	    ; PC/XT PPI	port B bits:
seg000:F9A3					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:F9A3					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:F9A3					    ; 3: 1=read	high switches
seg000:F9A3					    ; 4: 0=enable RAM parity checking
seg000:F9A3					    ; 5: 0=enable I/O channel check
seg000:F9A3					    ; 6: 0=hold	keyboard clock low
seg000:F9A3					    ; 7: 0=enable kbrd
seg000:F9A5		    and	    al,	0FDh
seg000:F9A7		    or	    al,	1
seg000:F9A9		    out	    61h, al	    ; PC/XT PPI	port B bits:
seg000:F9A9					    ; 0: Tmr 2 gate ÍËÍ OR 03H=spkr ON
seg000:F9A9					    ; 1: Tmr 2 data Í¼	AND 0fcH=spkr OFF
seg000:F9A9					    ; 3: 1=read	high switches
seg000:F9A9					    ; 4: 0=enable RAM parity checking
seg000:F9A9					    ; 5: 0=enable I/O channel check
seg000:F9A9					    ; 6: 0=hold	keyboard clock low
seg000:F9A9					    ; 7: 0=enable kbrd
seg000:F9AB		    mov	    al,	0B6h ; '¶'
seg000:F9AD		    out	    43h, al	    ; Timer 8253-5 (AT:	8254.2).
seg000:F9AF		    call    sub_FFA58
seg000:F9B2		    mov	    ax,	4A0h
seg000:F9B5		    call    sub_FFA3D
seg000:F9B8		    mov	    cx,	800h
seg000:F9BB
seg000:F9BB loc_FF9BB:				    ; CODE XREF: sub_FF9A1+1Ej
seg000:F9BB		    stc
seg000:F9BC		    call    sub_FFA27
seg000:F9BF		    loop    loc_FF9BB
seg000:F9C1		    clc
seg000:F9C2		    call    sub_FFA27
seg000:F9C5		    pop	    cx
seg000:F9C6		    pop	    bx
seg000:F9C7		    mov	    al,	16h
seg000:F9C9		    call    sub_FFA10
seg000:F9CC
seg000:F9CC loc_FF9CC:				    ; CODE XREF: sub_FF9A1+52j
seg000:F9CC		    mov	    word ptr ds:69h, 0FFFFh
seg000:F9D2		    mov	    dx,	100h
seg000:F9D5
seg000:F9D5 loc_FF9D5:				    ; CODE XREF: sub_FF9A1+3Fj
seg000:F9D5		    mov	    al,	es:[bx]
seg000:F9D8		    call    sub_FFA10
seg000:F9DB		    jcxz    short loc_FF9DF
seg000:F9DD		    inc	    bx
seg000:F9DE		    dec	    cx
seg000:F9DF
seg000:F9DF loc_FF9DF:				    ; CODE XREF: sub_FF9A1+3Aj
seg000:F9DF		    dec	    dx
seg000:F9E0		    jg	    short loc_FF9D5
seg000:F9E2		    mov	    ax,	ds:69h
seg000:F9E5		    not	    ax
seg000:F9E7		    push    ax
seg000:F9E8		    xchg    ah,	al
seg000:F9EA		    call    sub_FFA10
seg000:F9ED		    pop	    ax
seg000:F9EE		    call    sub_FFA10
seg000:F9F1		    or	    cx,	cx
seg000:F9F3		    jnz	    short loc_FF9CC
seg000:F9F5		    push    cx
seg000:F9F6		    mov	    cx,	20h ; ' '
seg000:F9F9
seg000:F9F9 loc_FF9F9:				    ; CODE XREF: sub_FF9A1+5Cj
seg000:F9F9		    stc
seg000:F9FA		    call    sub_FFA27
seg000:F9FD		    loop    loc_FF9F9
seg000:F9FF		    pop	    cx
seg000:FA00		    mov	    al,	0B0h ; '°'
seg000:FA02		    out	    43h, al	    ; Timer 8253-5 (AT:	8254.2).
seg000:FA04		    mov	    ax,	1
seg000:FA07		    call    sub_FFA3D
seg000:FA0A		    call    sub_FF88A
seg000:FA0D		    sub	    ax,	ax
seg000:FA0F		    retn
seg000:FA0F sub_FF9A1	    endp
seg000:FA0F
seg000:FA10
seg000:FA10 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:FA10
seg000:FA10
seg000:FA10 sub_FFA10	    proc near		    ; CODE XREF: sub_FF9A1+28p
seg000:FA10					    ; sub_FF9A1+37p
seg000:FA10					    ; sub_FF9A1+49p
seg000:FA10					    ; sub_FF9A1+4Dp
seg000:FA10		    push    cx
seg000:FA11		    push    ax
seg000:FA12		    mov	    ch,	al
seg000:FA14		    mov	    cl,	8
seg000:FA16
seg000:FA16 loc_FFA16:				    ; CODE XREF: sub_FFA10+12j
seg000:FA16		    rcl	    ch,	1
seg000:FA18		    pushf
seg000:FA19		    call    sub_FFA27
seg000:FA1C		    popf
seg000:FA1D		    call    sub_FFA44
seg000:FA20		    dec	    cl
seg000:FA22		    jnz	    short loc_FFA16
seg000:FA24		    pop	    ax
seg000:FA25		    pop	    cx
seg000:FA26		    retn
seg000:FA26 sub_FFA10	    endp
seg000:FA26
seg000:FA27
seg000:FA27 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:FA27
seg000:FA27
seg000:FA27 sub_FFA27	    proc near		    ; CODE XREF: sub_FF9A1+1Bp
seg000:FA27					    ; sub_FF9A1+21p
seg000:FA27					    ; sub_FF9A1+59p
seg000:FA27					    ; sub_FFA10+9p
seg000:FA27		    mov	    ax,	4A0h
seg000:FA2A		    jb	    short loc_FFA2F
seg000:FA2C		    mov	    ax,	250h
seg000:FA2F
seg000:FA2F loc_FFA2F:				    ; CODE XREF: sub_FFA27+3j
seg000:FA2F		    push    ax
seg000:FA30
seg000:FA30 loc_FFA30:				    ; CODE XREF: sub_FFA27+Dj
seg000:FA30		    in	    al,	62h	    ; PC/XT PPI	port C.	Bits:
seg000:FA30					    ; 0-3: values of DIP switches
seg000:FA30					    ; 5: 1=Timer 2 channel out
seg000:FA30					    ; 6: 1=I/O channel check
seg000:FA30					    ; 7: 1=RAM parity check error occurred.
seg000:FA32		    and	    al,	20h
seg000:FA34		    jz	    short loc_FFA30
seg000:FA36
seg000:FA36 loc_FFA36:				    ; CODE XREF: sub_FFA27+13j
seg000:FA36		    in	    al,	62h	    ; PC/XT PPI	port C.	Bits:
seg000:FA36					    ; 0-3: values of DIP switches
seg000:FA36					    ; 5: 1=Timer 2 channel out
seg000:FA36					    ; 6: 1=I/O channel check
seg000:FA36					    ; 7: 1=RAM parity check error occurred.
seg000:FA38		    and	    al,	20h
seg000:FA3A		    jnz	    short loc_FFA36
seg000:FA3C		    pop	    ax
seg000:FA3C sub_FFA27	    endp
seg000:FA3C
seg000:FA3D
seg000:FA3D ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:FA3D
seg000:FA3D
seg000:FA3D sub_FFA3D	    proc near		    ; CODE XREF: sub_FF9A1+14p
seg000:FA3D					    ; sub_FF9A1+66p
seg000:FA3D		    out	    42h, al	    ; Timer 8253-5 (AT:	8254.2).
seg000:FA3F		    mov	    al,	ah
seg000:FA41		    out	    42h, al	    ; Timer 8253-5 (AT:	8254.2).
seg000:FA43		    retn
seg000:FA43 sub_FFA3D	    endp ; sp =	 2
seg000:FA43
seg000:FA44
seg000:FA44 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:FA44
seg000:FA44
seg000:FA44 sub_FFA44	    proc near		    ; CODE XREF: sub_FF94B+1Dp
seg000:FA44					    ; sub_FFA10+Dp
seg000:FA44		    mov	    ax,	ds:69h
seg000:FA47		    rcr	    ax,	1
seg000:FA49		    rcl	    ax,	1
seg000:FA4B		    clc
seg000:FA4C		    jno	    short loc_FFA52
seg000:FA4E		    xor	    ax,	810h
seg000:FA51		    stc
seg000:FA52
seg000:FA52 loc_FFA52:				    ; CODE XREF: sub_FFA44+8j
seg000:FA52		    rcl	    ax,	1
seg000:FA54		    mov	    ds:69h, ax
seg000:FA57		    retn
seg000:FA57 sub_FFA44	    endp
seg000:FA57
seg000:FA58
seg000:FA58 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:FA58
seg000:FA58
seg000:FA58 sub_FFA58	    proc near		    ; CODE XREF: sub_FF890+6p
seg000:FA58					    ; sub_FF9A1+Ep
seg000:FA58		    call    sub_FF881
seg000:FA5B		    mov	    bl,	42h ; 'B'
seg000:FA5D
seg000:FA5D loc_FFA5D:				    ; CODE XREF: sub_FFA58+Cj
seg000:FA5D		    mov	    cx,	700h
seg000:FA60
seg000:FA60 loc_FFA60:				    ; CODE XREF: sub_FFA58:loc_FFA60j
seg000:FA60		    loop    loc_FFA60
seg000:FA62		    dec	    bl
seg000:FA64		    jnz	    short loc_FFA5D
seg000:FA66		    retn
seg000:FA66 sub_FFA58	    endp
seg000:FA66
seg000:FA66 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:FA67 a201	    db ' 201',0Dh,0Ah       ; DATA XREF: seg000:E41Ao
seg000:FA6D		    db 0FFh
seg000:FA6E		    db	  0
seg000:FA6F		    db	  0
seg000:FA70		    db	  0
seg000:FA71		    db	  0
seg000:FA72		    db	  0
seg000:FA73		    db	  0
seg000:FA74		    db	  0
seg000:FA75		    db	  0
seg000:FA76		    db	7Eh ; ~
seg000:FA77		    db	81h ; 
seg000:FA78		    db 0A5h ; ¥
seg000:FA79		    db	81h ; 
seg000:FA7A		    db 0BDh ; ½
seg000:FA7B		    db	99h ; ™
seg000:FA7C		    db	81h ; 
seg000:FA7D		    db	7Eh ; ~
seg000:FA7E		    db	7Eh ; ~
seg000:FA7F		    db 0FFh
seg000:FA80		    db 0DBh ; Û
seg000:FA81		    db 0FFh
seg000:FA82		    db 0C3h ; Ã
seg000:FA83		    db 0E7h ; ç
seg000:FA84		    db 0FFh
seg000:FA85		    db	7Eh ; ~
seg000:FA86		    db	6Ch ; l
seg000:FA87		    db 0FEh ; ş
seg000:FA88		    db 0FEh ; ş
seg000:FA89		    db 0FEh ; ş
seg000:FA8A		    db	7Ch ; |
seg000:FA8B		    db	38h ; 8
seg000:FA8C		    db	10h
seg000:FA8D		    db	  0
seg000:FA8E		    db	10h
seg000:FA8F		    db	38h ; 8
seg000:FA90		    db	7Ch ; |
seg000:FA91		    db 0FEh ; ş
seg000:FA92		    db	7Ch ; |
seg000:FA93		    db	38h ; 8
seg000:FA94		    db	10h
seg000:FA95		    db	  0
seg000:FA96		    db	38h ; 8
seg000:FA97		    db	7Ch ; |
seg000:FA98		    db	38h ; 8
seg000:FA99		    db 0FEh ; ş
seg000:FA9A		    db 0FEh ; ş
seg000:FA9B		    db	7Ch ; |
seg000:FA9C		    db	38h ; 8
seg000:FA9D		    db	7Ch ; |
seg000:FA9E		    db	10h
seg000:FA9F		    db	10h
seg000:FAA0		    db	38h ; 8
seg000:FAA1		    db	7Ch ; |
seg000:FAA2		    db 0FEh ; ş
seg000:FAA3		    db	7Ch ; |
seg000:FAA4		    db	38h ; 8
seg000:FAA5		    db	7Ch ; |
seg000:FAA6		    db	  0
seg000:FAA7		    db	  0
seg000:FAA8		    db	18h
seg000:FAA9		    db	3Ch ; <
seg000:FAAA		    db	3Ch ; <
seg000:FAAB		    db	18h
seg000:FAAC		    db	  0
seg000:FAAD		    db	  0
seg000:FAAE		    db 0FFh
seg000:FAAF		    db 0FFh
seg000:FAB0		    db 0E7h ; ç
seg000:FAB1		    db 0C3h ; Ã
seg000:FAB2		    db 0C3h ; Ã
seg000:FAB3		    db 0E7h ; ç
seg000:FAB4		    db 0FFh
seg000:FAB5		    db 0FFh
seg000:FAB6		    db	  0
seg000:FAB7		    db	3Ch ; <
seg000:FAB8		    db	66h ; f
seg000:FAB9		    db	42h ; B
seg000:FABA		    db	42h ; B
seg000:FABB		    db	66h ; f
seg000:FABC		    db	3Ch ; <
seg000:FABD		    db	  0
seg000:FABE		    db 0FFh
seg000:FABF		    db 0C3h ; Ã
seg000:FAC0		    db	99h ; ™
seg000:FAC1		    db 0BDh ; ½
seg000:FAC2		    db 0BDh ; ½
seg000:FAC3		    db	99h ; ™
seg000:FAC4		    db 0C3h ; Ã
seg000:FAC5		    db 0FFh
seg000:FAC6		    db	0Fh
seg000:FAC7		    db	  7
seg000:FAC8		    db	0Fh
seg000:FAC9		    db	7Dh ; }
seg000:FACA		    db 0CCh ; Ì
seg000:FACB		    db 0CCh ; Ì
seg000:FACC		    db 0CCh ; Ì
seg000:FACD		    db	78h ; x
seg000:FACE		    db	3Ch ; <
seg000:FACF		    db	66h ; f
seg000:FAD0		    db	66h ; f
seg000:FAD1		    db	66h ; f
seg000:FAD2		    db	3Ch ; <
seg000:FAD3		    db	18h
seg000:FAD4		    db	7Eh ; ~
seg000:FAD5		    db	18h
seg000:FAD6		    db	3Fh ; ?
seg000:FAD7		    db	33h ; 3
seg000:FAD8		    db	3Fh ; ?
seg000:FAD9		    db	30h ; 0
seg000:FADA		    db	30h ; 0
seg000:FADB		    db	70h ; p
seg000:FADC		    db 0F0h ; ğ
seg000:FADD		    db 0E0h ; à
seg000:FADE		    db	7Fh ; 
seg000:FADF		    db	63h ; c
seg000:FAE0		    db	7Fh ; 
seg000:FAE1		    db	63h ; c
seg000:FAE2		    db	63h ; c
seg000:FAE3		    db	67h ; g
seg000:FAE4		    db 0E6h ; æ
seg000:FAE5		    db 0C0h ; À
seg000:FAE6		    db	99h ; ™
seg000:FAE7		    db	5Ah ; Z
seg000:FAE8		    db	3Ch ; <
seg000:FAE9		    db 0E7h ; ç
seg000:FAEA		    db 0E7h ; ç
seg000:FAEB		    db	3Ch ; <
seg000:FAEC		    db	5Ah ; Z
seg000:FAED		    db	99h ; ™
seg000:FAEE		    db	80h ; €
seg000:FAEF		    db 0E0h ; à
seg000:FAF0		    db 0F8h ; ø
seg000:FAF1		    db 0FEh ; ş
seg000:FAF2		    db 0F8h ; ø
seg000:FAF3		    db 0E0h ; à
seg000:FAF4		    db	80h ; €
seg000:FAF5		    db	  0
seg000:FAF6		    db	  2
seg000:FAF7		    db	0Eh
seg000:FAF8		    db	3Eh ; >
seg000:FAF9		    db 0FEh ; ş
seg000:FAFA		    db	3Eh ; >
seg000:FAFB		    db	0Eh
seg000:FAFC		    db	  2
seg000:FAFD		    db	  0
seg000:FAFE		    db	18h
seg000:FAFF		    db	3Ch ; <
seg000:FB00		    db	7Eh ; ~
seg000:FB01		    db	18h
seg000:FB02		    db	18h
seg000:FB03		    db	7Eh ; ~
seg000:FB04		    db	3Ch ; <
seg000:FB05		    db	18h
seg000:FB06		    db	66h ; f
seg000:FB07		    db	66h ; f
seg000:FB08		    db	66h ; f
seg000:FB09		    db	66h ; f
seg000:FB0A		    db	66h ; f
seg000:FB0B		    db	  0
seg000:FB0C		    db	66h ; f
seg000:FB0D		    db	  0
seg000:FB0E		    db	7Fh ; 
seg000:FB0F		    db 0DBh ; Û
seg000:FB10		    db 0DBh ; Û
seg000:FB11		    db	7Bh ; {
seg000:FB12		    db	1Bh
seg000:FB13		    db	1Bh
seg000:FB14		    db	1Bh
seg000:FB15		    db	  0
seg000:FB16		    db	3Eh ; >
seg000:FB17		    db	63h ; c
seg000:FB18		    db	38h ; 8
seg000:FB19		    db	6Ch ; l
seg000:FB1A		    db	6Ch ; l
seg000:FB1B		    db	38h ; 8
seg000:FB1C		    db 0CCh ; Ì
seg000:FB1D		    db	78h ; x
seg000:FB1E		    db	  0
seg000:FB1F		    db	  0
seg000:FB20		    db	  0
seg000:FB21		    db	  0
seg000:FB22		    db	7Eh ; ~
seg000:FB23		    db	7Eh ; ~
seg000:FB24		    db	7Eh ; ~
seg000:FB25		    db	  0
seg000:FB26		    db	18h
seg000:FB27		    db	3Ch ; <
seg000:FB28		    db	7Eh ; ~
seg000:FB29		    db	18h
seg000:FB2A		    db	7Eh ; ~
seg000:FB2B		    db	3Ch ; <
seg000:FB2C		    db	18h
seg000:FB2D		    db 0FFh
seg000:FB2E		    db	18h
seg000:FB2F		    db	3Ch ; <
seg000:FB30		    db	7Eh ; ~
seg000:FB31		    db	18h
seg000:FB32		    db	18h
seg000:FB33		    db	18h
seg000:FB34		    db	18h
seg000:FB35		    db	  0
seg000:FB36		    db	18h
seg000:FB37		    db	18h
seg000:FB38		    db	18h
seg000:FB39		    db	18h
seg000:FB3A		    db	7Eh ; ~
seg000:FB3B		    db	3Ch ; <
seg000:FB3C		    db	18h
seg000:FB3D		    db	  0
seg000:FB3E		    db	  0
seg000:FB3F		    db	18h
seg000:FB40		    db	0Ch
seg000:FB41		    db 0FEh ; ş
seg000:FB42		    db	0Ch
seg000:FB43		    db	18h
seg000:FB44		    db	  0
seg000:FB45		    db	  0
seg000:FB46		    db	  0
seg000:FB47		    db	30h ; 0
seg000:FB48		    db	60h ; `
seg000:FB49		    db 0FEh ; ş
seg000:FB4A		    db	60h ; `
seg000:FB4B		    db	30h ; 0
seg000:FB4C		    db	  0
seg000:FB4D		    db	  0
seg000:FB4E		    db	  0
seg000:FB4F		    db	  0
seg000:FB50		    db 0C0h ; À
seg000:FB51		    db 0C0h ; À
seg000:FB52		    db 0C0h ; À
seg000:FB53		    db 0FEh ; ş
seg000:FB54		    db	  0
seg000:FB55		    db	  0
seg000:FB56		    db	  0
seg000:FB57		    db	24h ; $
seg000:FB58		    db	66h ; f
seg000:FB59		    db 0FFh
seg000:FB5A		    db	66h ; f
seg000:FB5B		    db	24h ; $
seg000:FB5C		    db	  0
seg000:FB5D		    db	  0
seg000:FB5E		    db	  0
seg000:FB5F		    db	18h
seg000:FB60		    db	3Ch ; <
seg000:FB61		    db	7Eh ; ~
seg000:FB62		    db 0FFh
seg000:FB63		    db 0FFh
seg000:FB64		    db	  0
seg000:FB65		    db	  0
seg000:FB66		    db	  0
seg000:FB67		    db 0FFh
seg000:FB68		    db 0FFh
seg000:FB69		    db	7Eh ; ~
seg000:FB6A		    db	3Ch ; <
seg000:FB6B		    db	18h
seg000:FB6C		    db	  0
seg000:FB6D		    db	  0
seg000:FB6E		    db	  0
seg000:FB6F		    db	  0
seg000:FB70		    db	  0
seg000:FB71		    db	  0
seg000:FB72		    db	  0
seg000:FB73		    db	  0
seg000:FB74		    db	  0
seg000:FB75		    db	  0
seg000:FB76		    db	30h ; 0
seg000:FB77		    db	78h ; x
seg000:FB78		    db	78h ; x
seg000:FB79		    db	30h ; 0
seg000:FB7A		    db	30h ; 0
seg000:FB7B		    db	  0
seg000:FB7C		    db	30h ; 0
seg000:FB7D		    db	  0
seg000:FB7E		    db	6Ch ; l
seg000:FB7F		    db	6Ch ; l
seg000:FB80		    db	6Ch ; l
seg000:FB81		    db	  0
seg000:FB82		    db	  0
seg000:FB83		    db	  0
seg000:FB84		    db	  0
seg000:FB85		    db	  0
seg000:FB86		    db	6Ch ; l
seg000:FB87		    db	6Ch ; l
seg000:FB88		    db 0FEh ; ş
seg000:FB89		    db	6Ch ; l
seg000:FB8A		    db 0FEh ; ş
seg000:FB8B		    db	6Ch ; l
seg000:FB8C		    db	6Ch ; l
seg000:FB8D		    db	  0
seg000:FB8E		    db	30h ; 0
seg000:FB8F		    db	7Ch ; |
seg000:FB90		    db 0C0h ; À
seg000:FB91		    db	78h ; x
seg000:FB92		    db	0Ch
seg000:FB93		    db 0F8h ; ø
seg000:FB94		    db	30h ; 0
seg000:FB95		    db	  0
seg000:FB96		    db	  0
seg000:FB97		    db 0C6h ; Æ
seg000:FB98		    db 0CCh ; Ì
seg000:FB99		    db	18h
seg000:FB9A		    db	30h ; 0
seg000:FB9B		    db	66h ; f
seg000:FB9C		    db 0C6h ; Æ
seg000:FB9D		    db	  0
seg000:FB9E		    db	38h ; 8
seg000:FB9F		    db	6Ch ; l
seg000:FBA0		    db	38h ; 8
seg000:FBA1		    db	76h ; v
seg000:FBA2		    db 0DCh ; Ü
seg000:FBA3		    db 0CCh ; Ì
seg000:FBA4		    db	76h ; v
seg000:FBA5		    db	  0
seg000:FBA6		    db	60h ; `
seg000:FBA7		    db	60h ; `
seg000:FBA8		    db 0C0h ; À
seg000:FBA9		    db	  0
seg000:FBAA		    db	  0
seg000:FBAB		    db	  0
seg000:FBAC		    db	  0
seg000:FBAD		    db	  0
seg000:FBAE		    db	18h
seg000:FBAF		    db	30h ; 0
seg000:FBB0		    db	60h ; `
seg000:FBB1		    db	60h ; `
seg000:FBB2		    db	60h ; `
seg000:FBB3		    db	30h ; 0
seg000:FBB4		    db	18h
seg000:FBB5		    db	  0
seg000:FBB6		    db	60h ; `
seg000:FBB7		    db	30h ; 0
seg000:FBB8		    db	18h
seg000:FBB9		    db	18h
seg000:FBBA		    db	18h
seg000:FBBB		    db	30h ; 0
seg000:FBBC		    db	60h ; `
seg000:FBBD		    db	  0
seg000:FBBE		    db	  0
seg000:FBBF		    db	66h ; f
seg000:FBC0		    db	3Ch ; <
seg000:FBC1		    db 0FFh
seg000:FBC2		    db	3Ch ; <
seg000:FBC3		    db	66h ; f
seg000:FBC4		    db	  0
seg000:FBC5		    db	  0
seg000:FBC6		    db	  0
seg000:FBC7		    db	30h ; 0
seg000:FBC8		    db	30h ; 0
seg000:FBC9		    db 0FCh ; ü
seg000:FBCA		    db	30h ; 0
seg000:FBCB		    db	30h ; 0
seg000:FBCC		    db	  0
seg000:FBCD		    db	  0
seg000:FBCE		    db	  0
seg000:FBCF		    db	  0
seg000:FBD0		    db	  0
seg000:FBD1		    db	  0
seg000:FBD2		    db	  0
seg000:FBD3		    db	30h ; 0
seg000:FBD4		    db	30h ; 0
seg000:FBD5		    db	60h ; `
seg000:FBD6		    db	  0
seg000:FBD7		    db	  0
seg000:FBD8		    db	  0
seg000:FBD9		    db 0FCh ; ü
seg000:FBDA		    db	  0
seg000:FBDB		    db	  0
seg000:FBDC		    db	  0
seg000:FBDD		    db	  0
seg000:FBDE		    db	  0
seg000:FBDF		    db	  0
seg000:FBE0		    db	  0
seg000:FBE1		    db	  0
seg000:FBE2		    db	  0
seg000:FBE3		    db	30h ; 0
seg000:FBE4		    db	30h ; 0
seg000:FBE5		    db	  0
seg000:FBE6		    db	  6
seg000:FBE7		    db	0Ch
seg000:FBE8		    db	18h
seg000:FBE9		    db	30h ; 0
seg000:FBEA		    db	60h ; `
seg000:FBEB		    db 0C0h ; À
seg000:FBEC		    db	80h ; €
seg000:FBED		    db	  0
seg000:FBEE		    db	7Ch ; |
seg000:FBEF		    db 0C6h ; Æ
seg000:FBF0		    db 0CEh ; Î
seg000:FBF1		    db 0DEh ; Ş
seg000:FBF2		    db 0F6h ; ö
seg000:FBF3		    db 0E6h ; æ
seg000:FBF4		    db	7Ch ; |
seg000:FBF5		    db	  0
seg000:FBF6		    db	30h ; 0
seg000:FBF7		    db	70h ; p
seg000:FBF8		    db	30h ; 0
seg000:FBF9		    db	30h ; 0
seg000:FBFA		    db	30h ; 0
seg000:FBFB		    db	30h ; 0
seg000:FBFC		    db 0FCh ; ü
seg000:FBFD		    db	  0
seg000:FBFE		    db	78h ; x
seg000:FBFF		    db 0CCh ; Ì
seg000:FC00		    db	0Ch
seg000:FC01		    db	38h ; 8
seg000:FC02		    db	60h ; `
seg000:FC03		    db 0CCh ; Ì
seg000:FC04		    db 0FCh ; ü
seg000:FC05		    db	  0
seg000:FC06		    db	78h ; x
seg000:FC07		    db 0CCh ; Ì
seg000:FC08		    db	0Ch
seg000:FC09		    db	38h ; 8
seg000:FC0A		    db	0Ch
seg000:FC0B		    db 0CCh ; Ì
seg000:FC0C		    db	78h ; x
seg000:FC0D		    db	  0
seg000:FC0E		    db	1Ch
seg000:FC0F		    db	3Ch ; <
seg000:FC10		    db	6Ch ; l
seg000:FC11		    db 0CCh ; Ì
seg000:FC12		    db 0FEh ; ş
seg000:FC13		    db	0Ch
seg000:FC14		    db	1Eh
seg000:FC15		    db	  0
seg000:FC16		    db 0FCh ; ü
seg000:FC17		    db 0C0h ; À
seg000:FC18		    db 0F8h ; ø
seg000:FC19		    db	0Ch
seg000:FC1A		    db	0Ch
seg000:FC1B		    db 0CCh ; Ì
seg000:FC1C		    db	78h ; x
seg000:FC1D		    db	  0
seg000:FC1E		    db	38h ; 8
seg000:FC1F		    db	60h ; `
seg000:FC20		    db 0C0h ; À
seg000:FC21		    db 0F8h ; ø
seg000:FC22		    db 0CCh ; Ì
seg000:FC23		    db 0CCh ; Ì
seg000:FC24		    db	78h ; x
seg000:FC25		    db	  0
seg000:FC26		    db 0FCh ; ü
seg000:FC27		    db 0CCh ; Ì
seg000:FC28		    db	0Ch
seg000:FC29		    db	18h
seg000:FC2A		    db	30h ; 0
seg000:FC2B		    db	30h ; 0
seg000:FC2C		    db	30h ; 0
seg000:FC2D		    db	  0
seg000:FC2E		    db	78h ; x
seg000:FC2F		    db 0CCh ; Ì
seg000:FC30		    db 0CCh ; Ì
seg000:FC31		    db	78h ; x
seg000:FC32		    db 0CCh ; Ì
seg000:FC33		    db 0CCh ; Ì
seg000:FC34		    db	78h ; x
seg000:FC35		    db	  0
seg000:FC36		    db	78h ; x
seg000:FC37		    db 0CCh ; Ì
seg000:FC38		    db 0CCh ; Ì
seg000:FC39		    db	7Ch ; |
seg000:FC3A		    db	0Ch
seg000:FC3B		    db	18h
seg000:FC3C		    db	70h ; p
seg000:FC3D		    db	  0
seg000:FC3E		    db	  0
seg000:FC3F		    db	30h ; 0
seg000:FC40		    db	30h ; 0
seg000:FC41		    db	  0
seg000:FC42		    db	  0
seg000:FC43		    db	30h ; 0
seg000:FC44		    db	30h ; 0
seg000:FC45		    db	  0
seg000:FC46		    db	  0
seg000:FC47		    db	30h ; 0
seg000:FC48		    db	30h ; 0
seg000:FC49		    db	  0
seg000:FC4A		    db	  0
seg000:FC4B		    db	30h ; 0
seg000:FC4C		    db	30h ; 0
seg000:FC4D		    db	60h ; `
seg000:FC4E		    db	18h
seg000:FC4F		    db	30h ; 0
seg000:FC50		    db	60h ; `
seg000:FC51		    db 0C0h ; À
seg000:FC52		    db	60h ; `
seg000:FC53		    db	30h ; 0
seg000:FC54		    db	18h
seg000:FC55		    db	  0
seg000:FC56		    db	  0
seg000:FC57		    db	  0
seg000:FC58		    db 0FCh ; ü
seg000:FC59		    db	  0
seg000:FC5A		    db	  0
seg000:FC5B		    db 0FCh ; ü
seg000:FC5C		    db	  0
seg000:FC5D		    db	  0
seg000:FC5E		    db	60h ; `
seg000:FC5F		    db	30h ; 0
seg000:FC60		    db	18h
seg000:FC61		    db	0Ch
seg000:FC62		    db	18h
seg000:FC63		    db	30h ; 0
seg000:FC64		    db	60h ; `
seg000:FC65		    db	  0
seg000:FC66		    db	78h ; x
seg000:FC67		    db 0CCh ; Ì
seg000:FC68		    db	0Ch
seg000:FC69		    db	18h
seg000:FC6A		    db	30h ; 0
seg000:FC6B		    db	  0
seg000:FC6C		    db	30h ; 0
seg000:FC6D		    db	  0
seg000:FC6E		    db	7Ch ; |
seg000:FC6F		    db 0C6h ; Æ
seg000:FC70		    db 0DEh ; Ş
seg000:FC71		    db 0DEh ; Ş
seg000:FC72		    db 0DEh ; Ş
seg000:FC73		    db 0C0h ; À
seg000:FC74		    db	78h ; x
seg000:FC75		    db	  0
seg000:FC76		    db	30h ; 0
seg000:FC77		    db	78h ; x
seg000:FC78		    db 0CCh ; Ì
seg000:FC79		    db 0CCh ; Ì
seg000:FC7A		    db 0FCh ; ü
seg000:FC7B		    db 0CCh ; Ì
seg000:FC7C		    db 0CCh ; Ì
seg000:FC7D		    db	  0
seg000:FC7E		    db 0FCh ; ü
seg000:FC7F		    db	66h ; f
seg000:FC80		    db	66h ; f
seg000:FC81		    db	7Ch ; |
seg000:FC82		    db	66h ; f
seg000:FC83		    db	66h ; f
seg000:FC84		    db 0FCh ; ü
seg000:FC85		    db	  0
seg000:FC86		    db	3Ch ; <
seg000:FC87		    db	66h ; f
seg000:FC88		    db 0C0h ; À
seg000:FC89		    db 0C0h ; À
seg000:FC8A		    db 0C0h ; À
seg000:FC8B		    db	66h ; f
seg000:FC8C		    db	3Ch ; <
seg000:FC8D		    db	  0
seg000:FC8E		    db 0F8h ; ø
seg000:FC8F		    db	6Ch ; l
seg000:FC90		    db	66h ; f
seg000:FC91		    db	66h ; f
seg000:FC92		    db	66h ; f
seg000:FC93		    db	6Ch ; l
seg000:FC94		    db 0F8h ; ø
seg000:FC95		    db	  0
seg000:FC96		    db 0FEh ; ş
seg000:FC97		    db	62h ; b
seg000:FC98		    db	68h ; h
seg000:FC99		    db	78h ; x
seg000:FC9A		    db	68h ; h
seg000:FC9B		    db	62h ; b
seg000:FC9C		    db 0FEh ; ş
seg000:FC9D		    db	  0
seg000:FC9E		    db 0FEh ; ş
seg000:FC9F		    db	62h ; b
seg000:FCA0		    db	68h ; h
seg000:FCA1		    db	78h ; x
seg000:FCA2		    db	68h ; h
seg000:FCA3		    db	60h ; `
seg000:FCA4		    db 0F0h ; ğ
seg000:FCA5		    db	  0
seg000:FCA6		    db	3Ch ; <
seg000:FCA7		    db	66h ; f
seg000:FCA8		    db 0C0h ; À
seg000:FCA9		    db 0C0h ; À
seg000:FCAA		    db 0CEh ; Î
seg000:FCAB		    db	66h ; f
seg000:FCAC		    db	3Eh ; >
seg000:FCAD		    db	  0
seg000:FCAE		    db 0CCh ; Ì
seg000:FCAF		    db 0CCh ; Ì
seg000:FCB0		    db 0CCh ; Ì
seg000:FCB1		    db 0FCh ; ü
seg000:FCB2		    db 0CCh ; Ì
seg000:FCB3		    db 0CCh ; Ì
seg000:FCB4		    db 0CCh ; Ì
seg000:FCB5		    db	  0
seg000:FCB6		    db	78h ; x
seg000:FCB7		    db	30h ; 0
seg000:FCB8		    db	30h ; 0
seg000:FCB9		    db	30h ; 0
seg000:FCBA		    db	30h ; 0
seg000:FCBB		    db	30h ; 0
seg000:FCBC		    db	78h ; x
seg000:FCBD		    db	  0
seg000:FCBE		    db	1Eh
seg000:FCBF		    db	0Ch
seg000:FCC0		    db	0Ch
seg000:FCC1		    db	0Ch
seg000:FCC2		    db 0CCh ; Ì
seg000:FCC3		    db 0CCh ; Ì
seg000:FCC4		    db	78h ; x
seg000:FCC5		    db	  0
seg000:FCC6		    db 0E6h ; æ
seg000:FCC7		    db	66h ; f
seg000:FCC8		    db	6Ch ; l
seg000:FCC9		    db	78h ; x
seg000:FCCA		    db	6Ch ; l
seg000:FCCB		    db	66h ; f
seg000:FCCC		    db 0E6h ; æ
seg000:FCCD		    db	  0
seg000:FCCE		    db 0F0h ; ğ
seg000:FCCF		    db	60h ; `
seg000:FCD0		    db	60h ; `
seg000:FCD1		    db	60h ; `
seg000:FCD2		    db	62h ; b
seg000:FCD3		    db	66h ; f
seg000:FCD4		    db 0FEh ; ş
seg000:FCD5		    db	  0
seg000:FCD6		    db 0C6h ; Æ
seg000:FCD7		    db 0EEh ; î
seg000:FCD8		    db 0FEh ; ş
seg000:FCD9		    db 0FEh ; ş
seg000:FCDA		    db 0D6h ; Ö
seg000:FCDB		    db 0C6h ; Æ
seg000:FCDC		    db 0C6h ; Æ
seg000:FCDD		    db	  0
seg000:FCDE		    db 0C6h ; Æ
seg000:FCDF		    db 0E6h ; æ
seg000:FCE0		    db 0F6h ; ö
seg000:FCE1		    db 0DEh ; Ş
seg000:FCE2		    db 0CEh ; Î
seg000:FCE3		    db 0C6h ; Æ
seg000:FCE4		    db 0C6h ; Æ
seg000:FCE5		    db	  0
seg000:FCE6		    db	38h ; 8
seg000:FCE7		    db	6Ch ; l
seg000:FCE8		    db 0C6h ; Æ
seg000:FCE9		    db 0C6h ; Æ
seg000:FCEA		    db 0C6h ; Æ
seg000:FCEB		    db	6Ch ; l
seg000:FCEC		    db	38h ; 8
seg000:FCED		    db	  0
seg000:FCEE		    db 0FCh ; ü
seg000:FCEF		    db	66h ; f
seg000:FCF0		    db	66h ; f
seg000:FCF1		    db	7Ch ; |
seg000:FCF2		    db	60h ; `
seg000:FCF3		    db	60h ; `
seg000:FCF4		    db 0F0h ; ğ
seg000:FCF5		    db	  0
seg000:FCF6		    db	78h ; x
seg000:FCF7		    db 0CCh ; Ì
seg000:FCF8		    db 0CCh ; Ì
seg000:FCF9		    db 0CCh ; Ì
seg000:FCFA		    db 0DCh ; Ü
seg000:FCFB		    db	78h ; x
seg000:FCFC		    db	1Ch
seg000:FCFD		    db	  0
seg000:FCFE		    db 0FCh ; ü
seg000:FCFF		    db	66h ; f
seg000:FD00		    db	66h ; f
seg000:FD01		    db	7Ch ; |
seg000:FD02		    db	6Ch ; l
seg000:FD03		    db	66h ; f
seg000:FD04		    db 0E6h ; æ
seg000:FD05		    db	  0
seg000:FD06		    db	78h ; x
seg000:FD07		    db 0CCh ; Ì
seg000:FD08		    db 0E0h ; à
seg000:FD09		    db	70h ; p
seg000:FD0A		    db	1Ch
seg000:FD0B		    db 0CCh ; Ì
seg000:FD0C		    db	78h ; x
seg000:FD0D		    db	  0
seg000:FD0E		    db 0FCh ; ü
seg000:FD0F		    db 0B4h ; ´
seg000:FD10		    db	30h ; 0
seg000:FD11		    db	30h ; 0
seg000:FD12		    db	30h ; 0
seg000:FD13		    db	30h ; 0
seg000:FD14		    db	78h ; x
seg000:FD15		    db	  0
seg000:FD16		    db 0CCh ; Ì
seg000:FD17		    db 0CCh ; Ì
seg000:FD18		    db 0CCh ; Ì
seg000:FD19		    db 0CCh ; Ì
seg000:FD1A		    db 0CCh ; Ì
seg000:FD1B		    db 0CCh ; Ì
seg000:FD1C		    db 0FCh ; ü
seg000:FD1D		    db	  0
seg000:FD1E		    db 0CCh ; Ì
seg000:FD1F		    db 0CCh ; Ì
seg000:FD20		    db 0CCh ; Ì
seg000:FD21		    db 0CCh ; Ì
seg000:FD22		    db 0CCh ; Ì
seg000:FD23		    db	78h ; x
seg000:FD24		    db	30h ; 0
seg000:FD25		    db	  0
seg000:FD26		    db 0C6h ; Æ
seg000:FD27		    db 0C6h ; Æ
seg000:FD28		    db 0C6h ; Æ
seg000:FD29		    db 0D6h ; Ö
seg000:FD2A		    db 0FEh ; ş
seg000:FD2B		    db 0EEh ; î
seg000:FD2C		    db 0C6h ; Æ
seg000:FD2D		    db	  0
seg000:FD2E		    db 0C6h ; Æ
seg000:FD2F		    db 0C6h ; Æ
seg000:FD30		    db	6Ch ; l
seg000:FD31		    db	38h ; 8
seg000:FD32		    db	38h ; 8
seg000:FD33		    db	6Ch ; l
seg000:FD34		    db 0C6h ; Æ
seg000:FD35		    db	  0
seg000:FD36		    db 0CCh ; Ì
seg000:FD37		    db 0CCh ; Ì
seg000:FD38		    db 0CCh ; Ì
seg000:FD39		    db	78h ; x
seg000:FD3A		    db	30h ; 0
seg000:FD3B		    db	30h ; 0
seg000:FD3C		    db	78h ; x
seg000:FD3D		    db	  0
seg000:FD3E		    db 0FEh ; ş
seg000:FD3F		    db 0C6h ; Æ
seg000:FD40		    db	8Ch ; Œ
seg000:FD41		    db	18h
seg000:FD42		    db	32h ; 2
seg000:FD43		    db	66h ; f
seg000:FD44		    db 0FEh ; ş
seg000:FD45		    db	  0
seg000:FD46		    db	78h ; x
seg000:FD47		    db	60h ; `
seg000:FD48		    db	60h ; `
seg000:FD49		    db	60h ; `
seg000:FD4A		    db	60h ; `
seg000:FD4B		    db	60h ; `
seg000:FD4C		    db	78h ; x
seg000:FD4D		    db	  0
seg000:FD4E		    db 0C0h ; À
seg000:FD4F		    db	60h ; `
seg000:FD50		    db	30h ; 0
seg000:FD51		    db	18h
seg000:FD52		    db	0Ch
seg000:FD53		    db	  6
seg000:FD54		    db	  2
seg000:FD55		    db	  0
seg000:FD56		    db	78h ; x
seg000:FD57		    db	18h
seg000:FD58		    db	18h
seg000:FD59		    db	18h
seg000:FD5A		    db	18h
seg000:FD5B		    db	18h
seg000:FD5C		    db	78h ; x
seg000:FD5D		    db	  0
seg000:FD5E		    db	10h
seg000:FD5F		    db	38h ; 8
seg000:FD60		    db	6Ch ; l
seg000:FD61		    db 0C6h ; Æ
seg000:FD62		    db	  0
seg000:FD63		    db	  0
seg000:FD64		    db	  0
seg000:FD65		    db	  0
seg000:FD66		    db	  0
seg000:FD67		    db	  0
seg000:FD68		    db	  0
seg000:FD69		    db	  0
seg000:FD6A		    db	  0
seg000:FD6B		    db	  0
seg000:FD6C		    db	  0
seg000:FD6D		    db 0FFh
seg000:FD6E		    db	30h ; 0
seg000:FD6F		    db	30h ; 0
seg000:FD70		    db	18h
seg000:FD71		    db	  0
seg000:FD72		    db	  0
seg000:FD73		    db	  0
seg000:FD74		    db	  0
seg000:FD75		    db	  0
seg000:FD76		    db	  0
seg000:FD77		    db	  0
seg000:FD78		    db	78h ; x
seg000:FD79		    db	0Ch
seg000:FD7A		    db	7Ch ; |
seg000:FD7B		    db 0CCh ; Ì
seg000:FD7C		    db	76h ; v
seg000:FD7D		    db	  0
seg000:FD7E		    db 0E0h ; à
seg000:FD7F		    db	60h ; `
seg000:FD80		    db	60h ; `
seg000:FD81		    db	7Ch ; |
seg000:FD82		    db	66h ; f
seg000:FD83		    db	66h ; f
seg000:FD84		    db 0DCh ; Ü
seg000:FD85		    db	  0
seg000:FD86		    db	  0
seg000:FD87		    db	  0
seg000:FD88		    db	78h ; x
seg000:FD89		    db 0CCh ; Ì
seg000:FD8A		    db 0C0h ; À
seg000:FD8B		    db 0CCh ; Ì
seg000:FD8C		    db	78h ; x
seg000:FD8D		    db	  0
seg000:FD8E		    db	1Ch
seg000:FD8F		    db	0Ch
seg000:FD90		    db	0Ch
seg000:FD91		    db	7Ch ; |
seg000:FD92		    db 0CCh ; Ì
seg000:FD93		    db 0CCh ; Ì
seg000:FD94		    db	76h ; v
seg000:FD95		    db	  0
seg000:FD96		    db	  0
seg000:FD97		    db	  0
seg000:FD98		    db	78h ; x
seg000:FD99		    db 0CCh ; Ì
seg000:FD9A		    db 0FCh ; ü
seg000:FD9B		    db 0C0h ; À
seg000:FD9C		    db	78h ; x
seg000:FD9D		    db	  0
seg000:FD9E		    db	38h ; 8
seg000:FD9F		    db	6Ch ; l
seg000:FDA0		    db	60h ; `
seg000:FDA1		    db 0F0h ; ğ
seg000:FDA2		    db	60h ; `
seg000:FDA3		    db	60h ; `
seg000:FDA4		    db 0F0h ; ğ
seg000:FDA5		    db	  0
seg000:FDA6		    db	  0
seg000:FDA7		    db	  0
seg000:FDA8		    db	76h ; v
seg000:FDA9		    db 0CCh ; Ì
seg000:FDAA		    db 0CCh ; Ì
seg000:FDAB		    db	7Ch ; |
seg000:FDAC		    db	0Ch
seg000:FDAD		    db 0F8h ; ø
seg000:FDAE		    db 0E0h ; à
seg000:FDAF		    db	60h ; `
seg000:FDB0		    db	6Ch ; l
seg000:FDB1		    db	76h ; v
seg000:FDB2		    db	66h ; f
seg000:FDB3		    db	66h ; f
seg000:FDB4		    db 0E6h ; æ
seg000:FDB5		    db	  0
seg000:FDB6		    db	30h ; 0
seg000:FDB7		    db	  0
seg000:FDB8		    db	70h ; p
seg000:FDB9		    db	30h ; 0
seg000:FDBA		    db	30h ; 0
seg000:FDBB		    db	30h ; 0
seg000:FDBC		    db	78h ; x
seg000:FDBD		    db	  0
seg000:FDBE		    db	0Ch
seg000:FDBF		    db	  0
seg000:FDC0		    db	0Ch
seg000:FDC1		    db	0Ch
seg000:FDC2		    db	0Ch
seg000:FDC3		    db 0CCh ; Ì
seg000:FDC4		    db 0CCh ; Ì
seg000:FDC5		    db	78h ; x
seg000:FDC6		    db 0E0h ; à
seg000:FDC7		    db	60h ; `
seg000:FDC8		    db	66h ; f
seg000:FDC9		    db	6Ch ; l
seg000:FDCA		    db	78h ; x
seg000:FDCB		    db	6Ch ; l
seg000:FDCC		    db 0E6h ; æ
seg000:FDCD		    db	  0
seg000:FDCE		    db	70h ; p
seg000:FDCF		    db	30h ; 0
seg000:FDD0		    db	30h ; 0
seg000:FDD1		    db	30h ; 0
seg000:FDD2		    db	30h ; 0
seg000:FDD3		    db	30h ; 0
seg000:FDD4		    db	78h ; x
seg000:FDD5		    db	  0
seg000:FDD6		    db	  0
seg000:FDD7		    db	  0
seg000:FDD8		    db 0CCh ; Ì
seg000:FDD9		    db 0FEh ; ş
seg000:FDDA		    db 0FEh ; ş
seg000:FDDB		    db 0D6h ; Ö
seg000:FDDC		    db 0C6h ; Æ
seg000:FDDD		    db	  0
seg000:FDDE		    db	  0
seg000:FDDF		    db	  0
seg000:FDE0		    db 0F8h ; ø
seg000:FDE1		    db 0CCh ; Ì
seg000:FDE2		    db 0CCh ; Ì
seg000:FDE3		    db 0CCh ; Ì
seg000:FDE4		    db 0CCh ; Ì
seg000:FDE5		    db	  0
seg000:FDE6		    db	  0
seg000:FDE7		    db	  0
seg000:FDE8		    db	78h ; x
seg000:FDE9		    db 0CCh ; Ì
seg000:FDEA		    db 0CCh ; Ì
seg000:FDEB		    db 0CCh ; Ì
seg000:FDEC		    db	78h ; x
seg000:FDED		    db	  0
seg000:FDEE		    db	  0
seg000:FDEF		    db	  0
seg000:FDF0		    db 0DCh ; Ü
seg000:FDF1		    db	66h ; f
seg000:FDF2		    db	66h ; f
seg000:FDF3		    db	7Ch ; |
seg000:FDF4		    db	60h ; `
seg000:FDF5		    db 0F0h ; ğ
seg000:FDF6		    db	  0
seg000:FDF7		    db	  0
seg000:FDF8		    db	76h ; v
seg000:FDF9		    db 0CCh ; Ì
seg000:FDFA		    db 0CCh ; Ì
seg000:FDFB		    db	7Ch ; |
seg000:FDFC		    db	0Ch
seg000:FDFD		    db	1Eh
seg000:FDFE		    db	  0
seg000:FDFF		    db	  0
seg000:FE00		    db 0DCh ; Ü
seg000:FE01		    db	76h ; v
seg000:FE02		    db	66h ; f
seg000:FE03		    db	60h ; `
seg000:FE04		    db 0F0h ; ğ
seg000:FE05		    db	  0
seg000:FE06		    db	  0
seg000:FE07		    db	  0
seg000:FE08		    db	7Ch ; |
seg000:FE09		    db 0C0h ; À
seg000:FE0A		    db	78h ; x
seg000:FE0B		    db	0Ch
seg000:FE0C		    db 0F8h ; ø
seg000:FE0D		    db	  0
seg000:FE0E		    db	10h
seg000:FE0F		    db	30h ; 0
seg000:FE10		    db	7Ch ; |
seg000:FE11		    db	30h ; 0
seg000:FE12		    db	30h ; 0
seg000:FE13		    db	34h ; 4
seg000:FE14		    db	18h
seg000:FE15		    db	  0
seg000:FE16		    db	  0
seg000:FE17		    db	  0
seg000:FE18		    db 0CCh ; Ì
seg000:FE19		    db 0CCh ; Ì
seg000:FE1A		    db 0CCh ; Ì
seg000:FE1B		    db 0CCh ; Ì
seg000:FE1C		    db	76h ; v
seg000:FE1D		    db	  0
seg000:FE1E		    db	  0
seg000:FE1F		    db	  0
seg000:FE20		    db 0CCh ; Ì
seg000:FE21		    db 0CCh ; Ì
seg000:FE22		    db 0CCh ; Ì
seg000:FE23		    db	78h ; x
seg000:FE24		    db	30h ; 0
seg000:FE25		    db	  0
seg000:FE26		    db	  0
seg000:FE27		    db	  0
seg000:FE28		    db 0C6h ; Æ
seg000:FE29		    db 0D6h ; Ö
seg000:FE2A		    db 0FEh ; ş
seg000:FE2B		    db 0FEh ; ş
seg000:FE2C		    db	6Ch ; l
seg000:FE2D		    db	  0
seg000:FE2E		    db	  0
seg000:FE2F		    db	  0
seg000:FE30		    db 0C6h ; Æ
seg000:FE31		    db	6Ch ; l
seg000:FE32		    db	38h ; 8
seg000:FE33		    db	6Ch ; l
seg000:FE34		    db 0C6h ; Æ
seg000:FE35		    db	  0
seg000:FE36		    db	  0
seg000:FE37		    db	  0
seg000:FE38		    db 0CCh ; Ì
seg000:FE39		    db 0CCh ; Ì
seg000:FE3A		    db 0CCh ; Ì
seg000:FE3B		    db	7Ch ; |
seg000:FE3C		    db	0Ch
seg000:FE3D		    db 0F8h ; ø
seg000:FE3E		    db	  0
seg000:FE3F		    db	  0
seg000:FE40		    db 0FCh ; ü
seg000:FE41		    db	98h ; ˜
seg000:FE42		    db	30h ; 0
seg000:FE43		    db	64h ; d
seg000:FE44		    db 0FCh ; ü
seg000:FE45		    db	  0
seg000:FE46		    db	1Ch
seg000:FE47		    db	30h ; 0
seg000:FE48		    db	30h ; 0
seg000:FE49		    db 0E0h ; à
seg000:FE4A		    db	30h ; 0
seg000:FE4B		    db	30h ; 0
seg000:FE4C		    db	1Ch
seg000:FE4D		    db	  0
seg000:FE4E		    db	18h
seg000:FE4F		    db	18h
seg000:FE50		    db	18h
seg000:FE51		    db	  0
seg000:FE52		    db	18h
seg000:FE53		    db	18h
seg000:FE54		    db	18h
seg000:FE55		    db	  0
seg000:FE56		    db 0E0h ; à
seg000:FE57		    db	30h ; 0
seg000:FE58		    db	30h ; 0
seg000:FE59		    db	1Ch
seg000:FE5A		    db	30h ; 0
seg000:FE5B		    db	30h ; 0
seg000:FE5C		    db 0E0h ; à
seg000:FE5D		    db	  0
seg000:FE5E		    db	76h ; v
seg000:FE5F		    db 0DCh ; Ü
seg000:FE60		    db	  0
seg000:FE61		    db	  0
seg000:FE62		    db	  0
seg000:FE63		    db	  0
seg000:FE64		    db	  0
seg000:FE65		    db	  0
seg000:FE66		    db	  0
seg000:FE67		    db	10h
seg000:FE68		    db	38h ; 8
seg000:FE69		    db	6Ch ; l
seg000:FE6A		    db 0C6h ; Æ
seg000:FE6B		    db 0C6h ; Æ
seg000:FE6C		    db 0FEh ; ş
seg000:FE6D		    db	  0
seg000:FE6E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:FE6E
seg000:FE6E time_of_day:			    ; DATA XREF: seg000:FF17o
seg000:FE6E		    sti
seg000:FE6F		    push    ds
seg000:FE70		    call    dds
seg000:FE73		    or	    ah,	ah
seg000:FE75		    jz	    short loc_FFE7E
seg000:FE77		    dec	    ah
seg000:FE79		    jz	    short loc_FFE91
seg000:FE7B
seg000:FE7B loc_FFE7B:				    ; CODE XREF: seg000:FE8Fj
seg000:FE7B					    ; seg000:FE9Fj
seg000:FE7B		    sti
seg000:FE7C		    pop	    ds
seg000:FE7D		    iret
seg000:FE7E ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:FE7E
seg000:FE7E loc_FFE7E:				    ; CODE XREF: seg000:FE75j
seg000:FE7E		    cli
seg000:FE7F		    mov	    al,	ds:70h
seg000:FE82		    mov	    byte ptr ds:70h, 0
seg000:FE87		    mov	    cx,	ds:6Eh
seg000:FE8B		    mov	    dx,	ds:6Ch
seg000:FE8F		    jmp	    short loc_FFE7B
seg000:FE91 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:FE91
seg000:FE91 loc_FFE91:				    ; CODE XREF: seg000:FE79j
seg000:FE91		    cli
seg000:FE92		    mov	    ds:6Ch, dx
seg000:FE96		    mov	    ds:6Eh, cx
seg000:FE9A		    mov	    byte ptr ds:70h, 0
seg000:FE9F		    jmp	    short loc_FFE7B
seg000:FE9F ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:FEA1		    db 0FFh
seg000:FEA2		    db 0FFh
seg000:FEA3		    db 0FFh
seg000:FEA4		    db 0FFh
seg000:FEA5 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:FEA5
seg000:FEA5 timer_int:				    ; DATA XREF: seg000:vector_tableo
seg000:FEA5		    sti
seg000:FEA6		    push    ds
seg000:FEA7		    push    ax
seg000:FEA8		    push    dx
seg000:FEA9		    call    dds
seg000:FEAC		    inc	    word ptr ds:6Ch
seg000:FEB0		    jnz	    short loc_FFEB6
seg000:FEB2		    inc	    word ptr ds:6Eh
seg000:FEB6
seg000:FEB6 loc_FFEB6:				    ; CODE XREF: seg000:FEB0j
seg000:FEB6		    cmp	    word ptr ds:6Eh, 18h
seg000:FEBB		    jnz	    short loc_FFED2
seg000:FEBD		    cmp	    word ptr ds:6Ch, 0B0h ; '°'
seg000:FEC3		    jnz	    short loc_FFED2
seg000:FEC5		    sub	    ax,	ax
seg000:FEC7		    mov	    ds:6Eh, ax
seg000:FECA		    mov	    ds:6Ch, ax
seg000:FECD		    mov	    byte ptr ds:70h, 1
seg000:FED2
seg000:FED2 loc_FFED2:				    ; CODE XREF: seg000:FEBBj
seg000:FED2					    ; seg000:FEC3j
seg000:FED2		    dec	    byte ptr ds:40h
seg000:FED6		    jnz	    short loc_FFEE3
seg000:FED8		    and	    byte ptr ds:3Fh, 0F0h
seg000:FEDD		    mov	    al,	0Ch
seg000:FEDF		    mov	    dx,	3F2h
seg000:FEE2		    out	    dx,	al	    ; Floppy: digital output reg bits:
seg000:FEE2					    ; 0-1: Drive to select 0-3 (AT: bit	1 not used)
seg000:FEE2					    ; 2:   0=reset diskette controller;	1=enable controller
seg000:FEE2					    ; 3:   1=enable diskette DMA and interrupts
seg000:FEE2					    ; 4-7: drive motor enable.	Set bits to turn drive ON.
seg000:FEE2					    ;
seg000:FEE3
seg000:FEE3 loc_FFEE3:				    ; CODE XREF: seg000:FED6j
seg000:FEE3		    int	    1Ch		    ; CLOCK TICK
seg000:FEE5		    mov	    al,	20h ; ' '
seg000:FEE7		    out	    20h, al	    ; Interrupt	controller, 8259A.
seg000:FEE9		    pop	    dx
seg000:FEEA		    pop	    ax
seg000:FEEB		    pop	    ds
seg000:FEEC		    iret
seg000:FEEC ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:FEED a1801	    db '1801',0Dh,0Ah       ; DATA XREF: seg000:loc_FE3BDo
seg000:FEF3 vector_table    dw offset timer_int	    ; interrupt	8
seg000:FEF5		    dw offset kb_int	    ; interrupt	9
seg000:FEF7		    dw offset d_eoi	    ; interrupt	a
seg000:FEF9		    dw offset d_eoi	    ; interrupt	b
seg000:FEFB		    dw offset d_eoi	    ; interrupt	c
seg000:FEFD		    dw offset d_eoi	    ; interrupt	d
seg000:FEFF		    dw offset disk_int	    ; interrupt	e
seg000:FF01		    dw offset d_eoi	    ; interrupt	f
seg000:FF03 off_FFF03	    dw offset video_io	    ; DATA XREF: seg000:E26Do
seg000:FF03					    ; interrupt	0x10
seg000:FF05		    dw offset equipment	    ; interrupt	0x11
seg000:FF07		    dw offset memory_size_det ;	interrupt 0x12
seg000:FF09		    dw offset diskette_io   ; interrupt	0x13
seg000:FF0B		    dw offset rs232_io	    ; interrupt	0x14
seg000:FF0D		    dw offset cassette_io   ; interrupt	0x15
seg000:FF0F		    dw offset keyboard_io   ; interrupt	0x16
seg000:FF11		    dw offset printer_io    ; interrupt	0x17
seg000:FF13		    dw 0		    ; interrupt	0x18
seg000:FF13					    ;  0xf600 must be inserted into table later
seg000:FF15		    dw offset boot_strap    ; interrupt	0x19
seg000:FF17		    dw offset time_of_day   ; interrupt	0x1a --	time of	day
seg000:FF19		    dw offset dummy_return  ; interrupt	0x1b --	keyboard break addr
seg000:FF1B		    dw offset dummy_return  ; interrupt	0x1c --	timer break addr
seg000:FF1D		    dw offset video_parms   ; interrupt	0x1d --	video parameters
seg000:FF1F		    dw offset disk_base	    ; interrupt	0x1e --	disk parms
seg000:FF21		    dw 0		    ; interrupt	0x1f --	pointer	to video ext
seg000:FF23 d2		    db 'PARITY CHECK 1',0Dh,0Ah ; DATA XREF: nmi_int+Fo
seg000:FF33 f1		    db ' 301',0Dh,0Ah       ; DATA XREF: seg000:loc_FE466o
seg000:FF39 f2		    db '131',0Dh,0Ah        ; DATA XREF: seg000:loc_FE4B5o
seg000:FF3E
seg000:FF3E ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:FF3E
seg000:FF3E
seg000:FF3E dds		    proc near		    ; CODE XREF: seg000:loc_FE3C4p
seg000:FF3E					    ; sub_FE5CF+3p
seg000:FF3E					    ; write_stringp
seg000:FF3E					    ; rs232_io+Dp ...
seg000:FF3E		    push    ax
seg000:FF3F		    mov	    ax,	40h ; '@'
seg000:FF42		    mov	    ds,	ax
seg000:FF44		    pop	    ax
seg000:FF45		    retn
seg000:FF45 dds		    endp
seg000:FF45
seg000:FF45 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:FF46		    db 0FFh
seg000:FF47
seg000:FF47 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:FF47
seg000:FF47 ; -----------------------------------------------------
seg000:FF47 ;	   temporary interrupt service routine
seg000:FF47 ; -----------------------------------------------------
seg000:FF47
seg000:FF47 d11		    proc far		    ; DATA XREF: seg000:E1D9o
seg000:FF47					    ; seg000:d3o
seg000:FF47		    mov	    ah,	1
seg000:FF49		    push    ax
seg000:FF4A		    mov	    al,	0FFh
seg000:FF4C		    out	    21h, al	    ; Interrupt	controller, 8259A.
seg000:FF4E		    mov	    al,	20h ; ' '
seg000:FF50		    out	    20h, al	    ; Interrupt	controller, 8259A.
seg000:FF52		    pop	    ax
seg000:FF53
seg000:FF53 dummy_return:			    ; DATA XREF: seg000:E2B8o
seg000:FF53					    ; seg000:FF19o
seg000:FF53					    ; seg000:FF1Bo
seg000:FF53		    iret
seg000:FF53 d11		    endp
seg000:FF53
seg000:FF54
seg000:FF54 ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:FF54
seg000:FF54
seg000:FF54 print_screen    proc far		    ; DATA XREF: seg000:E20Bo
seg000:FF54		    sti
seg000:FF55		    push    ds
seg000:FF56		    push    ax
seg000:FF57		    push    bx
seg000:FF58		    push    cx
seg000:FF59		    push    dx
seg000:FF5A		    mov	    ax,	50h ; 'P'
seg000:FF5D		    mov	    ds,	ax
seg000:FF5F		    cmp	    byte ptr ds:0, 1
seg000:FF64		    jz	    short loc_FFFC5
seg000:FF66		    mov	    byte ptr ds:0, 1
seg000:FF6B		    mov	    ah,	0Fh
seg000:FF6D		    int	    10h		    ; -	VIDEO -	GET CURRENT VIDEO MODE
seg000:FF6D					    ; Return: AH = number of columns on	screen
seg000:FF6D					    ; AL = current video mode
seg000:FF6D					    ; BH = current active display page
seg000:FF6F		    mov	    cl,	ah
seg000:FF71		    mov	    ch,	19h
seg000:FF73		    call    sub_FFFCB
seg000:FF76		    push    cx
seg000:FF77		    mov	    ah,	3
seg000:FF79		    int	    10h		    ; -	VIDEO -	READ CURSOR POSITION
seg000:FF79					    ; BH = page	number
seg000:FF79					    ; Return: DH,DL = row,column, CH = cursor start line, CL = cursor end line
seg000:FF7B		    pop	    cx
seg000:FF7C		    push    dx
seg000:FF7D		    xor	    dx,	dx
seg000:FF7F
seg000:FF7F loc_FFF7F:				    ; CODE XREF: print_screen+4Aj
seg000:FF7F					    ; print_screen+59j
seg000:FF7F		    mov	    ah,	2
seg000:FF81		    int	    10h		    ; -	VIDEO -	SET CURSOR POSITION
seg000:FF81					    ; DH,DL = row, column (0,0 = upper left)
seg000:FF81					    ; BH = page	number
seg000:FF83		    mov	    ah,	8
seg000:FF85		    int	    10h		    ; -	VIDEO -	READ ATTRIBUTES/CHARACTER AT CURSOR POSITION
seg000:FF85					    ; BH = display page
seg000:FF85					    ; Return: AL = character
seg000:FF85					    ; AH = attribute of	character (alpha modes)
seg000:FF87		    or	    al,	al
seg000:FF89		    jnz	    short loc_FFF8D
seg000:FF8B		    mov	    al,	20h ; ' '
seg000:FF8D
seg000:FF8D loc_FFF8D:				    ; CODE XREF: print_screen+35j
seg000:FF8D		    push    dx
seg000:FF8E		    xor	    dx,	dx
seg000:FF90		    xor	    ah,	ah
seg000:FF92		    int	    17h		    ; PRINTER -	OUTPUT CHARACTER
seg000:FF92					    ; AL = character, DX = printer port	(0-3)
seg000:FF92					    ; Return: AH = status bits
seg000:FF94		    pop	    dx
seg000:FF95		    test    ah,	25h
seg000:FF98		    jnz	    short loc_FFFBB
seg000:FF9A		    inc	    dl
seg000:FF9C		    cmp	    cl,	dl
seg000:FF9E		    jnz	    short loc_FFF7F
seg000:FFA0		    xor	    dl,	dl
seg000:FFA2		    mov	    ah,	dl
seg000:FFA4		    push    dx
seg000:FFA5		    call    sub_FFFCB
seg000:FFA8		    pop	    dx
seg000:FFA9		    inc	    dh
seg000:FFAB		    cmp	    ch,	dh
seg000:FFAD		    jnz	    short loc_FFF7F
seg000:FFAF		    pop	    dx
seg000:FFB0		    mov	    ah,	2
seg000:FFB2		    int	    10h		    ; -	VIDEO -	SET CURSOR POSITION
seg000:FFB2					    ; DH,DL = row, column (0,0 = upper left)
seg000:FFB2					    ; BH = page	number
seg000:FFB4		    mov	    byte ptr ds:0, 0
seg000:FFB9		    jmp	    short loc_FFFC5
seg000:FFBB ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:FFBB
seg000:FFBB loc_FFFBB:				    ; CODE XREF: print_screen+44j
seg000:FFBB		    pop	    dx
seg000:FFBC		    mov	    ah,	2
seg000:FFBE		    int	    10h		    ; -	VIDEO -	SET CURSOR POSITION
seg000:FFBE					    ; DH,DL = row, column (0,0 = upper left)
seg000:FFBE					    ; BH = page	number
seg000:FFC0		    mov	    byte ptr ds:0, 0FFh
seg000:FFC5
seg000:FFC5 loc_FFFC5:				    ; CODE XREF: print_screen+10j
seg000:FFC5					    ; print_screen+65j
seg000:FFC5		    pop	    dx
seg000:FFC6		    pop	    cx
seg000:FFC7		    pop	    bx
seg000:FFC8		    pop	    ax
seg000:FFC9		    pop	    ds
seg000:FFCA		    iret
seg000:FFCA print_screen    endp
seg000:FFCA
seg000:FFCB
seg000:FFCB ; ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ S	U B R O	U T I N	E ÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛÛ
seg000:FFCB
seg000:FFCB
seg000:FFCB sub_FFFCB	    proc near		    ; CODE XREF: print_screen+1Fp
seg000:FFCB					    ; print_screen+51p
seg000:FFCB		    xor	    dx,	dx
seg000:FFCD		    xor	    ah,	ah
seg000:FFCF		    mov	    al,	0Ah
seg000:FFD1		    int	    17h		    ; PRINTER -	OUTPUT CHARACTER
seg000:FFD1					    ; AL = character, DX = printer port	(0-3)
seg000:FFD1					    ; Return: AH = status bits
seg000:FFD3		    xor	    ah,	ah
seg000:FFD5		    mov	    al,	0Dh
seg000:FFD7		    int	    17h		    ; PRINTER -	OUTPUT CHARACTER
seg000:FFD7					    ; AL = character, DX = printer port	(0-3)
seg000:FFD7					    ; Return: AH = status bits
seg000:FFD9		    retn
seg000:FFD9 sub_FFFCB	    endp
seg000:FFD9
seg000:FFD9 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:FFDA		    db	50h ; P
seg000:FFDB		    db	41h ; A
seg000:FFDC		    db	52h ; R
seg000:FFDD		    db	49h ; I
seg000:FFDE		    db	54h ; T
seg000:FFDF		    db	59h ; Y
seg000:FFE0		    db	20h
seg000:FFE1		    db	43h ; C
seg000:FFE2		    db	48h ; H
seg000:FFE3		    db	45h ; E
seg000:FFE4		    db	43h ; C
seg000:FFE5		    db	4Bh ; K
seg000:FFE6		    db	20h
seg000:FFE7		    db	32h ; 2
seg000:FFE8		    db	0Dh
seg000:FFE9		    db	0Ah
seg000:FFEA a601	    db '601',0Dh,0Ah        ; DATA XREF: seg000:loc_FE531o
seg000:FFEF		    db 0FFh
seg000:FFF0 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:FFF0		    jmp	    far	ptr reset
seg000:FFF0 ; ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
seg000:FFF5 a102782	    db '10/27/82'
seg000:FFFD		    db 0FFh
seg000:FFFE		    db 0FFh
seg000:FFFF		    db	77h ; w
seg000:FFFF seg000	    ends
seg000:FFFF
seg000:FFFF
seg000:FFFF		    end
